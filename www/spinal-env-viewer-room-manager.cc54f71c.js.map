{"mappings":"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wB,Q,iC,Q,qB,Q,qB,K;AErFY,QAAA,qBAA6B;AAC7B,QAAA,qBAA6B;AAC7B,QAAA,iCAAyC;AACzC,QAAA,wBAAgC;;;A;AEH7C;;;;;;;;;;;;;;;;;;;;;;CAsBG,G,I,Y,A,I,I,I,C,a,S,O,E,U,E,C,E,S;I,S,M,K;Q,O,iB,I,Q,I,E,S,O;Y,Q;Q;I;I,O,I,C,K,C,I,O,C,E,S,O,E,M;Q,S,U,K;Y,I;gB,K,U,K;Y,E,O,G;gB,O;Y;Q;Q,S,S,K;Y,I;gB,K,S,C,Q,C;Y,E,O,G;gB,O;Y;Q;Q,S,K,M;Y,O,O,Q,O,S,M,O,O,K,W;Q;Q,K,A,C,Y,U,M,S,c,E,C,E;I;A;A,O,e,S,c;I,O;A;A,Q,yB,K;AAEH,MAAA,iCAAA,QAAA;AACA,MAAA,oCAAA,QAAA;AACA,MAAA,4BAAA,QAAA;AAEA,MAAA,aAAA,QAAA;AACA,MAAA,cAAA,QAAA;AAEA,MAAqB;IACnB,aAAA,CAAgB;IAEhB;;;;KAIG,GACI,sBAAsB,EAAU,EAAhC;QACL,MAAM,OAAO,kCAAA,mBAAmB,QAAQ;QACxC,MAAM,OAAO,KAAK,KAAK;QAEvB,OAAO,SAAS,CAAA,EAAG,WAAA,mBAAkB,YAAA,CAAc;IACrD;IAEA;;;;;KAKG,GACU,sBACX,SAAiB,EACjB,cAAsB,EAFX;Q,O,U,I,E,K,G,K,G;YAIX,IAAI,WAAW,kCAAA,mBAAmB,YAAY;YAE9C,IAAI,OAAO,aAAa,aACtB,MAAM,kCAAA,mBAAmB,cAAc,WAAW,WAAW,CAAC;gBAC5D,IAAI,KAAK,QAAQ,UAAU,gBAAgB;oBACnC,kCAAA,mBAAoB,SAAS;oBACnC,WAAW;oBACX,OAAO;gBACR;gBAED,OAAO;YACT;YAGF,OAAO;gBACL,MAAM,SAAS,UAAU;gBACzB,WAAW,MAAM,SAAS;YAC3B;QACH;IAAC;IAED;;;;;;KAMG,GACU,wBACX,MAAc,EACd,qBAA6B,EAC7B,cAAsB,EAHX;Q,O,U,I,E,K,G,K,G;YAKX,MAAM,gBAAgB,MAAM,IAAI,CAAC,sBAC/B,uBACA;YAGF,MAAM,SAAS,MAAM,YAAA,UAAU,UAAU;YAEzC,MAAM,WAAW,OAAO,IAAI,CAAO,QA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","sources":["node_modules/spinal-env-viewer-plugin-control-endpoint-service/dist/index.js","node_modules/spinal-env-viewer-plugin-control-endpoint-service/src/index.ts","node_modules/spinal-env-viewer-plugin-control-endpoint-service/dist/classes/SpinalControlEndpointService.js","node_modules/spinal-env-viewer-plugin-control-endpoint-service/src/classes/SpinalControlEndpointService.ts","node_modules/spinal-env-viewer-plugin-control-endpoint-service/dist/classes/contants.js","node_modules/spinal-env-viewer-plugin-control-endpoint-service/src/classes/contants.ts","node_modules/spinal-env-viewer-plugin-control-endpoint-service/dist/classes/ControlEndpoint.js","node_modules/spinal-env-viewer-plugin-control-endpoint-service/src/classes/ControlEndpoint.ts","node_modules/spinal-env-viewer-plugin-control-endpoint-service/dist/classes/Utilities.js","node_modules/spinal-env-viewer-plugin-control-endpoint-service/src/classes/Utilities.ts","node_modules/spinal-env-viewer-plugin-control-endpoint-service/dist/dataTypes/ControlEndpointDataType.js","node_modules/spinal-env-viewer-plugin-control-endpoint-service/src/dataTypes/ControlEndpointDataType.ts","node_modules/spinal-env-viewer-plugin-control-endpoint-service/dist/dataTypes/ControlEndpointType.js","node_modules/spinal-env-viewer-plugin-control-endpoint-service/src/dataTypes/ControlEndpointType.ts","node_modules/spinal-env-viewer-plugin-control-endpoint-service/dist/classes/ControlEnpointsTree.js","node_modules/spinal-env-viewer-plugin-control-endpoint-service/src/classes/ControlEnpointsTree.ts","node_modules/spinal-env-viewer-plugin-control-endpoint-service/dist/dataTypes/CalculationRulesDataType.js","node_modules/spinal-env-viewer-plugin-control-endpoint-service/src/dataTypes/CalculationRulesDataType.ts","node_modules/spinal-env-viewer-plugin-control-endpoint-service/dist/models/config.js","node_modules/spinal-env-viewer-plugin-control-endpoint-service/src/models/config.ts","node_modules/spinal-env-viewer-plugin-control-endpoint-service/dist/models/controlPointsModel.js","node_modules/spinal-env-viewer-plugin-control-endpoint-service/src/models/controlPointsModel.ts"],"sourcesContent":["\"use strict\";\n/*\n * Copyright 2022 SpinalCom - www.spinalcom.com\n *\n * This file is part of SpinalCore.\n *\n * Please read all of the following terms and conditions\n * of the Free Software license Agreement (\"Agreement\")\n * carefully.\n *\n * This Agreement is a legally binding contract between\n * the Licensee (as defined below) and SpinalCom that\n * sets forth the terms and conditions that govern your\n * use of the Program. By installing and/or using the\n * Program, you agree to abide by all the terms and\n * conditions stated or referenced herein.\n *\n * If you do not agree to abide by these terms and\n * conditions, do not demonstrate your acceptance and do\n * not install or use the Program.\n * You should have received a copy of the license along\n * with this file. If not, see\n * <http://resources.spinalcom.com/licenses.pdf>.\n */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ControlEndpointType = exports.ControlEndpointDataType = exports.CalculationRule = exports.ControlPointObj = exports.SpinalControlPoint = exports.getConfig = exports.NumberConfig = exports.EnumConfig = exports.BoolConfig = exports.spinalHeatmapService = exports.spinalControlPointService = void 0;\nconst SpinalControlEndpointService_1 = require(\"./classes/SpinalControlEndpointService\");\nconst CalculationRulesDataType_1 = require(\"./dataTypes/CalculationRulesDataType\");\nObject.defineProperty(exports, \"CalculationRule\", { enumerable: true, get: function () { return CalculationRulesDataType_1.CalculationRule; } });\nconst ControlEndpointDataType_1 = require(\"./dataTypes/ControlEndpointDataType\");\nObject.defineProperty(exports, \"ControlEndpointDataType\", { enumerable: true, get: function () { return ControlEndpointDataType_1.ControlEndpointDataType; } });\nconst ControlEndpointType_1 = require(\"./dataTypes/ControlEndpointType\");\nObject.defineProperty(exports, \"ControlEndpointType\", { enumerable: true, get: function () { return ControlEndpointType_1.ControlEndpointType; } });\nconst config_1 = require(\"./models/config\");\nObject.defineProperty(exports, \"BoolConfig\", { enumerable: true, get: function () { return config_1.BoolConfig; } });\nObject.defineProperty(exports, \"EnumConfig\", { enumerable: true, get: function () { return config_1.EnumConfig; } });\nObject.defineProperty(exports, \"getConfig\", { enumerable: true, get: function () { return config_1.getConfig; } });\nObject.defineProperty(exports, \"NumberConfig\", { enumerable: true, get: function () { return config_1.NumberConfig; } });\nconst controlPointsModel_1 = require(\"./models/controlPointsModel\");\nObject.defineProperty(exports, \"ControlPointObj\", { enumerable: true, get: function () { return controlPointsModel_1.ControlPointObj; } });\nObject.defineProperty(exports, \"SpinalControlPoint\", { enumerable: true, get: function () { return controlPointsModel_1.SpinalControlPoint; } });\n__exportStar(require(\"./classes/contants\"), exports);\nconst spinalControlPointService = new SpinalControlEndpointService_1.SpinalControlEndpointService();\nexports.spinalControlPointService = spinalControlPointService;\nconst spinalHeatmapService = spinalControlPointService;\nexports.spinalHeatmapService = spinalHeatmapService;\nconst globalRoot = typeof window === 'undefined' ? global : window;\nif (typeof globalRoot.spinal === 'undefined')\n    globalRoot.spinal = {};\nif (typeof globalRoot.spinal.spinalHeatmapService === 'undefined') {\n    globalRoot.spinal.spinalHeatmapService = spinalControlPointService;\n}\nif (typeof globalRoot.spinal.spinalControlPointService === 'undefined') {\n    globalRoot.spinal.spinalControlPointService = spinalControlPointService;\n}\n//# sourceMappingURL=index.js.map",null,"\"use strict\";\n/*\n * Copyright 2021 SpinalCom - www.spinalcom.com\n *\n * This file is part of SpinalCore.\n *\n * Please read all of the following terms and conditions\n * of the Free Software license Agreement (\"Agreement\")\n * carefully.\n *\n * This Agreement is a legally binding contract between\n * the Licensee (as defined below) and SpinalCom that\n * sets forth the terms and conditions that govern your\n * use of the Program. By installing and/or using the\n * Program, you agree to abide by all the terms and\n * conditions stated or referenced herein.\n *\n * If you do not agree to abide by these terms and\n * conditions, do not demonstrate your acceptance and do\n * not install or use the Program.\n * You should have received a copy of the license along\n * with this file. If not, see\n * <http://resources.spinalcom.com/licenses.pdf>.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SpinalControlEndpointService = void 0;\nconst spinal_env_viewer_plugin_event_emitter_1 = require(\"spinal-env-viewer-plugin-event-emitter\");\nconst spinal_env_viewer_plugin_group_manager_service_1 = require(\"spinal-env-viewer-plugin-group-manager-service\");\nconst contants_1 = require(\"./contants\");\nconst ControlEndpoint_1 = require(\"./ControlEndpoint\");\nconst ControlEnpointsTree_1 = require(\"./ControlEnpointsTree\");\nfunction applyMixins(derivedConstructor, baseConstructors) {\n    baseConstructors.forEach((baseConstructor) => {\n        Object.getOwnPropertyNames(baseConstructor.prototype).forEach((name) => {\n            Object.defineProperty(derivedConstructor.prototype, name, Object.getOwnPropertyDescriptor(baseConstructor.prototype, name));\n        });\n    });\n}\nclass SpinalControlEndpointService {\n    constructor() {\n        this.CONTROL_POINT_TYPE = contants_1.CONTROL_POINT_TYPE;\n        this.CONTROL_GROUP_TYPE = contants_1.CONTROL_GROUP_TYPE;\n        this.CONTROL_GROUP_TO_CONTROLPOINTS = contants_1.CONTROL_GROUP_TO_CONTROLPOINTS;\n        this.ROOM_TO_CONTROL_GROUP = contants_1.ROOM_TO_CONTROL_GROUP;\n        this.listenLinkItemToGroupEvent();\n        this.listenUnLinkItemToGroupEvent();\n    }\n    listenLinkItemToGroupEvent() {\n        spinal_env_viewer_plugin_event_emitter_1.spinalEventEmitter.on(spinal_env_viewer_plugin_group_manager_service_1.groupManagerService.constants.ELEMENT_LINKED_TO_GROUP_EVENT, ({ groupId, elementId }) => {\n            this.linkControlPointToNewGroupItem(groupId, elementId);\n        });\n    }\n    listenUnLinkItemToGroupEvent() {\n        spinal_env_viewer_plugin_event_emitter_1.spinalEventEmitter.on(spinal_env_viewer_plugin_group_manager_service_1.groupManagerService.constants.ELEMENT_UNLINKED_TO_GROUP_EVENT, ({ groupId, elementId }) => {\n            this.unLinkControlPointToGroupItem(groupId, elementId);\n        });\n    }\n}\nexports.SpinalControlEndpointService = SpinalControlEndpointService;\napplyMixins(SpinalControlEndpointService, [\n    ControlEnpointsTree_1.ControlEnpointsTree,\n    ControlEndpoint_1.ControlEndpointService,\n]);\n//# sourceMappingURL=SpinalControlEndpointService.js.map",null,"\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ROOM_TO_CONTROL_GROUP = exports.CONTROL_GROUP_TO_CONTROLPOINTS = exports.CONTROL_GROUP_TYPE = exports.CONTROL_POINT_TYPE = void 0;\nexports.CONTROL_POINT_TYPE = \"SpinalControlPoint\";\nexports.CONTROL_GROUP_TYPE = \"CONTROL_GROUP\";\nexports.CONTROL_GROUP_TO_CONTROLPOINTS = \"hasControlGroup\";\nexports.ROOM_TO_CONTROL_GROUP = \"hasControlPoints\";\n//# sourceMappingURL=contants.js.map",null,"\"use strict\";\n/*\n * Copyright 2021 SpinalCom - www.spinalcom.com\n *\n * This file is part of SpinalCore.\n *\n * Please read all of the following terms and conditions\n * of the Free Software license Agreement (\"Agreement\")\n * carefully.\n *\n * This Agreement is a legally binding contract between\n * the Licensee (as defined below) and SpinalCom that\n * sets forth the terms and conditions that govern your\n * use of the Program. By installing and/or using the\n * Program, you agree to abide by all the terms and\n * conditions stated or referenced herein.\n *\n * If you do not agree to abide by these terms and\n * conditions, do not demonstrate your acceptance and do\n * not install or use the Program.\n * You should have received a copy of the license along\n * with this file. If not, see\n * <http://resources.spinalcom.com/licenses.pdf>.\n */\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ControlEndpointService = void 0;\nconst spinal_core_connectorjs_type_1 = require(\"spinal-core-connectorjs_type\");\nconst spinal_env_viewer_graph_service_1 = require(\"spinal-env-viewer-graph-service\");\nconst spinal_model_bmsnetwork_1 = require(\"spinal-model-bmsnetwork\");\nconst contants_1 = require(\"./contants\");\nconst Utilities_1 = require(\"./Utilities\");\nclass ControlEndpointService {\n    constructor() { }\n    /**\n     * checks if the id passed in parameter is a context of control Endpoint\n     * @param  {string} id\n     * @returns boolean\n     */\n    isControlPointContext(id) {\n        const info = spinal_env_viewer_graph_service_1.SpinalGraphService.getInfo(id);\n        const type = info.type.get();\n        return type === `${contants_1.CONTROL_POINT_TYPE}GroupContext`;\n    }\n    /**\n     * get All control endpoint profile  linked to control endpoint node\n     * @param  {string} contextId\n     * @param  {string} controlPointId\n     * @returns Promise\n     */\n    getControlPointProfil(contextId, controlPointId) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let realNode = spinal_env_viewer_graph_service_1.SpinalGraphService.getRealNode(controlPointId);\n            if (typeof realNode === 'undefined') {\n                yield spinal_env_viewer_graph_service_1.SpinalGraphService.findInContext(contextId, contextId, (node) => {\n                    if (node.getId().get() === controlPointId) {\n                        spinal_env_viewer_graph_service_1.SpinalGraphService._addNode(node);\n                        realNode = node;\n                        return true;\n                    }\n                    return false;\n                });\n            }\n            return {\n                name: realNode.getName().get(),\n                endpoints: yield realNode.getElement(),\n            };\n        });\n    }\n    /**\n     * link the control point to a node and create the bms endpoints according to the control point profiles\n     * @param  {string} nodeId\n     * @param  {string} controlPointContextId\n     * @param  {string} controlPointId\n     * @returns Promise\n     */\n    linkControlPointToGroup(nodeId, controlPointContextId, controlPointId) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const controlPoints = yield this.getControlPointProfil(controlPointContextId, controlPointId);\n            const groups = yield Utilities_1.Utilities.getGroups(nodeId);\n            const promises = groups.map((group) => __awaiter(this, void 0, void 0, function* () {\n                try {\n                    yield this._LinkNode(group.id.get(), controlPointContextId, controlPointId, controlPoints);\n                    yield this.saveItemLinked(controlPointId, [group.id.get()]);\n                    yield this.saveItemLinked(group.id.get(), [controlPointId]);\n                    return group;\n                }\n                catch (error) {\n                    console.error(error);\n                    return;\n                }\n            }));\n            return Promise.all(promises);\n            // .then((result) => {\n            //    result.map((group: any) => {\n            //    })\n            //    return result.map((el: any) => SpinalGraphService.getInfo(el.id.get()));\n            // })\n        });\n    }\n    /**\n     * unlink the control point to a group and his items\n     * @param  {string} groupId\n     * @param  {string} controlPointProfilId\n     * @returns Promise\n     */\n    unLinkControlPointToGroup(groupId, controlPointProfilId) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const groupItems = yield Utilities_1.Utilities.getGroupItems(groupId);\n            const promises = groupItems.map((element) => __awaiter(this, void 0, void 0, function* () {\n                try {\n                    return this.unLinkControlPointToGroupItem(groupId, element.id.get(), controlPointProfilId);\n                }\n                catch (error) {\n                    console.error(error);\n                    return false;\n                }\n            }));\n            return Promise.all(promises).then(() => __awaiter(this, void 0, void 0, function* () {\n                return this.removeItemSaved(groupId, controlPointProfilId);\n            }));\n        });\n    }\n    /**\n     * Edit the control point profile and update the bms endpoints associated according to the control point profiles\n     * @param  {string} contextId\n     * @param  {string} controlPointId\n     * @param  {Array} values\n     * @returns Promise\n     */\n    editControlPointProfil(contextId, controlPointId, values) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const res = yield this.getControlPointProfil(contextId, controlPointId);\n            // res.endpoints.set(values);\n            const diffs = Utilities_1.Utilities.getDifference(res.endpoints.get(), values);\n            const profils = yield this.getAllProfils(controlPointId);\n            yield Utilities_1.Utilities.create(contextId, diffs.toCreate, profils, res.endpoints);\n            yield Utilities_1.Utilities.update(diffs.toUpdate, profils, res.endpoints);\n            yield Utilities_1.Utilities.delete(diffs.toRemove, profils, res.endpoints);\n            return res;\n        });\n    }\n    /**\n     * get All node linked to the control point\n     * @param  {string} controlProfilId\n     * @returns Promise\n     */\n    getElementLinked(controlProfilId) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return this.loadElementLinked(controlProfilId).then((res) => {\n                if (!res)\n                    return [];\n                const items = [];\n                for (let index = 0; index < res.length; index++) {\n                    const node = res[index];\n                    spinal_env_viewer_graph_service_1.SpinalGraphService._addNode(node);\n                    items.push(spinal_env_viewer_graph_service_1.SpinalGraphService.getInfo(node.getId().get()));\n                }\n                return items;\n            });\n        });\n    }\n    /**\n     * For a selected group format the control point profiles and the rooms of this group\n     * @param  {string} groupId\n     * @returns Promise\n     */\n    getDataFormated(groupId) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const elementLinked = yield this.getElementLinked(groupId);\n            const rooms = yield Utilities_1.Utilities.getGroupItems(groupId);\n            const promises = elementLinked.map((element) => __awaiter(this, void 0, void 0, function* () {\n                const el = element.get();\n                const contextId = this.getContextId(el.id);\n                const controlPointProfil = yield this.getControlPointProfil(contextId, el.id);\n                el['endpointProfils'] = controlPointProfil.endpoints.get();\n                el['rooms'] = yield this.formatRooms(el.id, rooms);\n                return el;\n            }));\n            return Promise.all(promises);\n        });\n    }\n    /**\n     * get and return the endpoint linked to nodeId and created according the profil selected\n     * @param  {string} nodeId\n     * @param  {string} profilId\n     * @returns Promise\n     */\n    getReferencesLinked(nodeId, profilId) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const profils = yield spinal_env_viewer_graph_service_1.SpinalGraphService.getChildren(nodeId, [\n                contants_1.ROOM_TO_CONTROL_GROUP,\n            ]);\n            if (!profilId)\n                return profils;\n            const found = profils.find((el) => el.referenceId.get() === profilId);\n            return found;\n        });\n    }\n    /**\n     * get All endpoints Nodes linked to roomId and created according the profil selected\n     * @param  {string} roomId - nodeId\n     * @param  {string} profilId - controlEndpoint profil id\n     * @returns Promise\n     */\n    getEndpointsNodeLinked(roomId, profilId, referenceLinked) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const found = referenceLinked || (yield this.getReferencesLinked(roomId, profilId));\n            let profilFound = Array.isArray(found) ? found[0] : found;\n            if (profilFound) {\n                return spinal_env_viewer_graph_service_1.SpinalGraphService.getChildren(profilFound.id.get(), [\n                    spinal_model_bmsnetwork_1.SpinalBmsEndpoint.relationName,\n                ]);\n            }\n            return [];\n        });\n    }\n    /**\n     * Get all node linked to the nodeId (control endpoint | id of group)\n     * @param  {string} nodeId - controlPointId or groupId\n     * @returns Promise\n     */\n    loadElementLinked(nodeId) {\n        const realNode = spinal_env_viewer_graph_service_1.SpinalGraphService.getRealNode(nodeId);\n        if (!realNode || !realNode.info || !realNode.info.linkedItems) {\n            let res = new spinal_core_connectorjs_type_1.Lst();\n            realNode.info.add_attr({ linkedItems: new spinal_core_connectorjs_type_1.Ptr(res) });\n            return Promise.resolve(res);\n        }\n        return new Promise((resolve, reject) => {\n            realNode.info.linkedItems.load((res) => {\n                return resolve(res);\n            });\n        });\n    }\n    /**\n     * This method takes as parameter a group item's id and return all control endpoints classify by profil\n     * @param  {string} groupItemId\n     * @returns Promise\n     */\n    getControlEndpointLinkedToGroupItem(groupItemId) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const profils = yield this.getReferencesLinked(groupItemId);\n            const promises = profils.map((element) => __awaiter(this, void 0, void 0, function* () {\n                const el = element.get();\n                const endpoints = yield this.getEndpointsNodeLinked(groupItemId, el.referenceId, element);\n                el.endpoints = endpoints.map((el) => el.get());\n                return el;\n            }));\n            return Promise.all(promises);\n        });\n    }\n    /**\n     * get All endpoints linked to roomId and created according the profil selected\n     * @param  {string} roomId - nodeId\n     * @param  {string} profilId - controlEndpoint profil id\n     * @returns Promise\n     */\n    getEndpointsLinked(nodeId, profilId) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const endpointsInfo = yield this.getEndpointsNodeLinked(nodeId, profilId);\n            const promises = endpointsInfo.map((el) => el.element.load());\n            return Promise.all(promises);\n        });\n    }\n    /**\n     * This method allows to create and link endpoints to group item according the profil linked to group\n     * @param  {string} groupId\n     * @param  {string} elementId\n     * @returns Promise\n     */\n    linkControlPointToNewGroupItem(groupId, elementId, controlPointProfilId) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const profilsLinked = controlPointProfilId\n                ? [spinal_env_viewer_graph_service_1.SpinalGraphService.getInfo(controlPointProfilId)]\n                : yield this.getElementLinked(groupId);\n            const promises = profilsLinked.map((profilModel) => __awaiter(this, void 0, void 0, function* () {\n                const profil = profilModel.get();\n                const controlPointContextId = this.getContextId(profil.id);\n                const controlPoints = yield this.getControlPointProfil(controlPointContextId, profil.id);\n                const nodeId = yield Utilities_1.Utilities.createNode(controlPoints.name, controlPointContextId, profil.id, controlPoints.endpoints.get());\n                return spinal_env_viewer_graph_service_1.SpinalGraphService.addChildInContext(elementId, nodeId, controlPointContextId, contants_1.ROOM_TO_CONTROL_GROUP, spinal_env_viewer_graph_service_1.SPINAL_RELATION_PTR_LST_TYPE);\n            }));\n            return Promise.all(promises);\n        });\n    }\n    /**\n     * This method allows to ulink endpoints to group item according the profil linked to group\n     * @param  {string} groupId\n     * @param  {string} elementId\n     * @returns Promise\n     */\n    unLinkControlPointToGroupItem(groupId, elementId, controlPointProfilId) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const profils = controlPointProfilId\n                ? [spinal_env_viewer_graph_service_1.SpinalGraphService.getInfo(controlPointProfilId)]\n                : yield this.getElementLinked(groupId);\n            const elementProfils = yield spinal_env_viewer_graph_service_1.SpinalGraphService.getChildren(elementId, [\n                contants_1.ROOM_TO_CONTROL_GROUP,\n            ]);\n            // const profilsLinked = profilsLinkedModel.map((el: any) => el.get());\n            // const elementProfils = (await elementProfilsModel).map(el => el.get());\n            const promises = profils.map((profil) => {\n                const found = elementProfils.find((el) => [el.referenceId.get(), el.id.get()].indexOf(profil.id.get()) !== -1);\n                if (found) {\n                    return spinal_env_viewer_graph_service_1.SpinalGraphService.removeChild(elementId, found.id.get(), contants_1.ROOM_TO_CONTROL_GROUP, spinal_env_viewer_graph_service_1.SPINAL_RELATION_PTR_LST_TYPE);\n                }\n                return Promise.resolve(false);\n            });\n            return Promise.all(promises);\n        });\n    }\n    ///////////////////////////////////////////////////////////////////////////////////////////\n    //                                   PRIVATE                                             //\n    ///////////////////////////////////////////////////////////////////////////////////////////\n    getAllProfils(controlPointId) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const elementsLinked = yield this.getElementLinked(controlPointId);\n            const promises = [];\n            for (const group of elementsLinked) {\n                promises.push(Utilities_1.Utilities.getGroupItems(group.id.get()));\n            }\n            return Promise.all(promises).then((roomsArrays) => {\n                const rooms = roomsArrays.flat();\n                const promises2 = rooms.map((el) => this.getReferencesLinked(el.id.get(), controlPointId));\n                return Promise.all(promises2).then((result) => {\n                    return result.flat();\n                });\n            });\n        });\n    }\n    controlPointProfilIsAlreadyLinked(profilId, groupId) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const linked = yield this.getElementLinked(groupId);\n            const found = linked.find((el) => el.id.get() === profilId);\n            return typeof found !== 'undefined';\n        });\n    }\n    getContextId(nodeId) {\n        const realNode = spinal_env_viewer_graph_service_1.SpinalGraphService.getRealNode(nodeId);\n        if (realNode.contextIds) {\n            const contextIds = realNode.contextIds.values();\n            return contextIds.find((id) => {\n                return this.isControlPointContext(id);\n            });\n        }\n    }\n    formatRooms(profilId, rooms) {\n        const promises = rooms.map((room) => __awaiter(this, void 0, void 0, function* () {\n            let obj = room.get();\n            obj['bimObjects'] = [];\n            obj['endpoints'] = yield this.getEndpointsLinked(obj.id, profilId);\n            return obj;\n        }));\n        return Promise.all(promises);\n    }\n    saveItemLinked(profilId, ids) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let items = yield this.loadElementLinked(profilId);\n            ids.forEach((id) => {\n                const isLinked = Utilities_1.Utilities.isLinked(items, id);\n                if (!isLinked) {\n                    const realNode = spinal_env_viewer_graph_service_1.SpinalGraphService.getRealNode(id);\n                    items.push(realNode);\n                }\n            });\n            const res = [];\n            for (let index = 0; index < items.length; index++) {\n                const element = items[index].info.get();\n                res.push(element);\n            }\n            return res;\n        });\n    }\n    removeItemSaved(groupId, profilId) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let profilItems = yield this.loadElementLinked(profilId);\n            let groupItems = yield this.loadElementLinked(groupId);\n            return [\n                this.removeItemFromLst(profilItems, groupId),\n                this.removeItemFromLst(groupItems, profilId),\n            ];\n        });\n    }\n    _LinkNode(groupId, controlPointContextId, controlPointId, controlPoints) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const isLinked = yield this.controlPointProfilIsAlreadyLinked(controlPointId, groupId);\n            if (isLinked)\n                return;\n            const items = yield Utilities_1.Utilities.getGroupItems(groupId);\n            const promises = items.map((el) => __awaiter(this, void 0, void 0, function* () {\n                return Utilities_1.Utilities.linkProfilToGroupItemIfNotExist(el.id.get(), controlPointContextId, controlPointId, controlPoints);\n            }));\n            return Promise.all(promises).then((result) => {\n                return result.map((el) => spinal_env_viewer_graph_service_1.SpinalGraphService.getInfo(el.getId().get()));\n            });\n        });\n    }\n    removeItemFromLst(lst, itemId) {\n        for (let index = 0; index < lst.length; index++) {\n            const element = lst[index];\n            if (element.getId().get() === itemId) {\n                lst.splice(index);\n                return true;\n            }\n        }\n        return false;\n    }\n}\nexports.default = ControlEndpointService;\nexports.ControlEndpointService = ControlEndpointService;\n//# sourceMappingURL=ControlEndpoint.js.map",null,"\"use strict\";\n/*\n * Copyright 2021 SpinalCom - www.spinalcom.com\n *\n * This file is part of SpinalCore.\n *\n * Please read all of the following terms and conditions\n * of the Free Software license Agreement (\"Agreement\")\n * carefully.\n *\n * This Agreement is a legally binding contract between\n * the Licensee (as defined below) and SpinalCom that\n * sets forth the terms and conditions that govern your\n * use of the Program. By installing and/or using the\n * Program, you agree to abide by all the terms and\n * conditions stated or referenced herein.\n *\n * If you do not agree to abide by these terms and\n * conditions, do not demonstrate your acceptance and do\n * not install or use the Program.\n * You should have received a copy of the license along\n * with this file. If not, see\n * <http://resources.spinalcom.com/licenses.pdf>.\n */\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Utilities = void 0;\nconst spinal_core_connectorjs_type_1 = require(\"spinal-core-connectorjs_type\");\nconst spinal_env_viewer_graph_service_1 = require(\"spinal-env-viewer-graph-service\");\nconst spinal_env_viewer_plugin_group_manager_service_1 = require(\"spinal-env-viewer-plugin-group-manager-service\");\nconst spinal_model_bmsnetwork_1 = require(\"spinal-model-bmsnetwork\");\nconst ControlEndpointDataType_1 = require(\"../dataTypes/ControlEndpointDataType\");\nconst ControlEndpointType_1 = require(\"../dataTypes/ControlEndpointType\");\nconst contants_1 = require(\"./contants\");\nconst netWorkService = new spinal_model_bmsnetwork_1.NetworkService();\nclass Utilities {\n    static getGroups(nodeId) {\n        return spinal_env_viewer_plugin_group_manager_service_1.groupManagerService.getGroups(nodeId);\n    }\n    static getGroupItems(groupId) {\n        return __awaiter(this, void 0, void 0, function* () {\n            // const groups = await groupManagerService.getGroups(nodeId);\n            // const promises = groups.map(el => groupManagerService.getElementsLinkedToGroup(el.id.get()))\n            // return Promise.all(promises).then((result: any) => {\n            //    return result.flat();\n            // })\n            return spinal_env_viewer_plugin_group_manager_service_1.groupManagerService.getElementsLinkedToGroup(groupId);\n        });\n    }\n    static createNode(groupName, controlPointContextId, controlPointId, controlPoints) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const groupNodeId = spinal_env_viewer_graph_service_1.SpinalGraphService.createNode({\n                name: groupName,\n                referenceId: controlPointId,\n                type: spinal_model_bmsnetwork_1.SpinalBmsEndpointGroup.nodeTypeName,\n            }, new spinal_core_connectorjs_type_1.Model());\n            const promises = controlPoints.map((endpoint) => __awaiter(this, void 0, void 0, function* () {\n                return this.linkEndpointToProfil(controlPointContextId, groupNodeId, endpoint);\n            }));\n            yield Promise.all(promises);\n            return groupNodeId;\n        });\n    }\n    static linkEndpointToProfil(controlPointContextId, groupNodeId, endpoint) {\n        return __awaiter(this, void 0, void 0, function* () {\n            // const endpoint = element.get();\n            endpoint['currentValue'] = this.getCurrentValue(endpoint.dataType);\n            const endpointObj = this.createEndpointNode(endpoint);\n            yield spinal_env_viewer_graph_service_1.SpinalGraphService.addChildInContext(groupNodeId, endpointObj.childId, controlPointContextId, spinal_model_bmsnetwork_1.SpinalBmsEndpoint.relationName, spinal_env_viewer_graph_service_1.SPINAL_RELATION_PTR_LST_TYPE);\n            // await SpinalGraphService.addChild(groupNodeId, endpointObj.childId, SpinalBmsEndpoint.relationName, SPINAL_RELATION_PTR_LST_TYPE);\n            yield netWorkService._createAttributes(endpointObj.childId, endpointObj.res);\n            return endpointObj.childId;\n        });\n    }\n    static createEndpointNode(obj) {\n        const res = new spinal_model_bmsnetwork_1.SpinalBmsEndpoint(obj.name, obj.path, obj.currentValue, obj.unit, ControlEndpointDataType_1.ControlEndpointDataType[obj.dataType], ControlEndpointType_1.ControlEndpointType[obj.type], obj.id);\n        res.add_attr({\n            alias: obj.alias,\n            command: obj.command,\n            saveTimeSeries: obj.saveTimeSeries,\n            isActive: (obj === null || obj === void 0 ? void 0 : obj.isActive) || true,\n            // config: obj.config\n        });\n        const childId = spinal_env_viewer_graph_service_1.SpinalGraphService.createNode({\n            type: spinal_model_bmsnetwork_1.SpinalBmsEndpoint.nodeTypeName,\n            endpointId: obj.id,\n            name: obj.name,\n        }, res);\n        return { childId, res };\n        // await SpinalGraphService.addChildInContext(\n        //     parentId,\n        //     childId,\n        //     this.contextId,\n        //     SpinalBmsEndpoint.relationName,\n        //     SPINAL_RELATION_PTR_LST_TYPE,\n        //   );\n    }\n    static getCurrentValue(dataType) {\n        switch (dataType) {\n            case ControlEndpointDataType_1.ControlEndpointDataType.Boolean:\n                return false;\n            case ControlEndpointDataType_1.ControlEndpointDataType.Float:\n            case ControlEndpointDataType_1.ControlEndpointDataType.Integer:\n            case ControlEndpointDataType_1.ControlEndpointDataType.Integer16:\n            case ControlEndpointDataType_1.ControlEndpointDataType.Real:\n            case ControlEndpointDataType_1.ControlEndpointDataType.Double:\n            case ControlEndpointDataType_1.ControlEndpointDataType.Long:\n                return 0;\n            default:\n                return '';\n        }\n    }\n    static isLinked(items, id) {\n        for (let index = 0; index < items.length; index++) {\n            const nodeId = items[index].getId().get();\n            if (nodeId === id)\n                return true;\n        }\n        return false;\n    }\n    static getDifference(oldEndpoint, newEndpoints) {\n        const toCreate = newEndpoints.filter((el) => {\n            const found = oldEndpoint.find((el2) => el2.id === el.id);\n            return typeof found === 'undefined';\n        });\n        const toRemove = oldEndpoint.filter((el) => {\n            const found = newEndpoints.find((el2) => el2.id === el.id);\n            return typeof found === 'undefined';\n        });\n        const toUpdate = newEndpoints.filter((el) => this.isUpdated(el, oldEndpoint));\n        return {\n            toCreate,\n            toUpdate,\n            toRemove,\n        };\n    }\n    static isUpdated(controlPoint, oldEndpoint) {\n        const found = oldEndpoint.find((el) => el.id === controlPoint.id);\n        if (!found)\n            return false;\n        const objAreEquals = this.objectsAreEquals(controlPoint, found);\n        if (!objAreEquals)\n            return true;\n        const configAreEquals = this.configAreEquals(controlPoint.config, found.config);\n        if (objAreEquals && configAreEquals)\n            return false;\n        return true;\n    }\n    static configAreEquals(config1, config2) {\n        const config1HasEnum = 'enumeration' in config1;\n        if (config1HasEnum) {\n            const config2HasEnum = 'enumeration' in config2;\n            if (!config2HasEnum)\n                return false;\n            const firstConfig = config1;\n            const secondConfig = config2;\n            if (firstConfig.enumeration.length !== secondConfig.enumeration.length)\n                return false;\n            for (let index = 0; index < firstConfig.enumeration.length; index++) {\n                const el1 = firstConfig.enumeration[index];\n                const el2 = secondConfig.enumeration[index];\n                if (!this.objectsAreEquals(el1, el2)) {\n                    return false;\n                }\n            }\n            return true;\n        }\n        const keys1 = Object.keys(config1);\n        const keys2 = Object.keys(config2);\n        if (keys1.length !== keys2.length) {\n            return false;\n        }\n        for (const key of keys1) {\n            if (typeof config1[key] !== 'object' && config1[key] !== config2[key]) {\n                return false;\n            }\n            else if (!this.objectsAreEquals(config1[key], config2[key])) {\n                return false;\n            }\n        }\n        return true;\n    }\n    static objectsAreEquals(object1, object2) {\n        const keys1 = Object.keys(object1);\n        const keys2 = Object.keys(object2);\n        if (keys1.length !== keys2.length) {\n            return false;\n        }\n        for (let key of keys1) {\n            if (key !== 'config' && object1[key] !== object2[key]) {\n                return false;\n            }\n        }\n        return true;\n    }\n    static create(controlPointContextId, newList, profils, endpointsLst) {\n        const promises = newList.map((endpoint) => {\n            endpointsLst.push(endpoint);\n            const promises2 = profils.map((profil) => __awaiter(this, void 0, void 0, function* () {\n                return this.linkEndpointToProfil(controlPointContextId, profil.id.get(), endpoint);\n            }));\n            return Promise.all(promises2);\n        });\n        return Promise.all(promises);\n    }\n    static update(newList, profils, endpointsLst) {\n        const promises = newList.map((element) => {\n            const index = this.getIndex(endpointsLst, element.id);\n            this.setProfilValue(element, endpointsLst[index]);\n            const promises2 = profils.map((profil) => __awaiter(this, void 0, void 0, function* () {\n                const endpointId = yield this.getEndpointByType(profil.id.get(), element.id);\n                return this.modEndpoint(endpointId, element);\n            }));\n            return Promise.all(promises2);\n        });\n        return Promise.all(promises);\n    }\n    static delete(newList, profils, endpointsLst) {\n        const promises = newList.map((element) => {\n            const index = this.getIndex(endpointsLst, element.id);\n            endpointsLst.splice(index);\n            const promises2 = profils.map((profil) => __awaiter(this, void 0, void 0, function* () {\n                const endpointId = yield this.getEndpointByType(profil.id.get(), element.id);\n                return spinal_env_viewer_graph_service_1.SpinalGraphService.removeChild(profil.id.get(), endpointId, spinal_model_bmsnetwork_1.SpinalBmsEndpoint.relationName, spinal_env_viewer_graph_service_1.SPINAL_RELATION_PTR_LST_TYPE);\n            }));\n            return Promise.all(promises2);\n        });\n        return Promise.all(promises);\n    }\n    static modEndpoint(endpointId, newProfil) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const info = spinal_env_viewer_graph_service_1.SpinalGraphService.getInfo(endpointId);\n            const realNode = spinal_env_viewer_graph_service_1.SpinalGraphService.getRealNode(endpointId);\n            const element = yield info.element.load();\n            for (const key of Object.keys(newProfil)) {\n                if (key !== 'config' && element[key])\n                    element[key].set(newProfil[key]);\n            }\n            realNode.info.name.set(newProfil.name);\n        });\n    }\n    static setProfilValue(newProfil, oldProfil) {\n        for (const key of Object.keys(newProfil)) {\n            if (oldProfil[key])\n                oldProfil[key].set(newProfil[key]);\n            else\n                oldProfil.add_attr({ [key]: newProfil[key] });\n        }\n    }\n    static getEndpointByType(profilId, endpointId) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const endpoints = yield this.getProfilEndpoints(profilId);\n            const found = endpoints.find((el) => el.endpointId.get() === endpointId);\n            if (found) {\n                return found.id.get();\n            }\n        });\n    }\n    static getProfilEndpoints(profilId) {\n        return spinal_env_viewer_graph_service_1.SpinalGraphService.getChildren(profilId, [\n            spinal_model_bmsnetwork_1.SpinalBmsEndpoint.relationName,\n        ]);\n    }\n    static getIndex(liste, id) {\n        for (let index = 0; index < liste.length; index++) {\n            const elementId = liste[index].id.get();\n            if (elementId === id)\n                return index;\n        }\n        return -1;\n    }\n    static linkProfilToGroupItemIfNotExist(itemId, controlPointContextId, controlPointId, controlPoints) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const nodeId = yield this.createNode(controlPoints.name, controlPointContextId, controlPointId, controlPoints.endpoints.get());\n            const children = yield spinal_env_viewer_graph_service_1.SpinalGraphService.getChildren(itemId, [\n                contants_1.ROOM_TO_CONTROL_GROUP,\n            ]);\n            const found = children.find((el) => { var _a; return ((_a = el.referenceId) === null || _a === void 0 ? void 0 : _a.get()) === controlPointId; });\n            if (found)\n                return spinal_env_viewer_graph_service_1.SpinalGraphService.getRealNode(found.id.get());\n            return spinal_env_viewer_graph_service_1.SpinalGraphService.addChildInContext(itemId, nodeId, controlPointContextId, contants_1.ROOM_TO_CONTROL_GROUP, spinal_env_viewer_graph_service_1.SPINAL_RELATION_PTR_LST_TYPE);\n        });\n    }\n}\nexports.default = Utilities;\nexports.Utilities = Utilities;\n//# sourceMappingURL=Utilities.js.map",null,"\"use strict\";\n/*\n * Copyright 2020 SpinalCom - www.spinalcom.com\n *\n * This file is part of SpinalCore.\n *\n * Please read all of the following terms and conditions\n * of the Free Software license Agreement (\"Agreement\")\n * carefully.\n *\n * This Agreement is a legally binding contract between\n * the Licensee (as defined below) and SpinalCom that\n * sets forth the terms and conditions that govern your\n * use of the Program. By installing and/or using the\n * Program, you agree to abide by all the terms and\n * conditions stated or referenced herein.\n *\n * If you do not agree to abide by these terms and\n * conditions, do not demonstrate your acceptance and do\n * not install or use the Program.\n * You should have received a copy of the license along\n * with this file. If not, see\n * <http://resources.spinalcom.com/licenses.pdf>.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ControlEndpointDataType = void 0;\nvar ControlEndpointDataType;\n(function (ControlEndpointDataType) {\n    ControlEndpointDataType[\"Null\"] = \"Null\";\n    ControlEndpointDataType[\"Float\"] = \"Float\";\n    ControlEndpointDataType[\"Boolean\"] = \"Boolean\";\n    ControlEndpointDataType[\"Unsigned\"] = \"Unsigned\";\n    ControlEndpointDataType[\"Unsigned8\"] = \"Unsigned8\";\n    ControlEndpointDataType[\"Unsigned16\"] = \"Unsigned16\";\n    ControlEndpointDataType[\"Unsigned32\"] = \"Unsigned32\";\n    ControlEndpointDataType[\"Integer\"] = \"Integer\";\n    ControlEndpointDataType[\"Integer16\"] = \"Integer16\";\n    ControlEndpointDataType[\"Real\"] = \"Real\";\n    ControlEndpointDataType[\"Double\"] = \"Double\";\n    ControlEndpointDataType[\"OctetString\"] = \"OctetString\";\n    ControlEndpointDataType[\"CharacterString\"] = \"CharacterString\";\n    ControlEndpointDataType[\"BitString\"] = \"BitString\";\n    ControlEndpointDataType[\"Date\"] = \"Date\";\n    ControlEndpointDataType[\"Time\"] = \"Time\";\n    ControlEndpointDataType[\"Array\"] = \"Array\";\n    ControlEndpointDataType[\"DateTime\"] = \"DateTime\";\n    ControlEndpointDataType[\"Long\"] = \"Long\";\n    ControlEndpointDataType[\"String\"] = \"String\";\n    ControlEndpointDataType[\"Duration\"] = \"Duration\";\n    ControlEndpointDataType[\"Enum\"] = \"Enum\";\n})(ControlEndpointDataType = exports.ControlEndpointDataType || (exports.ControlEndpointDataType = {}));\n//# sourceMappingURL=ControlEndpointDataType.js.map",null,"\"use strict\";\n/*\n * Copyright 2020 SpinalCom - www.spinalcom.com\n *\n * This file is part of SpinalCore.\n *\n * Please read all of the following terms and conditions\n * of the Free Software license Agreement (\"Agreement\")\n * carefully.\n *\n * This Agreement is a legally binding contract between\n * the Licensee (as defined below) and SpinalCom that\n * sets forth the terms and conditions that govern your\n * use of the Program. By installing and/or using the\n * Program, you agree to abide by all the terms and\n * conditions stated or referenced herein.\n *\n * If you do not agree to abide by these terms and\n * conditions, do not demonstrate your acceptance and do\n * not install or use the Program.\n * You should have received a copy of the license along\n * with this file. If not, see\n * <http://resources.spinalcom.com/licenses.pdf>.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ControlEndpointType = void 0;\nvar ControlEndpointType;\n(function (ControlEndpointType) {\n    ControlEndpointType[\"Temperature\"] = \"Temperature\";\n    ControlEndpointType[\"Hygrometry\"] = \"Hygrometry\";\n    ControlEndpointType[\"Power\"] = \"Power\";\n    ControlEndpointType[\"Occupation\"] = \"Occupation\";\n    ControlEndpointType[\"Light\"] = \"Light\";\n    ControlEndpointType[\"Alarm\"] = \"Alarm\";\n    ControlEndpointType[\"Other\"] = \"Other\";\n    ControlEndpointType[\"Consigne\"] = \"Consigne\";\n    ControlEndpointType[\"co2\"] = \"co2\";\n})(ControlEndpointType = exports.ControlEndpointType || (exports.ControlEndpointType = {}));\n//# sourceMappingURL=ControlEndpointType.js.map",null,"\"use strict\";\n/*\n * Copyright 2021 SpinalCom - www.spinalcom.com\n *\n * This file is part of SpinalCore.\n *\n * Please read all of the following terms and conditions\n * of the Free Software license Agreement (\"Agreement\")\n * carefully.\n *\n * This Agreement is a legally binding contract between\n * the Licensee (as defined below) and SpinalCom that\n * sets forth the terms and conditions that govern your\n * use of the Program. By installing and/or using the\n * Program, you agree to abide by all the terms and\n * conditions stated or referenced herein.\n *\n * If you do not agree to abide by these terms and\n * conditions, do not demonstrate your acceptance and do\n * not install or use the Program.\n * You should have received a copy of the license along\n * with this file. If not, see\n * <http://resources.spinalcom.com/licenses.pdf>.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ControlEnpointsTree = void 0;\nconst spinal_core_connectorjs_type_1 = require(\"spinal-core-connectorjs_type\");\nconst spinal_env_viewer_graph_service_1 = require(\"spinal-env-viewer-graph-service\");\nconst spinal_env_viewer_plugin_group_manager_service_1 = require(\"spinal-env-viewer-plugin-group-manager-service\");\nconst contants_1 = require(\"./contants\");\nclass ControlEnpointsTree {\n    constructor() { }\n    /**\n     * This method creates a context of control Endpoint\n     * @param  {string} contextName - The context of heatmap Name\n     * @returns Promise\n     */\n    createContext(contextName) {\n        return spinal_env_viewer_plugin_group_manager_service_1.groupManagerService\n            .createGroupContext(contextName, contants_1.CONTROL_POINT_TYPE)\n            .then((context) => {\n            const contextId = context.getId().get();\n            return spinal_env_viewer_graph_service_1.SpinalGraphService.getInfo(contextId);\n        });\n    }\n    /**\n     * retrieves and returns all contexts of control Endpoint\n     * @returns Promise\n     */\n    getContexts() {\n        return spinal_env_viewer_plugin_group_manager_service_1.groupManagerService\n            .getGroupContexts(contants_1.CONTROL_POINT_TYPE)\n            .then((contexts) => {\n            return contexts.map((el) => spinal_env_viewer_graph_service_1.SpinalGraphService.getInfo(el.id));\n        });\n    }\n    /**\n     * This method creates an endpoint control category\n     * @param  {string} contextId\n     * @param  {string} categoryName\n     * @param  {string} iconName\n     * @returns Promise\n     */\n    createCategory(contextId, categoryName, iconName) {\n        return spinal_env_viewer_plugin_group_manager_service_1.groupManagerService\n            .addCategory(contextId, categoryName, iconName)\n            .then((result) => {\n            const nodeId = result.getId().get();\n            return spinal_env_viewer_graph_service_1.SpinalGraphService.getInfo(nodeId);\n        });\n    }\n    /**\n     * get and return all categories in the context\n     * @param  {string} nodeId\n     * @returns Promise\n     */\n    getCategories(nodeId) {\n        return spinal_env_viewer_plugin_group_manager_service_1.groupManagerService.getCategories(nodeId).then((result) => {\n            return result.map((el) => spinal_env_viewer_graph_service_1.SpinalGraphService.getInfo(el.id.get()));\n        });\n    }\n    /**\n     * This method creates an endpoint control group\n     * @param  {string} contextId\n     * @param  {string} categoryId\n     * @param  {string} groupName\n     * @param  {string} groupColor\n     * @returns Promise\n     */\n    createGroup(contextId, categoryId, groupName, groupColor) {\n        return spinal_env_viewer_plugin_group_manager_service_1.groupManagerService\n            .addGroup(contextId, categoryId, groupName, groupColor)\n            .then((result) => {\n            const nodeId = result.getId().get();\n            return spinal_env_viewer_graph_service_1.SpinalGraphService.getInfo(nodeId);\n        });\n    }\n    /**\n     * get and return all groups in the category\n     * @param  {string} nodeId\n     * @returns Promise\n     */\n    getGroups(nodeId) {\n        return spinal_env_viewer_plugin_group_manager_service_1.groupManagerService.getGroups(nodeId).then((result) => {\n            return result.map((el) => spinal_env_viewer_graph_service_1.SpinalGraphService.getInfo(el.id.get()));\n        });\n    }\n    /**\n     * get All control endpoint node linked to group selected\n     * @param  {string} groupId\n     * @returns Promise\n     */\n    getControlPoint(groupId) {\n        return spinal_env_viewer_plugin_group_manager_service_1.groupManagerService.getElementsLinkedToGroup(groupId);\n    }\n    /**\n     * checks if the id passed in parameter is a group of control Endpoint\n     * @param  {string} id\n     * @returns boolean\n     */\n    isControlPointGroup(id) {\n        const info = spinal_env_viewer_graph_service_1.SpinalGraphService.getInfo(id);\n        const type = info.type.get();\n        return type === `${contants_1.CONTROL_POINT_TYPE}Group`;\n    }\n    /**\n     * creates and links a profil of control endpoint to the group selected in the context selected\n     * @param  {string} contextId\n     * @param  {string} groupId\n     * @param  {any} controlPointProfil\n     * @returns Promise of new groupId and old groupId\n     */\n    createControlPointProfil(contextId, groupId, controlPointProfil = {\n        name: 'unknow',\n        endpoints: [],\n    }) {\n        const profilNodeId = spinal_env_viewer_graph_service_1.SpinalGraphService.createNode({ name: controlPointProfil.name, type: contants_1.CONTROL_POINT_TYPE }, new spinal_core_connectorjs_type_1.Lst(controlPointProfil.endpoints));\n        return spinal_env_viewer_plugin_group_manager_service_1.groupManagerService.linkElementToGroup(contextId, groupId, profilNodeId);\n    }\n}\nexports.default = ControlEnpointsTree;\nexports.ControlEnpointsTree = ControlEnpointsTree;\n//# sourceMappingURL=ControlEnpointsTree.js.map",null,"\"use strict\";\n/*\n * Copyright 2020 SpinalCom - www.spinalcom.com\n *\n * This file is part of SpinalCore.\n *\n * Please read all of the following terms and conditions\n * of the Free Software license Agreement (\"Agreement\")\n * carefully.\n *\n * This Agreement is a legally binding contract between\n * the Licensee (as defined below) and SpinalCom that\n * sets forth the terms and conditions that govern your\n * use of the Program. By installing and/or using the\n * Program, you agree to abide by all the terms and\n * conditions stated or referenced herein.\n *\n * If you do not agree to abide by these terms and\n * conditions, do not demonstrate your acceptance and do\n * not install or use the Program.\n * You should have received a copy of the license along\n * with this file. If not, see\n * <http://resources.spinalcom.com/licenses.pdf>.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CalculationRule = void 0;\nvar CalculationRule;\n(function (CalculationRule) {\n    CalculationRule[\"Reference\"] = \"Reference\";\n    CalculationRule[\"Sum\"] = \"Sum\";\n    CalculationRule[\"Average\"] = \"Average\";\n})(CalculationRule = exports.CalculationRule || (exports.CalculationRule = {}));\n//# sourceMappingURL=CalculationRulesDataType.js.map",null,"\"use strict\";\n/*\n * Copyright 2020 SpinalCom - www.spinalcom.com\n *\n * This file is part of SpinalCore.\n *\n * Please read all of the following terms and conditions\n * of the Free Software license Agreement (\"Agreement\")\n * carefully.\n *\n * This Agreement is a legally binding contract between\n * the Licensee (as defined below) and SpinalCom that\n * sets forth the terms and conditions that govern your\n * use of the Program. By installing and/or using the\n * Program, you agree to abide by all the terms and\n * conditions stated or referenced herein.\n *\n * If you do not agree to abide by these terms and\n * conditions, do not demonstrate your acceptance and do\n * not install or use the Program.\n * You should have received a copy of the license along\n * with this file. If not, see\n * <http://resources.spinalcom.com/licenses.pdf>.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getConfig = exports.NumberConfig = exports.EnumConfig = exports.BoolConfig = void 0;\nconst CalculationRulesDataType_1 = require(\"../dataTypes/CalculationRulesDataType\");\nconst ControlEndpointDataType_1 = require(\"../dataTypes/ControlEndpointDataType\");\nexports.BoolConfig = {\n    min: { value: false, color: '#008000' },\n    max: { value: true, color: '#FF0000' },\n    calculation_rule: CalculationRulesDataType_1.CalculationRule.Reference,\n};\nexports.EnumConfig = {\n    enumeration: [],\n    calculation_rule: CalculationRulesDataType_1.CalculationRule.Reference,\n};\nexports.NumberConfig = {\n    min: { value: 0, color: '#FF0000' },\n    average: { value: 15, color: '#ffff00' },\n    max: { value: 30, color: '#008000' },\n    calculation_rule: CalculationRulesDataType_1.CalculationRule.Reference,\n};\nconst getConfig = function (dataType) {\n    switch (dataType) {\n        case ControlEndpointDataType_1.ControlEndpointDataType.Boolean:\n            return exports.BoolConfig;\n        case ControlEndpointDataType_1.ControlEndpointDataType.Enum:\n            return exports.EnumConfig;\n        case ControlEndpointDataType_1.ControlEndpointDataType.Float:\n        case ControlEndpointDataType_1.ControlEndpointDataType.Integer:\n        case ControlEndpointDataType_1.ControlEndpointDataType.Integer16:\n        case ControlEndpointDataType_1.ControlEndpointDataType.Real:\n        case ControlEndpointDataType_1.ControlEndpointDataType.Double:\n        case ControlEndpointDataType_1.ControlEndpointDataType.Long:\n            return exports.NumberConfig;\n    }\n};\nexports.getConfig = getConfig;\n//# sourceMappingURL=config.js.map",null,"\"use strict\";\n/*\n * Copyright 2020 SpinalCom - www.spinalcom.com\n *\n * This file is part of SpinalCore.\n *\n * Please read all of the following terms and conditions\n * of the Free Software license Agreement (\"Agreement\")\n * carefully.\n *\n * This Agreement is a legally binding contract between\n * the Licensee (as defined below) and SpinalCom that\n * sets forth the terms and conditions that govern your\n * use of the Program. By installing and/or using the\n * Program, you agree to abide by all the terms and\n * conditions stated or referenced herein.\n *\n * If you do not agree to abide by these terms and\n * conditions, do not demonstrate your acceptance and do\n * not install or use the Program.\n * You should have received a copy of the license along\n * with this file. If not, see\n * <http://resources.spinalcom.com/licenses.pdf>.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SpinalControlPoint = exports.ControlPointObj = void 0;\nconst spinal_core_connectorjs_type_1 = require(\"spinal-core-connectorjs_type\");\nconst ControlEndpointDataType_1 = require(\"../dataTypes/ControlEndpointDataType\");\nconst ControlEndpointType_1 = require(\"../dataTypes/ControlEndpointType\");\nconst config_1 = require(\"./config\");\nexports.ControlPointObj = Object.freeze({\n    name: '',\n    alias: '',\n    path: '',\n    unit: '',\n    dataType: ControlEndpointDataType_1.ControlEndpointDataType.Float,\n    type: ControlEndpointType_1.ControlEndpointType.Temperature,\n    command: 0,\n    saveTimeSeries: 0,\n    config: (0, config_1.getConfig)(ControlEndpointDataType_1.ControlEndpointDataType.Float),\n    icon: 'device_thermostat',\n    isActive: true,\n});\nclass SpinalControlPoint extends spinal_core_connectorjs_type_1.Model {\n    constructor(controlPoint) {\n        super();\n        if (controlPoint) {\n            controlPoint.config = (0, config_1.getConfig)(controlPoint.dataType);\n        }\n        if (typeof controlPoint === 'undefined') {\n            controlPoint = exports.ControlPointObj;\n        }\n        this.add_attr(controlPoint);\n        this.bindDataType();\n    }\n    bindDataType() {\n        this.dataType.bind(() => {\n            const type = this.dataType.get();\n            this.mod_attr('config', (0, config_1.getConfig)(type));\n        });\n    }\n}\nexports.SpinalControlPoint = SpinalControlPoint;\nspinal_core_connectorjs_type_1.spinalCore.register_models([SpinalControlPoint]);\n//# sourceMappingURL=controlPointsModel.js.map",null],"names":[],"version":3,"file":"spinal-env-viewer-room-manager.cc54f71c.js.map"}