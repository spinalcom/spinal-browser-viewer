{"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;;;;;;;;;;;;;;;;;;;CAsBC,GAED;AAOA,yBAAyB,GACzB;AAKA,yBAAyB,GACzB;AAKA,yBAAyB,GACzB,+DAA+D;AAE/D,6FAA6F;AAG7F,+BAA+B,GAC/B;AAKA,uBAAuB,GACvB;AAKA,oCAAoC;AACpC;AAIA,8CAA8C;AAE9C;AAKA,kCAAkC;AAClC,gEAAgE;AAEhE,0FAA0F;AAE1F;AApDA,MAAM,EACL,wBAAwB,EACxB,GAAG,QAAQ;AAMZ,yBAAyB,YAAY,uBAAuB,IAAI,CAAA,GAAA,mCAAkB,KAAK;IAAC;CAAE;AAM1F,yBAAyB,YAAY,uBAAuB,IAAI,CAAA,GAAA,mCAAkB,KAAK;IAAC;CAAE;AAY1F,yBAAyB,YAAY,uBAAuB,IAAI,CAAA,GAAA,qDAA2B,KAAK;IAAC;CAAG;AAMpG,yBAAyB,YAAY,uBAAuB,IAAI,CAAA,GAAA,6CAAuB,KAAK;IAAC;CAAG;AAMhG,yBAAyB,YAAY,uBAAuB,IAAI,CAAA,GAAA,yCAAqB,KAAK;IAAC;CAAG;AAM9F,yBAAyB,YAAY,uBAAuB,IAAI,CAAA,GAAA,2DAA8B,KAAK;IAAC;CAAG;AASvG,yBAAyB,YAAY,uBAAuB,IAAI,CAAA,GAAA,yBAAc,KAAK;IAAC;CAAE;;;;AC/EtF;;AACA;;AACA;;AACA;;AACA;;AAGA,MAAM,EACJ,oBAAoB,EACrB,GAAG,QAAQ;AAEZ,MAAM,UAAU;IACd;QACE,MAAM;QACN,mBAAmB,CAAA,GAAA,mBAAE,EAAE,OAAO,CAAA,GAAA,8BAAoB;QAClD,iBAAiB,SAAS;IAC5B;IAAG;QACD,MAAM;QACN,mBAAmB,CAAA,GAAA,mBAAE,EAAE,OAAO,CAAA,GAAA,8BAAoB;QAClD,iBAAiB,SAAS;IAC5B;IAAG;QACD,MAAM;QACN,mBAAmB,CAAA,GAAA,mBAAE,EAAE,OAAO,CAAA,GAAA,gCAAsB;QACpD,iBAAiB,SAAS;IAC5B;IACA;QACE,MAAM;QACN,mBAAmB,CAAA,GAAA,mBAAE,EAAE,OAAO,CAAA,GAAA,8BAAuB;QACrD,iBAAiB,SAAS;IAC5B;CACD;AAED,IAAK,IAAI,QAAQ,GAAG,QAAQ,QAAQ,QAAQ,QAC1C,qBAAqB,MAAM,OAAO,CAAC,MAAM;;;;;AChC3C,IAAI;AACJ,IAAI,aAAa;IACf,SAAS,QAAQ;IACjB,IAAI,OAAO,YAAY,SAAS,OAAO;IACvC,OAAO,SAAS,QAAQ,oBAA8B;IAC5C,OAAO,kBAAkB,QAAQ,oBAA8B;IAC/D,OAAO,WAAW;IAE5B,OAAO,eAAe,QAAQ,oBAA2B;IACzD,QAAQ,oBAA4B,QAAQ;IAC5C,OAAO,YAAY;IACnB,OAAO,SAAS;AAClB;AACA;kBAEe;;;;;A;A,I,gB;I,M;I,O;Q;K;I;Q,O;Y,Y;Y,c;Y,iB;Y,c;Y,gB;Y,e;Y,e;Y,a;gB;gB;a;Y,mB,E;Y,mB,E;Y,c;Y,W;Y,M;Q;I;I,S;Q,Q,M;Y,Q,I,a;Y,I,C,O,O,a,K;Y,I,C,e,O;Y,I,C,kB,O;Q;Q,S,M;Y,I,O,gB,M;gB,Q,I,a;gB,I,C;gB,I,C,a;Y;Y,I,C,a;Q;Q;Y,I,O,C,G,+C,E,Y,I,C,a,G;Y,K;Q;Q;Y,I,O,C,G,+C,E,Y,I,C,a,G;Y,K,c,K,C;gB,I,C,Y,U,K,C;oB,M,sB,I,C,e;oB,K,M,S,oB,M;gB;Y;Q;Q;Y,I,O,C,G,+C,E,Y,I,C,a,G;Y,K,c,K,C;gB,I,C,Y,U,K,C;oB,M,sB,I,C,e;oB,K,M,S,oB,M;gB;Y;Y,K;Q;Q;Y,I,O,C,G,+C,E,Y,I,C,a,G;Y,C,G,+C,E,oB,I,C,gB,G,O,I,C,gB,G,O,K,U,O,K,C;gB,M,Q,O,I,C,I,C,G,+C,E,Y,E,G;gB,Q,I,W;gB,M,mB,I,C,e;gB,K,M,gB,iB,+D;gB,a;Y;Q;Q;Y,Q,I;Y,I,O,C,G,+C,E,Y,I,C,a,G;Y,mB;Y,K,a,K,C;gB,Q,I,c;gB,K,M,K,Q,mC;gB,I,E,gB,S,I,C,gB,G,Q;oB,Q,I,mC,E,K,K;oB,qB;oB,K,M,K,E,mB,8C;oB,C,G,+C,E,Q,E,K,G,O,I,C,a,G,O,G,K,C;wB,I,K;4B,Q,I;4B,I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Q;wB;wB,O;4B,O,I;4B,U,S,G;gC,I,e;4B;4B,Y;wB;oB,G,I,G,I,a,S,M;wB,O,G,a;4B,K;4B,O;gC,S;4B;wB,G;4B,I,G,mB,I,G,U;yB;oB,I;iB,E;gB,I,G;gB,I,iB,iB,G,O;oB,G,Y;wB,a;wB,O;4B,S;wB;wB,O;4B,O,I;4B,U,S,G;gC,I,iB;4B;4B,Y;wB;oB,G;wB,I,G;qB;oB,I,G;oB,G,Y;wB,a;wB,O;4B,S;wB;wB,O;4B,O,I;4B,U,S,G;gC,I,iB;4B;4B,Y;wB;oB,G;wB,I,G;qB;oB,I,G;oB,G,Y;wB,a;wB,O;4B,S;wB;wB,O;4B,O,I;4B,U,S,G;gC,I,iB;4B;4B,Y;wB;oB,G;wB,I,G;wB,G,U;4B,I,G;yB;wB,I,G;qB;oB,I,G;oB,G,Y;wB,a;wB,O;4B,S;wB;wB,O;4B,O,I;4B,U,S,G;gC,I,iB;4B;4B,Y;wB;oB,G;wB,I,G;qB;oB,I,G;oB,I,mB,O,I,mB,M,G,O;wB,G,Y;4B,G,S;gC,I,G;6B;4B,I,G;4B,G,Y;gC,O;oC,O,I;oC,U,S,G;wC,I,Y;oC;oC,Y;gC;4B;yB,E;wB,I,G;wB,I,a,K,G,K;4B,I,G;yB,I,G,O;4B,G,Y;gC,O;oC,S;gC;gC,O;oC,O,I;oC,U,S,G;wC,I,e;oC;oC,Y;gC;4B,G;gC,I,G;6B;4B,I,G;4B,G,Y;gC,O;oC,S;gC;gC,O;oC,O,I;oC,U,S,G;wC,I,e;oC;oC,Y;gC;4B,G;gC,I,G;6B;yB,E;qB,E,K,I;oB,I,G;oB,G,O;wB,G,K;4B,I,G;yB;wB,I,G;wB,G,U;4B,I,G;yB;wB,I,G;wB,G,Y;4B,O;gC,Y,I,kB,O,I,kB;gC,S;4B;4B,O;gC,O,I;gC,U,S,G;oC,I,gB;gC;gC,Y;4B;wB,G;4B,I,G;yB;wB,I,G;wB,G,Y;4B,O;gC,Y,I,kB,O,I,kB;gC,S;4B;4B,O;gC,O,I;gC,U,S,G;oC,I,gB;gC;gC,Y;4B;wB,G;4B,I,G;yB;wB,I,G;wB,G,Y;4B,O;gC,Y,I,kB,O,I,kB;gC,S;4B;4B,O;gC,O,I;gC,U,S,G;oC,I,gB;gC;gC,Y;4B;wB,G;4B,I,G;yB;qB,E;iB,E,K,I;gB,I,G;gB,I,iB,qB,G,O;oB,G,Y;wB,a;wB,O;4B,S;wB;wB,O;4B,O,I;4B,U,S,G;gC,I,iB;4B;4B,Y;wB;oB,G;wB,I,G;qB;oB,I,G;oB,G,Y;wB,a;wB,O;4B,S;wB;wB,O;4B,O,I;4B,U,S,G;gC,I,iB;4B;4B,Y;wB;oB,G;wB,I,G;qB;oB,I,G;oB,I,kB,M,G,a;wB,I;4B,S,S,M;gC,O,I;4B;wB;oB,G;wB,I,G;qB,I,I;oB,I,G;oB,I,kB,S,I,G,O,I,G,I,mB,S,I;wB,O,G,e;4B,K;4B,O;gC,S;4B;4B,O;gC,O,I;gC,U,S,G;oC,I,oB;gC;gC,Y;4B;wB,G;4B,I,G,I,G;yB;oB,I,K,I;iB,E,K,I;a,E;Y,I,G;Y,G,qB;gB,G,a;oB,a;oB,I;wB,S,S,M;4B,O,I,Y;wB;oB;gB,G;oB,I,G;iB;gB,I,G;gB,G,a;oB,a;oB,I;wB,S,S,M;4B,O,I,Y;wB;oB;gB,G;oB,I,G;iB;a,E;S,E;K,E;A;A,I,kB,E;A,Q,S;A,Q,kB;;;;;AAhQA,IAAI,OAAO,KAAO;kBAEH,CAAA,UAEf;;;;;ACJA,IAAI;AACJ,IAAI,aAAa;IACf,SAAS,QAAQ;IACjB,IAAI,OAAO,YAAY,SAAS,OAAO;IACvC,OAAO,SAAS,QAAQ,mBAA8B;IAC5C,OAAO,kBAAkB,QAAQ,mBAA8B;IAC/D,OAAO,WAAW;IAG5B,QAAQ,mBAA4B,QAAQ;IAC5C,OAAO,YAAY;IACnB,OAAO,SAAS;AAClB;AACA;kBAEe;;;;;A;A,I,gB;I,M;I,O;Q;K;I;Q,O;Y,Y;Y,c;Y,M;Y,Y;Q;I;I,S;Q,Q,M;Y,I,C,O,O,a,K;Y,I,C,a,I,C;Y,Q,I;Y,I,C,e,O;Q;Q,S,M;Y,I,O,gB,M;gB,I,O,C,G,+C,E,Y,I,C,a,G;gB,K,K,K,I,I,C;gB,I,C,a;Y;Y,I,C,a;Q;Q,a,W;Y,I,O,I,C,c,Y,I,C,U;gB;gB,Y,I,C;Y;Q;I;A;A,I,U,O,kB,a,c,U;kB,S,wC;;;A,I,S;I,I,M,I;I,I,K,I;I,I,K,I,M,M;I,O,G,O;Q,G,a;Y,O;gB,a,I;Y;Y,I;gB,mB,S,M;oB,I,a;gB;gB,oB,S,M;oB,I,a;gB;gB,a,S,M;oB,O,I,Y;gB;Y;Q,G;Y,G,mB;gB,I,G,Y,I,G,I;a;Y,I,G;Y,G,qB;gB,G,Y;oB,G,Y;wB,O;4B,O,I;4B,U,S,G;gC,I,a;4B;4B,Y;wB;oB;iB,E;a,E;Y,I,G;Y,G,qB;gB,G,a;oB,a;oB,I;wB,S,S,M;4B,O,I,Y;wB;oB;gB,G;oB,I,G;iB;gB,I,G;gB,G,a;oB,a;oB,I;wB,S,S,M;4B,O,I,Y;wB;oB;gB,G;oB,I,G;iB;a,E;S,E;K,E;A;A,I,kB,E;A,Q,S;A,Q,kB;;;;;AAff,IAAI,OAAO,KAAO;kBAEH,CAAA,UAEf;;;;;ACJA,IAAI;AACJ,IAAI,aAAa;IACf,SAAS,QAAQ;IACjB,IAAI,OAAO,YAAY,SAAS,OAAO;IACvC,OAAO,SAAS,QAAQ,oBAAgC;IAC9C,OAAO,kBAAkB,QAAQ,oBAAgC;IACjE,OAAO,WAAW;IAG5B,QAAQ,oBAA8B,QAAQ;IAC9C,OAAO,YAAY;IACnB,OAAO,SAAS;AAClB;AACA;kBAEe;;;;;A;A,I,gB;I,M;I,O;Q;K;I;Q,O;Y,Y;Y,c;Y,Y;Q;I;I,S;Q,Q,M;Y,I,C,e,O;Y,I,C,S,O,O,Y;Q;Q,S,M;Y,I,O,gB,M;gB,I,W,C,G,+C,E,Y,I,C,a,G;gB,I,O,I;gB,S,K;oB;oB;oB;oB;oB;oB;iB,E,S,I;oB,I,K,K,K,U,a,O;gB,G,K,C;oB,K,O;oB,I,I,I,G,I,I,Q,I,I,G,C,E,C,K,K,U,K,Y,K,O,O;wB,G,C,E,C,K,K;qB;gB;gB,K,a;Y;Y,I,C,a;Q;Q,a,W;Y,I,O,I,C,c,Y,I,C,U;gB;gB,Y,I,C;Y;Q;I;A;A,I,U,O,kB,a,c,U;kBA6Bf,SAAA,wCAAA;;;A,I,S;I,I,M,I;I,I,K,I;I,I,K,I,M,M;I,O,G,O;Q,G,a;Y,O;gB,a,I;Y;Y,I;gB,mB,S,M;oB,I,a;gB;gB,oB,S,M;oB,I,a;gB;gB,a,S,M;oB,O,I,Y;gB;Y;Q,G;Y,G,mB;gB,I,G;a;Y,I,G;Y,G,qB;gB,G,Y;oB,G,Y;wB,O;4B,O,I;4B,U,S,G;gC,I,a;4B;4B,Y;wB;oB;iB,E;a,E;Y,I,G;Y,G,qB;gB,G,a;oB,a;oB,I;wB,S,S,M;4B,O,I,Y;wB;oB;gB,G;oB,I,G;iB;gB,I,G;gB,G,a;oB,a;oB,I;wB,S,S,M;4B,O,I,Y;wB;oB;gB,G;oB,I,G;iB;a,E;S,E;K,E;A;A,I,kB,E;A,Q,S;A,Q,kB;;;;;AA5CA,IAAI,OAAO,KAAO;kBAEH,CAAA,UAEf;;;;;ACJA,IAAI;AACJ,IAAI,aAAa;IACf,SAAS,QAAQ;IACjB,IAAI,OAAO,YAAY,SAAS,OAAO;IACvC,OAAO,SAAS,QAAQ,oBAA8B;IAC5C,OAAO,kBAAkB,QAAQ,oBAA8B;IAC/D,OAAO,WAAW;IAE5B,OAAO,eAAe,QAAQ,oBAA2B;IACzD,QAAQ,oBAA4B,QAAQ;IAC5C,OAAO,YAAY;IACnB,OAAO,SAAS;AAClB;AACA;kBAEe;;;;;A;A;A,I,gB;I,M;I,O;Q;K;I,Y;Q,iB,C,G,gB;I;I;Q,O;Y,Y;Y,O;Y,c;Q;I;IAEf,SAAA;QACA,QAAA,MAAA;Y,I,O,a,OAEA,IAAA,CAAA,QAAA,OAAA,aAAA,MAAA;YAEA,IAAA,CAAA,eAAA,CAAA,GAAA,+CAAA,EAAA,YACA,OAAA,aAAA,GAAA;QAEA;QACA,SAAA,MAAA;YACA,IAAA,OAAA,gBAAA,MAAA;gBACA,MAAA,QACA,OAAA,IAAA,CAAA,UAAA,WAAA,IAAA,CAAA,QAAA,IAAA,CAAA,MAAA;gBACA,IAAA,IAAA,CAAA,aAAA,KAAA,OACA,IAAA,CAAA,aAAA,KAAA,MAAA,IAAA;qBAEA,IAAA,CAAA,aAAA,KAAA,SAAA;oBAAA,OAAA;gBAAA;YAEA;YACA,IAAA,CAAA,aAAA;QACA;QACA,aAAA,WAAA;YACA,IAAA,OAAA,IAAA,CAAA,cAAA,YACA,IAAA,CAAA,UAAA;gBAAA;gBAAA,YAAA,IAAA,CAAA;YAAA;QAEA;IACA;AACA;AAEA,IAAA,UAAA,OAAA,kBAAA,aAAA,cAAA,UAAA;kBACA,SAAA,wCAAA;;;A,I,S;I,I,M,I;I,I,K,I;I,I,K,I,M,M;I,O,G,a;Q,O;Y,a,I;Q;Q,I;Y,mB,S,M;gB,I,a;Y;Y,oB,S,M;gB,I,a;Y;Y,a,S,M;gB,O,I,Y;Y;Q;I,G;Q,G,mB;Y,I,G;S;Q,I,G;Q,G,qB;Y,a;Q,G;Y,G,iB;gB,O;oB,O,I;oB,U,S,G;wB,I,Q;oB;oB,Y;gB;Y;S,E;Q,I,G;Q,G,qB;Y,G,a;gB,a;gB,I;oB,S,S,M;wB,O,I,Y;oB;gB;Y,G;gB,I,G;a;Y,I,G;Y,G,a;gB,a;gB,I;oB,S,S,M;wB,O,I,Y;oB;gB;Y,G;gB,I,G;a;S,E;K,E;A;A,I,kB,E;A,Q,S;A,Q,kB;;;;;AA/CA,IAAI,OAAO,KAAO;kBAEH,CAAA,UAEf;;;ACLA;;;;;;;;;;;;;;;;;;;;;;CAsBC;AAED,MAAM,SAAS,OAAO,UAAU,cAAc,SAAS;AACvD,MAAM,4BAA4B,QAAQ;AAC1C,MAAM,iBAAiB,QAAQ;AAE/B,IAAI,OAAO,OAAO,WAAW,aAAa,OAAO,SAAS,CAAC;AAC3D,IAAI,OAAO,OAAO,OAAO,8BAA8B,aACrD,OAAO,OAAO,4BAA4B,IAAI;AAChD,MAAM,uBAAuB,QAAQ,oBACnC,OAAO,OAAO,2BACd;AAGF,OAAO,UAAU;IACf,2BAA2B,OAAO,OAAO;IACzC;IACA;IACA,SAAQ,GAAG;QACT,IAAI,UAAU,6BACZ,OAAO,OAAO;IAClB;AACF;;;AC5CA;;;;;;;;;;;;;;;;;;;;;;CAsBC,GAED;;;;;CAKC,GACD,MAAM;IACJ;;;GAGC,GACD,aAAc;QACZ,IAAI,CAAC,SAAS,CAAC;IACjB;IAEA;;;;;;GAMC,GACD,cAAc,SAAS,EAAE,cAAc,EAAE;QACvC,IAAI,CAAC,MAAM,CAAC,UAAU,GAAG;IAC3B;IAEA;;;;;;;GAOC,GACD,UAAU,SAAS,EAAE,MAAM,EAAE;QAC3B,IAAI,OAAO,IAAI,CAAC,MAAM,CAAC,UAAU,KAAK,aACpC,OAAO,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,UAAU;QAC1C,OAAO;IACT;IACA;;;;;;;GAOC,GACD,WAAW,SAAS,EAAE,MAAM,EAAE;QAC5B,IAAI,OAAO,IAAI,CAAC,MAAM,CAAC,UAAU,KAAK,aACpC,OAAO,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,WAAW;QAC3C,OAAO;IACT;IACA;;;;;;;GAOC,GACD,YAAY,SAAS,EAAE,MAAM,EAAE;QAC7B,IAAI,OAAO,IAAI,CAAC,MAAM,CAAC,UAAU,KAAK,aACpC,OAAO,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,YAAY;QAC5C,OAAO;IACT;AACF;AAEA,OAAO,UAAU;;;AC3FjB;;;;;;;;;;;;;;;;;;;;;;CAsBC,GAED;;;;CAIC,GACD,MAAM;IACJ,aAAc,CAAC;IAEf,UAAU,MAAM,EAAE,CAAC;IACnB,WAAW,MAAM,EAAE,CAAC;IACpB,YAAY,MAAM,EAAE,CAAC;AACvB;AAEA,OAAO,UAAU;;;ACrCjB;;;;;;;;;;;;;;;;;;;;;;CAsBC,GAED,SAAS,WAAW,MAAM;IACxB,MAAM,MAAM,CAAC;IACb,IAAI,CAAC,OAAO,mBACV,MAAM,IAAI,MAAM;IAGlB,IAAI,OAAO,OAAO,QAAQ;IAC1B,IAAI,oBAAoB,OAAO;IAC/B,IAAI,kBAAkB,OAAO,mBAAmB,SAAS;IACzD,OAAO;AACT;AAEA,SAAS;IACP,IAAI,CAAC,IAAI,CAAC,QAAQ;QAChB,IAAI,CAAC,SAAS,SAAS,cAAc;QACrC,MAAM,SAAS,SAAS,cAAc;QACtC,IAAI,CAAC,OAAO,YAAY;QACxB,IAAI,CAAC,IAAI,gBAAgB,YAAY,IAAI,CAAC;QAC1C,IAAI,CAAC,OAAO,YAAY;QACxB,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,IAAI,kBAAkB;YAC9C,WAAW;gBACT,WAAW,IAAI,CAAC,UAAU,KAAK,IAAI;YACrC;QACF,GAAG,OAAO;IACZ;IACA,OAAO,IAAI,CAAC;AACd;AAEA;;;;;CAKC,GACD,OAAO,UAAU,SAAS,yBAAyB,EAAE,cAAc;IACjE,OAAO;QACL;;;;;;;;;KASC,GACD,OAAM,MAAM;YACV,IAAI,MAAM,WAAW;YACrB,MAAM,cAAc,cAAc;gBAChC,aAAc;oBACZ,KAAK;oBACL,IAAI,CAAC,MAAM;oBACX,IAAI,CAAC,SAAS;oBACd,IAAI,CAAC,YAAY;gBACnB;gBAEA,UAAU,GAAG,EAAE;oBACb,UAAU,KAAK,IAAI;oBACnB,IAAI,CAAC,UAAU,OAAO;gBACxB;gBACA,WAAW,GAAG,EAAE;oBACd,IAAI,IAAI,CAAC,WAAW,MAAM;wBACxB,IAAI,CAAC,UAAU,QAAQ;wBACvB,IAAI,CAAC,OAAO;wBACZ,IAAI,CAAC,SAAS;wBACd,IAAI,CAAC,YAAY;oBACnB;gBACF;gBAEA,YAAY,GAAG,EAAE;oBACf,IAAI,IAAI,CAAC,WAAW,MAClB,IAAI,CAAC,WAAW;yBAEhB,IAAI,CAAC,UAAU;gBAEnB;gBAEA;;SAEC,GACD,UAAU,WAAW,EAAE;oBACrB,IAAI,CAAC,WAAW;gBAClB;YACF;YACA,IAAI,sBAAsB,IAAI;YAC9B,0BAA0B,cAAc,IAAI,MAAM;QACpD;IACF;AACF;;;AChHA;;;;;;;;;;;;;;;;;;;;;;CAsBC;AAED,MAAM,SAAS,OAAO,UAAU,cAAc,SAAS;AACvD,MAAM,2BAA2B,QAAQ;AACzC,MAAM,mBAAmB,QAAQ;AACjC,MAAM,WAAW,QAAQ;AACzB,IAAI,OAAO,OAAO,WAAW,aAAa,OAAO,SAAS,CAAC;AAC3D,IAAI,OAAO,OAAO,OAAO,6BAA6B,aACpD,OAAO,OAAO,2BAA2B,IAAI;AAE/C,OAAO,UAAU;IACf,WAAW;IACX,0BAA0B,OAAO,OAAO;IACxC;IACA,SAAQ,GAAG;QACT,IAAI,UAAU,4BACZ,OAAO,OAAO;IAClB;AACF;;;ACxCA;;;;;;;;;;;;;;;;;;;;;;CAsBC,GAED;AACA,IAAI,WAAW,QAAQ;AAEvB;;;;;CAKC,GACD,MAAM;IACJ;;;GAGC,GACD,aAAc;QACZ,IAAI,CAAC,OAAO,CAAC;QACb,IAAI,CAAC,wBAAwB,CAAC;QAC9B,IAAI,CAAC,SAAS,GAAE;QAChB,IAAI,CAAC,eAAe,SAClB;YACE,IAAI,CAAC,OAAO;YACZ,IAAI,CAAC,eAAe,KAAO;QAC7B,GACA,MACA;YAAE,SAAS;YAAO,UAAU;QAAK;IAErC;IAEA,cAAc;IACd,yBAAyB;IACzB,IAAI;IAEJ;;;;GAIC,GACD,MAAM,aAAa,YAAY,EAAE;QAC/B,IAAI,CAAC;QACL,MAAM,OAAO,OAAO,aAAa;QACjC,MAAM,OACJ,yBAAyB,OAAO,OAAO,aAAa,UAAU;QAChE,MAAM,cAAc,MAAM,OAAO,OAAO,aAAa,KAAK;QAC1D,IAAI,MAAM;QACV,IAAI,aACF,IAAK,IAAI,IAAI,GAAG,IAAI,YAAY,YAAY,UAAU,CAAC,KAAK,IAC1D,MAAM,AAAC,CAAA,AAAC,KAAK,YAAY,WAAW,CAAC,EAAE,GAAI,YAAW,MAAO;QAGjE,OAAO;IACT;IAEA;;;;;;;;GAQC,GACD,YAAY,QAAQ,EAAE,gBAAgB,EAAE,YAAY,EAAE;QACpD,IAAI,CAAC;QACL,IAAI,OAAO,iBAAiB,aAAa;YACvC,QAAQ,KACN;YAIF,eAAe;QACjB;QACA,oCAAoC;QACpC,IAAI,cAAc,IAAI,CAAC,IAAI,CAAC,SAAS;QAErC,gCAAgC;QAChC,IAAI,CAAE,CAAA,uBAAuB,KAAI,GAC/B,cAAc,IAAI,CAAC,IAAI,CAAC,SAAS,GAAG,EAAE;QAGxC,IAAI,CAAC,IAAI,CAAC,sBAAsB,eAAe,eAC7C,IAAI,CAAC,qBAAqB,CAAC,aAAa,GACtC,IAAI,CAAC,aAAa;QAGtB,IAAI,CAAC,qBAAqB,CAAC,aAAa,CAAC,KAAK,CAAC;YAC7C,8DAA8D;YAC9D,IAAI,aAAa,YAAY,QAAQ,sBAAsB,IACzD,YAAY,KAAK;QAErB;IACF;IAEA;;;;;;;GAOC,GACD,MAAM,QAAQ,QAAQ,EAAE,MAAM,EAAE;QAC9B,MAAM,IAAI,CAAC,OAAO;QAClB,oCAAoC;QACpC,IAAI,cAAc,IAAI,CAAC,IAAI,CAAC,SAAS;QAErC,gCAAgC;QAChC,IAAI,CAAE,CAAA,uBAAuB,KAAI,GAC/B,OAAO,QAAQ,QAAQ,EAAE;QAE3B,IAAI,WAAW,YAAY,IAAI,eAAgB,CAAC,EAAE,GAAG;YACnD,IAAI;gBACF,MAAM,MAAM,MAAM,EAAE,QAAQ;gBAC5B,OAAO,QAAQ,KAAK,KAAK;YAC3B,EAAE,OAAO,OAAO;gBACd,QAAQ,MAAM;gBACd,OAAO;YACT;QACF;QACA,IAAI;YACF,MAAM,SAAS,MAAM,QAAQ,IAAI;YACjC,OAAO,OAAO,OAAO,CAAC,MAAQ,QAAQ;QACxC,EAAE,OAAO,OAAO;YACd,QAAQ,MAAM;YACd,OAAO,EAAE;QACX;IACF;AACF;AAEA,OAAO,UAAU;;;ACxJjB;;;;;;;;;;;;;;;;;;;;;;CAsBC,GAED;;;;;;;;;;;;;;;;CAgBC,GACD,MAAM;IACJ;;;;;;;;;;;;;;GAcC,GACD,YAAY,KAAK,EAAE,WAAW,EAAE,SAAS,EAAE,WAAW,CAAC,CAAC,CAAE;QACxD,IAAI,CAAC,QAAQ,SAAS;QACtB,IAAI,CAAC,cAAc,eAAe;QAClC,IAAI,CAAC,YAAY;YACf,MAAM,UAAU,QAAQ;YACxB,WAAW,UAAU,aAAa;YAClC,iBAAiB,UAAU,UAAU,mBAAmB;YACxD,WAAW,UAAU,UAAU,aAAa;QAC9C;QAEA,IAAI,CAAC,WAAW;YACd,OAAO,SAAS,SAAS;YACzB,iBAAiB,UAAU,SAAS,mBAAmB;YACvD,WAAW,UAAU,SAAS,aAAa;QAC7C;IACF;IAEA;;;;;;;GAOC,GACD,QAAQ,MAAM,EAAE,CAAC;IAEjB;;;;;GAKC,GACD,OAAO,MAAM,EAAE,CAAC;AAClB;AAEA,OAAO,UAAU;AAEjB,SAAS,UAAU,KAAK;IACtB,IAAI,KAAK,CAAC,EAAE,KAAK,KAAK,OAAO;IAC7B,OAAO,MAAM;AACf;;;AChGA,OAAO,UAAU;IACf,gBAAgB;IAChB,YAAY;IACZ,aAAa;IACb,gBAAgB;AAClB;;;ACPA;;;;;;;;;;;;;;;;;;;;;;CAsBC;;AA4BD,yDAAS;AA1BT,MAAM,EACL,gBAAgB,EAChB,GAAG,QAAQ;AACZ,MAAM,EACL,yBAAyB,EACzB,GAAG,QAAQ;AAEZ,MAAM,4BAA4B;IACjC,aAAc;QACb,KAAK,CAAC,iBAAiB,UAAU;YAChC,MAAM;YACN,WAAW;YACR,iBAAiB;YACjB,WAAW;QACf;IACD;IAEA,UAAU;QACH,OAAQ,QAAQ,QAAQ;IAC/B;IAEA,OAAO,MAAM,EAAE;QACZ,0BAA0B,UAAU,wBAAwB;IAC/D;AACD;;;AChDA;;;;;;;;;;;;;;;;;;;;;;CAsBC;;AAkCD,yDACE;AAjCF,MAAM,EACJ,gBAAgB,EACjB,GAAG,QAAQ;AAEZ,MAAM,EACJ,yBAAyB,EAC1B,GAAG,QAAQ;AAGZ,MAAM,4BAA4B;IAChC,aAAc;QACZ,KAAK,CAAC,iBAAiB,UAAU;YAC/B,MAAM;YACN,WAAW;YACX,iBAAiB;YACjB,WAAW;QACb;IACF;IAEA,QAAQ,MAAM,EAAE;QACd,+CAA+C;QAC/C,+DAA+D;QAC/D,2CAA2C;QAC3C,iCAAiC;QACjC,OAAQ,QAAQ,QAAQ;IAC1B;IAEA,OAAO,MAAM,EAAE;QACb,0BAA0B,UAAU,wBAAwB;IAC9D;AACF;;;ACtDA;;;;;;;;;;;;;;;;;;;;;;CAsBC;;AAsDD,kEACE;AArDF;AAMA;AAJA,MAAM,EACJ,gBAAgB,EACjB,GAAG,QAAQ;AAQZ,MAAM,qCAAqC;IACzC,aAAc;QACZ,KAAK,CAAC,2BAA2B,2BAA2B;YAC1D,MAAM;YACN,WAAW;QACb;IACF;IAEA,QAAQ,MAAM,EAAE;QACd,MAAM,OAAO,OAAO,aAAa,KAAK;QACtC,IAAI,CAAA,GAAA,uBAAW,EAAE,QAAQ,QAAQ,IAAM,OAAQ,QAAQ,QAAQ;QAC/D,OAAQ,QAAQ,QAAQ;IAC1B;IAEA,OAAO,MAAM,EAAE;QACb,IAAI,WAAW,CAAA,GAAA,+CAAiB,EAAE,YAAY,OAAO,aAAa,GAC/D;QACH,IAAI,CAAC,SAAS,OAAO,OAAO,YAAY;QACxC,IAAI,OAAO,IAAI;QACf,SAAS,KAAK,CAAA,GAAA,6BAAiB,GAC7B,SAAU,IAAI;YACZ,IAAI,KAAK,KAAK,KAAK,UAAU,aAC3B,OAAO;QAEX,GAAG,KAAK,CAAA;YACR,KAAK,OAAO;YACZ,CAAA,GAAA,oBAAQ,EAAE,qBAAqB,KAAK,KAAK,CAAA;gBACvC,IAAK,IAAI,IAAI,GAAG,IAAI,WAAW,QAAQ,IAAK;oBAC1C,MAAM,UAAU,UAAU,CAAC,EAAE;oBAC7B,IAAK,IAAI,IAAI,GAAG,IAAI,QAAQ,MAAM,WAAW,QAAQ,IAAK;wBACxD,MAAM,QAAQ,QAAQ,MAAM,UAAU,CAAC,EAAE;wBACzC,0DAA0D;wBAC1D,MAAM,MAAM,SAAS,aAAa,QAAQ,MAAM,MAAM,OAAO;oBAC/D;gBACF;YACF;QACF;IACF;AACF;;;AC1EA;;;;;;;;;;;;;;;;;;;;;;CAsBC,GAED;AACA,WAAW;AACX,gCAAgC;AAChC,kCAAkC;AAClC,6BAA6B;AAC7B,qCAAqC;AACrC,uCAAuC;AACvC,kCAAkC;AAClC,4BAA4B;AAC5B,oBAAoB;AACpB,uBAAuB;AACvB,iCAAiC;AACjC,4BAA4B;AAC5B,wBAAwB;AAExB,iBAAiB;AAEjB,4DAA4D;AAE5D;AAEA;AAgBA;AAEA;AAGA,MAAM,qBAAqB;IACzB,CAAA,GAAA,wBAAY;IACZ,CAAA,GAAA,4BAAgB;IAChB,CAAA,GAAA,yBAAa;IACb,CAAA,GAAA,wBAAY;IACZ,CAAA,GAAA,wBAAY;IACZ,CAAA,GAAA,6BAAiB;IACjB,CAAA,GAAA,6BAAiB;IACjB,CAAC,EAAE,CAAA,GAAA,6BAAiB,EAAE,KAAK,CAAC;IAC5B;IACA,uDAAuD;IACvD,qDAAqD;IACrD,kDAAkD;IAClD,uDAAuD;IACvD,qDAAqD;IACrD,CAAA,GAAA,6DAAkB,EAAE,UAAU;IAC9B,CAAA,GAAA,6DAAkB,EAAE,UAAU;OAC3B,OAAO,OAAO,CAAA,GAAA,6DAAkB,EAAE,UAAU;IAC/C,CAAC,QAAQ,EAAE,CAAA,GAAA,oBAAQ,EAAE,CAAC;IACtB,CAAC,QAAQ,EAAE,CAAA,GAAA,yBAAa,EAAE,CAAC;IAC3B,CAAC,QAAQ,EAAE,CAAA,GAAA,oBAAQ,EAAE,CAAC;IACtB,CAAC,QAAQ,EAAE,CAAA,GAAA,wBAAY,EAAE,CAAC;IAC1B,CAAC,QAAQ,EAAE,CAAA,GAAA,qBAAS,EAAE,CAAC;IACvB,CAAC,QAAQ,EAAE,CAAA,GAAA,oBAAQ,EAAE,CAAC;IACtB,CAAC,QAAQ,EAAE,CAAA,GAAA,wCAAgB,EAAE,aAAa,CAAC;CAG5C;AAED,MAAM,eAAe;IACnB,CAAA,GAAA,oBAAQ;IACR,CAAA,GAAA,wBAAY;IACZ,CAAA,GAAA,qBAAS;IACT,CAAA,GAAA,oBAAQ;IACR,CAAA,GAAA,oBAAQ;IACR,CAAA,GAAA,yBAAa;IACb,4CAA4C;IAC5C,0CAA0C;IAC1C,uCAAuC;OACpC,OAAO,OAAO,CAAA,GAAA,6DAAkB,EAAE,UAAU;OAC5C,OAAO,OAAO,CAAA,GAAA,6DAAkB,EAAE,UAAU;IAC/C,CAAA,GAAA,6DAAkB,EAAE,UAAU;IAC9B,CAAC,EAAE,CAAA,GAAA,oBAAQ,EAAE,KAAK,CAAC;IACnB,CAAC,EAAE,CAAA,GAAA,yBAAa,EAAE,KAAK,CAAC;IACxB,CAAC,EAAE,CAAA,GAAA,oBAAQ,EAAE,KAAK,CAAC;IACnB,CAAC,EAAE,CAAA,GAAA,wBAAY,EAAE,KAAK,CAAC;IACvB,CAAC,EAAE,CAAA,GAAA,qBAAS,EAAE,KAAK,CAAC;IACpB,CAAC,EAAE,CAAA,GAAA,oBAAQ,EAAE,KAAK,CAAC;IACnB,CAAC,EAAE,CAAA,GAAA,oBAAQ,EAAE,YAAY,CAAC;IAC1B,CAAC,EAAE,CAAA,GAAA,yBAAa,EAAE,YAAY,CAAC;IAC/B,CAAC,EAAE,CAAA,GAAA,oBAAQ,EAAE,YAAY,CAAC;IAC1B,CAAC,EAAE,CAAA,GAAA,wBAAY,EAAE,YAAY,CAAC;IAC9B,CAAC,EAAE,CAAA,GAAA,qBAAS,EAAE,YAAY,CAAC;IAC3B,CAAC,EAAE,CAAA,GAAA,oBAAQ,EAAE,YAAY,CAAC;CAG3B;AAED,MAAM,YAAY;IAChB,MAAM,sBAAqB,gBAAgB;QACzC,IAAI,aAAa,EAAE;QACnB,IAAK,MAAM,OAAO,OAAO,iBAAiB,wBACxC,IAAI,OAAO,iBAAiB,wBAAwB,eAAe,MAAM;YACvE,MAAM,UAAU,OAAO,iBAAiB,uBAAuB,CAAC,IAAI;YACpE,IAAI,MAAM;gBACR,MAAM,EAAE;gBACR,OAAO;YACT;YACA,WAAW,KAAK;QAClB;QAEF,IAAK,IAAI,IAAI,GAAG,IAAI,iBAAiB,QAAQ,IAAK;YAChD,CAAA,GAAA,+CAAiB,EAAE,SAAS,gBAAgB,CAAC,EAAE;YAC/C,IAAI,MAAM,CAAA,GAAA,+CAAiB,EAAE,QAAQ,gBAAgB,CAAC,EAAE,CAAC,KAAK,GAAG;YACjE,IAAI;gBACF,IAAI,cACF,OAAO,OAAO,iBAAiB,uBAAuB,CACpD,IAAI,UAAU,MACf;gBACH,IAAI,aACF,IAAK,IAAI,IAAI,GAAG,IAAI,WAAW,QAAQ,IAAK;oBAC1C,MAAM,UAAU,UAAU,CAAC,EAAE;oBAC7B,IAAI,QAAQ,MAAM,YAAY,YAAY,SACxC,QAAQ,KAAK,KAAK,IAAI,KAAK;gBAE/B;YAEJ,EAAE,OAAO,OAAO;gBACd,QAAQ,MAAM,8CAA8C;YAC9D;QACF;QACA,OAAO;IACT;AACF;AAEA,OAAO,UAAU;IACf;IACA;IACA;AACF;;;ACrKA;;;;;;;;;;;;;;;;;;;;;;CAsBC;;AA8DD,8DACE;AA7DF;AAOA;AAHA,MAAM,EACJ,gBAAgB,EACjB,GAAG,QAAQ;AAQZ,MAAM,iCAAiC;IACrC,aAAc;QACZ,KAAK,CAAC,cAAc,wBAAwB;YAC1C,MAAM;YACN,WAAW;QACb;IACF;IAEA,QAAQ,MAAM,EAAE;QACd,MAAM,OAAO,OAAO,aAAa,KAAK;QACtC,IAAI,CAAA,GAAA,uBAAW,EAAE,QAAQ,QAAQ,IAC/B,OAAQ,QAAQ,QAAQ;QAC1B,OAAQ,QAAQ,QAAQ;IAC1B;IAEA,OAAO,MAAM,EAAE;QACb,IAAI,CAAC,SAAS,OAAO,OAAO,YAAY;QACxC,IAAI,OAAO,IAAI;QACf,IAAI,WAAW,CAAA,GAAA,+CAAiB,EAAE,YAAY,OAAO,aAAa,GAC/D;QACH,IAAI,CAAC,SAAS,OAAO,OAAO,YAAY;QAExC,SAAS,KAAK,CAAA,GAAA,6BAAiB,GAC7B,SAAS,IAAI;YACX,IAAI,KAAK,KAAK,KAAK,UAAU,aAAa,OAAO;QACnD,GAAG,KAAK,CAAA;YACR,CAAA,GAAA,oBAAQ,EAAE,qBAAqB,KAAK,KAAK,CAAA;gBACvC,IAAI,aAAa,EAAE;gBACnB,IAAK,IAAI,IAAI,GAAG,IAAI,WAAW,QAAQ,IAAK;oBAC1C,MAAM,UAAU,UAAU,CAAC,EAAE;oBAC7B,IAAI,MAAM;wBACR,OAAO,QAAQ,MAAM,UAAU,CAAC,EAAE,CAAC;wBACnC,WAAW,QAAQ;oBACrB;oBACA,WAAW,KAAK;oBAChB,IAAI,MAAM,SAAS,aAAa,QAAQ,MAAM,IAC3C,OACD;gBACJ;gBACA,KAAK,OAAO,UAAU;YACxB;QACF;IACF;AACF;;;ACjFA;;;;;;;;;;;;;;;;;;;;;;CAsBC;;AAqFD,4DACE;AApFF;AAQA;AAJA,MAAM,EACJ,gBAAgB,EACjB,GAAG,QAAQ;AAQZ,MAAM,+BAA+B;IACnC,aAAc;QACZ,KAAK,CAAC,oBAAoB,eAAe;YACvC,MAAM;YACN,WAAW;QACb;IACF;IAEA,QAAQ,MAAM,EAAE;QACd,MAAM,OAAO,OAAO,aAAa,KAAK;QACtC,IAAI,CAAA,GAAA,uBAAW,EAAE,QAAQ,QAAQ,IAC/B,OAAQ,QAAQ,QAAQ;QAC1B,OAAQ,QAAQ,QAAQ;IAC1B;IAEA,OAAO,MAAM,EAAE;QACb,IAAI,CAAC,SAAS,OAAO,OAAO,YAAY;QACxC,IAAI,OAAO,IAAI;QACf,IAAI,eAAe;QACnB,IAAI,oBAAoB,EAAE;QAC1B,IAAI,qBAAqB,EAAE;QAC3B,IAAI,WAAW,CAAA,GAAA,+CAAiB,EAAE,YAAY,OAAO,aAAa,GAC/D;QACH,IAAI,IAAI,CAAC,YAAY,WACnB,IAAI,CAAC,WAAW;aACX;YACL,qBAAqB,IAAI,CAAC,OAAO;YACjC,IAAI,IAAI,CAAC,SAAS,KAAK,GAAG,SAAS,SAAS,KAAK,GAAG,SAClD,mBAAmB,QACnB,eAAe;iBAEf,IAAI,CAAC,WAAW;QAEpB;QACA,IAAI,cACF,IAAK,IAAI,IAAI,GAAG,IAAI,mBAAmB,QAAQ,IAAK;YAClD,MAAM,UAAU,kBAAkB,CAAC,EAAE;YACrC,KAAK,OAAO,QAAQ,GAAG,QAAQ;QACjC;aACK;YACL,IAAI,CAAC,SAAS,OAAO,OAAO,YAAY;YACxC,SAAS,KAAK,CAAA,GAAA,6BAAiB,GAC7B,SAAU,IAAI;gBACZ,IAAI,KAAK,KAAK,KAAK,UAAU,aAAa,OAAO;YACnD,GAAG,KAAK,CAAA;gBACN,CAAA,GAAA,oBAAQ,EAAE,qBAAqB,KAAK,KAAK,CAAA;oBACvC,IAAK,IAAI,IAAI,GAAG,IAAI,WAAW,QAAQ,IAAK;wBAC1C,MAAM,UAAU,UAAU,CAAC,EAAE;wBAC7B,IAAK,IAAI,IAAI,GAAG,IAAI,QAAQ,MAAM,WAC/B,QAAQ,IAAK;4BACd,MAAM,QAAQ,QAAQ,MAAM,UAAU,CAAC,EAAE;4BACzC,IAAI,QAAQ,KAAK,UAAU,GACzB,KAAK,OAAO,QAAQ,QAAQ,MAAM,MAAM;iCACnC;gCACL,IAAI,SAAS,MAAM,MAAM;gCACzB,MAAM,MAAM,cAAc,CAAC;oCACzB,IAAI,WAAW,KAAK,WAAW,WAAW,CACxC,OAAO;oCACT,KAAK,OAAO,QAAQ;wCAAC;qCAAS,EAAE,MAAM;gCACxC;4BACF;wBACF;oBACF;gBACF;YACF;QACJ;IACF;AACF;;;ACzGA;;;;;;;;;;;;;;;;;;;;;;CAsBC;;AAsFD,qEACE;AArFF;AAQA;AAMA;AAVA,MAAM,EACJ,gBAAgB,EACjB,GAAG,QAAQ;AAUZ,MAAM,wCAAwC;IAC5C,aAAc;QACZ,KAAK,CAAC,yCAAyC,eAAe;YAC5D,MAAM;YACN,WAAW;QACb;IACF;IAEA,QAAQ,MAAM,EAAE;QACd,MAAM,OAAO,OAAO,aAAa,KAAK;QACtC,IAAI,QAAQ,mBAAmB,OAAQ,QAAQ,QAAQ;QACvD,OAAQ,QAAQ,QAAQ;IAC1B;IAEA,OAAO,MAAM,EAAE;QACb,IAAI,CAAC,SAAS,OAAO,OAAO,YAAY;QACxC,IAAI,OAAO,IAAI;QACf,IAAI,eAAe;QACnB,IAAI,oBAAoB,EAAE;QAC1B,IAAI,qBAAqB,EAAE;QAC3B,IAAI,WAAW,CAAA,GAAA,+CAAiB,EAAE,YAAY,OAAO,aAAa,GAC/D;QACH,IAAI,IAAI,CAAC,YAAY,WACnB,IAAI,CAAC,WAAW;aACX;YACL,qBAAqB,IAAI,CAAC,OAAO;YACjC,IAAI,IAAI,CAAC,SAAS,KAAK,GAAG,SAAS,SAAS,KAAK,GAAG,SAClD,mBAAmB,QACnB,eAAe;iBAEf,IAAI,CAAC,WAAW;QAEpB;QACA,IAAI,cACF,IAAK,IAAI,IAAI,GAAG,IAAI,mBAAmB,QAAQ,IAAK;YAClD,MAAM,UAAU,kBAAkB,CAAC,EAAE;YACrC,KAAK,OAAO,QAAQ,GAAG,QAAQ;QACjC;aACK;YACL,IAAI,CAAC,SAAS,OAAO,OAAO,YAAY;YACxC,SAAS,KAAK,CAAA,GAAA,6BAAiB,GAC7B,SAAU,IAAI;gBACZ,IAAI,KAAK,KAAK,KAAK,UAAU,aAAa,OAAO;YACnD,GAAG,KAAK,CAAA;gBACN,CAAA,GAAA,oBAAQ,EAAE,qBAAqB,KAAK,KAAK,CAAA;oBACvC,IAAK,IAAI,IAAI,GAAG,IAAI,WAAW,QAAQ,IAAK;wBAC1C,MAAM,UAAU,UAAU,CAAC,EAAE;wBAC7B,IAAK,IAAI,IAAI,GAAG,IAAI,QAAQ,MAAM,WAC/B,QAAQ,IAAK;4BACd,MAAM,QAAQ,QAAQ,MAAM,UAAU,CAAC,EAAE;4BACzC,IAAI,QAAQ,KAAK,UAAU,GACzB,KAAK,OAAO,QAAQ,QAAQ,MAAM,MAAM;iCACnC;gCACL,IAAI,SAAS,MAAM,MAAM;gCACzB,MAAM,MAAM,cAAc,CAAC;oCACzB,IAAI,WAAW,KAAK,WAAW,WAAW,CACxC,OAAO;oCACT,KAAK,OAAO,QAAQ;wCAAC;qCAAS,EAAE,MAAM;gCACxC;4BACF;wBACF;oBACF;gBACF;YACF;QACJ;IACF;AACF;;;AC1GA;;;;;;;;;;;;;;;;;;;;;;CAsBC;;AA4BD,qDAAS;AA1BT,MAAM,EACF,gBAAgB,EACnB,GAAG,QAAQ;AACZ,MAAM,EACF,yBAAyB,EAC5B,GAAG,QAAQ;AAEZ,MAAM,wBAAwB;IAC1B,aAAc;QACV,KAAK,CAAC,cAAc,cAAc;YAC9B,MAAM;YACN,WAAW;YACX,iBAAiB;YACjB,WAAW;QACf;IACJ;IAEA,UAAU;QACN,OAAQ,QAAQ,QAAQ;IAC5B;IAEA,OAAO,MAAM,EAAE;QACX,0BAA0B,UAAU,4BAA4B;IACpE;AACJ;;;A;A,O,e,S,c;I,O;A;AEhDA,MAAA,eAAA,QAAA;AAES,QAAA,0BAFF,aAAA;;;A;A,I,Y,A,I,I,I,C,a,S,O,E,U,E,C,E,S;I,O,I,C,K,C,I,O,C,E,S,O,E,M;Q,S,U,K;Y,I;gB,K,U,K;Y,E,O,G;gB,O;Y;Q;Q,S,S,K;Y,I;gB,K,S,C,Q,C;Y,E,O,G;gB,O;Y;Q;Q,S,K,M;Y,O,O,Q,O,S,I,E,S,O;gB,Q,O;Y,G,K,W;Q;Q,K,A,C,Y,U,M,S,c,E,C,E;I;A;A,O,e,S,c;I,O;A;AEAP,MAAM;IACJ,aAAA,CAAe;IAEf,2BAA2B,KAAU,EAArC;QACE,OAAO,IAAI,CAAC,uBAAuB;YACjC;gBACE,OAAO;gBACP,WAAW,IAAI,CAAC,aAAa,OAAO;YACrC;SACF;IACH;IAEA,uBACE,aAEmD,EAHrD;QAKE,uBAAuB;QAEvB,IAAI,YAAY,MAAM,QAAQ,iBAC1B,gBACA;YAAC;SAAc;QAEnB,IAAI,WAAW,UAAU,IAAI,CAAA;YAC3B,OAAO,IAAI,CAAC,eAAe,GAAG,OAAO,GAAG;QAC1C;QAEA,OAAO,QAAQ,IAAI,UAAU,KAAK,CAAA;YAChC,OAAO;QACT;IACF;IAEA,aACE,KAAU,EACV,MAA+B,EAFjC;QAIE,MAAM,OAAO,MAAM;QACnB,MAAM,QAAQ,EAAE;QAEhB,IAAI,OAAO,WAAW,aACpB,SAAS;YAAC,KAAK,WAAW;SAAO;aAEjC,SAAS,MAAM,QAAQ,UAAU,SAAS;YAAC;SAAO;QAGpD,OAAO,QAAQ,CAAA;YACb,MAAM,QAAQ;gBAAC;aAAG;YAElB,IAAI;YAEJ,MAAO,MAAM,OAAQ;gBACnB,IAAI,KAAK,MAAM;gBAEf,cAAc;gBAEd,KAAK,iBAAiB,IAAI,CAAA;oBACxB,cAAc;oBACd,MAAM,KAAK;gBACb;gBAEA,IAAI,CAAC,aACH,MAAM,KAAK;YAEd;QACH;QAEA,OAAO;YAAE,OAAO;YAAO,WAAW;QAAK;IACzC;IAEA,8BACE,KAAU,EACV,UAGE,EALJ;QAOE,OAAO,IAAI,CAAC,2BAA2B,OAAO,KAAK,CAAA;YACjD,IAAI,SAAS,EAAE;YACf,IAAK,IAAI,IAAI,GAAG,IAAI,IAAI,QAAQ,IAAK;gBACnC,MAAM,UAAU,GAAG,CAAC,EAAE;gBACtB,IAAK,IAAI,IAAI,GAAG,IAAI,QAAQ,WAAW,QAAQ,IAAK;oBAClD,MAAM,WAAW,QAAQ,UAAU,CAAC,EAAE;oBACtC,IAAI,OAAO,IAAI,CAAC,UAAU,UAAU,gBAAgB,aAClD,OAAO,KAAK;gBAEd,IAAI;gBACL;gBACD,OAAO;YACR;QACH;IACF;IAEA,uBAAuB,WAAgB,EAAE,KAAU,EAAnD;QACE,OAAO,IAAI,CAAC,uBAAuB,aAAa,KAAK,CAAA;YACnD,OAAO,IAAI,IAAI,CAAA;gBACb,OAAO;oBACL,OAAO,QAAQ;oBACf,YAAY,QAAQ,WAAW,OAAO,CAAA;wBACpC,OAAO,IAAI,CAAC,SAAS,IAAI;oBAC3B;gBACD;YACH;QACF;IACF;IAEA,oBACE,KAAU,EACV,aAAqB,EACrB,SAAkB,EAHpB;QAKE,OAAO,IAAI,QAAQ,CAAA;YACjB,MAAM,OACJ,cAAc,QACd,CAAM,MAFR,UAAA,IAAA,EAAA,KAAA,GAAA,KAAA,GAAA;oBAGI,IAAI,aAAa,MAAM,IAAI,CAAC,uBAAuB;wBACjD;4BAAE,OAAO;4BAAO,WAAW;wBAAG;qBAC/B;oBAED,QAAQ;gBACV,IACA;gBACE,QAAQ,EAAE;YACZ,GACA;QAEJ;IACF;IAEA,wEAAwE;IACxE,wEAAwE;IACxE,wEAAwE;IAElE,eAAe,KAAU,EAAE,SAAwB,EAAnD;Q,O,U,I,E,K,G,K,G;YACJ,IAAI,aAAa,UAAU,IAAI,CAAA;gBAC7B,OAAO,IAAI,QAAQ,CAAA;oBACjB,MAAM,cACJ,IACA,CAAA;wBACE,wBAAwB;wBACxB,QAAQ;oBACV,GACA,CAAA;wBACE,QAAQ;oBACV;gBAEJ;YACF;YAEA,OAAO;gBACL,OAAO;gBACP,YAAY,MAAM,QAAQ,IAAI;YAC/B;QACH;IAAC;IAED,aAAa,KAAU,EAAvB;QACE,IAAI,eAAe,MAAM,UAAU;QAEnC,IAAI,cAAc,OAAO,KAAK,aAAa,WAAW;QAEtD,OAAO,YAAY,IAAI,SAAS,EAAE;YAChC,OAAO,SAAS;QAClB;IACF;IAEA,UACE,GAKC,EACD,UAGE,EAVJ;QAYE,IAAK,IAAI,IAAI,GAAG,IAAI,WAAW,QAAQ,IAAK;YAC1C,MAAM,iBAAiB,UAAU,CAAC,EAAE,CAAC;YACrC,MAAM,eAAe,UAAU,CAAC,EAAE,CAAC;YAEnC,MAAM,QAAQ,IAAI,WAAW,KAAK,CAAA;gBAChC,OAAO,OAAO,mBAAmB,eAC/B,eAAe,WAAW,IACxB,GAAG,YAAY,kBACb,aAAa,OAAO,sBACtB,GAAG,YAAY,kBACb,aAAa,OAAO,uBACpB,kBAAkB,GAAG;YAC7B;YAEA,IAAI,OAAO,UAAU,aACnB,OAAO;QAEV;QAED,OAAO;IACT;IAEA,SAAS,EAAE,EAAE,KAAK,EAAlB;QACE,IAAK,IAAI,IAAI,GAAG,IAAI,MAAM,QAAQ,IAAK;YACrC,IAAI,YAAY,KAAK,CAAC,EAAE,CAAC;YACzB,IAAI,aAAa,KAAK,CAAC,EAAE,CAAC;YAE1B,IAAI,QAAQ,GAAG,WAAW,KAAK,CAAA;gBAC7B,IAAI,OAAO,eAAe,aACxB,OAAO,UAAU,KAAK,IAAI;gBAG5B,OACE,UAAU,KAAK,IAAI,gBAAgB,WAAW,KAAK,IAAI;YAE3D;YAEA,IAAI,OAAO,UAAU,aACnB,OAAO;QAEV;QAED,OAAO;IACT;AACD;AAED,QAAA,UAAe,IAAI;;;AC9NnB","sources":["node_modules/spinal-env-viewer-plugin-standard_button/index.js","node_modules/spinal-env-viewer-plugin-standard_button/registerDialogs.js","node_modules/spinal-env-viewer-plugin-standard_button/vue/deletePanel.vue","node_modules/spinal-env-viewer-plugin-standard_button/vue/renamePanel.vue","node_modules/spinal-env-viewer-plugin-standard_button/vue/researchPanel.vue","node_modules/spinal-env-viewer-plugin-standard_button/vue/colorDialog.vue","node_modules/spinal-env-viewer-panel-manager-service/index.js","node_modules/spinal-env-viewer-panel-manager-service/SpinalPanelManagerService.js","node_modules/spinal-env-viewer-panel-manager-service/SpinalPanelApp.js","node_modules/spinal-env-viewer-panel-manager-service/SpinalMountExtention.js","node_modules/spinal-env-viewer-context-menu-service/index.js","node_modules/spinal-env-viewer-context-menu-service/SpinalContextMenuService.js","node_modules/spinal-env-viewer-context-menu-service/SpinalContextApp.js","node_modules/spinal-env-viewer-context-menu-service/constants.js","node_modules/spinal-env-viewer-plugin-standard_button/js/deleteButton.js","node_modules/spinal-env-viewer-plugin-standard_button/js/renameButton.js","node_modules/spinal-env-viewer-plugin-standard_button/js/selectBIMObjectButton.js","node_modules/spinal-env-viewer-plugin-standard_button/js/utilities.js","node_modules/spinal-env-viewer-plugin-standard_button/js/fitToViewerButton.js","node_modules/spinal-env-viewer-plugin-standard_button/js/isolationButton.js","node_modules/spinal-env-viewer-plugin-standard_button/js/isolationReferenceButton.js","node_modules/spinal-env-viewer-plugin-standard_button/js/addColor.js","node_modules/spinal-env-viewer-bim-manager-service/dist/index.js","node_modules/spinal-env-viewer-bim-manager-service/src/index.ts","node_modules/spinal-env-viewer-bim-manager-service/dist/bimObjects/bimService.js","node_modules/spinal-env-viewer-bim-manager-service/src/bimObjects/bimService.ts","node_modules/@parcel/node-resolver-core/lib/_empty.js"],"sourcesContent":["/*\n * Copyright 2018 SpinalCom - www.spinalcom.com\n *\n * This file is part of SpinalCore.\n *\n * Please read all of the following terms and conditions\n * of the Free Software license Agreement (\"Agreement\")\n * carefully.\n *\n * This Agreement is a legally binding contract between\n * the Licensee (as defined below) and SpinalCom that\n * sets forth the terms and conditions that govern your\n * use of the Program. By installing and/or using the\n * Program, you agree to abide by all the terms and\n * conditions stated or referenced herein.\n *\n * If you do not agree to abide by these terms and\n * conditions, do not demonstrate your acceptance and do\n * not install or use the Program.\n * You should have received a copy of the license along\n * with this file. If not, see\n * <http://resources.spinalcom.com/licenses.pdf>.\n */\n\nimport \"./registerDialogs\";\n\nconst {\n\tspinalContextMenuService\n} = require(\"spinal-env-viewer-context-menu-service\");\n\n\n/* \t\t\tDelete Button  \t\t\t\t*/\nimport { SpinalContextDelete } from './js/deleteButton.js';\n\nspinalContextMenuService.registerApp(\"GraphManagerSideBar\", new SpinalContextDelete(), [3]);\n\n\n/* \t\t\tRename Button  \t\t\t\t*/\nimport { SpinalContextRename } from './js/renameButton.js';\n\nspinalContextMenuService.registerApp(\"GraphManagerSideBar\", new SpinalContextRename(), [3]);\n\n\n/* \t\t\tSortChild Button\t\t\t*/\n//import { SpinalContextSortByName } from './js/sortButton.js';\n\n//spinalContextMenuService.registerApp(\"GraphManagerSideBar\", new SpinalContextSortByName());\n\n\n/* \t\t\tSelectBIMObject Button \t\t*/\nimport { SpinalContextSelectBIMObject } from './js/selectBIMObjectButton.js';\n\nspinalContextMenuService.registerApp(\"GraphManagerSideBar\", new SpinalContextSelectBIMObject(), [31]);\n\n\n/* \t\t\tZoom Button  \t\t\t\t*/\nimport { SpinalContextFitToViewer } from './js/fitToViewerButton.js';\n\nspinalContextMenuService.registerApp(\"GraphManagerSideBar\", new SpinalContextFitToViewer(), [31]);\n\n\n// \t\t\t\t/* \t\t\tIsolation Button  \t\t\t*/\nimport { SpinalContextIsolation } from './js/isolationButton.js';\n\nspinalContextMenuService.registerApp(\"GraphManagerSideBar\", new SpinalContextIsolation(), [31]);\n\n// \t\t\t\t/* \t\t\tIsolation Reference Button  \t\t\t*/\n\nimport { SpinalContextIsolationReference } from './js/isolationReferenceButton.js';\n\nspinalContextMenuService.registerApp(\"GraphManagerSideBar\", new SpinalContextIsolationReference(), [31]);\n\n\n// \t\t\t\t/* \t\t\tResearch Button\t\t\t\t*/\n//import { SpinalContexResearch } from './js/researchButton.js';\n\n//spinalContextMenuService.registerApp(\"GraphManagerSideBar\", new SpinalContexResearch());\n\nimport { SpinalEditColor } from \"./js/addColor\";\nspinalContextMenuService.registerApp(\"GraphManagerSideBar\", new SpinalEditColor(), [3]);\n","import vue from \"vue\";\nimport dialogDeleteComponent from \"./vue/deletePanel.vue\";\nimport dialogRenameComponent from \"./vue/renamePanel.vue\";\nimport dialogResearchComponent from \"./vue/researchPanel.vue\";\nimport EditColordialogComponent from \"./vue/colorDialog.vue\";\n\n\nconst {\n  SpinalMountExtention\n} = require(\"spinal-env-viewer-panel-manager-service\");\n\nconst dialogs = [\n  {\n    name: \"standardButtonDelete\",\n    vueMountComponent: vue.extend(dialogDeleteComponent),\n    parentContainer: document.body\n  }, {\n    name: \"standardButtonRename\",\n    vueMountComponent: vue.extend(dialogRenameComponent),\n    parentContainer: document.body\n  }, {\n    name: \"standardButtonResearch\",\n    vueMountComponent: vue.extend(dialogResearchComponent),\n    parentContainer: document.body\n  },\n  {\n    name: \"editColordialogComponent\",\n    vueMountComponent: vue.extend(EditColordialogComponent),\n    parentContainer: document.body\n  }\n];\n\nfor (let index = 0; index < dialogs.length; index++) {\n  SpinalMountExtention.mount(dialogs[index]);\n}","<!--\nCopyright 2018 SpinalCom - www.spinalcom.com\n\nThis file is part of SpinalCore.\n\nPlease read all of the following terms and conditions\nof the Free Software license Agreement (\"Agreement\")\ncarefully.\n\nThis Agreement is a legally binding contract between\nthe Licensee (as defined below) and SpinalCom that\nsets forth the terms and conditions that govern your\nuse of the Program. By installing and/or using the\nProgram, you agree to abide by all the terms and\nconditions stated or referenced herein.\n\nIf you do not agree to abide by these terms and\nconditions, do not demonstrate your acceptance and do\nnot install or use the Program.\nYou should have received a copy of the license along\nwith this file. If not, see\n<http://resources.spinalcom.com/licenses.pdf>.\n-->\n\n<template>\n  <div>\n    <md-dialog :md-active.sync=\"showDialog\" @md-closed=\"closeDialog(false)\">\n      <md-dialog-title\n        >Delete action on node selected : {{ name }}</md-dialog-title\n      >\n      <div class=\"DeleteMainBody\">\n        <md-field>\n          <label for=\"Select how you want the delete to operate\">\n            Select how you want the delete to operate\n          </label>\n          <md-select id=\"modeSelect\" name=\"modeSelect\" v-model=\"selectedMode\">\n            <md-option\n              v-for=\"option in modeOptions\"\n              :key=\"option\"\n              :value=\"option\"\n            >\n              {{ option }}\n            </md-option>\n          </md-select>\n        </md-field>\n        <div v-if=\"selectedMode === 'Delete nodes'\">\n          <md-radio class=\"md-primary\" v-model=\"selectedOption\" value=\"1\">\n            This node only\n          </md-radio>\n          <md-radio class=\"md-primary\" v-model=\"selectedOption\" value=\"2\">\n            This node's children nodes\n          </md-radio>\n          <md-radio class=\"md-primary\" v-model=\"selectedOption\" value=\"3\">\n            This node <strong> and </strong> children nodes\n          </md-radio>\n          <md-radio class=\"md-primary\" v-model=\"selectedOption\" value=\"4\">\n            All nodes of similar type in the same context</md-radio\n          >\n\n          <div v-if=\"selectedOption === '4' || selectedOption === '2'\">\n            <md-field>\n              <label>Filter value : </label>\n              <md-input v-model=\"strFilter\"></md-input>\n            </md-field>\n            <b v-if=\"strFilter == ''\"> !! If the filter is empty, all nodes will be captured !! </b>\n            <div v-else>\n              <md-radio v-model=\"strictFilter\" :value=\"true\">\n                Strict filter (node name has to match exactly the filter value)\n              </md-radio>\n              <md-radio v-model=\"strictFilter\" :value=\"false\">\n                Not strict filter (node name should contain the filter\n                value)</md-radio\n              >\n            </div>\n          </div>\n\n          <div>\n            <p>--------------------</p>\n            <strong> Exclude if : </strong>\n            <md-radio\n              :disabled=\"selectedOption == '1' || selectedOption == '4'\"\n              v-model=\"excludeOption\"\n              value=\"1\"\n            >\n              Node has another parent\n            </md-radio>\n            <md-radio\n              :disabled=\"selectedOption == '1' || selectedOption == '4'\"\n              v-model=\"excludeOption\"\n              value=\"2\"\n            >\n              Node has another parent in the same context\n            </md-radio>\n            <md-radio\n              :disabled=\"selectedOption == '1' || selectedOption == '4'\"\n              v-model=\"excludeOption\"\n              value=\"3\"\n            >\n              Node has another parent in another context\n            </md-radio>\n          </div>\n        </div>\n\n        <div v-if=\"selectedMode === 'Delete relations'\">\n          <md-radio class=\"md-primary\" v-model=\"selectedOption\" value=\"1\">\n            Relation with parent in this context\n          </md-radio>\n          <md-radio class=\"md-primary\" v-model=\"selectedOption\" value=\"2\">\n            Children relations\n          </md-radio>\n          <!-- <md-radio\n            disabled\n            class=\"md-primary\"\n            v-model=\"selectedOption\"\n            value=\"3\"\n          >\n            Parent relations (NYI)\n          </md-radio> -->\n          <md-button v-if=\"selectedOption == '2'\" @click=\"searchRelations()\">\n            Search relations\n          </md-button>\n          <div v-if=\"searchedRelations.length > 0\">\n            <md-checkbox\n              v-for=\"item in searchedRelations\"\n              :key=\"item\"\n              v-model=\"selectedRelations\"\n              :value=\"item\"\n              >{{ item }}</md-checkbox\n            >\n          </div>\n        </div>\n      </div>\n      <md-dialog-actions>\n        <md-button class=\"md-primary\" @click=\"closeDialog(false)\"\n          >Cancel</md-button\n        >\n        <md-button class=\"md-primary\" @click=\"closeDialog(true)\"\n          >Accept</md-button\n        >\n      </md-dialog-actions>\n    </md-dialog>\n  </div>\n</template>\n\n<script>\nimport {\n  SpinalGraphService,\n  SPINAL_RELATION_PTR_LST_TYPE,\n  SPINAL_RELATION_LST_PTR_TYPE,\n  SpinalNode,\n} from 'spinal-env-viewer-graph-service';\nexport default {\n  name: 'dialogComponent',\n  props: ['onFinised'],\n  data() {\n    return {\n      showDialog: true,\n      selectedNode: null,\n      selectedContext: null,\n      selectedMode: 'Delete nodes',\n      selectedOption: '1',\n      excludeOption: null,\n      relationNames: null,\n      modeOptions: ['Delete nodes', 'Delete relations'],\n      searchedRelations: [],\n      selectedRelations: [],\n      strictFilter: false,\n      strFilter: '',\n      name: '',\n    };\n  },\n  methods: {\n    opened(option) {\n      console.log('opened : ', option);\n      this.name = option.selectedNode.name.get();\n      this.selectedNode = option.selectedNode;\n      this.selectedContext = option.context;\n    },\n    removed(option) {\n      if (option.closeResult === true) {\n        console.log('closed : ', option);\n        this.routage();\n        this.showDialog = false;\n      }\n      this.showDialog = false;\n    },\n\n    deleteNode() {\n      let node = SpinalGraphService.getRealNode(this.selectedNode.id.get());\n      node.removeFromGraph();\n    },\n\n    deleteChildren() {\n      let node = SpinalGraphService.getRealNode(this.selectedNode.id.get());\n      node.getChildren().then((children) => {\n        this.applyFilter(children).then((filteredChildren) => {\n          const strFilteredChildren = this.applyStrFilter(filteredChildren);\n          for (const child of strFilteredChildren) {\n            child.removeFromGraph();\n          }\n        });\n      });\n    },\n\n    deleteNodeAndChildren() {\n      let node = SpinalGraphService.getRealNode(this.selectedNode.id.get());\n      node.getChildren().then((children) => {\n        this.applyFilter(children).then((filteredChildren) => {\n          const strFilteredChildren = this.applyStrFilter(filteredChildren);\n          for (const child of strFilteredChildren) {\n            child.removeFromGraph();\n          }\n        });\n      });\n      node.removeFromGraph();\n    },\n\n    deleteAllNodesOfSameTypeInSameContext() {\n      let node = SpinalGraphService.getRealNode(this.selectedNode.id.get());\n      SpinalGraphService.findInContextByType(\n        this.selectedContext.id.get(),\n        this.selectedContext.id.get(),\n        node.getType().get()\n      ).then((models) => {\n        const nodes = models.map((m) =>\n          SpinalGraphService.getRealNode(m.id.get())\n        );\n        console.log('nodes :', nodes);\n        const strFilteredNodes = this.applyStrFilter(nodes);\n        for (const filteredNode of strFilteredNodes) {\n          //let realNode = SpinalGraphService.getRealNode(node.id.get());\n          filteredNode.removeFromGraph();\n        }\n      });\n    },\n\n    deleteRelationWithParentInContext() {\n      console.log('deleteRelationWithParentInContext');\n      let node = SpinalGraphService.getRealNode(this.selectedNode.id.get());\n      // look for parents\n      node.getParents().then((parents) => {\n        console.log('parents : ', parents);\n        for (const p of parents) {\n          // if parent is in the same context\n          if (p.getContextIds().includes(this.selectedContext.id.get())) {\n            console.log('Parent of same context found : ', p.info.name.get());\n            // look for relations\n            for (const r of p.getRelationNames()) {\n              // Verify if the node is a child of the parent\n              SpinalGraphService.isChild(\n                p.info.id.get(),\n                this.selectedNode.id.get(),\n                r\n              ).then((res) => {\n                if (res) {\n                  console.log('Attempting to remove');\n                  this.removeChild(p, node, r);\n                } else console.log('Child not found');\n              });\n            }\n          }\n        }\n      });\n    },\n\n    async deleteChildrenRelations() {\n      //here we should call removeChild , then if no childs are left we should remove the relation\n      console.log('deleteChildrenRelations');\n      let node = SpinalGraphService.getRealNode(this.selectedNode.id.get());\n      for (const r of this.selectedRelations) {\n        const children = await node.getChildren(r);\n        for (const child of children) {\n          this.removeChild(node, child, r);\n        }\n        try {\n          console.log('Trying to remove relation : ', r);\n          node.removeRelation(r, SPINAL_RELATION_PTR_LST_TYPE);\n        } catch (e) {\n          try {\n            node.removeRelation(r, SPINAL_RELATION_LST_PTR_TYPE);\n          } catch (e) {\n            console.log(e);\n          }\n        }\n      }\n    },\n\n    searchRelations() {\n      let node = SpinalGraphService.getRealNode(this.selectedNode.id.get());\n      let relations = node.getRelationNames();\n      this.searchedRelations = relations;\n      this.selectedRelations = relations;\n      console.log(relations);\n    },\n\n    async applyFilter(nodes) {\n      const res = [];\n      switch (this.excludeOption) {\n        case '1': // filter out the nodes that have a parent that is not the selected node\n          for (const node of nodes) {\n            const parents = await node.getParents();\n            let filteredOut = false;\n            for (const p of parents) {\n              if (p.info.id.get() != this.selectedNode.id.get()) {\n                filteredOut = true;\n                break;\n              }\n            }\n            if (!filteredOut) res.push(node);\n          }\n          return res;\n\n        case '2': // filter out the nodes that have another parent in the same context\n          for (const node of nodes) {\n            const parents = await node.getParents();\n            let filteredOut = false;\n            for (const p of parents) {\n              if (p.info.id.get() != this.selectedNode.id.get()) {\n                const parentContextIds = p.getContextIds(); // get the context ids of the parent\n                if (parentContextIds.includes(this.selectedContext.id.get())) {\n                  filteredOut = true;\n                  break;\n                }\n              }\n            }\n            if (!filteredOut) res.push(node);\n          }\n          return res;\n        case '3': //filter out the nodes that have another parent in another context\n          for (const node of nodes) {\n            const parents = await node.getParents();\n            let filteredOut = false;\n            for (const p of parents) {\n              if (p.info.id.get() != this.selectedNode.id.get()) {\n                const parentContextIds = p.getContextIds(); // get the context ids of the parent\n                if (!parentContextIds.includes(this.selectedContext.id.get())) {\n                  filteredOut = true;\n                  break;\n                }\n              }\n            }\n            if (!filteredOut) res.push(node);\n          }\n          return res;\n        default:\n          return nodes;\n      }\n    },\n\n    applyStrFilter(nodes) {\n      if (this.strFilter == '') return nodes;\n      return nodes.filter((node) => {\n        if (this.strictFilter) {\n          return node.info.name.get() == this.strFilter;\n        } else return node.info.name.get().includes(this.strFilter);\n      });\n    },\n\n    routage() {\n      if (this.selectedMode === 'Delete nodes') {\n        if (this.selectedOption === '1') {\n          this.deleteNode();\n        } else if (this.selectedOption === '2') {\n          this.deleteChildren();\n        } else if (this.selectedOption === '3') {\n          this.deleteNodeAndChildren();\n        } else if (this.selectedOption === '4') {\n          this.deleteAllNodesOfSameTypeInSameContext();\n        }\n      } else if (this.selectedMode === 'Delete relations') {\n        if (this.selectedOption === '1') {\n          this.deleteRelationWithParentInContext();\n        } else if (this.selectedOption === '2') {\n          this.deleteChildrenRelations();\n        } else if (this.selectedOption === '3') {\n          this.deleteParentRelations();\n        }\n      }\n    },\n\n    removeChild(p, node, r) {\n      try {\n        p.removeChild(node, r, SPINAL_RELATION_PTR_LST_TYPE);\n      } catch (e) {\n        try {\n          p.removeChild(node, r, SPINAL_RELATION_LST_PTR_TYPE);\n        } catch (e) {\n          console.log(e);\n        }\n      }\n    },\n\n    closeDialog(closeResult) {\n      if (typeof this.onFinised === 'function') {\n        this.onFinised({ closeResult, inputValue: this.inputValue });\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\n.DeleteMainBody {\n  margin: 20px;\n}\n\n.md-radio {\n  display: flex;\n}\n</style>\n","<!--\nCopyright 2018 SpinalCom - www.spinalcom.com\n\nThis file is part of SpinalCore.\n\nPlease read all of the following terms and conditions\nof the Free Software license Agreement (\"Agreement\")\ncarefully.\n\nThis Agreement is a legally binding contract between\nthe Licensee (as defined below) and SpinalCom that\nsets forth the terms and conditions that govern your\nuse of the Program. By installing and/or using the\nProgram, you agree to abide by all the terms and\nconditions stated or referenced herein.\n\nIf you do not agree to abide by these terms and\nconditions, do not demonstrate your acceptance and do\nnot install or use the Program.\nYou should have received a copy of the license along\nwith this file. If not, see\n<http://resources.spinalcom.com/licenses.pdf>.\n-->\n\n<template>\n  <div>\n    <md-dialog :md-active.sync=\"showDialog\"\n               @md-closed=\"closeDialog(false)\">\n      <md-dialog-title>Rename {{ name }}</md-dialog-title>\n      <md-dialog-content>\n        <md-field>\n          <md-input v-model=\"inputValue\"></md-input>\n        </md-field>\n      </md-dialog-content>\n      <md-dialog-actions>\n        <md-button class=\"md-primary\"\n                   @click=\"closeDialog(false)\">Cancel</md-button>\n        <md-button class=\"md-primary\"\n                   @click=\"closeDialog(true)\">Accepte</md-button>\n      </md-dialog-actions>\n    </md-dialog>\n  </div>\n</template>\n\n<script>\nimport { SpinalGraphService } from 'spinal-env-viewer-graph-service';\nexport default {\n  name: \"dialogComponent\",\n  props: [\"onFinised\"],\n  data() {\n    return {\n      showDialog: true,\n      selectedNode: null,\n      name: \"\",\n      inputValue: \"\"\n    };\n  },\n  methods: {\n    opened(option) {\n      this.name = option.selectedNode.name.get();\n      this.inputValue = this.name;\n      console.log(\"opened rename\");\n      this.selectedNode = option.selectedNode;\n    },\n    removed(option) {\n      if (option.closeResult === true) {\n        let node = SpinalGraphService.getRealNode(this.selectedNode.id.get());\n\n        node.info.name.set(this.inputValue);\n        this.showDialog = false;\n      }\n      this.showDialog = false;\n    },\n    closeDialog(closeResult) {\n      if (typeof this.onFinised === \"function\") {\n        this.onFinised({ closeResult, inputValue: this.inputValue });\n      }\n    }\n  }\n};\n</script>","<!--\nCopyright 2018 SpinalCom - www.spinalcom.com\n\nThis file is part of SpinalCore.\n\nPlease read all of the following terms and conditions\nof the Free Software license Agreement (\"Agreement\")\ncarefully.\n\nThis Agreement is a legally binding contract between\nthe Licensee (as defined below) and SpinalCom that\nsets forth the terms and conditions that govern your\nuse of the Program. By installing and/or using the\nProgram, you agree to abide by all the terms and\nconditions stated or referenced herein.\n\nIf you do not agree to abide by these terms and\nconditions, do not demonstrate your acceptance and do\nnot install or use the Program.\nYou should have received a copy of the license along\nwith this file. If not, see\n<http://resources.spinalcom.com/licenses.pdf>.\n-->\n\n<template>\n  <div>\n    <md-dialog :md-active.sync=\"showDialog\"\n               @md-closed=\"closeDialog(false)\">\n      <md-dialog-title>Research element</md-dialog-title>\n      <md-dialog-content>\n        <md-field>\n          <md-input v-model=\"inputValue\"></md-input>\n        </md-field>\n      </md-dialog-content>\n      <md-dialog-actions>\n        <md-button class=\"md-primary\"\n                   @click=\"closeDialog(false)\">Cancel</md-button>\n        <md-button class=\"md-primary\"\n                   @click=\"closeDialog(true)\">Accepte</md-button>\n      </md-dialog-actions>\n    </md-dialog>\n  </div>\n</template>\n\n<script>\nimport { SpinalGraphService } from 'spinal-env-viewer-graph-service';\nexport default {\n  name: \"dialogComponent\",\n  props: [\"onFinised\"],\n  data() {\n    return {\n      showDialog: true,\n      selectedNode: null,\n      inputValue: \"\"\n    };\n  },\n  methods: {\n    opened(option) {\n      this.selectedNode = option.selectedNode;\n      this.viewer = window.spinal.ForgeViewer.viewer;\n    },\n    removed(option) {\n      if (option.closeResult === true) {\n        let realNode = SpinalGraphService.getRealNode(this.selectedNode.id.get());\n        let self = this;\n\n        realNode.find([\"hasGeographicSite\", \"hasGeographicBuilding\", \"hasGeographicFloor\", \"hasGeographicZone\", \"hasGeographicRoom\", \"hasBIMObject\"],\n          function(node) { if (node.info.type.get() === \"BIMObject\") return true; }).then(lst => {\n            self.viewer.clearSelection();\n\n            for (var i = 0; i < lst.length; i++) {\n              if (lst[i].info.name.get() === self.inputValue )\n                self.viewer.select([ lst[i].info.dbid.get() ]);\n            }\n        });\n\n        self.showDialog = false;\n      }\n      this.showDialog = false;\n    },\n    closeDialog(closeResult) {\n      if (typeof this.onFinised === \"function\") {\n        this.onFinised({ closeResult, inputValue: this.inputValue });\n      }\n    }\n  }\n};\n</script>","<template>\n  <md-dialog :md-active.sync=\"showDialog\" @md-closed=\"closeDialog(false)\">\n    <md-dialog-title>Edit Color</md-dialog-title>\n\n    <md-dialog-content class=\"colorDialogContainer\">\n      <chrome-picker v-model=\"color\" />\n    </md-dialog-content>\n\n    <md-dialog-actions>\n      <md-button class=\"md-primary\" @click=\"closeDialog(false)\"\n        >Cancel</md-button\n      >\n      <md-button class=\"md-primary\" @click=\"closeDialog(true)\">Save</md-button>\n    </md-dialog-actions>\n  </md-dialog>\n</template>\n\n<script>\nimport { SpinalGraphService } from \"spinal-env-viewer-graph-service\";\nimport { Chrome } from \"vue-color\";\n\nexport default {\n  name: \"editColordialogComponent\",\n  props: [\"onFinised\"],\n  components: {\n    \"chrome-picker\": Chrome,\n  },\n  data() {\n    return {\n      showDialog: true,\n      color: \"#000000\",\n      selectedNode: null,\n    };\n    \n  },\n  methods: {\n    opened(option) {\n      if (option.selectedNode.color) {\n        this.color = option.selectedNode.color.get();\n      }\n      this.selectedNode = SpinalGraphService.getRealNode(\n        option.selectedNode.id.get()\n      );\n    },\n    removed(option) {\n      if (option.closeResult === true) {\n        const color =\n          typeof this.color === \"string\" ? this.color : this.color.hex;\n        if (this.selectedNode.info.color) {\n          this.selectedNode.info.color.set(color);\n        } else {\n          this.selectedNode.info.add_attr({ color: color });\n        }\n      }\n      this.showDialog = false;\n    },\n    closeDialog(closeResult) {\n      if (typeof this.onFinised === \"function\") {\n        this.onFinised({ closeResult, inputValue: this.inputValue });\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\n.colorDialogContainer {\n}\n</style>","/*\n * Copyright 2018 SpinalCom - www.spinalcom.com\n *\n * This file is part of SpinalCore.\n *\n * Please read all of the following terms and conditions\n * of the Free Software license Agreement (\"Agreement\")\n * carefully.\n *\n * This Agreement is a legally binding contract between\n * the Licensee (as defined below) and SpinalCom that\n * sets forth the terms and conditions that govern your\n * use of the Program. By installing and/or using the\n * Program, you agree to abide by all the terms and\n * conditions stated or referenced herein.\n *\n * If you do not agree to abide by these terms and\n * conditions, do not demonstrate your acceptance and do\n * not install or use the Program.\n * You should have received a copy of the license along\n * with this file. If not, see\n * <http://resources.spinalcom.com/licenses.pdf>.\n */\n\nconst G_root = typeof window == \"undefined\" ? global : window;\nconst SpinalPanelManagerService = require(\"./SpinalPanelManagerService\");\nconst SpinalPanelApp = require(\"./SpinalPanelApp\");\n\nif (typeof G_root.spinal === \"undefined\") G_root.spinal = {};\nif (typeof G_root.spinal.spinalPanelManagerService === \"undefined\")\n  G_root.spinal.spinalPanelManagerService = new SpinalPanelManagerService();\nconst SpinalMountExtention = require(\"./SpinalMountExtention.js\")(\n  G_root.spinal.spinalPanelManagerService,\n  SpinalPanelApp\n);\n\nmodule.exports = {\n  spinalPanelManagerService: G_root.spinal.spinalPanelManagerService,\n  SpinalPanelApp,\n  SpinalMountExtention,\n  install(Vue) {\n    Vue.prototype.$spinalPanelManagerService =\n      G_root.spinal.spinalPanelManagerService;\n  }\n};\n","/*\n * Copyright 2018 SpinalCom - www.spinalcom.com\n *\n * This file is part of SpinalCore.\n *\n * Please read all of the following terms and conditions\n * of the Free Software license Agreement (\"Agreement\")\n * carefully.\n *\n * This Agreement is a legally binding contract between\n * the Licensee (as defined below) and SpinalCom that\n * sets forth the terms and conditions that govern your\n * use of the Program. By installing and/or using the\n * Program, you agree to abide by all the terms and\n * conditions stated or referenced herein.\n *\n * If you do not agree to abide by these terms and\n * conditions, do not demonstrate your acceptance and do\n * not install or use the Program.\n * You should have received a copy of the license along\n * with this file. If not, see\n * <http://resources.spinalcom.com/licenses.pdf>.\n */\n\n/**\n *  Containter like service to register and get applications relative to a hookname\n *\n * @property {object} panels key = panelName, value = an instance of SpinalPanelApp\n * @class SpinalPanelManagerService\n */\nclass SpinalPanelManagerService {\n  /**\n   *Creates an instance of SpinalPanelManagerService.\n   * @memberof SpinalPanelManagerService\n   */\n  constructor() {\n    this.panels = {};\n  }\n\n  /**\n   * method to register an Panel Application\n   *\n   * @param {string} panelName the name of the panel\n   * @param {SpinalPanelApp} spinalPanelApp the application\n   * @memberof SpinalPanelManagerService\n   */\n  registerPanel(panelName, spinalPanelApp) {\n    this.panels[panelName] = spinalPanelApp;\n  }\n\n  /**\n   *\n   *\n   * @param {*} panelName\n   * @param {*} option\n   * @returns {bool}\n   * @memberof SpinalPanelManagerService\n   */\n  openPanel(panelName, option) {\n    if (typeof this.panels[panelName] !== \"undefined\")\n      return this.panels[panelName].openPanel(option);\n    return false;\n  }\n  /**\n   *\n   *\n   * @param {*} panelName\n   * @param {*} option\n   * @returns {bool}\n   * @memberof SpinalPanelManagerService\n   */\n  closePanel(panelName, option) {\n    if (typeof this.panels[panelName] !== \"undefined\")\n      return this.panels[panelName].closePanel(option);\n    return false;\n  }\n  /**\n   *\n   *\n   * @param {*} panelName\n   * @param {*} option\n   * @returns {bool}\n   * @memberof SpinalPanelManagerService\n   */\n  tooglePanel(panelName, option) {\n    if (typeof this.panels[panelName] !== \"undefined\")\n      return this.panels[panelName].tooglePanel(option);\n    return false;\n  }\n}\n\nmodule.exports = SpinalPanelManagerService;\n","/*\n * Copyright 2018 SpinalCom - www.spinalcom.com\n *\n * This file is part of SpinalCore.\n *\n * Please read all of the following terms and conditions\n * of the Free Software license Agreement (\"Agreement\")\n * carefully.\n *\n * This Agreement is a legally binding contract between\n * the Licensee (as defined below) and SpinalCom that\n * sets forth the terms and conditions that govern your\n * use of the Program. By installing and/or using the\n * Program, you agree to abide by all the terms and\n * conditions stated or referenced herein.\n *\n * If you do not agree to abide by these terms and\n * conditions, do not demonstrate your acceptance and do\n * not install or use the Program.\n * You should have received a copy of the license along\n * with this file. If not, see\n * <http://resources.spinalcom.com/licenses.pdf>.\n */\n\n/**\n * Base interface like class of a panel\n *\n * @class SpinalPanelApp\n */\nclass SpinalPanelApp {\n  constructor() {}\n\n  openPanel(option) {}\n  closePanel(option) {}\n  tooglePanel(option) {}\n}\n\nmodule.exports = SpinalPanelApp;\n","/*\n * Copyright 2018 SpinalCom - www.spinalcom.com\n *\n * This file is part of SpinalCore.\n *\n * Please read all of the following terms and conditions\n * of the Free Software license Agreement (\"Agreement\")\n * carefully.\n *\n * This Agreement is a legally binding contract between\n * the Licensee (as defined below) and SpinalCom that\n * sets forth the terms and conditions that govern your\n * use of the Program. By installing and/or using the\n * Program, you agree to abide by all the terms and\n * conditions stated or referenced herein.\n *\n * If you do not agree to abide by these terms and\n * conditions, do not demonstrate your acceptance and do\n * not install or use the Program.\n * You should have received a copy of the license along\n * with this file. If not, see\n * <http://resources.spinalcom.com/licenses.pdf>.\n */\n\nfunction configInit(option) {\n  const cfg = {};\n  if (!option.vueMountComponent) {\n    throw new Error(\"mount : missing option vueMountComponent\");\n  }\n\n  cfg.name = option.name || \"SpinalMount\";\n  cfg.vueMountComponent = option.vueMountComponent;\n  cfg.parentContainer = option.parentContainer || document.body;\n  return cfg;\n}\n\nfunction getDialog() {\n  if (!this.dialog) {\n    this.dialog = document.createElement(\"div\");\n    const _compo = document.createElement(\"div\");\n    this.dialog.className = \"spinal-modal-container\";\n    this.cfg.parentContainer.appendChild(this.dialog);\n    this.dialog.appendChild(_compo);\n    this.compoment = new this.cfg.vueMountComponent({\n      propsData: {\n        onFinised: this.onFinised.bind(this)\n      }\n    }).$mount(_compo);\n  }\n  return this.dialog;\n}\n\n/**\n *\n * @param {*} spinalPanelManagerService\n * @param {*} SpinalPanelApp\n * @returns {object} { mount }\n */\nmodule.exports = function(spinalPanelManagerService, SpinalPanelApp) {\n  return {\n    /**\n```js\n{\n  name: \"myCustomDialogName\",\n  vueMountComponent: Vue.extend(aVueCompomentDialog),\n  parentContainer: document.body\n}```\n     *\n     * @param {*} option\n     */\n    mount(option) {\n      let cfg = configInit(option);\n      const SpinalMount = class extends SpinalPanelApp {\n        constructor() {\n          super();\n          this.cfg = cfg;\n          this.dialog = null;\n          this.compoment = null;\n        }\n\n        openPanel(opt) {\n          getDialog.call(this);\n          this.compoment.opened(opt);\n        }\n        closePanel(opt) {\n          if (this.dialog !== null) {\n            this.compoment.removed(opt);\n            this.dialog.remove();\n            this.dialog = null;\n            this.compoment = null;\n          }\n        }\n\n        tooglePanel(opt) {\n          if (this.dialog !== null) {\n            this.closePanel(opt);\n          } else {\n            this.openPanel(opt);\n          }\n        }\n\n        /**\n         * called when dialog closed by the dialog itself\n         */\n        onFinised(closeResult) {\n          this.closePanel(closeResult);\n        }\n      };\n      let SpinalMountInstance = new SpinalMount();\n      spinalPanelManagerService.registerPanel(cfg.name, SpinalMountInstance);\n    }\n  };\n};\n","/*\n * Copyright 2018 SpinalCom - www.spinalcom.com\n *\n * This file is part of SpinalCore.\n *\n * Please read all of the following terms and conditions\n * of the Free Software license Agreement (\"Agreement\")\n * carefully.\n *\n * This Agreement is a legally binding contract between\n * the Licensee (as defined below) and SpinalCom that\n * sets forth the terms and conditions that govern your\n * use of the Program. By installing and/or using the\n * Program, you agree to abide by all the terms and\n * conditions stated or referenced herein.\n *\n * If you do not agree to abide by these terms and\n * conditions, do not demonstrate your acceptance and do\n * not install or use the Program.\n * You should have received a copy of the license along\n * with this file. If not, see\n * <http://resources.spinalcom.com/licenses.pdf>.\n */\n\nconst G_root = typeof window == \"undefined\" ? global : window;\nconst SpinalContextMenuService = require(\"./SpinalContextMenuService\");\nconst SpinalContextApp = require(\"./SpinalContextApp\");\nconst Constant = require('./constants');\nif (typeof G_root.spinal === \"undefined\") G_root.spinal = {};\nif (typeof G_root.spinal.spinalContextMenuService === \"undefined\")\n  G_root.spinal.spinalContextMenuService = new SpinalContextMenuService();\n\nmodule.exports = {\n  constants: Constant,\n  spinalContextMenuService: G_root.spinal.spinalContextMenuService,\n  SpinalContextApp,\n  install(Vue) {\n    Vue.prototype.$spinalContextMenuService =\n      G_root.spinal.spinalContextMenuService;\n  }\n};\n","/*\n * Copyright 2018 SpinalCom - www.spinalcom.com\n *\n * This file is part of SpinalCore.\n *\n * Please read all of the following terms and conditions\n * of the Free Software license Agreement (\"Agreement\")\n * carefully.\n *\n * This Agreement is a legally binding contract between\n * the Licensee (as defined below) and SpinalCom that\n * sets forth the terms and conditions that govern your\n * use of the Program. By installing and/or using the\n * Program, you agree to abide by all the terms and\n * conditions stated or referenced herein.\n *\n * If you do not agree to abide by these terms and\n * conditions, do not demonstrate your acceptance and do\n * not install or use the Program.\n * You should have received a copy of the license along\n * with this file. If not, see\n * <http://resources.spinalcom.com/licenses.pdf>.\n */\n\nimport * as Q from 'q';\nvar debounce = require('lodash.debounce');\n\n/**\n *  Containter like service to register and get applications relative to a hookname\n *\n * @property {object} apps key = hookname, value array of apps\n * @class SpinalContextMenuService\n */\nclass SpinalContextMenuService {\n  /**\n   *Creates an instance of SpinalContextMenuService.\n   * @memberof SpinalContextMenuService\n   */\n  constructor() {\n    this.apps = {};\n    this.promiseByAppProfileId = {};\n    this.appRdy = Q.defer();\n    this.debouncedRdy = debounce(\n      () => {\n        this.appRdy.resolve();\n        this.debouncedRdy = () => {};\n      },\n      1000,\n      { leading: false, trailing: true }\n    );\n  }\n\n  // waitRdy() {\n  //   this.appRdy.promise;\n  // }\n\n  /**\n   * Return true if user has access to this appProfile\n   * @param appProfileId\n   * @return {PromiseLike<boolean > | Promise<boolean>}\n   */\n  async hasUserRight(appProfileId) {\n    this.debouncedRdy();\n    await window.spinal.spinalSystem.init();\n    const path =\n      '/etc/UserProfileDir/' + window.spinal.spinalSystem.getUser().username;\n    const userProfile = await window.spinal.spinalSystem.load(path);\n    let res = false;\n    if (userProfile) {\n      for (let i = 0; i < userProfile.appProfiles.length && !res; i++) {\n        res = ((1 << userProfile.appProfiles[i]) & appProfileId) !== 0;\n      }\n    }\n    return res;\n  }\n\n  /**\n   * method to register the Application to a hook\n   *\n   * @param {string} hookname the place where is application button is located\n   * @param {SpinalContextApp} spinalContextApp the application\n   * @param {number} appProfileId id of the group that can use the application\n   * button\n   * @memberof SpinalContextMenuService\n   */\n  registerApp(hookname, spinalContextApp, appProfileId) {\n    this.debouncedRdy();\n    if (typeof appProfileId === 'undefined') {\n      console.warn(\n        'Deprecated: The usage of this function without the third' +\n          ' parameter appProfileId is deprecated your button is lock for admin' +\n          ' only until you set the third parameter'\n      );\n      appProfileId = 1;\n    }\n    // get the array of apps of the hook\n    let appsInHooks = this.apps[hookname];\n\n    // create the array if not exist\n    if (!(appsInHooks instanceof Array)) {\n      appsInHooks = this.apps[hookname] = [];\n    }\n\n    if (!this.promiseByAppProfileId.hasOwnProperty(appProfileId)) {\n      this.promiseByAppProfileId[appProfileId] =\n        this.hasUserRight(appProfileId);\n    }\n\n    this.promiseByAppProfileId[appProfileId].then((hasAccess) => {\n      // push the app if not exist ans user has access to the button\n      if (hasAccess && appsInHooks.indexOf(spinalContextApp) === -1) {\n        appsInHooks.push(spinalContextApp);\n      }\n    });\n  }\n\n  /**\n   * method to get the applications registered to a hookname\n   *\n   * @param {String} hookname\n   * @param {object} option\n   * @memberof SpinalContextMenuService\n   * @returns {Promise} resolve : [spinalContextApp, ...]; reject: Error\n   */\n  async getApps(hookname, option) {\n    await this.appRdy.promise;\n    // get the array of apps of the hook\n    let appsInHooks = this.apps[hookname];\n\n    // create the array if not exist\n    if (!(appsInHooks instanceof Array)) {\n      return Promise.resolve([]);\n    }\n    let promises = appsInHooks.map(async function (e, idx) {\n      try {\n        const res = await e.isShown(option);\n        return res === -1 ? -1 : e;\n      } catch (error) {\n        console.error(error);\n        return -1;\n      }\n    });\n    try {\n      const appRes = await Promise.all(promises);\n      return appRes.filter((itm) => itm !== -1);\n    } catch (error) {\n      console.error(error);\n      return [];\n    }\n  }\n}\n\nmodule.exports = SpinalContextMenuService;\n","/*\n * Copyright 2018 SpinalCom - www.spinalcom.com\n *\n * This file is part of SpinalCore.\n *\n * Please read all of the following terms and conditions\n * of the Free Software license Agreement (\"Agreement\")\n * carefully.\n *\n * This Agreement is a legally binding contract between\n * the Licensee (as defined below) and SpinalCom that\n * sets forth the terms and conditions that govern your\n * use of the Program. By installing and/or using the\n * Program, you agree to abide by all the terms and\n * conditions stated or referenced herein.\n *\n * If you do not agree to abide by these terms and\n * conditions, do not demonstrate your acceptance and do\n * not install or use the Program.\n * You should have received a copy of the license along\n * with this file. If not, see\n * <http://resources.spinalcom.com/licenses.pdf>.\n */\n\n/**\n *  Interface like class to define a Contextual Application button\n * @see https://material.io/tools/icons/?style=baseline for material icons\n *\n * @class SpinalContextApp\n * @property {string} label=notset short name to be shown in the application\n * @property {string} description description of what the Application button do\n * @property {object} buttonCfg Object configuration of the Application button\n * @property {string} buttonCfg.icon=tab can be a font-awsome or material icon string\n * @property {string} buttonCfg.icon_type=in Where to place the icon in the `md-icon`. Should be one of theses `class`, `in`, `src`\n * @property {string} buttonCfg.backgroundColor=#0000FF backgroud color of the button\n * @property {string} buttonCfg.fontColor=#FFFFFF font color of the button\n * @property {objet} [badgeCfg] Object configuration of the Application button badge\n * @property {string} badgeCfg.label string shown in a badge; if empty it's not shown\n * @property {string} badgeCfg.backgroundColor=#FF0000 backgroud color of the badge\n * @property {string} badgeCfg.fontColor=#FFFFFF font color of the badge\n */\nclass SpinalContextApp {\n  /**\n   * Creates an instance of SpinalContextApp.\n   * @param {string} label=notset short name to be shown in the application\n   * @param {string} description description of what the Application button do\n   * @param {object} buttonCfg Object configuration of the Application button\n   * @param {string} buttonCfg.icon=tab can be a font-awsome or material icon string\n   * @param {string} buttonCfg.icon_type=in Where to place the icon in the `md-icon`. Should be one of theses `class`, `in`, `src`\n   * @param {string} buttonCfg.backgroundColor=#0000FF backgroud color of the button\n   * @param {string} buttonCfg.fontColor=#FFFFFF font color of the button\n   * @param {objet} [badgeCfg] Object configuration of the Application button badge\n   * @param {string} badgeCfg.label string shown in a badge; if empty it's not shown\n   * @param {string} badgeCfg.backgroundColor=#FF0000 backgroud color of the badge\n   * @param {string} badgeCfg.fontColor=#FFFFFF font color of the badge\n   * @memberof SpinalContextApp\n   */\n  constructor(label, description, buttonCfg, badgeCfg = {}) {\n    this.label = label || \"notset\";\n    this.description = description || \"\";\n    this.buttonCfg = {\n      icon: buttonCfg.icon || \"tab\",\n      icon_type: buttonCfg.icon_type || \"in\",\n      backgroundColor: colorHash(buttonCfg.backgroundColor || \"#0000FF\"),\n      fontColor: colorHash(buttonCfg.fontColor || \"#FFFFFF\")\n    };\n\n    this.badgeCfg = {\n      label: badgeCfg.label || \"\",\n      backgroundColor: colorHash(badgeCfg.backgroundColor || \"#FF0000\"),\n      fontColor: colorHash(badgeCfg.fontColor || \"#FFFFFF\")\n    };\n  }\n\n  /**\n   * Method called by `SpinalContextMenuService.getApps`\n   * to filter the Application button to show in the context hook\n   *\n   * @param {object} option\n   * @memberof SpinalContextApp\n   * @returns {Promise} Resolve: not shown if === -1;\n   */\n  isShown(option) {}\n\n  /**\n   * Method to call on click of the application button\n   *\n   * @param {object} option {}\n   * @memberof SpinalContextApp\n   */\n  action(option) {}\n}\n\nmodule.exports = SpinalContextApp;\n\nfunction colorHash(color) {\n  if (color[0] === \"#\") return color;\n  return \"#\" + color;\n}\n","\n\nmodule.exports = {\n  ADMINISTRATEUR: 'ADMINISTRATEUR',\n  MAINTENEUR: 'MAINTENEUR',\n  INTEGRATEUR: 'INTEGRATEUR',\n  ASSET_MANAGEUR: 'ASSET MANAGER',\n};","/*\n * Copyright 2018 SpinalCom - www.spinalcom.com\n *\n * This file is part of SpinalCore.\n *\n * Please read all of the following terms and conditions\n * of the Free Software license Agreement (\"Agreement\")\n * carefully.\n *\n * This Agreement is a legally binding contract between\n * the Licensee (as defined below) and SpinalCom that\n * sets forth the terms and conditions that govern your\n * use of the Program. By installing and/or using the\n * Program, you agree to abide by all the terms and\n * conditions stated or referenced herein.\n *\n * If you do not agree to abide by these terms and\n * conditions, do not demonstrate your acceptance and do\n * not install or use the Program.\n * You should have received a copy of the license along\n * with this file. If not, see\n * <http://resources.spinalcom.com/licenses.pdf>.\n */\n\nconst {\n\tSpinalContextApp\n} = require(\"spinal-env-viewer-context-menu-service\");\nconst {\n\tspinalPanelManagerService\n} = require(\"spinal-env-viewer-panel-manager-service\");\n\nclass SpinalContextDelete extends SpinalContextApp {\n\tconstructor() {\n\t\tsuper(\"Delete button\", \"delete\", {\n\t\t\ticon: \"delete\",\n\t\t\ticon_type: \"in\",\n      backgroundColor: \"#FF0000\",\n      fontColor: \"#FFFFFF\"\n\t\t});\n\t}\n\n\tisShown() {\n        return (Promise.resolve(true));\n\t}\n\n\taction(option) {\n    spinalPanelManagerService.openPanel(\"standardButtonDelete\", option);\n\t}\n}\n\nexport { SpinalContextDelete };\n","/*\n * Copyright 2018 SpinalCom - www.spinalcom.com\n *\n * This file is part of SpinalCore.\n *\n * Please read all of the following terms and conditions\n * of the Free Software license Agreement (\"Agreement\")\n * carefully.\n *\n * This Agreement is a legally binding contract between\n * the Licensee (as defined below) and SpinalCom that\n * sets forth the terms and conditions that govern your\n * use of the Program. By installing and/or using the\n * Program, you agree to abide by all the terms and\n * conditions stated or referenced herein.\n *\n * If you do not agree to abide by these terms and\n * conditions, do not demonstrate your acceptance and do\n * not install or use the Program.\n * You should have received a copy of the license along\n * with this file. If not, see\n * <http://resources.spinalcom.com/licenses.pdf>.\n */\n\nconst {\n  SpinalContextApp\n} = require(\"spinal-env-viewer-context-menu-service\");\n\nconst {\n  spinalPanelManagerService\n} = require(\"spinal-env-viewer-panel-manager-service\");\n\n\nclass SpinalContextRename extends SpinalContextApp {\n  constructor() {\n    super(\"Rename button\", \"rename\", {\n      icon: \"text_format\",\n      icon_type: \"in\",\n      backgroundColor: \"#FF0000\",\n      fontColor: \"#FFFFFF\"\n    });\n  }\n\n  isShown(option) {\n    // const type = option.selectedNode.type.get();\n    // if (type === \"SpinalService\" || type === \"scene\" || type ===\n    //   \"SpinalContext\" || type === \"BimFile\")\n    //   return (Promise.resolve(-1))\n    return (Promise.resolve(true));\n  }\n\n  action(option) {\n    spinalPanelManagerService.openPanel(\"standardButtonRename\", option);\n  }\n}\n\nexport {\n  SpinalContextRename\n};","/*\n * Copyright 2018 SpinalCom - www.spinalcom.com\n *\n * This file is part of SpinalCore.\n *\n * Please read all of the following terms and conditions\n * of the Free Software license Agreement (\"Agreement\")\n * carefully.\n *\n * This Agreement is a legally binding contract between\n * the Licensee (as defined below) and SpinalCom that\n * sets forth the terms and conditions that govern your\n * use of the Program. By installing and/or using the\n * Program, you agree to abide by all the terms and\n * conditions stated or referenced herein.\n *\n * If you do not agree to abide by these terms and\n * conditions, do not demonstrate your acceptance and do\n * not install or use the Program.\n * You should have received a copy of the license along\n * with this file. If not, see\n * <http://resources.spinalcom.com/licenses.pdf>.\n */\n\nimport { SpinalGraphService } from 'spinal-env-viewer-graph-service';\n\nconst {\n  SpinalContextApp\n} = require(\"spinal-env-viewer-context-menu-service\");\n\nimport {\n  utilities,\n  SELECTrelationList,\n  isShownParam\n} from \"./utilities\";\n\nclass SpinalContextSelectBIMObject extends SpinalContextApp {\n  constructor() {\n    super(\"select BIMObject button\", \"select BIMObject button\", {\n      icon: \"devices\",\n      icon_type: \"in\"\n    });\n  }\n\n  isShown(option) {\n    const type = option.selectedNode.type.get();\n    if (isShownParam.indexOf(type) > -1) { return (Promise.resolve(true)); }\n    return (Promise.resolve(-1));\n  }\n\n  action(option) {\n    let realNode = SpinalGraphService.getRealNode(option.selectedNode.id\n      .get());\n    this.viewer = window.spinal.ForgeViewer.viewer;\n    let self = this;\n    realNode.find(SELECTrelationList,\n      function (node) {\n        if (node.info.type.get() === \"BIMObject\") {\n          return true;\n        }\n      }).then(lst => {\n      self.viewer.clearSelection();\n      utilities.sortBIMObjectByModel(lst).then(lstByModel => {\n        for (let i = 0; i < lstByModel.length; i++) {\n          const element = lstByModel[i];\n          for (let j = 0; j < element.model.modelScene.length; j++) {\n            const scene = element.model.modelScene[j];\n            // console.log(\"hello select\", element.dbid, scene.model);\n            scene.model.selector.setSelection(element.dbid, scene.model, \"selectOnly\");\n          }\n        }\n      });\n    });\n  }\n}\n\nexport {\n  SpinalContextSelectBIMObject\n};\n","/*\n * Copyright 2021 SpinalCom - www.spinalcom.com\n *\n * This file is part of SpinalCore.\n *\n * Please read all of the following terms and conditions\n * of the Free Software license Agreement (\"Agreement\")\n * carefully.\n *\n * This Agreement is a legally binding contract between\n * the Licensee (as defined below) and SpinalCom that\n * sets forth the terms and conditions that govern your\n * use of the Program. By installing and/or using the\n * Program, you agree to abide by all the terms and\n * conditions stated or referenced herein.\n *\n * If you do not agree to abide by these terms and\n * conditions, do not demonstrate your acceptance and do\n * not install or use the Program.\n * You should have received a copy of the license along\n * with this file. If not, see\n * <http://resources.spinalcom.com/licenses.pdf>.\n */\n\nimport { SpinalGraphService } from \"spinal-env-viewer-graph-service\";\n// import {\n//   // ROOMS_CATEGORY_RELATION,\n//   // ROOMS_TO_ELEMENT_RELATION,\n//   // ROOMS_GROUP_RELATION,\n//   // EQUIPMENTS_CATEGORY_RELATION,\n//   // EQUIPMENTS_TO_ELEMENT_RELATION,\n//   // EQUIPMENTS_GROUP_RELATION,\n//   // ROOMS_GROUP_CONTEXT,\n//   // ROOMS_GROUP,\n//   // ROOMS_CATEGORY,\n//   // EQUIPMENTS_GROUP_CONTEXT,\n//   // EQUIPMENTS_CATEGORY,\n//   // EQUIPMENTS_GROUP\n\n//   groupService\n\n// } from 'spinal-env-viewer-room-manager/services/service';\n\nimport { groupManagerService } from \"spinal-env-viewer-plugin-group-manager-service\";\n\nimport {\n  SITE_TYPE,\n  BUILDING_TYPE,\n  FLOOR_TYPE,\n  ZONE_TYPE,\n  ROOM_TYPE,\n  EQUIPMENT_TYPE,\n  SITE_RELATION,\n  BUILDING_RELATION,\n  FLOOR_RELATION,\n  ZONE_RELATION,\n  ROOM_RELATION,\n  EQUIPMENT_RELATION,\n  REFERENCE_RELATION,\n} from \"spinal-env-viewer-context-geographic-service/build/constants\";\n\nimport { SpinalBmsEndpoint } from \"spinal-model-bmsnetwork\";\n\nimport { CONSTANTS } from \"spinal-env-viewer-plugin-network-tree-service\";\n\n\nconst SELECTrelationList = [\n  SITE_RELATION,\n  BUILDING_RELATION,\n  FLOOR_RELATION,\n  ZONE_RELATION,\n  ROOM_RELATION,\n  EQUIPMENT_RELATION,\n  REFERENCE_RELATION,\n  `${REFERENCE_RELATION}.ROOM`,\n  \"hasBIMObject\", // for old system\n  // groupService.constants.CONTEXT_TO_CATEGORY_RELATION,\n  // groupService.constants.CATEGORY_TO_GROUP_RELATION,\n  // groupService.constants.GROUP_TO_ROOMS_RELATION,\n  // groupService.constants.GROUP_TO_EQUIPMENTS_RELATION,\n  // groupService.constants.GROUP_TO_ENDPOINT_RELATION,\n  groupManagerService.constants.CONTEXT_TO_CATEGORY_RELATION,\n  groupManagerService.constants.CATEGORY_TO_GROUP_RELATION,\n  ...Object.values(groupManagerService.constants.OLD_RELATIONS_TYPES),\n  `groupHas${ROOM_TYPE}`,\n  `groupHas${EQUIPMENT_TYPE}`,\n  `groupHas${SITE_TYPE}`,\n  `groupHas${BUILDING_TYPE}`,\n  `groupHas${FLOOR_TYPE}`,\n  `groupHas${ZONE_TYPE}`,\n  `groupHas${SpinalBmsEndpoint.nodeTypeName}`,\n  // CONSTANTS.NETWORK_RELATION,\n  // CONSTANTS.NETWORK_BIMOJECT_RELATION\n];\n\nconst isShownParam = [\n  SITE_TYPE,\n  BUILDING_TYPE,\n  FLOOR_TYPE,\n  ZONE_TYPE,\n  ROOM_TYPE,\n  EQUIPMENT_TYPE,\n  // ...groupService.constants.CONTEXTS_TYPES,\n  // ...groupService.constants.GROUPS_TYPES,\n  // groupService.constants.CATEGORY_TYPE\n  ...Object.values(groupManagerService.constants.OLD_CONTEXTS_TYPES),\n  ...Object.values(groupManagerService.constants.OLD_GROUPS_TYPES),\n  groupManagerService.constants.CATEGORY_TYPE,\n  `${ROOM_TYPE}Group`,\n  `${EQUIPMENT_TYPE}Group`,\n  `${SITE_TYPE}Group`,\n  `${BUILDING_TYPE}Group`,\n  `${FLOOR_TYPE}Group`,\n  `${ZONE_TYPE}Group`,\n  `${ROOM_TYPE}GroupContext`,\n  `${EQUIPMENT_TYPE}GroupContext`,\n  `${SITE_TYPE}GroupContext`,\n  `${BUILDING_TYPE}GroupContext`,\n  `${FLOOR_TYPE}GroupContext`,\n  `${ZONE_TYPE}GroupContext`,\n  // CONSTANTS.CONTEXT_TYPE,\n  // CONSTANTS.NETWORK_TYPE,\n];\n\nconst utilities = {\n  async sortBIMObjectByModel(arrayOfBIMObject) {\n    let arrayModel = [];\n    for (const key in spinal.BimObjectService.mappingBimFileIdModelId) {\n      if (spinal.BimObjectService.mappingBimFileIdModelId.hasOwnProperty(key)) {\n        const element = spinal.BimObjectService.mappingBimFileIdModelId[key];\n        let obj = {\n          dbid: [],\n          model: element,\n        };\n        arrayModel.push(obj);\n      }\n    }\n    for (let i = 0; i < arrayOfBIMObject.length; i++) {\n      SpinalGraphService._addNode(arrayOfBIMObject[i]);\n      let bim = SpinalGraphService.getNode(arrayOfBIMObject[i].info.id.get());\n      try {\n        let spinalModel =\n          window.spinal.BimObjectService.mappingBimFileIdModelId[\n            bim.bimFileId.get()\n          ];\n        if (spinalModel) {\n          for (let j = 0; j < arrayModel.length; j++) {\n            const element = arrayModel[j];\n            if (element.model.modelId === spinalModel.modelId) {\n              element.dbid.push(bim.dbid.get());\n            }\n          }\n        }\n      } catch (error) {\n        console.error(\"skip node because bimFileId is not defined\", error);\n      }\n    }\n    return arrayModel;\n  },\n};\n\nmodule.exports = {\n  SELECTrelationList,\n  isShownParam,\n  utilities,\n};\n","/*\n * Copyright 2018 SpinalCom - www.spinalcom.com\n *\n * This file is part of SpinalCore.\n *\n * Please read all of the following terms and conditions\n * of the Free Software license Agreement (\"Agreement\")\n * carefully.\n *\n * This Agreement is a legally binding contract between\n * the Licensee (as defined below) and SpinalCom that\n * sets forth the terms and conditions that govern your\n * use of the Program. By installing and/or using the\n * Program, you agree to abide by all the terms and\n * conditions stated or referenced herein.\n *\n * If you do not agree to abide by these terms and\n * conditions, do not demonstrate your acceptance and do\n * not install or use the Program.\n * You should have received a copy of the license along\n * with this file. If not, see\n * <http://resources.spinalcom.com/licenses.pdf>.\n */\n\nimport {\n  SpinalGraphService\n} from 'spinal-env-viewer-graph-service';\n\nconst {\n  SpinalContextApp\n} = require(\"spinal-env-viewer-context-menu-service\");\nimport {\n  SELECTrelationList,\n  utilities,\n  isShownParam\n} from \"./utilities\";\n\n\nclass SpinalContextFitToViewer extends SpinalContextApp {\n  constructor() {\n    super(\"fit button\", \"fit to viewer button\", {\n      icon: \"zoom_in\",\n      icon_type: \"in\"\n    });\n  }\n\n  isShown(option) {\n    const type = option.selectedNode.type.get();\n    if (isShownParam.indexOf(type) > -1)\n      return (Promise.resolve(true));\n    return (Promise.resolve(-1))\n  }\n\n  action(option) {\n    this.viewer = window.spinal.ForgeViewer.viewer\n    let self = this;\n    let realNode = SpinalGraphService.getRealNode(option.selectedNode.id\n      .get());\n    this.viewer = window.spinal.ForgeViewer.viewer\n\n    realNode.find(SELECTrelationList,\n      function(node) {\n        if (node.info.type.get() === \"BIMObject\") return true;\n      }).then(lst => {\n      utilities.sortBIMObjectByModel(lst).then(lstByModel => {\n        let arrayToFit = []\n        for (let i = 0; i < lstByModel.length; i++) {\n          const element = lstByModel[i];\n          let obj = {\n            model: element.model.modelScene[0].model,\n            selection: element.dbid\n          }\n          arrayToFit.push(obj);\n          obj.model.selector.setSelection(element.dbid, obj\n            .model,\n            \"selectOnly\")\n        }\n        self.viewer.fitToView(arrayToFit);\n      })\n    });\n  }\n}\n\n\nexport {\n  SpinalContextFitToViewer\n};","/*\n * Copyright 2018 SpinalCom - www.spinalcom.com\n *\n * This file is part of SpinalCore.\n *\n * Please read all of the following terms and conditions\n * of the Free Software license Agreement (\"Agreement\")\n * carefully.\n *\n * This Agreement is a legally binding contract between\n * the Licensee (as defined below) and SpinalCom that\n * sets forth the terms and conditions that govern your\n * use of the Program. By installing and/or using the\n * Program, you agree to abide by all the terms and\n * conditions stated or referenced herein.\n *\n * If you do not agree to abide by these terms and\n * conditions, do not demonstrate your acceptance and do\n * not install or use the Program.\n * You should have received a copy of the license along\n * with this file. If not, see\n * <http://resources.spinalcom.com/licenses.pdf>.\n */\n\nimport {\n  SpinalGraphService\n} from 'spinal-env-viewer-graph-service';\n\nconst {\n  SpinalContextApp\n} = require(\"spinal-env-viewer-context-menu-service\");\n\nimport {\n  utilities,\n  SELECTrelationList,\n  isShownParam\n} from \"./utilities\";\n\nclass SpinalContextIsolation extends SpinalContextApp {\n  constructor() {\n    super(\"isolation button\", \"zoom button\", {\n      icon: \"settings_overscan\",\n      icon_type: \"in\"\n    });\n  }\n\n  isShown(option) {\n    const type = option.selectedNode.type.get();\n    if (isShownParam.indexOf(type) > -1)\n      return (Promise.resolve(true));\n    return (Promise.resolve(-1))\n  }\n\n  action(option) {\n    this.viewer = window.spinal.ForgeViewer.viewer\n    let self = this;\n    let boolSameNode = false\n    let modelResetIsolate = []\n    let aggregateIsolation = []\n    let realNode = SpinalGraphService.getRealNode(option.selectedNode.id\n      .get());\n    if (this.lastNode == undefined) {\n      this.lastNode = realNode\n    } else {\n      aggregateIsolation = this.viewer.getAggregateIsolation()\n      if (this.lastNode.info.id.get() == realNode.info.id.get() &&\n        aggregateIsolation.length) {\n        boolSameNode = true\n      } else {\n        this.lastNode = realNode\n      }\n    }\n    if (boolSameNode) {\n      for (let i = 0; i < aggregateIsolation.length; i++) {\n        const element = aggregateIsolation[i];\n        self.viewer.isolate(0, element.model)\n      }\n    } else {\n      this.viewer = window.spinal.ForgeViewer.viewer\n      realNode.find(SELECTrelationList,\n        function (node) {\n          if (node.info.type.get() === \"BIMObject\") return true;\n        }).then(lst => {\n          utilities.sortBIMObjectByModel(lst).then(lstByModel => {\n            for (let i = 0; i < lstByModel.length; i++) {\n              const element = lstByModel[i];\n              for (let j = 0; j < element.model.modelScene\n                .length; j++) {\n                const scene = element.model.modelScene[j];\n                if (element.dbid.length != 0) {\n                  self.viewer.isolate(element.dbid, scene.model)\n                } else {\n                  let rootId = scene.model.getRootId()\n                  scene.model.getObjectTree((tree) => {\n                    let dbidRoot = tree.nodeAccess.dbIdToIndex[\n                      rootId]\n                    self.viewer.isolate([dbidRoot], scene.model)\n                  })\n                }\n              }\n            }\n          })\n        });\n    }\n  }\n}\n\nexport {\n  SpinalContextIsolation\n};","/*\n * Copyright 2018 SpinalCom - www.spinalcom.com\n *\n * This file is part of SpinalCore.\n *\n * Please read all of the following terms and conditions\n * of the Free Software license Agreement (\"Agreement\")\n * carefully.\n *\n * This Agreement is a legally binding contract between\n * the Licensee (as defined below) and SpinalCom that\n * sets forth the terms and conditions that govern your\n * use of the Program. By installing and/or using the\n * Program, you agree to abide by all the terms and\n * conditions stated or referenced herein.\n *\n * If you do not agree to abide by these terms and\n * conditions, do not demonstrate your acceptance and do\n * not install or use the Program.\n * You should have received a copy of the license along\n * with this file. If not, see\n * <http://resources.spinalcom.com/licenses.pdf>.\n */\n\nimport {\n  SpinalGraphService\n} from 'spinal-env-viewer-graph-service';\n\nconst {\n  SpinalContextApp\n} = require(\"spinal-env-viewer-context-menu-service\");\n\nimport {\n  utilities,\n  SELECTrelationList,\n  isShownParam\n} from \"spinal-env-viewer-plugin-standard_button/js/utilities\";\n\nimport { REFERENCE_RELATION } from \"spinal-env-viewer-context-geographic-service/build/constants\";\n\nclass SpinalContextIsolationReference extends SpinalContextApp {\n  constructor() {\n    super(\"Isolate only Reference Objects button\", \"zoom button\", {\n      icon: \"settings_overscan\",\n      icon_type: \"in\"\n    });\n  }\n\n  isShown(option) {\n    const type = option.selectedNode.type.get();\n    if (type == \"geographicFloor\") return (Promise.resolve(true));\n    return (Promise.resolve(-1))\n  }\n\n  action(option) {\n    this.viewer = window.spinal.ForgeViewer.viewer\n    let self = this;\n    let boolSameNode = false\n    let modelResetIsolate = []\n    let aggregateIsolation = []\n    let realNode = SpinalGraphService.getRealNode(option.selectedNode.id\n      .get());\n    if (this.lastNode == undefined) {\n      this.lastNode = realNode\n    } else {\n      aggregateIsolation = this.viewer.getAggregateIsolation()\n      if (this.lastNode.info.id.get() == realNode.info.id.get() &&\n        aggregateIsolation.length) {\n        boolSameNode = true\n      } else {\n        this.lastNode = realNode\n      }\n    }\n    if (boolSameNode) {\n      for (let i = 0; i < aggregateIsolation.length; i++) {\n        const element = aggregateIsolation[i];\n        self.viewer.isolate(0, element.model)\n      }\n    } else {\n      this.viewer = window.spinal.ForgeViewer.viewer\n      realNode.find(REFERENCE_RELATION,\n        function (node) {\n          if (node.info.type.get() === \"BIMObject\") return true;\n        }).then(lst => {\n          utilities.sortBIMObjectByModel(lst).then(lstByModel => {\n            for (let i = 0; i < lstByModel.length; i++) {\n              const element = lstByModel[i];\n              for (let j = 0; j < element.model.modelScene\n                .length; j++) {\n                const scene = element.model.modelScene[j];\n                if (element.dbid.length != 0) {\n                  self.viewer.isolate(element.dbid, scene.model)\n                } else {\n                  let rootId = scene.model.getRootId()\n                  scene.model.getObjectTree((tree) => {\n                    let dbidRoot = tree.nodeAccess.dbIdToIndex[\n                      rootId]\n                    self.viewer.isolate([dbidRoot], scene.model)\n                  })\n                }\n              }\n            }\n          })\n        });\n    }\n  }\n}\n\nexport {\n  SpinalContextIsolationReference\n};","/*\n * Copyright 2018 SpinalCom - www.spinalcom.com\n *\n * This file is part of SpinalCore.\n *\n * Please read all of the following terms and conditions\n * of the Free Software license Agreement (\"Agreement\")\n * carefully.\n *\n * This Agreement is a legally binding contract between\n * the Licensee (as defined below) and SpinalCom that\n * sets forth the terms and conditions that govern your\n * use of the Program. By installing and/or using the\n * Program, you agree to abide by all the terms and\n * conditions stated or referenced herein.\n *\n * If you do not agree to abide by these terms and\n * conditions, do not demonstrate your acceptance and do\n * not install or use the Program.\n * You should have received a copy of the license along\n * with this file. If not, see\n * <http://resources.spinalcom.com/licenses.pdf>.\n */\n\nconst {\n    SpinalContextApp\n} = require(\"spinal-env-viewer-context-menu-service\");\nconst {\n    spinalPanelManagerService\n} = require(\"spinal-env-viewer-panel-manager-service\");\n\nclass SpinalEditColor extends SpinalContextApp {\n    constructor() {\n        super(\"Edit color\", \"Edit color\", {\n            icon: \"color_lens\",\n            icon_type: \"in\",\n            backgroundColor: \"#FF0000\",\n            fontColor: \"#FFFFFF\"\n        });\n    }\n\n    isShown() {\n        return (Promise.resolve(true));\n    }\n\n    action(option) {\n        spinalPanelManagerService.openPanel(\"editColordialogComponent\", option);\n    }\n}\n\nexport { SpinalEditColor };\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst bimService_1 = require(\"./bimObjects/bimService\");\nexports.bimObjectManagerService = bimService_1.default;\n//# sourceMappingURL=index.js.map",null,"\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass BimObjectManagerService {\n    constructor() { }\n    getAllBimObjectsProperties(model) {\n        return this.getBimObjectProperties([\n            {\n                model: model,\n                selection: this.getLeafDbIds(model).selection\n            }\n        ]);\n    }\n    getBimObjectProperties(argBimObjects) {\n        // let properties = [];\n        let bimOjects = Array.isArray(argBimObjects)\n            ? argBimObjects\n            : [argBimObjects];\n        let promises = bimOjects.map(el => {\n            return this._getProperties(el.model, el.selection);\n        });\n        return Promise.all(promises).then(res => {\n            return res;\n        });\n    }\n    getLeafDbIds(model, rootId) {\n        const tree = model.getInstanceTree();\n        const dbIds = [];\n        if (typeof rootId === \"undefined\") {\n            rootId = [tree.nodeAccess.rootId];\n        }\n        else {\n            rootId = Array.isArray(rootId) ? rootId : [rootId];\n        }\n        rootId.forEach(el => {\n            const queue = [el];\n            let hasChildren;\n            while (queue.length) {\n                let id = queue.pop();\n                hasChildren = false;\n                tree.enumNodeChildren(id, childId => {\n                    hasChildren = true;\n                    queue.push(childId);\n                });\n                if (!hasChildren) {\n                    dbIds.push(id);\n                }\n            }\n        });\n        return { model: model, selection: dbIds };\n    }\n    getBimObjectsByPropertiesName(model, properties) {\n        return this.getAllBimObjectsProperties(model).then(res => {\n            let result = [];\n            for (let i = 0; i < res.length; i++) {\n                const element = res[i];\n                for (let j = 0; j < element.properties.length; j++) {\n                    const property = element.properties[j];\n                    if (typeof this._getLabel(property, properties) !== \"undefined\") {\n                        result.push(property);\n                    }\n                    // }\n                }\n                return result;\n            }\n        });\n    }\n    getBimObjectsValidated(referential, regEx) {\n        return this.getBimObjectProperties(referential).then(res => {\n            return res.map(element => {\n                return {\n                    model: element.model,\n                    properties: element.properties.filter(el => {\n                        return this._isValid(el, regEx);\n                    })\n                };\n            });\n        });\n    }\n    getBimObjectsByName(model, bimObjectName, labelName) {\n        return new Promise(resolve => {\n            model.search(bimObjectName.trim(), (res) => __awaiter(this, void 0, void 0, function* () {\n                let properties = yield this.getBimObjectProperties([\n                    { model: model, selection: res }\n                ]);\n                resolve(properties);\n            }), () => {\n                resolve([]);\n            }, labelName);\n        });\n    }\n    ////////////////////////////////////////////////////////////////////////\n    //                             PRIVATES                               //\n    ////////////////////////////////////////////////////////////////////////\n    _getProperties(model, selection) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let properties = selection.map(el => {\n                return new Promise(resolve => {\n                    model.getProperties(el, res => {\n                        // properties.push(res);\n                        resolve(res);\n                    }, err => {\n                        resolve(undefined);\n                    });\n                });\n            });\n            return {\n                model: model,\n                properties: yield Promise.all(properties)\n            };\n        });\n    }\n    _getAllDbIds(model) {\n        var instanceTree = model.getData().instanceTree;\n        var allDbIdsStr = Object.keys(instanceTree.nodeAccess.dbIdToIndex);\n        return allDbIdsStr.map(function (id) {\n            return parseInt(id);\n        });\n    }\n    _getLabel(bim, properties) {\n        for (let i = 0; i < properties.length; i++) {\n            const propertieValue = properties[i].value;\n            const propertyName = properties[i].name;\n            const found = bim.properties.find(el => {\n                return typeof propertieValue === \"undefined\" ||\n                    propertieValue.length === 0\n                    ? el.displayName.toLowerCase() ===\n                        propertyName.trim().toLocaleLowerCase()\n                    : el.displayName.toLowerCase() ===\n                        propertyName.trim().toLocaleLowerCase() &&\n                        propertieValue == el.displayValue;\n            });\n            if (typeof found === \"undefined\") {\n                return undefined;\n            }\n        }\n        return true;\n    }\n    _isValid(el, regEx) {\n        for (let i = 0; i < regEx.length; i++) {\n            let nameRegex = regEx[i].nameRegex;\n            let valueRegex = regEx[i].valueRegex;\n            let found = el.properties.find(res => {\n                if (typeof valueRegex === \"undefined\") {\n                    return nameRegex.test(res.displayName);\n                }\n                return (nameRegex.test(res.displayName) && valueRegex.test(res.displayValue));\n            });\n            if (typeof found === \"undefined\") {\n                return false;\n            }\n        }\n        return true;\n    }\n}\nexports.default = new BimObjectManagerService();\n//# sourceMappingURL=bimService.js.map",null,"\"use strict\";"],"names":[],"version":3,"file":"spinal-env-viewer-plugin-standard_button.79d2a047.js.map"}