{"mappings":"A;;;;;;;;;A;;;;;;A;;;;;;;;;A;;;;A;;;;;;;;;;A;;;;;;;A;;;;;;;A;;;;A;;;;;A;;;;;;;;A;;;;;;A;;;;;A;;;;;;;;;A;;;;;;;A;;;;A;;;;A;;;;A;;;;;;;A;;;;;A;;;;;;;;A;;;;;;A;;;;;A;;;;;A;;;;;;;;;;;;;A;;;;;;;;A;;;;A;;;;;;;;A;;;;A;;;;;;;A;;;;;;;;A;;;;;A;;;;;;A;;;;A;;;;A;;;;;;;A;;;;A;;;;A;;;;A;;;;;;A;;;;;;;;A;;;;A;;;;A;;;;;;A;;;;A;;;;;;A;;;;A;;;;;A;;;;;;;A;;;;;;;;;;;;AMkIA;;;;;;AAIA;;;;;;AAQA;;;;;;;A;;;;AAWA;;;;AAGA;;;;AAGA;;;;A;;;;AAOA;;;;AAGA;;;;AAGA;;;;A;;;;AAMA;;;;AAGA;;;;AAGA;;;;A;;;;AAWA;;;;A;;;;AAOA;;;;AAGA;;;;AAGA;;;;AAMA;;;;AAGA;;;;AAGA;;;;AAGA;;;;AAGA;;;;AAGA;;;;AAGA;;;;AAMA;;;;AAKA;;;;AAGA;;;;AAGA;;;;AAGA;;;;A;;;;;;AAaA;;;;;;;;;;AAWA;;;;;A;;;;;;;AAiBA;;;;;;;AAMA;;;;;;;AAMA;;;;;AAIA;;;;;AAIA;;;;;;;;AAOA;;;;;;;;AAOA;;;;;;;AAMA;;;;;;;AAMA;;;;;;AAKA;;;;AAAA;;;;AAMA;;;;;AAIA;;;;;;;;;;;;;;;;;;;AAsBA;;;;;;AAMA;;;;;;AAQA;;;;;;AAOA;;;;AAGA;;;;AAKA;;;;AAQA;;;;;;;;AAOA;;;;;AAIA;;;;AAGA;;;;;;AAKA;;;;AAMA;;;;AAGA;;;;AAGA;;;;AAGA;;;;AAKA;;;;AAAA;;;;AAAA;;;;AAKA;;;;AAMA;;;;AAGA;EAEA;;;;;AAMA;;;;AAKA;;;;AASA;;;;;AAIA;;;;AAGA;;;;AAKA;;;;AAAA;;;;AAAA;;;;AAKA;;;;;AAIA;;;;AAGA;;;;AAMA;;;;AAGA;;;;AAGA;;;;AAMA;;;;AAGA;;;;A;;;;AAMA;;;;A;;;;AAOA;;;;A;;;;AAMA;;;;AAGA;;;;AAGA;;;;AAGA;;;;AAIA;;;;AAGA;;;;A;;;;AAMA;;;;AAMA;;;;;AAIA;;;;AAGA;;;;;AAWA;;;;;;;;;;;;;;;;;AAsBA;;;;;;;;;AAQA;;;;;AAYA;;;;;;;;;;;AAUA;;;;;AAIA;;;;;AAIA;;;;;;;;;AAQA;;;;AAWA;;;;;;;;AAQA;;;;AAGA;;;;AAIA;;;;AAGA;;;;A;;;;;;;A;;;;;;A;;;;;;;;A;;;;;A;;;;;A;;;;;A;;;;;A;;;;A;;;;;A","sources":["node_modules/spinal-env-viewer-plugin-pcvue-manager/src/vue/components/upload.vue","node_modules/spinal-env-viewer-plugin-pcvue-manager/src/vue/panels/createPCVueNetwork.vue","node_modules/spinal-env-viewer-plugin-pcvue-manager/src/vue/components/deviceMonitor.vue","node_modules/spinal-env-viewer-plugin-pcvue-manager/src/vue/panels/monitorPCVue.vue","node_modules/spinal-env-viewer-plugin-pcvue-manager/src/vue/components/linkTemplate.vue","node_modules/spinal-env-viewer-plugin-pcvue-manager/src/vue/components/linkComponent.vue","node_modules/spinal-env-viewer-plugin-pcvue-manager/src/vue/components/SpinalCodeMirror.vue","node_modules/spinal-env-viewer-plugin-pcvue-manager/src/vue/components/functionsComponent.vue","node_modules/spinal-env-viewer-plugin-pcvue-manager/src/vue/dialogs/linkDeviceToFloor.vue"],"sourcesContent":["<!--\nCopyright 2021 SpinalCom - www.spinalcom.com\n\nThis file is part of SpinalCore.\n\nPlease read all of the following terms and conditions\nof the Free Software license Agreement (\"Agreement\")\ncarefully.\n\nThis Agreement is a legally binding contract between\nthe Licensee (as defined below) and SpinalCom that\nsets forth the terms and conditions that govern your\nuse of the Program. By installing and/or using the\nProgram, you agree to abide by all the terms and\nconditions stated or referenced herein.\n\nIf you do not agree to abide by these terms and\nconditions, do not demonstrate your acceptance and do\nnot install or use the Program.\nYou should have received a copy of the license along\nwith this file. If not, see\n<http://resources.spinalcom.com/licenses.pdf>.\n-->\n\n<template>\n  <div class=\"upload_container\">\n    <div class=\"name\">\n      <md-field>\n        <label>Network name</label>\n        <md-input v-model=\"network.name\"></md-input>\n      </md-field>\n    </div>\n\n    <!-- <div class=\"monitor\">\n      <div class=\"section\">\n        <md-checkbox v-model=\"network.listen\"\n                     class=\"md-primary\">Monitor this network</md-checkbox>\n      </div>\n\n      <div class=\"section\"\n           v-if=\"network.listen\">\n        <md-checkbox v-model=\"network.saveTimeSeries\"\n                     class=\"md-primary\">Save timeSeries</md-checkbox>\n      </div>\n\n      <div class=\"section interval\"\n           v-if=\"network.listen\">\n        <md-field>\n          <label>Interval Time / ms</label>\n          <md-input type=\"number\"\n                    v-model=\"network.interval\"></md-input>\n        </md-field>\n      </div>\n    </div> -->\n\n    <div class=\"upload\"\n         v-cloak\n         @drop.prevent=\"addFile\"\n         @dragover.prevent>\n      <div v-if=\"!file\">\n        <h3>Drag and drop xlsx file to upload</h3>\n        <md-button class=\"md-primary\"\n                   @click=\"uploadFile\">Or click here to upload file</md-button>\n      </div>\n\n      <div class=\"fileInfo\"\n           v-if=\"file\">\n        <h3>File uploaded</h3>\n        <div style=\"color: #448aff\">\n          {{ file.name }} ({{ file.size | kb }} kb)\n        </div>\n\n        <div class=\"buttons\">\n          <md-button class=\"md-primary\"\n                     :disabled=\"disableNetwork\"\n                     @click=\"save\">Create Network</md-button>\n\n          <md-button class=\"md-accent\"\n                     :disabled=\"disableDelete\"\n                     @click=\"removeFile\">Delete file</md-button>\n        </div>\n      </div>\n    </div>\n\n  </div>\n</template>\n<script>\nexport default {\n  name: \"uploadComponent\",\n  props: {\n    network: {},\n  },\n  data() {\n    return {\n      file: undefined,\n    };\n  },\n  methods: {\n    save() {\n      this.$emit(\"save\", this.file);\n    },\n\n    addFile(e) {\n      let droppedFiles = e.dataTransfer.files;\n      if (!droppedFiles || !droppedFiles.length) return;\n\n      this.file = droppedFiles[0];\n      // [...droppedFiles].forEach((f) => {\n      // \tthis.file.push(f);\n      // });\n    },\n\n    uploadFile() {\n      let input = document.createElement(\"input\");\n      input.type = \"file\";\n      input.accept =\n        \".xlsx, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel\";\n      input.click();\n      input.addEventListener(\n        \"change\",\n        async (event) => {\n          this.file = event.target.files[0];\n        },\n        false\n      );\n    },\n\n    removeFile() {\n      // this.file = this.file.filter((f) => {\n      // \treturn f != file;\n      // });\n      this.file = undefined;\n    },\n  },\n  computed: {\n    disableNetwork() {\n      return (\n        this.network.name.trim().length === 0 ||\n        (this.network.listen && !this.network.interval) ||\n        typeof this.file === \"undefined\"\n      );\n    },\n    disableDelete() {\n      return typeof this.file === \"undefined\";\n    },\n  },\n  filters: {\n    kb(val) {\n      return Math.floor(val / 1024);\n    },\n  },\n};\n</script>\n\n<style scoped>\n.upload_container {\n  width: 95%;\n  height: 100%;\n  margin: auto;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n\n.upload_container .name {\n  width: 100%;\n  height: 50px;\n  margin-bottom: 20px;\n}\n\n.upload_container .monitor {\n  width: 100%;\n  height: 50px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-bottom: 20px;\n}\n\n.upload_container .monitor .section {\n  flex: 0 0 30%;\n}\n\n.upload_container .monitor .interval {\n  flex: 0 0 30%;\n}\n\n.upload_container .upload {\n  width: 100%;\n  height: calc(100% - 180px);\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  border: 2px dashed grey;\n}\n\n.upload_container .upload .fileInfo {\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n\n.upload_container .upload .fileInfo .buttons {\n  width: 100%;\n  display: flex;\n  margin-top: 20px;\n  justify-content: center;\n}\n</style>\n\n<style>\n.upload_container .name .md-field,\n.upload_container .monitor .section .md-field {\n  min-height: unset;\n}\n</style>","<!--\nCopyright 2021 SpinalCom - www.spinalcom.com\n\nThis file is part of SpinalCore.\n\nPlease read all of the following terms and conditions\nof the Free Software license Agreement (\"Agreement\")\ncarefully.\n\nThis Agreement is a legally binding contract between\nthe Licensee (as defined below) and SpinalCom that\nsets forth the terms and conditions that govern your\nuse of the Program. By installing and/or using the\nProgram, you agree to abide by all the terms and\nconditions stated or referenced herein.\n\nIf you do not agree to abide by these terms and\nconditions, do not demonstrate your acceptance and do\nnot install or use the Program.\nYou should have received a copy of the license along\nwith this file. If not, see\n<http://resources.spinalcom.com/licenses.pdf>.\n-->\n\n<template>\n  <div class=\"panel_container\">\n    <upload-component v-if=\"state === STATES.initial\"\n                      :network=\"network\"\n                      @save=\"save\"></upload-component>\n\n    <div class=\"states\"\n         v-else>\n      <div class=\"content\">\n        <div class=\"title\">{{state | capitalize}}</div>\n\n        <div class=\"icon\"\n             v-if=\"state === STATES.created || state === STATES.error\">\n          <md-icon class=\"md-size-5x\">{{icon}}</md-icon>\n        </div>\n\n        <div class=\"progress\"\n             v-else>\n          <md-progress-bar md-mode=\"indeterminate\"></md-progress-bar>\n        </div>\n      </div>\n\n    </div>\n  </div>\n</template>\n\n<script>\nimport { SpinalPCVueDiscoverModel, pcvueOrganState } from \"spinal-model-pcvue\";\nimport { SpinalGraphService } from \"spinal-env-viewer-graph-service\";\nimport { Path, File } from \"spinal-core-connectorjs_type\";\n\nimport UploadComponent from \"../components/upload.vue\";\nimport { startMonitoring } from \"../../utils/utils\";\n\nexport default {\n  name: \"createPCVueNetworkPanel\",\n  components: { \"upload-component\": UploadComponent },\n  data() {\n    this.context;\n    this.organ;\n    this.graph;\n    this.STATES = pcvueOrganState;\n\n    return {\n      network: {\n        name: \"\",\n        // listen: false,\n        // saveTimeSeries: true,\n        // interval: 300000,\n      },\n      message: \"\",\n      state: this.STATES.initial,\n    };\n  },\n  methods: {\n    async opened({ graph, context, selectedNode }) {\n      this.state = this.STATES.initial;\n      this.context = SpinalGraphService.getRealNode(context.id.get());\n      this.organ = await selectedNode.element.load();\n      this.graph = graph;\n      this.network.name = \"\";\n    },\n\n    closed() {},\n\n    save(argFile) {\n      // this.network.interval = this.network.interval || 300000;\n\n      const file = new File(argFile.name, new Path(argFile), undefined);\n\n      const spinalPCVueDiscoverModel = new SpinalPCVueDiscoverModel(\n        this.graph,\n        this.context,\n        this.organ,\n        this.network,\n        file\n      );\n\n      const bindId = spinalPCVueDiscoverModel.state.bind(() => {\n        this.state = spinalPCVueDiscoverModel.state.get();\n        if (this.state === pcvueOrganState.created) {\n          spinalPCVueDiscoverModel.state.unbind(bindId);\n        }\n      });\n\n      spinalPCVueDiscoverModel.setUploadingState();\n      spinalPCVueDiscoverModel.addToGraph();\n    },\n  },\n  computed: {\n    icon() {\n      if (this.state === this.STATES.created) return \"file_download_done\";\n      if (this.state === this.STATES.error) return \"error\";\n    },\n  },\n\n  filters: {\n    capitalize(value) {\n      if (!value) return \"\";\n      value = value.toString();\n      return value.charAt(0).toUpperCase() + value.slice(1);\n    },\n  },\n};\n</script>\n\n<style scoped>\n.panel_container {\n  width: 100%;\n  height: 100%;\n}\n\n.panel_container .states {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.panel_container .states .content {\n  width: 30%;\n  height: 30%;\n  text-align: center;\n}\n\n.panel_container .states .content .title {\n  font-size: 2em;\n  margin-bottom: 20px;\n}\n</style>\n\n","<!--\nCopyright 2021 SpinalCom - www.spinalcom.com\n\nThis file is part of SpinalCore.\n\nPlease read all of the following terms and conditions\nof the Free Software license Agreement (\"Agreement\")\ncarefully.\n\nThis Agreement is a legally binding contract between\nthe Licensee (as defined below) and SpinalCom that\nsets forth the terms and conditions that govern your\nuse of the Program. By installing and/or using the\nProgram, you agree to abide by all the terms and\nconditions stated or referenced herein.\n\nIf you do not agree to abide by these terms and\nconditions, do not demonstrate your acceptance and do\nnot install or use the Program.\nYou should have received a copy of the license along\nwith this file. If not, see\n<http://resources.spinalcom.com/licenses.pdf>.\n-->\n\n<template>\n  <div class=\"device\">\n    <div class=\"name\"\n         v-tooltip=\"network.name\">\n      {{ network.name }}\n    </div>\n\n    <div class=\"state\"\n         :class=\"state\">\n      {{ state }}\n    </div>\n\n    <div class=\"actions\">\n      <md-button class=\"md-icon-button md-primary\"\n                 v-tooltip=\"'start'\"\n                 :disabled=\"disabledStart()\"\n                 @click=\"startMonitoring\">\n        <md-icon>play_arrow</md-icon>\n      </md-button>\n\n      <md-button class=\"md-icon-button md-primary\"\n                 v-tooltip=\"'restart'\"\n                 :disabled=\"disabledRestart()\"\n                 @click=\"restartMonitoring\">\n        <md-icon>replay</md-icon>\n      </md-button>\n\n      <md-button class=\"md-icon-button md-accent\"\n                 v-tooltip=\"'stop'\"\n                 :disabled=\"disabledStop()\"\n                 @click=\"stopMonitoring\">\n        <md-icon>stop</md-icon>\n      </md-button>\n\n      <div class=\"block\">\n        <div class=\"input\">\n          <md-checkbox class=\"md-primary\"\n                       v-model=\"saveTimeSeries\">Save TimeSeries</md-checkbox>\n        </div>\n      </div>\n\n      <!-- <md-button class=\"md-icon-button\">\n                  <md-icon class=\"md-primary\">star</md-icon>\n               </md-button> -->\n    </div>\n  </div>\n</template>\n\n<script>\nimport { getModel, startMonitoring, stopMonitoring } from \"../../utils/utils\";\nimport { SpinalGraphService } from \"spinal-env-viewer-graph-service\";\n\nexport default {\n  name: \"networkMonitoring\",\n  props: {\n    network: {},\n    contextId: {},\n    graph: {},\n  },\n  data() {\n    return {\n      saveTimeSeries: false,\n      model: undefined,\n    };\n  },\n  async created() {\n    const realNode = SpinalGraphService.getRealNode(this.network.id);\n    this.model = await getModel(realNode);\n    if (this.model && this.model.saveTimeSeries) {\n      this.saveTimeSeries = this.model.saveTimeSeries.get();\n    }\n  },\n  mounted() {},\n  methods: {\n    async startMonitoring() {\n      const monitor = {\n        saveTimeSeries: this.saveTimeSeries,\n        interval: 300000,\n        // interval: this.interval,\n      };\n      await startMonitoring(\n        this.graph,\n        this.contextId,\n        this.network.id,\n        this.model,\n        monitor\n      );\n    },\n\n    stopMonitoring() {\n      stopMonitoring(this.network.id, this.model);\n    },\n\n    async restartMonitoring() {\n      await this.stopMonitoring();\n      setTimeout(this.startMonitoring.bind(this), 2000);\n    },\n\n    updateTimeSeries(value) {\n      this.saveTimeSeries = value;\n    },\n\n    ////////////////////////////////////////////\n    ////              DISABLED                //\n    ////////////////////////////////////////////\n\n    disabledRestart() {\n      const model = this.model;\n      return !(model && model !== -1 && model.listen && model.listen.get());\n    },\n\n    disabledStart() {\n      const model = this.model;\n      return model && model !== -1 && model.listen && model.listen.get();\n    },\n\n    disabledStop() {\n      const model = this.model;\n      return !(model && model !== -1 && model.listen && model.listen.get());\n    },\n  },\n  computed: {\n    state() {\n      return this.model && this.model.listen && this.model.listen.get()\n        ? \"Running\"\n        : \"Stopped\";\n    },\n  },\n  watch: {\n    saveTimeSeries() {\n      if (this.model && this.model !== -1) {\n        if (this.model.saveTimeSeries) {\n          this.model.saveTimeSeries.set(this.saveTimeSeries);\n        } else {\n          this.model.add_attr({\n            saveTimeSeries: this.saveTimeSeries,\n          });\n        }\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\n.device {\n  width: 96%;\n  height: 50px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin: auto;\n  /* border-bottom: 1px solid gray; */\n}\n\n.device .name,\n.device .state {\n  width: 25%;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n\n.device .state {\n  text-align: center;\n}\n\n.device .state.Running {\n  color: chartreuse;\n}\n.device .state.Stopped {\n  color: #ff5252;\n}\n\n.device .actions {\n  width: 50%;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n</style>\n","<!--\nCopyright 2021 SpinalCom - www.spinalcom.com\n\nThis file is part of SpinalCore.\n\nPlease read all of the following terms and conditions\nof the Free Software license Agreement (\"Agreement\")\ncarefully.\n\nThis Agreement is a legally binding contract between\nthe Licensee (as defined below) and SpinalCom that\nsets forth the terms and conditions that govern your\nuse of the Program. By installing and/or using the\nProgram, you agree to abide by all the terms and\nconditions stated or referenced herein.\n\nIf you do not agree to abide by these terms and\nconditions, do not demonstrate your acceptance and do\nnot install or use the Program.\nYou should have received a copy of the license along\nwith this file. If not, see\n<http://resources.spinalcom.com/licenses.pdf>.\n-->\n\n<template>\n  <div class=\"monitor_container\">\n    <div class=\"manage_container\"\n         v-if=\"pageSelected === PAGES.selection\">\n      <div class=\"header\">\n        <div>\n          <md-button class=\"md-icon-button\"\n                     v-tooltip=\"'start all devices'\"\n                     @click=\"startAllMonitoring\">\n            <md-icon class=\"md-primary\">play_arrow</md-icon>\n          </md-button>\n\n          <md-button class=\"md-icon-button\"\n                     v-tooltip=\"'restart all devices'\"\n                     @click=\"restartAllMonitoring\">\n            <md-icon class=\"md-primary\">replay</md-icon>\n          </md-button>\n\n          <md-button class=\"md-icon-button md-accent\"\n                     v-tooltip=\"'stop all devices'\"\n                     @click=\"stopAllMonitoring\">\n            <md-icon class=\"md-accent\">stop</md-icon>\n          </md-button>\n\n          <md-button class=\"md-primary\"\n                     @click=\"changeTimeSeries(true)\">Save all time series\n          </md-button>\n\n          <md-button class=\"md-accent\"\n                     @click=\"changeTimeSeries(false)\">Stop saving all time\n            series</md-button>\n        </div>\n      </div>\n\n      <div class=\"devices_list md-scrollbar\">\n        <monitor-component v-for=\"network in networks\"\n                           :key=\"network.id\"\n                           :ref=\"network.id\"\n                           :network=\"network\"\n                           :contextId=\"context.id\"\n                           :graph=\"graph\"></monitor-component>\n\n      </div>\n    </div>\n\n    <div class=\"state\"\n         v-else-if=\"pageSelected === PAGES.loading\">\n      <md-progress-spinner md-mode=\"indeterminate\"></md-progress-spinner>\n    </div>\n\n    <div class=\"state\"\n         v-else-if=\"pageSelected === PAGES.error\">\n      <md-icon class=\"md-size-5x\">close</md-icon>\n    </div>\n\n  </div>\n</template>\n\n<script>\nimport { SpinalGraphService } from \"spinal-env-viewer-graph-service\";\nimport { SpinalBmsNetwork } from \"spinal-model-bmsnetwork\";\n\nimport MonitorComponent from \"../components/deviceMonitor.vue\";\n\nexport default {\n  name: \"createPCVueNetworkPanel\",\n  data() {\n    this.PAGES = {\n      selection: 0,\n      loading: 1,\n      creation: 2,\n      success: 3,\n      error: 4,\n    };\n\n    return {\n      networks: [],\n      pageSelected: this.PAGES.creation,\n      context: undefined,\n      gaph: undefined,\n    };\n  },\n  components: {\n    \"monitor-component\": MonitorComponent,\n  },\n  methods: {\n    async opened({ context, graph, selectedNode }) {\n      this.pageSelected = this.PAGES.loading;\n\n      this.context = context;\n      this.graph = graph;\n\n      this.getNetwork(context.get(), selectedNode.get())\n        .then((result) => {\n          this.networks = result;\n          this.pageSelected = this.PAGES.selection;\n        })\n        .catch(() => {\n          this.pageSelected = this.PAGES.error;\n        });\n    },\n\n    closed() {},\n\n    getNetwork(context, selectedNode) {\n      if (selectedNode.type === SpinalBmsNetwork.nodeTypeName) {\n        return Promise.resolve([selectedNode]);\n      }\n\n      return SpinalGraphService.findInContext(\n        selectedNode.id,\n        context.id,\n        (node) => {\n          if (node.getType().get() === SpinalBmsNetwork.nodeTypeName) {\n            SpinalGraphService._addNode(node);\n            return true;\n          }\n          return false;\n        }\n      ).then((result) => {\n        return result.map((el) => el.get());\n      });\n    },\n\n    startAllMonitoring() {\n      this.networks.forEach((network) => {\n        const networkId = network.id;\n        const [ref] = this.$refs[networkId];\n        if (ref) {\n          ref.startMonitoring();\n        }\n      });\n    },\n\n    restartAllMonitoring() {\n      this.networks.forEach((network) => {\n        const networkId = network.id;\n        const [ref] = this.$refs[networkId];\n        if (ref) {\n          ref.restartMonitoring();\n        }\n      });\n    },\n\n    stopAllMonitoring() {\n      this.networks.forEach((network) => {\n        const networkId = network.id;\n        const [ref] = this.$refs[networkId];\n        if (ref) {\n          ref.stopMonitoring();\n        }\n      });\n    },\n\n    changeTimeSeries(value) {\n      this.networks.forEach((network) => {\n        const networkId = network.id;\n        const [ref] = this.$refs[networkId];\n        if (ref) {\n          ref.updateTimeSeries(value);\n        }\n      });\n    },\n  },\n};\n</script>\n\n<style scoped>\n.panel_container {\n  width: 100%;\n  height: 100%;\n}\n\n.panel_container .states {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.panel_container .states .content {\n  width: 30%;\n  height: 30%;\n  text-align: center;\n}\n\n.panel_container .states .content .title {\n  font-size: 2em;\n  margin-bottom: 20px;\n}\n</style>\n\n","<!--\nCopyright 2021 SpinalCom - www.spinalcom.com\n\nThis file is part of SpinalCore.\n\nPlease read all of the following terms and conditions\nof the Free Software license Agreement (\"Agreement\")\ncarefully.\n\nThis Agreement is a legally binding contract between\nthe Licensee (as defined below) and SpinalCom that\nsets forth the terms and conditions that govern your\nuse of the Program. By installing and/or using the\nProgram, you agree to abide by all the terms and\nconditions stated or referenced herein.\n\nIf you do not agree to abide by these terms and\nconditions, do not demonstrate your acceptance and do\nnot install or use the Program.\nYou should have received a copy of the license along\nwith this file. If not, see\n<http://resources.spinalcom.com/licenses.pdf>.\n-->\n\n<template>\n  <div class=\"subContent\">\n    <div class=\"title\">\n      <div>{{title}}</div>\n    </div>\n\n    <md-content class=\"container md-scrollbar\">\n      <md-list>\n        <md-list-item class=\"list-item\"\n                      v-for=\"(item,index) in data\"\n                      :key=\"index\"\n                      @click=\"selectItem(item.id)\"\n                      :class=\"{'selected' : item.id === itemSelected}\"\n                      v-tooltip=\"item.name\">\n\n          <span class=\"md-list-item-text\">{{item.name}}</span>\n\n        </md-list-item>\n      </md-list>\n    </md-content>\n\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"linkToGroupTemplate\",\n  props: [\"data\", \"title\", \"itemSelected\", \"disableBtn\"],\n  methods: {\n    createEvent() {\n      this.$emit(\"create\");\n    },\n    selectItem(id) {\n      this.$emit(\"select\", id);\n    },\n  },\n};\n</script>\n\n<style scoped>\n.subContent {\n  width: 100%;\n  height: 100%;\n}\n\n.subContent .title {\n  width: 100%;\n  height: 10%;\n  /* text-align: center; */\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0 15px 0 15px;\n  border-bottom: 1px dashed grey;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n\n.subContent .container {\n  width: 100%;\n  height: 90%;\n  padding: 0px !important;\n  /* border: 1px solid red; */\n  overflow: hidden;\n  overflow-y: auto;\n}\n\n.subContent .container .list-item {\n  border-bottom: 1px solid grey;\n}\n.subContent .container .list-item .md-list-item-text {\n  width: 100%;\n  display: block;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n.subContent .container .list-item.selected {\n  background-color: #448aff;\n}\n</style>","<!--\nCopyright 2021 SpinalCom - www.spinalcom.com\n\nThis file is part of SpinalCore.\n\nPlease read all of the following terms and conditions\nof the Free Software license Agreement (\"Agreement\")\ncarefully.\n\nThis Agreement is a legally binding contract between\nthe Licensee (as defined below) and SpinalCom that\nsets forth the terms and conditions that govern your\nuse of the Program. By installing and/or using the\nProgram, you agree to abide by all the terms and\nconditions stated or referenced herein.\n\nIf you do not agree to abide by these terms and\nconditions, do not demonstrate your acceptance and do\nnot install or use the Program.\nYou should have received a copy of the license along\nwith this file. If not, see\n<http://resources.spinalcom.com/licenses.pdf>.\n-->\n\n<template>\n  <div class=\"selections\">\n    <div class=\"section\">\n      <link-template :title=\"'Contexts'\"\n                     :data=\"contexts\"\n                     :itemSelected=\"contextSelected\"\n                     @select=\"selectContext\"></link-template>\n    </div>\n\n    <div class=\"section\">\n      <link-template :title=\"'Networks'\"\n                     :data=\"networks\"\n                     :itemSelected=\"networkSelected\"\n                     @select=\"selectNetwork\"></link-template>\n    </div>\n\n    <div class=\"section\">\n      <link-template :title=\"'Devices'\"\n                     :data=\"devices\"\n                     :itemSelected=\"deviceSelected\"\n                     @select=\"selectDevices\"></link-template>\n    </div>\n  </div>\n</template>\n\n<script>\nimport LinkTemplate from \"./linkTemplate.vue\";\n\nexport default {\n  name: \"linkComponent\",\n  components: {\n    \"link-template\": LinkTemplate,\n  },\n  props: {\n    contexts: {\n      type: Array,\n      required: true,\n    },\n    networks: {\n      type: Array,\n      required: true,\n    },\n    devices: {\n      type: Array,\n      required: true,\n    },\n    contextSelected: {\n      type: String | undefined,\n      required: true,\n    },\n    networkSelected: {\n      type: String | undefined,\n      required: true,\n    },\n    deviceSelected: {\n      type: String | undefined,\n      required: true,\n    },\n  },\n  methods: {\n    selectContext(id) {\n      this.$emit(\"selectContext\", id);\n    },\n    selectNetwork(id) {\n      this.$emit(\"selectNetwork\", id);\n    },\n    selectDevices(id) {\n      this.$emit(\"selectDevices\", id);\n    },\n  },\n};\n</script>\n\n<style scoped>\n.selections {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  justify-content: space-between;\n}\n\n.selections .section {\n  width: 33%;\n  height: 99%;\n  border: 1px solid white;\n  border-radius: 30px;\n  padding: 10px;\n}\n</style>","<!--\nCopyright 2021 SpinalCom - www.spinalcom.com\n\nThis file is part of SpinalCore.\n\nPlease read all of the following terms and conditions\nof the Free Software license Agreement (\"Agreement\")\ncarefully.\n\nThis Agreement is a legally binding contract between\nthe Licensee (as defined below) and SpinalCom that\nsets forth the terms and conditions that govern your\nuse of the Program. By installing and/or using the\nProgram, you agree to abide by all the terms and\nconditions stated or referenced herein.\n\nIf you do not agree to abide by these terms and\nconditions, do not demonstrate your acceptance and do\nnot install or use the Program.\nYou should have received a copy of the license along\nwith this file. If not, see\n<http://resources.spinalcom.com/licenses.pdf>.\n-->\n\n<template>\n  <!-- <div class=\"editorContainer\"> -->\n  <codemirror v-model=\"codeObj.code\"\n              :options=\"cmOption\" />\n  <!-- </div> -->\n\n</template>\n\n<script>\n// import dedent from \"dedent\";\nimport { codemirror } from \"vue-codemirror\";\n\n// language\nimport \"codemirror/mode/javascript/javascript\";\n\n// theme css\n// import \"codemirror/theme/monokai.css\";\n\n// require active-line\nimport \"codemirror/addon/selection/active-line\";\n\n// styleSelectedText\nimport \"codemirror/addon/selection/mark-selection\";\nimport \"codemirror/addon/search/searchcursor\";\n\n// hint\nimport \"codemirror/addon/hint/show-hint\";\n// import \"codemirror/addon/hint/show-hint.css\";\nimport \"codemirror/addon/hint/javascript-hint\";\nimport \"codemirror/addon/selection/active-line\";\n\n// highlightSelectionMatches\nimport \"codemirror/addon/scroll/annotatescrollbar\";\nimport \"codemirror/addon/search/matchesonscrollbar\";\nimport \"codemirror/addon/search/searchcursor\";\nimport \"codemirror/addon/search/match-highlighter\";\n\n// keyMap\nimport \"codemirror/mode/clike/clike\";\nimport \"codemirror/addon/edit/matchbrackets\";\nimport \"codemirror/addon/comment/comment\";\nimport \"codemirror/addon/dialog/dialog\";\n// import \"codemirror/addon/dialog/dialog.css\";\nimport \"codemirror/addon/search/searchcursor\";\nimport \"codemirror/addon/search/search\";\nimport \"codemirror/keymap/sublime\";\n\n// foldGutter\n// import \"codemirror/addon/fold/foldgutter.css\";\nimport \"codemirror/addon/fold/brace-fold\";\nimport \"codemirror/addon/fold/comment-fold\";\nimport \"codemirror/addon/fold/foldcode\";\nimport \"codemirror/addon/fold/foldgutter\";\nimport \"codemirror/addon/fold/indent-fold\";\nimport \"codemirror/addon/fold/markdown-fold\";\nimport \"codemirror/addon/fold/xml-fold\";\n\nexport default {\n  name: \"SpinalCodeMirror\",\n  components: {\n    codemirror,\n  },\n  props: {\n    codeObj: {},\n  },\n  data() {\n    return {\n      // code: this.codeObj.code,\n      cmOption: {\n        tabSize: 4,\n        styleActiveLine: true,\n        lineNumbers: true,\n        // styleSelectedText: false,\n        line: true,\n        // foldGutter: true,\n        lineWrapping: true,\n        gutters: [\"CodeMirror-linenumbers\", \"CodeMirror-foldgutter\"],\n        // highlightSelectionMatches: {\n        //    showToken: /\\w/,\n        //    annotateScrollbar: true,\n        // },\n        mode: \"text/javascript\",\n        // hint.js options\n        hintOptions: {\n          completeSingle: false,\n        },\n        keyMap: \"sublime\",\n        matchBrackets: true,\n        showCursorWhenSelecting: true,\n        theme: \"monokai\",\n        extraKeys: { \"Ctrl-Space\": \"autocomplete\" },\n      },\n    };\n  },\n  mounted() {\n    // setTimeout(() => {\n    //    (this.styleSelectedText = true),\n    //       (this.cmOption.styleActiveLine = true);\n    // }, 1800);\n  },\n};\n</script>\n\n<style>\n.editorContainer {\n  width: 100%;\n  height: 100%;\n}\n\n.CodeMirror-focused .cm-matchhighlight {\n  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAIAAAACCAYAAABytg0kAAAAFklEQVQI12NgYGBgkKzc8x9CMDAwAAAmhwSbidEoSQAAAABJRU5ErkJggg==);\n  background-position: bottom;\n  background-repeat: repeat-x;\n}\n.cm-matchhighlight {\n  background-color: lightgreen;\n}\n.CodeMirror-selection-highlight-scrollbar {\n  background-color: green;\n}\n\n/*\n////////////////////////////////////////////////////////////////////////\n//     codemirror/lib/codemirror.css\n//////////////////////////////////////////////////////////////////////// \n*/\n\n/* BASICS */\n\n.CodeMirror {\n  /* Set height, width, borders, and global font properties here */\n  font-family: monospace;\n  height: 300px;\n  color: black;\n  direction: ltr;\n}\n\n/* PADDING */\n\n.CodeMirror-lines {\n  padding: 4px 0; /* Vertical padding around content */\n}\n.CodeMirror pre.CodeMirror-line,\n.CodeMirror pre.CodeMirror-line-like {\n  padding: 0 4px; /* Horizontal padding of content */\n}\n\n.CodeMirror-scrollbar-filler,\n.CodeMirror-gutter-filler {\n  background-color: transparent; /* The little square between H and V scrollbars */\n}\n\n/* GUTTER */\n\n.CodeMirror-gutters {\n  border-right: 1px solid #ddd;\n  background-color: #f7f7f7;\n  white-space: nowrap;\n}\n.CodeMirror-linenumbers {\n}\n.CodeMirror-linenumber {\n  padding: 0 3px 0 5px;\n  min-width: 20px;\n  text-align: right;\n  color: #999;\n  white-space: nowrap;\n}\n\n.CodeMirror-guttermarker {\n  color: black;\n}\n.CodeMirror-guttermarker-subtle {\n  color: #999;\n}\n\n/* CURSOR */\n\n.CodeMirror-cursor {\n  border-left: 1px solid black;\n  border-right: none;\n  width: 0;\n}\n/* Shown when moving in bi-directional text */\n.CodeMirror div.CodeMirror-secondarycursor {\n  border-left: 1px solid silver;\n}\n.cm-fat-cursor .CodeMirror-cursor {\n  width: auto;\n  border: 0 !important;\n  background: #7e7;\n}\n.cm-fat-cursor div.CodeMirror-cursors {\n  z-index: 1;\n}\n.cm-fat-cursor-mark {\n  background-color: rgba(20, 255, 20, 0.5);\n  -webkit-animation: blink 1.06s steps(1) infinite;\n  -moz-animation: blink 1.06s steps(1) infinite;\n  animation: blink 1.06s steps(1) infinite;\n}\n.cm-animate-fat-cursor {\n  width: auto;\n  border: 0;\n  -webkit-animation: blink 1.06s steps(1) infinite;\n  -moz-animation: blink 1.06s steps(1) infinite;\n  animation: blink 1.06s steps(1) infinite;\n  background-color: #7e7;\n}\n@-moz-keyframes blink {\n  0% {\n  }\n  50% {\n    background-color: transparent;\n  }\n  100% {\n  }\n}\n@-webkit-keyframes blink {\n  0% {\n  }\n  50% {\n    background-color: transparent;\n  }\n  100% {\n  }\n}\n@keyframes blink {\n  0% {\n  }\n  50% {\n    background-color: transparent;\n  }\n  100% {\n  }\n}\n\n/* Can style cursor different in overwrite (non-insert) mode */\n.CodeMirror-overwrite .CodeMirror-cursor {\n}\n\n.cm-tab {\n  display: inline-block;\n  text-decoration: inherit;\n}\n\n.CodeMirror-rulers {\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: -50px;\n  bottom: 0;\n  overflow: hidden;\n}\n.CodeMirror-ruler {\n  border-left: 1px solid #ccc;\n  top: 0;\n  bottom: 0;\n  position: absolute;\n}\n\n/* DEFAULT THEME */\n\n.cm-s-default .cm-header {\n  color: blue;\n}\n.cm-s-default .cm-quote {\n  color: #090;\n}\n.cm-negative {\n  color: #d44;\n}\n.cm-positive {\n  color: #292;\n}\n.cm-header,\n.cm-strong {\n  font-weight: bold;\n}\n.cm-em {\n  font-style: italic;\n}\n.cm-link {\n  text-decoration: underline;\n}\n.cm-strikethrough {\n  text-decoration: line-through;\n}\n\n.cm-s-default .cm-keyword {\n  color: #708;\n}\n.cm-s-default .cm-atom {\n  color: #219;\n}\n.cm-s-default .cm-number {\n  color: #164;\n}\n.cm-s-default .cm-def {\n  color: #00f;\n}\n.cm-s-default .cm-variable,\n.cm-s-default .cm-punctuation,\n.cm-s-default .cm-property,\n.cm-s-default .cm-operator {\n}\n.cm-s-default .cm-variable-2 {\n  color: #05a;\n}\n.cm-s-default .cm-variable-3,\n.cm-s-default .cm-type {\n  color: #085;\n}\n.cm-s-default .cm-comment {\n  color: #a50;\n}\n.cm-s-default .cm-string {\n  color: #a11;\n}\n.cm-s-default .cm-string-2 {\n  color: #f50;\n}\n.cm-s-default .cm-meta {\n  color: #555;\n}\n.cm-s-default .cm-qualifier {\n  color: #555;\n}\n.cm-s-default .cm-builtin {\n  color: #30a;\n}\n.cm-s-default .cm-bracket {\n  color: #997;\n}\n.cm-s-default .cm-tag {\n  color: #170;\n}\n.cm-s-default .cm-attribute {\n  color: #00c;\n}\n.cm-s-default .cm-hr {\n  color: #999;\n}\n.cm-s-default .cm-link {\n  color: #00c;\n}\n\n.cm-s-default .cm-error {\n  color: #f00;\n}\n.cm-invalidchar {\n  color: #f00;\n}\n\n.CodeMirror-composing {\n  border-bottom: 2px solid;\n}\n\n/* Default styles for common addons */\n\ndiv.CodeMirror span.CodeMirror-matchingbracket {\n  color: #0b0;\n}\ndiv.CodeMirror span.CodeMirror-nonmatchingbracket {\n  color: #a22;\n}\n.CodeMirror-matchingtag {\n  background: rgba(255, 150, 0, 0.3);\n}\n.CodeMirror-activeline-background {\n  background: #e8f2ff;\n}\n\n/* STOP */\n\n/* The rest of this file contains styles related to the mechanics of\n   the editor. You probably shouldn't touch them. */\n\n.CodeMirror {\n  position: relative;\n  overflow: hidden;\n  background: white;\n}\n\n.CodeMirror-scroll {\n  overflow: scroll !important; /* Things will break if this is overridden */\n  /* 50px is the magic margin used to hide the element's real scrollbars */\n  /* See overflow: hidden in .CodeMirror */\n  margin-bottom: -50px;\n  margin-right: -50px;\n  padding-bottom: 50px;\n  height: 100%;\n  outline: none; /* Prevent dragging from highlighting the element */\n  position: relative;\n}\n.CodeMirror-sizer {\n  position: relative;\n  border-right: 50px solid transparent;\n}\n\n/* The fake, visible scrollbars. Used to force redraw during scrolling\n   before actual scrolling happens, thus preventing shaking and\n   flickering artifacts. */\n.CodeMirror-vscrollbar,\n.CodeMirror-hscrollbar,\n.CodeMirror-scrollbar-filler,\n.CodeMirror-gutter-filler {\n  position: absolute;\n  z-index: 6;\n  display: none;\n  outline: none;\n}\n.CodeMirror-vscrollbar {\n  right: 0;\n  top: 0;\n  overflow-x: hidden;\n  overflow-y: scroll;\n}\n.CodeMirror-hscrollbar {\n  bottom: 0;\n  left: 0;\n  overflow-y: hidden;\n  overflow-x: scroll;\n}\n.CodeMirror-scrollbar-filler {\n  right: 0;\n  bottom: 0;\n}\n.CodeMirror-gutter-filler {\n  left: 0;\n  bottom: 0;\n}\n\n.CodeMirror-gutters {\n  position: absolute;\n  left: 0;\n  top: 0;\n  min-height: 100%;\n  z-index: 3;\n}\n.CodeMirror-gutter {\n  white-space: normal;\n  height: 100%;\n  display: inline-block;\n  vertical-align: top;\n  margin-bottom: -50px;\n}\n.CodeMirror-gutter-wrapper {\n  position: absolute;\n  z-index: 4;\n  background: none !important;\n  border: none !important;\n}\n.CodeMirror-gutter-background {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  z-index: 4;\n}\n.CodeMirror-gutter-elt {\n  position: absolute;\n  cursor: default;\n  z-index: 4;\n}\n.CodeMirror-gutter-wrapper ::selection {\n  background-color: transparent;\n}\n.CodeMirror-gutter-wrapper ::-moz-selection {\n  background-color: transparent;\n}\n\n.CodeMirror-lines {\n  cursor: text;\n  min-height: 1px; /* prevents collapsing before first draw */\n}\n.CodeMirror pre.CodeMirror-line,\n.CodeMirror pre.CodeMirror-line-like {\n  /* Reset some styles that the rest of the page might have set */\n  -moz-border-radius: 0;\n  -webkit-border-radius: 0;\n  border-radius: 0;\n  border-width: 0;\n  background: transparent;\n  font-family: inherit;\n  font-size: inherit;\n  margin: 0;\n  white-space: pre;\n  word-wrap: normal;\n  line-height: inherit;\n  color: inherit;\n  z-index: 2;\n  position: relative;\n  overflow: visible;\n  -webkit-tap-highlight-color: transparent;\n  -webkit-font-variant-ligatures: contextual;\n  font-variant-ligatures: contextual;\n}\n.CodeMirror-wrap pre.CodeMirror-line,\n.CodeMirror-wrap pre.CodeMirror-line-like {\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  word-break: normal;\n}\n\n.CodeMirror-linebackground {\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  z-index: 0;\n}\n\n.CodeMirror-linewidget {\n  position: relative;\n  z-index: 2;\n  padding: 0.1px; /* Force widget margins to stay inside of the container */\n}\n\n.CodeMirror-widget {\n}\n\n.CodeMirror-rtl pre {\n  direction: rtl;\n}\n\n.CodeMirror-code {\n  outline: none;\n}\n\n/* Force content-box sizing for the elements where we expect it */\n.CodeMirror-scroll,\n.CodeMirror-sizer,\n.CodeMirror-gutter,\n.CodeMirror-gutters,\n.CodeMirror-linenumber {\n  -moz-box-sizing: content-box;\n  box-sizing: content-box;\n}\n\n.CodeMirror-measure {\n  position: absolute;\n  width: 100%;\n  height: 0;\n  overflow: hidden;\n  visibility: hidden;\n}\n\n.CodeMirror-cursor {\n  position: absolute;\n  pointer-events: none;\n}\n.CodeMirror-measure pre {\n  position: static;\n}\n\ndiv.CodeMirror-cursors {\n  visibility: hidden;\n  position: relative;\n  z-index: 3;\n}\ndiv.CodeMirror-dragcursors {\n  visibility: visible;\n}\n\n.CodeMirror-focused div.CodeMirror-cursors {\n  visibility: visible;\n}\n\n.CodeMirror-selected {\n  background: #d9d9d9;\n}\n.CodeMirror-focused .CodeMirror-selected {\n  background: #d7d4f0;\n}\n.CodeMirror-crosshair {\n  cursor: crosshair;\n}\n.CodeMirror-line::selection,\n.CodeMirror-line > span::selection,\n.CodeMirror-line > span > span::selection {\n  background: #d7d4f0;\n}\n.CodeMirror-line::-moz-selection,\n.CodeMirror-line > span::-moz-selection,\n.CodeMirror-line > span > span::-moz-selection {\n  background: #d7d4f0;\n}\n\n.cm-searching {\n  background-color: #ffa;\n  background-color: rgba(255, 255, 0, 0.4);\n}\n\n/* Used to force a border model for a node */\n.cm-force-border {\n  padding-right: 0.1px;\n}\n\n@media print {\n  /* Hide the cursor when printing */\n  .CodeMirror div.CodeMirror-cursors {\n    visibility: hidden;\n  }\n}\n\n/* See issue #2901 */\n.cm-tab-wrap-hack:after {\n  content: \"\";\n}\n\n/* Help users use markselection to safely style text background */\nspan.CodeMirror-selectedtext {\n  background: none;\n}\n\n/*\n////////////////////////////////////////////////////////////////////////\n//     Based on Sublime Text's Monokai theme\n//////////////////////////////////////////////////////////////////////// \n*/\n\n.cm-s-monokai.CodeMirror {\n  background: #272822;\n  color: #f8f8f2;\n}\n.cm-s-monokai div.CodeMirror-selected {\n  background: #49483e;\n}\n.cm-s-monokai .CodeMirror-line::selection,\n.cm-s-monokai .CodeMirror-line > span::selection,\n.cm-s-monokai .CodeMirror-line > span > span::selection {\n  background: rgba(73, 72, 62, 0.99);\n}\n.cm-s-monokai .CodeMirror-line::-moz-selection,\n.cm-s-monokai .CodeMirror-line > span::-moz-selection,\n.cm-s-monokai .CodeMirror-line > span > span::-moz-selection {\n  background: rgba(73, 72, 62, 0.99);\n}\n.cm-s-monokai .CodeMirror-gutters {\n  background: #272822;\n  border-right: 0px;\n}\n.cm-s-monokai .CodeMirror-guttermarker {\n  color: white;\n}\n.cm-s-monokai .CodeMirror-guttermarker-subtle {\n  color: #d0d0d0;\n}\n.cm-s-monokai .CodeMirror-linenumber {\n  color: #d0d0d0;\n}\n.cm-s-monokai .CodeMirror-cursor {\n  border-left: 1px solid #f8f8f0;\n}\n\n.cm-s-monokai span.cm-comment {\n  color: #75715e;\n}\n.cm-s-monokai span.cm-atom {\n  color: #ae81ff;\n}\n.cm-s-monokai span.cm-number {\n  color: #ae81ff;\n}\n\n.cm-s-monokai span.cm-comment.cm-attribute {\n  color: #97b757;\n}\n.cm-s-monokai span.cm-comment.cm-def {\n  color: #bc9262;\n}\n.cm-s-monokai span.cm-comment.cm-tag {\n  color: #bc6283;\n}\n.cm-s-monokai span.cm-comment.cm-type {\n  color: #5998a6;\n}\n\n.cm-s-monokai span.cm-property,\n.cm-s-monokai span.cm-attribute {\n  color: #a6e22e;\n}\n.cm-s-monokai span.cm-keyword {\n  color: #f92672;\n}\n.cm-s-monokai span.cm-builtin {\n  color: #66d9ef;\n}\n.cm-s-monokai span.cm-string {\n  color: #e6db74;\n}\n\n.cm-s-monokai span.cm-variable {\n  color: #f8f8f2;\n}\n.cm-s-monokai span.cm-variable-2 {\n  color: #9effff;\n}\n.cm-s-monokai span.cm-variable-3,\n.cm-s-monokai span.cm-type {\n  color: #66d9ef;\n}\n.cm-s-monokai span.cm-def {\n  color: #fd971f;\n}\n.cm-s-monokai span.cm-bracket {\n  color: #f8f8f2;\n}\n.cm-s-monokai span.cm-tag {\n  color: #f92672;\n}\n.cm-s-monokai span.cm-header {\n  color: #ae81ff;\n}\n.cm-s-monokai span.cm-link {\n  color: #ae81ff;\n}\n.cm-s-monokai span.cm-error {\n  background: #f92672;\n  color: #f8f8f0;\n}\n\n.cm-s-monokai .CodeMirror-activeline-background {\n  background: #373831;\n}\n.cm-s-monokai .CodeMirror-matchingbracket {\n  text-decoration: underline;\n  color: white !important;\n}\n\n/*\n////////////////////////////////////////////////////////////////////////\n//     Show hint\n//////////////////////////////////////////////////////////////////////// \n\n*/\n\n.CodeMirror-hints {\n  position: absolute;\n  z-index: 10;\n  overflow: hidden;\n  list-style: none;\n\n  margin: 0;\n  padding: 2px;\n\n  -webkit-box-shadow: 2px 3px 5px rgba(0, 0, 0, 0.2);\n  -moz-box-shadow: 2px 3px 5px rgba(0, 0, 0, 0.2);\n  box-shadow: 2px 3px 5px rgba(0, 0, 0, 0.2);\n  border-radius: 3px;\n  border: 1px solid silver;\n\n  background: white;\n  font-size: 90%;\n  font-family: monospace;\n\n  max-height: 20em;\n  overflow-y: auto;\n}\n\n.CodeMirror-hint {\n  margin: 0;\n  padding: 0 4px;\n  border-radius: 2px;\n  white-space: pre;\n  color: black;\n  cursor: pointer;\n}\n\nli.CodeMirror-hint-active {\n  background: #08f;\n  color: white;\n}\n\n/*\n\n////////////////////////////////////////////////////////////////////////\n//     import \"codemirror/addon/dialog/dialog.css\n//////////////////////////////////////////////////////////////////////// \n\n*/\n\n.CodeMirror-dialog {\n  position: absolute;\n  left: 0;\n  right: 0;\n  background: inherit;\n  z-index: 15;\n  padding: 0.1em 0.8em;\n  overflow: hidden;\n  color: inherit;\n}\n\n.CodeMirror-dialog-top {\n  border-bottom: 1px solid #eee;\n  top: 0;\n}\n\n.CodeMirror-dialog-bottom {\n  border-top: 1px solid #eee;\n  bottom: 0;\n}\n\n.CodeMirror-dialog input {\n  border: none;\n  outline: none;\n  background: transparent;\n  width: 20em;\n  color: inherit;\n  font-family: monospace;\n}\n\n.CodeMirror-dialog button {\n  font-size: 70%;\n}\n\n/*\n\n////////////////////////////////////////////////////////////////////////\n//     import \"codemirror/addon/fold/foldgutter.css\"\n//////////////////////////////////////////////////////////////////////// \n\n*/\n.CodeMirror-foldmarker {\n  color: blue;\n  text-shadow: #b9f 1px 1px 2px, #b9f -1px -1px 2px, #b9f 1px -1px 2px,\n    #b9f -1px 1px 2px;\n  font-family: arial;\n  line-height: 0.3;\n  cursor: pointer;\n}\n.CodeMirror-foldgutter {\n  width: 0.7em;\n}\n.CodeMirror-foldgutter-open,\n.CodeMirror-foldgutter-folded {\n  cursor: pointer;\n}\n.CodeMirror-foldgutter-open:after {\n  content: \"\\25BE\";\n}\n.CodeMirror-foldgutter-folded:after {\n  content: \"\\25B8\";\n}\n</style>","<!--\nCopyright 2021 SpinalCom - www.spinalcom.com\n\nThis file is part of SpinalCore.\n\nPlease read all of the following terms and conditions\nof the Free Software license Agreement (\"Agreement\")\ncarefully.\n\nThis Agreement is a legally binding contract between\nthe Licensee (as defined below) and SpinalCom that\nsets forth the terms and conditions that govern your\nuse of the Program. By installing and/or using the\nProgram, you agree to abide by all the terms and\nconditions stated or referenced herein.\n\nIf you do not agree to abide by these terms and\nconditions, do not demonstrate your acceptance and do\nnot install or use the Program.\nYou should have received a copy of the license along\nwith this file. If not, see\n<http://resources.spinalcom.com/licenses.pdf>.\n-->\n\n<template>\n  <div class=\"_container\">\n    <div class=\"subcontent\">\n      <div class=\"title\">Function</div>\n      <div class=\"content\">\n        <div class=\"div_code\">\n          <div class=\"text_editor\">\n            <spinal-code-mirror class=\"editorContainer\"\n                                :codeObj=\"functions\">\n            </spinal-code-mirror>\n          </div>\n        </div>\n\n      </div>\n    </div>\n\n    <!-- Devices -->\n    <!-- <div class=\"subcontent\">\n      <div class=\"title\">Devices</div>\n      <div class=\"content\">\n        <div class=\"div_code\">\n          <div class=\"text_editor\">\n            <spinal-code-mirror class=\"editorContainer\"\n                                :codeObj=\"functions.devicesFuncion\">\n            </spinal-code-mirror>\n          </div>\n\n        </div>\n\n      </div>\n    </div> -->\n  </div>\n</template>\n\n<script>\nimport SpinalCodeMirror from \"./SpinalCodeMirror.vue\";\n\nexport default {\n  name: \"functionsComponent\",\n  components: { \"spinal-code-mirror\": SpinalCodeMirror },\n  props: {\n    functions: {\n      type: Object,\n      require: true,\n    },\n  },\n  methods: {},\n};\n</script>\n\n<style scoped >\n._container {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  justify-content: space-between;\n}\n\n._container .subcontent {\n  width: 100%;\n  height: 100%;\n  /* border: 1px solid #ffffff; */\n  border-radius: 5%;\n}\n\n._container .subcontent .title {\n  width: 100%;\n  height: 50px;\n  /* border-bottom: 1px solid white; */\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n._container .subcontent .content {\n  height: calc(100% - 50px);\n  padding: 0 7px;\n}\n/* ._container .subcontent .content .div_select {\n  width: 100%;\n  height: 50px;\n} */\n._container .subcontent .content .div_code {\n  width: 100%;\n  height: 100%;\n  /* height: calc(100% - 60px); */\n}\n/* ._container .subcontent .content .div_code .checkbox_div {\n  width: 100%;\n  height: 50px;\n} */\n._container .subcontent .content .div_code .text_editor {\n  width: 100%;\n  height: 100%;\n  /* height: calc(100% - 50px); */\n}\n</style>\n\n<style>\n._container\n  .subcontent\n  .content\n  .div_code\n  .text_editor\n  .CodeMirror.cm-s-monokai.CodeMirror-wrap {\n  width: 100%;\n  height: 98%;\n}\n</style>\n</style>","<!--\nCopyright 2021 SpinalCom - www.spinalcom.com\n\nThis file is part of SpinalCore.\n\nPlease read all of the following terms and conditions\nof the Free Software license Agreement (\"Agreement\")\ncarefully.\n\nThis Agreement is a legally binding contract between\nthe Licensee (as defined below) and SpinalCom that\nsets forth the terms and conditions that govern your\nuse of the Program. By installing and/or using the\nProgram, you agree to abide by all the terms and\nconditions stated or referenced herein.\n\nIf you do not agree to abide by these terms and\nconditions, do not demonstrate your acceptance and do\nnot install or use the Program.\nYou should have received a copy of the license along\nwith this file. If not, see\n<http://resources.spinalcom.com/licenses.pdf>.\n-->\n\n<template>\n  <md-dialog :md-active.sync=\"showDialog\"\n             @md-closed=\"closeDialog(false)\"\n             class=\"pcvue_link_dialog_content\">\n    <md-dialog-title class=\"_dialogTitle\">Link floor(s) to devices\n    </md-dialog-title>\n\n    <md-dialog-content class=\"_dialogContent\">\n\n      <link-component v-if=\"state === PAGES.selection\"\n                      :contexts=\"contexts\"\n                      :networks=\"networks\"\n                      :devices=\"devices\"\n                      :contextSelected=\"contextSelected\"\n                      :networkSelected=\"networkSelected\"\n                      :deviceSelected=\"deviceSelected\"\n                      @selectContext=\"selectContext\"\n                      @selectNetwork=\"selectNetwork\"\n                      @selectDevices=\"selectDevices\"></link-component>\n\n      <functions-component v-else-if=\"state === PAGES.functions\"\n                           :functions=\"functions\">\n      </functions-component>\n\n      <div class=\"states\"\n           v-else-if=\"state === PAGES.loading\">\n        <md-progress-spinner md-mode=\"indeterminate\"></md-progress-spinner>\n      </div>\n\n      <div class=\"states icon\"\n           v-else>\n        <md-icon class=\"md-size-5x\">{{icon}}</md-icon>\n      </div>\n\n    </md-dialog-content>\n\n    <md-dialog-actions>\n      <md-button class=\"md-primary\"\n                 @click=\"closeDialog(false)\">Cancel</md-button>\n      <md-button class=\"md-primary\"\n                 :disabled=\"disabledPreviousButton\"\n                 @click=\"goToPrevious\">Previous</md-button>\n\n      <md-button class=\"md-primary\"\n                 :disabled=\"disabledNextButton\"\n                 @click=\"goToNext\">Next</md-button>\n\n      <md-button class=\"md-primary\"\n                 :disabled=\"disabledLinkButton\"\n                 @click=\"linkNodes\">Link</md-button>\n    </md-dialog-actions>\n  </md-dialog>\n</template>\n\n<script>\nimport { getNetworkStructure } from \"../../utils/utils\";\nimport { linkDevicesToFloorId } from \"../../utils/linkDeviceToFloorUtils\";\nimport { defaultFunction } from \"../../utils/function\";\n\nimport linkComponent from \"../components/linkComponent.vue\";\nimport FunctionsComponent from \"../components/functionsComponent.vue\";\n\nexport default {\n  name: \"linkPCvueToFloor\",\n  components: {\n    \"link-component\": linkComponent,\n    \"functions-component\": FunctionsComponent,\n  },\n  props: [\"onFinised\"],\n  data() {\n    this.geographicStartId;\n    this.geographicContextId;\n\n    this.PAGES = {\n      selection: 0,\n      loading: 1,\n      success: 2,\n      error: 3,\n      functions: 4,\n    };\n\n    return {\n      showDialog: true,\n      state: this.PAGES.selection,\n      contexts: [],\n      networks: [],\n      devices: [],\n      contextSelected: undefined,\n      networkSelected: undefined,\n      deviceSelected: undefined,\n      functions: {\n        code: defaultFunction(),\n        // floorsFunction: { code: \"\" },\n        // devicesFuncion: { code: \"\" },\n      },\n    };\n  },\n  mounted() {},\n  methods: {\n    async opened({ selectedNode, context, graph }) {\n      this.state = this.PAGES.loading;\n      // this.selectedNodeId =  = selectedNode.id.get();\n      this.geographicStartId = selectedNode.id.get();\n      this.geographicContextId = context.id.get();\n\n      getNetworkStructure()\n        .then((contexts) => {\n          this.contexts = contexts;\n          this.state = this.PAGES.selection;\n        })\n        .catch((err) => {\n          console.error(err);\n          this.state = this.PAGES.error;\n        });\n    },\n\n    linkNodes() {\n      this.state = this.PAGES.loading;\n      const devices = this.getDevices();\n\n      linkDevicesToFloorId(\n        this.geographicContextId,\n        this.geographicStartId,\n        devices,\n        this.functions.code\n      )\n        .then(() => {\n          this.state = this.PAGES.success;\n        })\n        .catch((err) => {\n          console.error(err);\n          this.state = this.PAGES.error;\n        });\n    },\n\n    getDevices() {\n      if (!this.deviceSelected) return this.devices;\n\n      return this.devices.filter((el) => el.id === this.deviceSelected);\n    },\n\n    closeDialog(closeResult) {\n      if (typeof this.onFinised === \"function\") {\n        this.onFinised({ confirm: closeResult });\n      }\n    },\n\n    removed(option) {\n      this.showDialog = false;\n    },\n\n    goToPrevious() {\n      if (this.state === this.PAGES.functions) {\n        this.state = this.PAGES.selection;\n      }\n    },\n\n    goToNext() {\n      if (this.state === this.PAGES.selection) {\n        this.state = this.PAGES.functions;\n      }\n    },\n\n    /**Selection */\n    selectContext(id) {\n      this.contextSelected = this.contextSelected === id ? undefined : id;\n    },\n\n    selectNetwork(id) {\n      this.networkSelected = this.networkSelected === id ? undefined : id;\n    },\n\n    selectDevices(id) {\n      this.deviceSelected = this.deviceSelected === id ? undefined : id;\n    },\n\n    /* Update */\n    updateNetworks() {\n      this.networks = [];\n      this.devices = [];\n      if (this.contextSelected) {\n        let val = this.contexts.find((el) => el.id === this.contextSelected);\n        if (val) this.networks = val.networks;\n      }\n    },\n    updateDevices() {\n      this.devices = [];\n      if (this.networkSelected) {\n        let val = this.networks.find((el) => el.id === this.networkSelected);\n        if (val) this.devices = val.devices;\n      }\n    },\n  },\n  watch: {\n    async contextSelected() {\n      await this.updateNetworks();\n      this.networkSelected = undefined;\n    },\n    async networkSelected() {\n      this.updateDevices();\n      this.deviceSelected = undefined;\n    },\n  },\n  computed: {\n    icon() {\n      return this.state == this.PAGES.success ? \"file_download_done\" : \"error\";\n    },\n\n    disabledLinkButton() {\n      return this.state != this.PAGES.functions || !this.networkSelected;\n    },\n\n    disabledNextButton() {\n      return this.state != this.PAGES.selection || !this.networkSelected;\n    },\n\n    disabledPreviousButton() {\n      return this.state != this.PAGES.functions;\n    },\n  },\n};\n</script>\n\n<style scoped>\n.pcvue_link_dialog_content {\n  width: 60%;\n  height: 80%;\n}\n\n.pcvue_link_dialog_content ._dialogTitle {\n  text-align: center;\n}\n\n.pcvue_link_dialog_content ._dialogContent {\n  width: 100%;\n  height: 100%;\n}\n\n.pcvue_link_dialog_content ._dialogContent .states {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n/* .pcvue_link_dialog_content ._dialogContent .states .icon {\n  width: 100%;\n  text-align: center;\n} */\n</style>"],"names":[],"version":3,"file":"spinal-env-viewer-plugin-pcvue-manager.12fd27cd.css.map"}