{"mappings":"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ACxD,iBAAiB,SAAS;IAC9B;IACA;QACI,MAAM;QACN,mBAAmB,CAAA,GAAA,mBAAE,EAAE,OAAO,CAAA,GAAA,8CAA0B;QACxD,iBAAiB,SAAS;IAC9B;IACA;QACI,MAAM;QACN,mBAAmB,CAAA,GAAA,mBAAE,EAAE,OAAO,CAAA,GAAA,kCAAc;QAC5C,iBAAiB,SAAS;IAC9B;IACA;QACI,MAAM;QACN,mBAAmB,CAAA,GAAA,mBAAE,EAAE,OAAO,CAAA,GAAA,mCAAkB;QAChD,iBAAiB,SAAS;IAC9B;CACC;AAGD,IAAK,IAAI,QAAQ,GAAG,QAAQ,QAAQ,QAAQ,QACxC,qBAAqB,MAAM,OAAO,CAAC,MAAM;;;;;AC1D7C,IAAI;AACJ,IAAI,aAAa;IACf,SAAS,QAAQ;IACjB,IAAI,OAAO,YAAY,SAAS,OAAO;IACvC,OAAO,SAAS,QAAQ,oBAAyB;IACvC,OAAO,kBAAkB,QAAQ,oBAAyB;IAC1D,OAAO,WAAW;IAG5B,QAAQ,oBAAuB,QAAQ;IACvC,OAAO,YAAY;IACnB,OAAO,SAAS;AAClB;AACA;kBAEe;;;A,sD;;;A;A,I,gB;I,M;I,O;Q;K;I;Q,O;Y,Y;Y,Y;Y,O;Y,O;Y,e;Y,c;Y,S;Q;I;I,S;Q,Q,M;Y,I,C,Q,O;Y,I,C,Q,O;Y,I,C,e,O;Y,I,C,U,O;Y,I,C,gB,O;Q;Q,S,M;Y,I,O,e,O,W,O,S,G;gB,I,O,I,C,W;gB,I,I,C,e,iD;gB,C,G,2D,E,qB;qB,iC;gB,W;gB,iC;gB,2B;gB,K;gB,C,G,2D,E,W,M,I,C,a,G,O,I,C,Q,G;Y;Y,I,C,a;Q;Q,a,W;Y,I,O,I,C,c,Y,I,C,U;gB;gB,Y,I,C;Y;Q;IAuCf;A;AAGA,IAAA,UAAA,OAAA,kBAAA,aAAA,cAAA,UAAA;kBACA,SAAA,wCAAA;;;A,I,S;I,I,M,I;I,I,K,I;I,I,K,I,M,M;I,O,G,a;Q,O;Y,a,I;Q;Q,I;Y,mB,S,M;gB,I,a;Y;Y,oB,S,M;gB,I,a;Y;Y,a,S,M;gB,O,I,Y;Y;Q;I,G;Q,G,mB;Y,I,G,I,G,I;S;Q,I,G;Q,G,qB;Y,G,Y;gB,G,S;oB,I,G,I,G,I;iB;gB,I,G;gB,G,Y;oB,O;wB,O,I;wB,U,S,G;4B,I,a;wB;wB,Y;oB;gB;a,E;S,E;Q,I,G;Q,G,qB;Y,G,a;gB,a;gB,I;oB,S,S,M;wB,O,I,Y;oB;gB;Y,G;gB,I,G;a;Y,I,G;Y,G,a;gB,a;gB,O;oB,Y,C,C,I,W,O,S,C;gB;gB,I;oB,S,S,M;wB,O,I,Y;oB;gB;Y,G;gB,I,G;a;S,E;K,E;A;A,I,kB,E;A,Q,S;A,Q,kB;;;;;AA1DA,IAAI,OAAO,KAAO;kBAEH,CAAA,UAEf;;;;;ACJA,IAAI;AACJ,IAAI,aAAa;IACf,SAAS,QAAQ;IACjB,IAAI,OAAO,YAAY,SAAS,OAAO;IACvC,OAAO,SAAS,QAAQ,oBAAuC;IACrD,OAAO,kBAAkB,QAAQ,oBAAuC;IACxE,OAAO,WAAW;IAE5B,OAAO,eAAe,QAAQ,oBAAoC;IAClE,QAAQ,oBAAqC,QAAQ;IACrD,OAAO,YAAY;IACnB,OAAO,SAAS;AAClB;AACA;kBAEe;;;;;A;;A,yE;A,+F;A;A;;A;;A;A;A,I,gB;I,M;I,Y;Q,kB,C,G,gC;Q,oB,C,G,kC;I;I,O;Q;K;I;Q,I,C;Q,I,C,Q;Y,W;Y,Q;Y,S;Y,U;Y,S;Y,O;Q;Q,8B;Q,gC;Q,O;Y,S;Y,Y,I;Y,Y;Y,c,I,C,M;Y,M,E;Y,S,E;Y,S,E;Y,iB;Y,gB;Y,gB;Y,U;Y,Y,E;Q;I;I;Q,C,G,qB,E,I,e,C;Y,I,C,e,I,C,M;Y,I,C,a,K;gB,I,C,e,I,C,M;Y;Q;I;I,S;Q,M,Q,M;Y,6C;Y,4C;Y,qC;Y,I,C,e,I,C,M;Y,I,C,W,O;Y,Q,I;gB,I,C;gB,I,C,a,O,W,O;a,E,K,C,C,M,U;gB,I,C,iB;oB,W,O;oB,W,U,I,C,K,G;gB;gB,I,C,O;gB,I,C;gB,I,C,e,I,C,M;Y;Q;Q,S,M;Y,I,C,a;Q;Q,a,W;Y,I,O,I,C,c,Y,I,C,U;Q;Q,c,S,E,M;Y,M,W,C,G,+C,E,Q;Y,IAwFf,SAAA,KAAA,UAAA,CAAA,GAAA,0BAAA,KACA,SAAA,c,S,W,OAGA,OAAA,QAAA,QAAA;gBAAA;aAAA;YAGA,OAAA,CAAA,GAAA,+CAAA,EAAA,cAAA,QAAA,WAAA,CAAA;gB,IAEA,KAAA,UAAA,UAAA,CAAA,GAAA,0BAAA,KACA,KAAA,KAAA,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AgC;IAC9C,OAAO,kBAAkB,QAAQ,oBAAgC;IACjE,OAAO,WAAW;IAE5B,OAAO,eAAe,QAAQ,oBAA6B;IAC3D,QAAQ,mBAA8B,QAAQ;IAC9C,OAAO,YAAY;IACnB,OAAO,SAAS;AAClB;AACA;kBAEe;;;;;A;;A,I,gB;I,M;I,O;Q,e,C;Q,gB,C;Q,a,C;Q,M,C;Q,S,C;Q,S,C;Q,iB,C;Q,gB,C;Q,gB,C;Q,Y;Y,M;Y,S;Q;I;I,Y;Q,iB,C,G,sC;I;I,S;Q,e,G;Y,I,C,M,iB;Q;Q,c,G;Y,I,C,M,gB;Q;Q,c,G;Y,I,C,M,gB;Q;I;A;A,I,U,O,kB,a,c,U;kB,S,wC;;;;;ACff,IAAI;AACJ,IAAI,aAAa;IACf,SAAS,QAAQ;IACjB,IAAI,OAAO,YAAY,SAAS,OAAO;IACvC,OAAO,SAAS,QAAQ,oBAAsC;IACpD,OAAO,kBAAkB,QAAQ,oBAAsC;IACvE,OAAO,WAAW;IAE5B,OAAO,eAAe,QAAQ,oBAAmC;IACjE,QAAQ,oBAAoC,QAAQ;IACpD,OAAO,YAAY;IACnB,OAAO,SAAS;AAClB;AACA;kBAEe;;;;;A,I,gB;I,M;I,O;Q;Q;Q;Q;K;I,S;Q;Y,I,C,M;Q;Q,Y,E;Y,I,C,M,U;Q;I;A;A,I,U,O,kB,a,c,U;kB,S,wC;;;A,I,S;I,I,M,I;I,I,K,I;I,I,K,I,M,M;I,O,G,O;Q,a;I,G;Q,G,O;Y,a;Q,G;Y,G,O;gB,I,G,I,G,I;a;S;Q,I,G;Q,G,c;Y,a;Q,G;Y,G,W,I,G,I,M,S,I,E,K;gB,O,G,gB;oB,Y;wB;4B,M;4B,S;4B,O,K;4B,Y;wB;qB;oB,K;oB,a;oB,O;wB,Y,K,O,I;oB;oB,I;wB,S,S,M;4B,O,I,W,K;wB;oB;gB,G;oB,G,Q;wB,a;oB,G;wB,I,G,I,G,K;qB;iB;Y,I;S,E;K,E;A;A,I,kB,E;A,Q,S;A,Q,kB;;;;;AAff,IAAI,OAAO,KAAO;kBAEH,CAAA,UAEf;;;A,I,S;I,I,M,I;I,I,K,I;I,I,K,I,M,M;I,O,G,O;Q,a;I,G;Q,G,O;Y,O,I,a,Y;Q,G;Y,G,iB;gB,O;oB,S,I;oB,Q,I;oB,gB,I;gB;gB,I;oB,U,I;gB;Y;S,E;Q,I,G;Q,G,O;Y,O,I,a,Y;Q,G;Y,G,iB;gB,O;oB,S,I;oB,Q,I;oB,gB,I;gB;gB,I;oB,U,I;gB;Y;S,E;Q,I,G;Q,I,a,G,O;Y,a;Q,G;Y,G,iB;gB,O;oB,S,I;oB,Q,I;oB,gB,I;gB;gB,I;oB,U,I;gB;Y;S,E,K,I;K;A;A,I,kB,E;A,Q,S;A,Q,kB;;;;;ADJA,IAAI,OAAO,KAAO;kBAEH,CAAA,UAEf;;;;;AEJA,IAAI;AACJ,IAAI,aAAa;IACf,SAAS,QAAQ;IACjB,IAAI,OAAO,YAAY,SAAS,OAAO;IACvC,OAAO,SAAS,QAAQ,oBAAkC;IAChD,OAAO,kBAAkB,QAAQ,oBAAkC;IACnE,OAAO,WAAW;IAE5B,OAAO,eAAe,QAAQ,oBAA+B;IAC7D,QAAQ,oBAAgC,QAAQ;IAChD,OAAO,YAAY;IACnB,OAAO,SAAS;AAClB;AACA;kBAEe;;;;;A;A,yB;A,qB;A,I,gB;I,M;I,O;Q,gB;Q,S,C;I;I;Q,O;Q;I;I,S;Q;Y,C,G,6D,E,U,0B;gB,M,I,C;gB,Q,I,C,Q,S;gB,U,C;oB,Q,I,c;oB,I,C,M,Q;wB,Y,I,C,Q,S;wB,O;oB;gB;Y;Q;Q;Y,I,C;Q;I;A;A,I,U,O,kB,a,c,U;kB,S,wC;;;A,I,S;I,I,M,I;I,I,K,I;I,I,K,I,M,M;I,O,G,O;Q,a;I,G;Q,G,O;Y,Y;gB;oB,M;oB,S;oB,O,I,Q,S;oB,Y;gB;a;Y,a;Q,G;Y,I,G,I,G,I,Q,S;S;Q,I,G;Q,G,O;Y,a;Q,G;Y,G,O;gB,Y;oB;wB,M;wB,S;wB,O,A,I,Q,O,S;wB,Y;oB;iB;gB,a;Y,G;gB,G,O;oB,a;gB,G;oB,I,G,I,G,I,Q,O;iB;gB,I,G;gB,G,O;oB,a;gB,G;oB,I,G;iB;a;Y,I,G;Y,G,O;gB,Y;oB;wB,M;wB,S;wB,O,A,I,Q,qB,S;wB,Y;oB;iB;gB,a;Y,G;gB,G,O;oB,a;gB,G;oB,I,G,I,G,I,Q,qB;iB;gB,I,G;gB,G,O;oB,a;gB,G;oB,I,G;iB;a;Y,I,G;Y,G,O;gB,a;Y,G;gB,G,a;oB,a;oB,I;wB,S,I;oB;gB,G;oB,I,G;iB;a,E;S;K;A;A,I,kB,E;A,Q,S;A,Q,kB;;;;;AAff,IAAI,OAAO,KAAO;kBAEH,CAAA,UAEf;;;A,I,S;I,I,M,I;I,I,K,I;I,I,K,I,M,M;I,O,G,a;Q,a;Q,O;Y,a,I;Q;Q,I;Y,mB,S,M;gB,I,a;Y;Y,oB,S,M;gB,I,a;Y;Y,a,S,M;gB,O,I,Y;Y;Q;I,G;Q,G,mB;Y,a;Q,G;Y,I,G;S;Q,I,G;Q,G,qB;Y,a;Q,G;Y,I,iB,I,M,Y,G,kB;gB,O;oB,iB;oB,kB;oB,e;oB,Q,I;oB,W,I;oB,W,I;oB,mB,I;oB,kB,I;oB,kB,I;gB;gB,I;oB,iB,I;oB,gB,I;oB,gB,I;gB;Y,K,A,I,iB,I,M,S,G,c;gB,a;Y,G,I,G,I,Y,S,I;gB,O,G,oB;oB,K,K,S;oB,K,Y,K,S;oB,U;oB,a;oB,O;wB,W;oB;oB,I;wB,Q,I;oB;gB;Y,I,K,A,I,iB,I,M,U,G,O;gB,a;Y,G;gB,G,uB;oB,O;wB,W;oB;gB;a,E,K,A,I,iB,I,M,U,G,O;gB,a;Y,G;gB,G,W;oB,a;gB,G;oB,I,G;iB;a,E,K,A,I,iB,I,M,Q,G,O;gB,a;Y,G;gB,G,W;oB,a;gB,G;oB,I,G;iB;a,E,K,A,I,iB,I,M,W,G,O;gB,a;Y,G;gB,G,O;oB,a;gB,G;oB,I,G,I,G,I,W;iB;gB,I,G;gB,G,mB;oB,a;oB,O;wB,W;wB,Y,I;oB;gB;a,E,K,I;S,E;Q,I,G;Q,G,qB;Y,G,a;gB,a;gB,I;oB,S,S,M;wB,O,I,Y;oB;gB;Y,G;gB,I,G;a;Y,I,G;Y,I,iB,I,M,Y,G,a;gB,a;gB,O;oB,Y,I;gB;gB,I;oB,S,I;gB;Y,G;gB,I,G;a,I,I;Y,I,G;Y,I,iB,I,M,S,G,a;gB,a;gB,I;oB,S,I;gB;Y,G;gB,I,G;a,I,I;Y,I,G;Y,I,iB,I,M,S,G,a;gB,a;gB,I;oB,S,I;gB;Y,G;gB,I,G;a,I,I;S,E;K,E;A;A,I,kB,E;A,Q,S;A,Q,kB;;;;;APJA,IAAI,OAAO,KAAO;kBAEH,CAAA,UAEf;;;;;AQJA,IAAI;AACJ,IAAI,aAAa;IACf,SAAS,QAAQ;IACjB,IAAI,OAAO,YAAY,SAAS,OAAO;IACvC,OAAO,SAAS,QAAQ,oBAAqC;IACnD,OAAO,kBAAkB,QAAQ,oBAAqC;IACtE,OAAO,WAAW;IAE5B,OAAO,eAAe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gC;gC,Y;4B;wB,G;4B,I,G;yB;qB,E;iB,I,G,O;oB,a;gB,G;oB,I,S,I,O,U,G,uB;wB,O;4B,W;wB;oB,K,A,I,S,I,O,U,G,W;wB,a;oB,G;wB,I,G;qB,I,A,I,S,I,O,Q,G,W;wB,a;oB,G;wB,I,G;qB,I,I;iB,E;a;S;Q,I,G;Q,G,qB;Y,G,a;gB,a;gB,I;oB,S,S,M;wB,O,I,Y;oB;gB;Y,G;gB,I,G;a;Y,I,G;Y,G,a;gB,a;gB,O;oB,Y,I,S,I,O;gB;gB,I;oB,S,I;gB;Y,G;gB,I,G;a;S,E;K,E;A;A,I,kB,E;A,Q,S;A,Q,kB;;;;;ADnIA,IAAI,OAAO,KAAO;kBAEH,CAAA,UAEf;;;;;AEJA,IAAI;AACJ,IAAI,aAAa;IACf,SAAS,QAAQ;IACjB,IAAI,OAAO,YAAY,SAAS,OAAO;IACvC,OAAO,SAAS,QAAQ,oBAAkC;IAChD,OAAO,kBAAkB,QAAQ,oBAAkC;IACnE,OAAO,WAAW;IAE5B,OAAO,eAAe,QAAQ,oBAA+B;IAC7D,QAAQ,oBAAgC,QAAQ;IAChD,OAAO,YAAY;IACnB,OAAO,SAAS;AAClB;AACA;kBAEe;;;;;A;A;;A,I,gB;I,M;I,O;Q;K;I,Y;Q,a,C,G,4B;I;I;Q,I,C;Q,O;Y,S;Y,Y;Y,M;Q;I;I,S;Q,M,Q,M;Y,I,O,M;gB,Q,I;gB,I,C,O,K,M,K,U,O;gB,I,C,W,O;gB;Y;Y,uD;Y,I,C,O,M,C,G,+D,E,uB,O;Q,mC;Q;Q,M;Y,I,O,I,C,a,Y;gB,Q,I;gB,O,I,C,Y;Y;Y,M,gB,I,C,K,O,I,C,E,Y,E,W,E,G,C,G,+D,E,6B,a,I,Y;Y,M,Q,I;Y,M,iB,I,C,K,qB,I,C,K,C,G,+D,E,+B,G;YAwCf,MAAA,QAAA,IAAA;YAEA,IAAA,CAAA,UAAA;QACA;QAEA,MAAA,SAAA,MAAA;Y,I,U,O,I,C,a,YAEA,IAAA,CAAA,SAAA,IAAA,CAAA;YAgBA,IAAA,CAAA,aAAA;QACA;QAEA,aAAA,WAAA;YACA,IAAA,OAAA,IAAA,CAAA,cAAA,YACA,IAAA,CAAA,UAAA;QAEA;IAeA;AACA;AAEA,IAAA,UAAA,OAAA,kBAAA,aAAA,cAAA,UAAA;kB,S,wC;;;;;ACvGA,IAAI;AACJ,IAAI,aAAa;IACf,SAAS,QAAQ;IACjB,IAAI,OAAO,YAAY,SAAS,OAAO;IACvC,OAAO,SAAS,QAAQ,oBAA4B;IAC1C,OAAO,kBAAkB,QAAQ,oBAA4B;IAC7D,OAAO,WAAW;IAE5B,OAAO,eAAe,QAAQ,oBAAyB;IACvD,QAAQ,oBAA0B,QAAQ;IAC1C,OAAO,YAAY;IACnB,OAAO,SAAS;AAClB;AACA;kBAEe;;;;;A;;A,I,gB;I,M;I,O;Q,W,C;Q,Y,C;Q,M,C;I;I;Q,O;Y,sB;Y,qB;Q;I;I,S;Q;Y,I,mB,I,C,K;Y,I,kB,I,C,K;Y,M,Y,I,C,K;Y,I,C,K,S,C,G,oC,E,oB,kB,iB,I,C,sB,I,C,qB;Y,I,C,uB;Y,I,C,sB;Q;Q,a,c,E,a;Y,I,mB,I,C,K;Y,I,kB,I,C,K;Y,M,Y,I,C,K;Y,C,G,oC,E,wB,W,kB,iB,gB,e,K,C,E,oB,E,mB,E,S,E;gB,I,C,K,uB;gB,I,C,K,sB;gB,I,C,K,S;Y;Q;Q;Y,O,O,I,C,yB,e,O,I,C,wB;Q;I;A;A,I,U,O,kB,a,c,U;kB,S,wC;;;AChBf;;;CAGC;;kBACc;IACb,qBACE,gBAAgB,EAChB,eAAe,EACf,oBAAoB,EACpB,kBAAkB,EAClB,SAAS;QAET,IAAI,iBAAiB,iBAAiB,UACpC,CAAC,KAAO,GAAG,OAAO;QAGpB,IAAI,kBAAkB,IAAI;QAE1B,IAAI,gBAAgB,gBAAgB,UAClC,CAAC,KAAO,GAAG,OAAO;QAGpB,IAAI,iBAAiB,IAAI;QAEzB,IAAI,oBAAoB,gBAAgB,CAAC,eAAe;QACxD,IAAI,mBAAmB,eAAe,CAAC,cAAc;QAErD,IAAI,qBAAqB,kBAAkB;YACzC,YAAY;gBACV;oBACE,cAAc;oBACd,aAAa;gBACf;mBACG;aACJ;YAED,gBAAgB,OAAO,gBAAgB;YACvC,iBAAiB,OAAO,eAAe;YACvC,OAAO;QACT;IACF;IAEA,MAAM,yBACJ,SAAS,EACT,oBAAoB,EACpB,mBAAmB,EACnB,cAAc,EACd,aAAa;QAEb,IAAI,SAAS,UAAU,UACrB,CAAC,OACC,KAAK,aAAa,OAAO,kBACzB,KAAK,YAAY,OAAO;QAG5B,IAAI,UAAU,IAAI;YAChB,MAAM,QAAQ,SAAS,CAAC,OAAO;YAC/B,IAAI,OACF,OAAO;gBACL,sBAAsB;oBAAC,MAAM;uBAAiB;iBAAqB;gBACnE,qBAAqB;oBAAC,MAAM;uBAAgB;iBAAoB;gBAChE,WAAW,UAAU,OACnB,CAAC,OACC,KAAK,aAAa,MAAM,kBACxB,KAAK,YAAY,MAAM;YAE7B;QAEJ;QAEA,OAAO;YACL;YACA;YACA;QACF;IACF;AACF;;;A,I,S;I,I,M,I;I,I,K,I;I,I,K,I,M,M;I,O,A,I,O,G,O;Q,a;I,G;Q,G,O;Y,a;Q,G;Y,G,O;gB,a;Y,G;gB,I,G;a;Y,I,G;Y,G,O;gB,a;Y,G,I,G,I,K,Q,S,I,E,K;gB,O,G,O;oB,K;oB,a;gB,G;oB,G,O;wB,Y;4B;gC,M;gC,S;gC,O,K,a;gC,Y;4B;yB;wB,a;oB,G;wB,G,Q;4B,I,G,I,G,K,a;yB;qB;oB,I,G;oB,G,O;wB,a;oB,G;wB,G,a;4B,Y;gC;oC,M;oC,S;oC,O;oC,Y;gC;6B;4B,a;4B,I;gC,S,S,M;oC,O,I,Y,K,a,I,K,Y;gC;4B;wB,G;4B,G,W;gC,I,G;6B;yB,E;qB,E;oB,I,G;oB,G,O;wB,Y;4B;gC,M;gC,S;gC,O,K,Y;gC,Y;4B;yB;wB,a;oB,G;wB,G,Q;4B,I,G,I,G,K,Y;yB;qB;iB;Y,I;S;Q,I,G;Q,G,O;Y,a;Q,G;Y,G,O;gB,a;Y,G;gB,G,O;oB,a;gB,G;oB,I,G,I,G,I;iB;gB,I,G;gB,G,O;oB,a;gB,G;oB,I,K,qB,S,I,G,O;wB,a;oB,G,I,G,I,K,sB,S,Y;wB,O,G,O;4B,Y;gC;oC,M;oC,S;oC,O,a;oC,Y;gC;6B;4B,K,a;4B,a;wB,G;4B,G,Y;gC,a;gC,O;oC,S,a;gC;gC,O;oC,O,I;oC,U,S,G;wC,I,uB;oC;oC,Y;gC;4B,G;gC,I,G,sB,I,G,a,Q;6B;yB,E;oB,I,K,G,O;wB,a;oB,G;wB,I,G;qB;iB;a;Y,I,G;Y,G,O;gB,a;Y,G;gB,G,a;oB,a;oB,O;wB,Y,I;oB;oB,I;wB,S,S,M;4B,O,I;wB;oB;gB,G;oB,G,W;wB,I,G;qB;iB,E;a,E;Y,I,G;Y,G,O;gB,a;Y,G;gB,G,O;oB,a;gB,G;oB,I,G,I,G,I;iB;gB,I,G;gB,G,O;oB,a;gB,G;oB,I,K,oB,S,I,G,O;wB,a;oB,G,I,G,I,K,qB,S,W;wB,O,G,O;4B,Y;gC;oC,M;oC,S;oC,O,Y;oC,Y;gC;6B;4B,K,Y;4B,a;wB,G;4B,G,Y;gC,a;gC,O;oC,S,Y;gC;gC,O;oC,O,I;oC,U,S,G;wC,I,sB;oC;oC,Y;gC;4B,G;gC,I,G,sB,I,G,Y,Q;6B;yB,E;oB,I,K,G,O;wB,a;oB,G;wB,I,G;qB;iB;a;S;K,I,G,O;Q,a;I,G;Q,I,G;K;A;A,I,kB,E;A,Q,S;A,Q,kB;;;;;AD3EA,IAAI,OAAO,KAAO;kBAEH,CAAA,UAEf;;;A,I,S;I,I,M,I;I,I,K,I;I,I,K,I,M,M;I,O,G,a;Q,a;Q,O;Y,a,I;Q;Q,I;Y,mB,S,M;gB,I,a;Y;Y,oB,S,M;gB,I,a;Y;Y,a,S,M;gB,O,I,Y;Y;Q;I,G;Q,G,mB;Y,a;gB,c;Y;Q,G;Y,I,G;S;Q,I,G;Q,G,qB;Y,C,I,U,G,a;gB,O;oB,Q,I;oB,c;oB,a;gB;Y,K,G,O;gB,a;Y,G;gB,G,W;oB,a;gB,G;oB,I,G;iB;a,E;S,E;Q,I,G;Q,G,qB;Y,G,a;gB,a;gB,I;oB,S,S,M;wB,O,I,Y;oB;gB;Y,G;gB,I,G;a;Y,I,G;Y,G,a;gB,a;gB,O;oB,Y,I;gB;gB,I;oB,S,I;gB;Y,G;gB,I,G;a;S,E;K,E;A;A,I,kB,E;A,Q,S;A,Q,kB;;;;;ADJA,IAAI,OAAO,KAAO;kBAEH,CAAA,UAEf;;;;;AGJA,IAAI;AACJ,IAAI,aAAa;IACf,SAAS,QAAQ;IACjB,IAAI,OAAO,YAAY,SAAS,OAAO;IACvC,OAAO,SAAS,QAAQ,oBAA8C;IAC5D,OAAO,kBAAkB,QAAQ,oBAA8C;IAC/E,OAAO,WAAW;IAE5B,OAAO,eAAe,QAAQ,oBAA2C;IACzE,QAAQ,oBAA4C,QAAQ;IAC5D,OAAO,YAAY;IACnB,OAAO,SAAS;AAClB;AACA;kBAEe;;;A,uE;;;A;A;;A;;A;;A,M,Y,Q;A,I,gB;I,M;I,O;Q;K;I,Y;Q,sB,C,G,mC;I;I;Q,I,C;Q,I,C,Y,C,G,qB;Q,I,C,W,C,G,kD,E;Q,I,C,c,C,G,kD,E;Q,I,C,Y;Q,O;Y,U;Y,Y;Y,Y;gB,Q,I,C;gB,M;gB,O,E;Y;Y,e;gB,M,C,G,wB;Y;Q;I;I,S;Q,Q,M;Y,I,O,gB;gB,I,C,W,O,U;gB,I,I,C,U;oB,I,C,W,O,O,U;oB,I,C,W,Q,O,U;oB,I,C,W,S,O,U;gB,O,I,C,c,O,O,U;Y;Y,I,C,W,O;Q;Q,S,M;Y,I,O,a;gB,I,O,I,C,a;oB,I,I,C,U,I,C,S,I,C,U,I,C;yB,I,C,S,I,C,U,I,C;;Y;Y,I,C,a;Q;Q,a,W;Y,I,O,I,C,c,Y,I,C,U;gB;Y;Q;I;A;A,I,U,O,kB,a,c,U;kB,S,wC;;;;;kBChBA;IACZ;QACG,MAAM;QACN,OAAO;QACP,aAAa;IAChB;IACA;QACG,MAAM;QACN,OAAO;QACP,aAAa;IAChB;IACA;QACG,MAAM;QACN,OAAO;QACP,aAAa;IAChB;IACA;QACG,MAAM;QACN,OAAO;QACP,aAAa;IAChB;CACF;;;;;ACpBD,IAAI;AACJ,IAAI,aAAa;IACf,SAAS,QAAQ;IACjB,IAAI,OAAO,YAAY,SAAS,OAAO;IACvC,OAAO,SAAS,QAAQ,oBAAmC;IACjD,OAAO,kBAAkB,QAAQ,oBAAmC;IACpE,OAAO,WAAW;IAE5B,OAAO,eAAe,QAAQ,oBAAgC;IAC9D,QAAQ,oBAAiC,QAAQ;IACjD,OAAO,YAAY;IACnB,OAAO,SAAS;AAClB;AACA;kBAEe;;;A,+B;;;A;A,W;A;A,Y;A,yC;A,sB;AALf;A,oB;AAGA;AACA;AAEA,OAAA;AACA;A,gD;AAEA;AAGA,4BAAA;AACA;AACA;AAEA;AAEA,SAAA;AACA;AACA;A;AAEA;AAGA;AACA;AAEA,aAAA;AACA,iDAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,IAAA,gBAAA;IACA,MAAA;IACA,YAAA;oBACA,CAAA,GAAA,yBAAA;IACA;IACA,OAAA;QACA,SAAA,CAAA;IACA;IACA;Q,O;YAEA,2BAAA;YACA,UAAA;gBACA,SAAA;gBACA,iBAAA;gBACA,aAAA;gBACA,4BAAA;gBACA,MAAA;gBACA,oBAAA;gBACA,cAAA;gBACA,SAAA;oBAAA;oBAAA;iBAAA;gBACA,+BAAA;gBACA,sBAAA;gBACA,8BAAA;gBACA,KAAA;gBACA,MAAA;gBACA,kBAAA;gBACA,aAAA;oBACA,gBAAA;gBACA;gBACA,QAAA;gBACA,eAAA;gBACA,yBAAA;gBACA,OAAA;gBACA,WAAA;oBAAA,cAAA;gBAAA;YACA;QACA;IACA;IACA;IACA,qBAAA;IACA,sCAAA;IACA,gDAAA;IACA,YAAA;IACA;AACA;AAEA,IAAA,UAAA,OAAA,kBAAA,aAAA,cAAA,UAAA;kBACA,SAAA,wCAAA;;;A,I,S;I,I,M,I;I,I,K,I;I,I,K,I,M,M;I,O,G,c;Q,O;Y,W,I;Q;Q,O;Y,O,I,Q;Y,U,S,G;gB,I,K,I,S,Q;Y;Y,Y;Q;I;A;A,I,kB,E;A,Q,S;A,Q,kB;;;;;AA9FA,IAAI,OAAO,KAAO;kBAEH,CAAA,UAEf;;;;;ACJA;;kBAEe,CAAA,GAAA,sBAAK,CAAC,CAAC;;;;;;;;;;;;;;;;;;;IAmBlB,CAAC,CAKL;;;;;;;;;;;;;;;;;;AAkBA;;;AC7CA,OAAO,UAAU,QAAQ,oBAAwB,aAAa,WAAW,QAAQ,oBAA6B,QAAQ;;;A,I,S;I,I,M,I;I,I,K,I;I,I,K,I,M,M;I,O,G,a;Q,a;Q,O;Y,a,I;Q;Q,I;Y,mB,S,M;gB,I,a;Y;Y,oB,S,M;gB,I,a;Y;Y,a,S,M;gB,O,I,Y;Y;Q;I,G;Q,G,mB;Y,a;Q,G;Y,I,G;S;Q,I,G;Q,G,qB;Y,a;Q,G;Y,G,O;gB,a;Y,G;gB,G,O;oB,a;gB,G;oB,G,Y;wB,a;wB,O;4B,S;wB;wB,O;4B,O,I;4B,U,S,G;gC,I,W;4B;4B,Y;wB;oB,G;wB,I,G;qB;iB,E;gB,I,G;gB,G,O;oB,a;gB,G;oB,G,O;wB,a;oB,G;wB,G,Y;4B,a;4B,O;gC,S;4B;4B,O;gC,O,I;gC,U,S,G;oC,I,W;gC;gC,Y;4B;wB,G;4B,I,G;yB;qB,E;iB;a;Y,I,G;Y,I,W,G,O;gB,G,O;oB,G,O;wB,G,gB;4B,a;wB,G;4B,I,G,S,I,G,O,I,W,Q;yB;qB,E;oB,I,G;oB,G,O;wB,G,gB;4B,a;wB,G;4B,I,G,S,I,G,O,I,c,Q;yB;qB,E;iB;gB,I,G;gB,G,W;oB,a;gB,G;oB,G,gB;wB,G,O;4B,a;wB,G;4B,G,Y;gC,G;gC,I,G;gC,G,a;oC,O;wC,M;oC;oC,O;wC,O,I,W;wC,U,S,G;4C,I,K,I,Y,U;wC;wC,Y;oC;gC,G;oC,G,a;wC,O;4C,S,I;wC;oC,G;wC,I,G;qC;oC,I,G;oC,G,a;wC,O;4C,S,I;wC;oC,G;wC,I,G;qC;iC,E;6B,E;yB,E;wB,I,G;wB,G,O;4B,a;4B,a;gC,c;4B;wB,G;4B,I,G;yB;wB,I,G;wB,G,O;4B,a;wB,G;4B,G,Y;gC,G,W;oC,O;wC,U,I;oC;gC;gC,I,G;gC,G,S;oC,I,G;iC;gC,I,G;gC,G,Y;oC,O;wC,Y,C,I;oC;oC,O;wC,O,I,W;wC,U,S,G;4C,I,K,I,Y,Q;wC;wC,Y;oC;gC;gC,I,G;gC,G,W;oC,O;wC,U,I;oC;gC;6B,E;yB,E;qB;oB,I,G;oB,G,gB;wB,G,Y;4B,a;wB,G;4B,G,S;gC,I,G;6B;4B,I,G;4B,G,a;gC,O;oC,Y,C,I;oC,Q;oC,M;oC,Y;oC,Y;gC;gC,O;oC,O,I,W;oC,U,S,G;wC,I,K,I,Y,S;oC;oC,Y;gC;4B,G,I,G,I,W,S,I,E,K;gC,O,G,a;oC,K;oC,O;wC,S,K;oC;gC,G;oC,I,G,I,G,K;iC;4B,I;yB,E;qB,E;iB,E;a,E,K,G,O;gB,a;Y,G;gB,G,sB;oB,a;oB,O;wB,W,I;oB;gB;a,E;S;Q,I,G;Q,G,qB;Y,G,a;gB,a;gB,I;oB,S,S,M;wB,O,I,Y;oB;gB;Y,G;gB,I,G;a;Y,I,G;Y,G,a;gB,a;gB,I;oB,S,S,M;wB,O,I,Y;oB;gB;Y,G;gB,I,G;a;S,E;K,E;A;A,I,kB,E;A,Q,S;A,Q,kB;;;;;AJCtH,IAAI,OAAO,KAAO;kBAEH,CAAA,UAEf;;;;;AKJA,IAAI;AACJ,IAAI,aAAa;IACf,SAAS,QAAQ;IACjB,IAAI,OAAO,YAAY,SAAS,OAAO;IACvC,OAAO,SAAS,QAAQ,oBAA8C;IAC5D,OAAO,kBAAkB,QAAQ,oBAA8C;IAC/E,OAAO,WAAW;IAE5B,OAAO,eAAe,QAAQ,oBAA2C;IACzE,QAAQ,oBAA4C,QAAQ;IAC5D,OAAO,YAAY;IACnB,OAAO,SAAS;AAClB;AACA;kBAEe;;;;;A;;A;;A,I,gB;I,M;I,O;Q;K;I,Y;Q,sB,C,G,mC;I;I;Q,I,C;Q,O;Y,Y;Y,e;gB,M,C,G,wC;Y;Q;I;I,S;Q,Q,M;Y,I,C,O,O,c,I,C,c,O,O,O,a;Y,I,C,W,O;Q;Q,S,M;Y,I,O,a;gB,I,O,I,C,a,Y,I,C,S,I,C,c;Y;Y,I,C,a;Q;QAoBf,aAAA,WAAA;Y,I,O,I,C,c,YAEA,IAAA,CAAA,UAAA;gBAAA;YAAA;QAEA;IACA;AACA;A,I,U,O,kB,a,c,U;kBAGA,SAAA,wCAAA;;;;;AC7CA;;kBAEe,CAAA,GAAA,sBAAK,CAAC,CAAC;;;;;;;;;;;;;;;;;;AAkBtB,CAAC;;;A,I,S;I,I,M,I;I,I,K,I;I,I,K,I,M,M;I,O,G,a;Q,a;Q,O;Y,a,I;Q;Q,I;Y,mB,S,M;gB,I,a;Y;Y,oB,S,M;gB,I,a;Y;Y,a,S,M;gB,O,I,Y;Y;Q;I,G;Q,G,mB;Y,a;Q,G;Y,I,G;S;Q,I,G;Q,G,qB;Y,a;Q,G;Y,G,O;gB,a;Y,G;gB,G,sB;oB,a;oB,O;wB,W,I;oB;gB;a,E;S;Q,I,G;Q,G,qB;Y,G,a;gB,a;gB,I;oB,S,S,M;wB,O,I,Y;oB;gB;Y,G;gB,I,G;a;Y,I,G;Y,G,a;gB,a;gB,I;oB,S,S,M;wB,O,I,Y;oB;gB;Y,G;gB,I,G;a;S,E;K,E;A;A,I,kB,E;A,Q,S;A,Q,kB;;;;;ADnBD,IAAI,OAAO,KAAO;kBAEH,CAAA,UAEf;;;;;AEJA,IAAI;AACJ,IAAI,aAAa;IACf,SAAS,QAAQ;IACjB,IAAI,OAAO,YAAY,SAAS,OAAO;IACvC,OAAO,SAAS,QAAQ,oBAAkC;IAChD,OAAO,kBAAkB,QAAQ,oBAAkC;IACnE,OAAO,WAAW;IAE5B,OAAO,eAAe,QAAQ,mBAA+B;IAC7D,QAAQ,oBAAgC,QAAQ;IAChD,OAAO,YAAY;IACnB,OAAO,SAAS;AAClB;AACA;kBAEe;;;;;A;;A,qG;A;A;;A;;A;;A;;A;;A;;A,sE;A,M,S,Q;A,I,gB;I,M;I,Y;Q,kB,C,G,gC;Q,gB,C,G,mC;Q,0B,C,G,gC;I;I,O;Q;K;I;Q,I,C,Q;Y,W;Y,e;Y,Q;Y,U;Y,S;Y,S;Y,O;Q;Q,I,C,a,E;Q,I,C;Q,I,C;Q,I,C,W;Q,O;Y,e;gB,S;oB,U;oB,a;oB,U;wB,M,C,G,0B;oB;gB;gB,S;oB,U;oB,a;oB,U;wB,M,C,G,yB;oB;gB;gB,oB;Y;Y,S;Y,O;Y,Q;Y,Y;Y,c,I,C,M;Y,Y;Y,M,E;Y,U,E;Y,S,E;Y,iB;Y,iB;Y,gB;Q;I;I,S;Q,Q,M;Y,I,C,e,I,C,M;Y,I,C,Y,O;Y,I,C,S,O;Y,I,C,a,O;Y,I,C,W,K,C;gB,I,C;gB,I,C,Q;gB,I,C,e,I,C,M;Y,G,M,C;gB,Q,M;gB,I,C,e,I,C,M;Y;Q,uC;Q,wB;Q,mE;Q,kD;Q,qB;QAsFf,wBAAA;QACA,wBAAA;Q,S;QAEA,gDAAA;QACA,OAAA;QACA,sBAAA;QACA,4CAAA;Q,Q;QAEA;QAEA,SAAA,IAAA;YACA;Y,I,C,a;QAGA;QAEA,aAAA,WAAA;Y,I,O,I,C,c,YAEA,IAAA,CAAA,UAAA;QAEA;QAEA,MAAA;YACA,IAAA,CAAA,eAAA,IAAA,CAAA,MAAA;YAEA,OAAA,AAAA,CAAA;gBACA,IAAA,CAAA,IAAA,CAAA,cAAA,oBACA,OAAA,IAAA,CAAA;gBACA,OAAA,IAAA,CAAA;YACA,CAAA,IACA,KAAA;gBACA,IAAA,CAAA,eAAA,IAAA,CAAA,MAAA;YACA,GACA,MAAA,CAAA;gBACA,QAAA,MAAA;gBACA,IAAA,CAAA,eAAA,IAAA,CAAA,MAAA;YACA;QACA;QAEA;Y,O,C,G,uC,E,2BAEA,IAAA,CAAA,iBACA,IAAA,CAAA,OAAA,QACA,IAAA,CAAA;QAEA;QAEA;YACA,OAAA,CAAA,GAAA,uCAAA,EAAA,yCACA,IAAA,CAAA,iBACA,IAAA,CAAA,OAAA,QACA,IAAA,CAAA;QAEA;QAEA;YACA,MAAA,c,C,G,uC,E;YAEA,MAAA,mBAAA,CAAA,GAAA,uCAAA,EAAA,gBACA,IAAA,CAAA,Q,I,C;YAGA,OAAA,QAAA,IAAA;gBAAA;gBAAA;aAAA,EAAA,KACA,CAAA,CAAA,MAAA,cAAA;gBACA,IAAA,CAAA,OAAA;gBACA,IAAA,CAAA,aAAA;YACA;QAEA;QAEA;Y,M,c,I,C;YAEA,IAAA,CAAA,eAAA,IAAA,CAAA,MAAA;YAEA,OAAA;gBACA,KAAA,IAAA,CAAA,MAAA;oBACA,IAAA,CAAA;oBACA;gBACA,KAAA,IAAA,CAAA,MAAA;oBACA,IAAA,CAAA,aAAA,MAAA,CAAA;wB,Q,M;wBAEA,IAAA,CAAA,eAAA,IAAA,CAAA,MAAA;oBACA;oBACA;gBAEA;oBACA;YACA;QACA;QAEA;YACA,MAAA,cAAA,IAAA,CAAA;YACA,IAAA,CAAA,eAAA,IAAA,CAAA,MAAA;YAEA,OAAA;gB,K,I,C,M;oBAEA,IAAA,CAAA,eAAA,IAAA,CAAA,MAAA;oBACA;gBACA,KAAA,IAAA,CAAA,MAAA;oBACA,IAAA,CAAA,eAAA,IAAA,CAAA,MAAA;oBACA;gBAEA;oBACA;YACA;QACA;QAEA;YACA,IAAA,CAAA,QAAA;YACA,IAAA,CAAA,eAAA,IAAA,CAAA,MAAA;Q;QAGA,MAAA;YACA,IAAA,CAAA,QAAA;YAEA,0DAAA;Y,wC;YAEA,KAAA;YAEA,sDAAA;YACA,qBAAA;YACA,wCAAA;Y,K;YAGA,MAAA,mBAAA,IAAA,CAAA,cAAA,QAAA;Y,M,mB,I,C,c,Q;YAEA,MAAA,UAAA;gBACA,SAAA,IAAA,CAAA;gBACA,UAAA,IAAA,CAAA;gBACA,MAAA,IAAA,CAAA;YACA;YAEA,CAAA,GAAA,uCAAA,EACA,8BACA,kBACA,IAAA,CAAA,iBACA,IAAA,CAAA,iBACA,IAAA,CAAA,gBACA,S,I,C,YAEA,kBACA,IAAA,CAAA,eAEA,KAAA,CAAA;gBACA,IAAA,CAAA,eAAA,IAAA,CAAA,MAAA;gBACA,IAAA,CAAA,SAAA;YACA,G,M,C;gBAEA,QAAA,MAAA;gBACA,IAAA,CAAA,eAAA,IAAA,CAAA,MAAA;YACA;QACA;QAEA,4CAAA;QACA,2CAAA;Q,6D;QAEA,qBAAA;QACA,cAAA;QACA,OAAA;QACA,KAAA;QAEA,qBAAA;QACA,sDAAA;QACA,yEAAA;QACA,8DAAA;QACA,wCAAA;QACA,+CAAA;QACA,SAAA;QACA,0DAAA;QACA,8DAAA;Q,0B;QAEA,4EAAA;QAEA,qCAAA;Q,gD;QAEA,iCAAA;QACA,8CAAA;QACA,YAAA;QACA,UAAA;QACA,QAAA;QAEA,sBAAA;QACA,MAAA;QACA,KAAA;Q,4B;QAGA,kDAAA;QACA,gCAAA;QACA,mCAAA;QACA,iDAAA;Q,S;QAEA,MAAA;QAEA,sCAAA;Q,K;QAGA,4BAAA;QACA,kDAAA;QACA,gCAAA;QACA,mCAAA;QACA,iDAAA;QACA,SAAA;Q,M;QAEA,sCAAA;QACA,KAAA;QAEA,kCAAA;Q,8C;QAEA,KAAA;QAEA,iBAAA;QACA,kDAAA;Q,+B;QAEA,kDAAA;QACA,iDAAA;Q,+B;QAEA,qBAAA;QAEA,6EAAA;QAEA,yDAAA;QAEA,6DAAA;QACA,eAAA;Q,iB;QAEA,sBAAA;QACA,SAAA;QACA,iBAAA;QACA,QAAA;QAEA,UAAA;QACA,sDAAA;Q,iB;QAEA,0DAAA;QACA,6DAAA;QACA,WAAA;QACA,UAAA;QACA,sBAAA;QACA,mBAAA;QACA,MAAA;QACA,KAAA;QAEA,wEAAA;QACA,mDAAA;QACA,0BAAA;QACA,gDAAA;QACA,0BAAA;QACA,yBAAA;QACA,WAAA;QAEA,mBAAA;QACA,SAAA;Q,mC;QAGA,KAAA;QAEA,kDAAA;QACA,uCAAA;QACA,iBAAA;QACA,gDAAA;QACA,qDAAA;Q,+B;QAEA,8CAAA;QACA,WAAA;QACA,SAAA;QACA,KAAA;QAEA,aAAA,GACA,eAAA,EAAA;YACA,IAAA,CAAA,kBAAA;QACA;QAEA,eAAA,EAAA;Y,I,C,kB;QAEA;QAEA,cAAA,EAAA;YACA,IAAA,CAAA,iBAAA;QACA;QAEA,UAAA,G;YAEA,IAAA,CAAA,WAAA,EAAA;YACA,IAAA,IAAA,CAAA,iBAAA;gBACA,IAAA,MAAA,IAAA,CAAA,KAAA,KAAA,CAAA,KAAA,GAAA,OAAA,IAAA,CAAA;gB,I,K,I,C,W,I;YAEA;QACA;QAEA;YACA,IAAA,CAAA,UAAA,EAAA;YACA,IAAA,IAAA,CAAA,iBAAA;gBACA,IAAA,MAAA,IAAA,CAAA,SAAA,KAAA,CAAA,KAAA,GAAA,OAAA,IAAA,CAAA;gB,I,K,I,C,U,I;YAEA;QACA;QAEA,YAAA,GAEA;YACA,OACA,IAAA,CAAA,iBAAA,IAAA,CAAA,MAAA,WACA,IAAA,CAAA,iBAAA,IAAA,CAAA,MAAA,aACA,IAAA,CAAA,iBAAA,IAAA,CAAA,MAAA;QAEA;QAEA;YACA,4BAAA,GACA,O,A,I,C,c,C,I,C,kBAEA,2BAAA;YACA,CAAA,IAAA,CAAA,mBACA,IAAA,CAAA,iBAAA,IAAA,CAAA,MAAA,WACA,IAAA,CAAA,iBAAA,IAAA,CAAA,MAAA,UACA,IAAA,CAAA,iBAAA,IAAA,CAAA,MAAA;QAEA;QAEA;Y,OAEA,IAAA,CAAA,iBAAA,IAAA,CAAA,MAAA,W,I,C,iB,I,C,M,UAEA,IAAA,CAAA,iBAAA,IAAA,CAAA,MAAA,WACA,IAAA,CAAA,iBAAA,IAAA,CAAA,MAAA;QAEA;IACA;IACA,OAAA;QACA,MAAA;Y,M,I,C;YAEA,IAAA,CAAA,kBAAA;QACA;QAEA,MAAA;YACA,IAAA,CAAA;YACA,IAAA,CAAA,iBAAA;QACA;IACA;AACA;AAEA,IAAA,UAAA,OAAA,kBAAA,aAAA,cAAA,UAAA;kB,S,wC;;;;;AC3bA;AACA;;AAEA;AAIA;kBAEe;IACb;QACE,OAAO,CAAA,GAAA,8BAAa,EAAE;IACxB;IAEA,iBAAgB,OAAM,EAAE,UAAS;QAC/B,MAAM,WAAU,CAAA,GAAA,+CAAiB,EAAE,QAAQ;QAC3C,IAAI,SAAQ,cAAc,SAAQ,WAAW,OAAO,OAAO;YAAC,SAAQ;SAAM;QAE1E,OAAO,CAAA,GAAA,+CAAiB,EAAE,cAAc,SAAQ,YAAW,CAAC;YAC1D,IAAI,MAAK,KAAK,cAAc,MAAK,KAAK,WAAW,OAAO;gBACtD,CAAA,GAAA,+CAAiB,EAAE,SAAS;gBAC5B,OAAO;YACT;YAEA,OAAO;QACT,GAAG,KAAK,CAAC;YACP,OAAO,QAAO,IAAI,CAAC,MAAO,IAAG;QAC/B;IACF;IAEA,MAAM,4BAA2B,aAAY,EAAE,gBAAe,EAAE,QAAO;QACrE,QAAQ,IAAI;QACZ,MAAM,eAAc,iBAAgB;QACpC,IAAI,WAAU;QACd,IAAI,WAAU;QAEd,MAAO,CAAC,YAAW,eAAc,SAAS;YACxC,MAAM,EAAE,aAAA,YAAW,EAAE,cAAA,aAAY,EAAE,GAAG,gBAAe,CAAC,SAAQ;YAC9D,QAAQ,IAAI,cAAa;YACzB,IAAI,gBAAe,eACjB,IAAI;gBACF,MAAM,CAAA,GAAA,6DAAmB,EAAE,0BACzB,eACA,aAAY,IACZ,cAAa;gBAGf;gBAEA,WAAU,KAAK,MAAM,AAAC,MAAM,WAAW;YACzC,EAAE,OAAO,QAAO;gBACd,QAAQ,MAAM;gBACd;YACA,kBAAkB;YACpB;QAEJ;IACF;IAEA,MAAM,0CACJ,aAAY,EACZ,gBAAe,EACf,QAAO;QAEP,MAAM,eAAc,iBAAgB;QACpC,IAAI,WAAU;QACd,IAAI,WAAU;QAEd,MAAO,CAAC,YAAW,eAAc,SAAS;YACxC,MAAM,EAAE,aAAA,YAAW,EAAE,cAAA,aAAY,EAAE,GAAG,gBAAe,CAAC,SAAQ;YAE9D,IAAI,gBAAe,eACjB,IAAI;gBACF,MAAM,aAAY;oBAChB,WAAW;oBACX,UAAU,aAAY;oBACtB,WAAW;wBACT,eAAe,aAAY,SAAS;wBACpC,cAAc,aAAY,SAAS;oBACrC;gBACF;gBAEA,MAAM,aAAY;oBAChB,QAAQ,cAAa;oBACrB,OAAO,OAAO,OAAO,iBAAiB,kBACpC,cAAa;oBAEf,WAAW;wBACT,eAAe,cAAa,SAAS;wBACrC,cAAc,cAAa,SAAS;oBACtC;gBACF;gBAEA,MAAM,CAAA,GAAA,6DAAmB,EAAE,wCACzB,YACA;gBAGF;gBAEA,WAAU,KAAK,MAAM,AAAC,MAAM,WAAW;YACzC,EAAE,OAAO,QAAO;gBACd,QAAQ,MAAM;gBACd;YACA,kBAAkB;YACpB;QAEJ;IACF;IAEA,+BACE,iBAAgB,EAChB,gBAAe,EACf,gBAAe,EACf,eAAc,EACd,QAAO,EACP,aAAY,EACZ,iBAAgB,EAChB,cAAa;QAEb,OAAO,IAAI,CAAC,cACV,mBACA,kBACA,kBACA,iBACA,UACA,eACA,mBAEC,KAAK,CAAC,CAAC,aAAY,YAAW;YAC7B,MAAM,OAAM;gBACV,QAAQ,EAAE;gBACV,sBAAsB;uBAAI,YAAW;iBAAa;gBAClD,qBAAqB,EAAE;YACzB;YAEA,MAAM,EAAE,SAAA,QAAO,EAAE,SAAA,QAAO,EAAE,GAAG;YAE7B,MAAM,gBAAe,IAAI,CAAC,eACxB,aACA,SAAQ,aACR,SAAQ,SAAS;YAGnB,KAAK,MAAM,QAAO,YAAW,WAAY;gBACvC,MAAM,gBAAe,IAAI,CAAC,gBACxB,KAAI,SAAS,cACb,SAAQ,aACR,SAAQ,SAAS;gBAEnB,IAAI,SAAQ,aAAY,CAAC,cAAa;gBACtC,IAAI,QAAO;oBACT,OAAO,aAAY,CAAC,cAAa;oBACjC,KAAI,OAAO,KAAK;wBAAE,cAAc;wBAAK,aAAa;oBAAM;gBAC1D,OACE,KAAI,qBAAqB,KAAK;YAElC;YAEA,MAAM,QAAO,OAAO,KAAK;YACzB,KAAI,sBAAsB,MAAK,IAAI,CAAC,OAAQ,aAAY,CAAC,KAAI;YAE7D,OAAO;QACT,GACC,MAAM,CAAC;YACN,MAAM;QACR;IACJ;IAEA,eACE,iBAAgB,EAChB,gBAAe,EACf,gBAAe,EACf,eAAc,EACd,QAAO,EACP,aAAY,EACZ,iBAAgB;QAEhB,MAAM,gBAAe,IAAI,CAAC,yBACxB,mBACA,kBACA,kBACA,iBACA;QAGF,MAAM,gBAAe,IAAI,CAAC,0BACxB,eACA;QAGF,OAAO,QAAQ,IAAI;YAAC;YAAc;SAAa;IACjD;IAEA,0BACE,cAAa,EACb,gBAAe,EACf,gBAAe,EACf,eAAc,EACd,QAAO;QAEP,MAAM,cAAa,IAAI,CAAC,aACtB,kBACA,kBACA,iBACA;QAGF,MAAM,YAAW,YAAW,IAAI,OAAO;YACrC,IAAG,WAAW,MAAM,CAAA,GAAA,4DAAkB,EAAE,wBACtC,IAAG,IACH;YAEF,OAAO;QACT;QAEA,OAAO,QAAQ,IAAI;IACrB;IAEA,cAAa,gBAAe,EAAE,gBAAe,EAAE,eAAc,EAAE,QAAO;QACpE,MAAM,UAAS,mBAAkB,oBAAmB;QAEpD,IAAI,YAAW,iBACb,OAAO,SAAQ,QAAQ,OAAO,CAAC,MAAO,IAAG,OAAO;aAC3C,IAAI,YAAW,kBAAiB;YACrC,MAAM,SAAQ,SAAQ,SAAS,KAAK,CAAC,MAAO,IAAG,OAAO;YACtD,OAAO,UAAS,OAAM,UAAU,OAAM,UAAU,EAAE;QACpD,OAAO,IAAI,YAAW,kBAAiB;YACrC,MAAM,WAAU,EAAE;YAClB,MAAM,SAAQ,SAAQ,KAAK,KAAK,CAAC,MAAO,IAAG,OAAO;YAElD,IAAI,UAAS,OAAM,UAAU;gBAC3B,KAAK,MAAM,YAAW,OAAM,SAC1B,IAAI,SAAQ,SACV,SAAQ,QAAQ,SAAQ;YAG9B;YAEA,OAAO;QACT;IACF;IAEA,2BAA0B,aAAY,EAAE,cAAa;QACnD,MAAM,YAAW,cAAa,IAAI,OAAO;YACvC,+CAA+C;YAC/C,6BAA6B;YAC7B,mBAAmB;YAEnB,MAAM,EAAE,WAAA,UAAS,EAAE,MAAA,KAAI,EAAE,IAAA,GAAE,EAAE,GAAG;YAEhC,MAAM,SAAQ,OAAO,OAAO,iBAAiB,kBAAkB;YAE/D,oDAAoD;YAEpD,IAAG,WAAW,MAAM,CAAA,GAAA,4DAAkB,EAAE,cACtC,QACA,OACA,gBACA;YAEF,OAAO;QACT;QAEA,IAAI;YACF,OAAO,QAAQ,IAAI,WAAU,KAAK,CAAC;gBACjC,OAAO;oBACL,YAAY,QAAO,OAAO,CAAC,MAAO,IAAG;oBACrC,cAAc,QAAO,OAAO,CAAC,MAAO,CAAC,IAAG;gBAC1C;YACF;QACF,EAAE,OAAO,QAAO;YACd,MAAM;QACR;IACF;IAEA,iBAAgB,cAAa,EAAE,YAAW,EAAE,SAAQ;QAClD,IAAI,cACF,OAAO,IAAI,CAAC,aAAa,gBAAe;QAG1C,OAAO;IACT;IAEA,cAAa,KAAK,EAAE,QAAQ;QAC1B,OAAO,KAAK,CAAC,CAAC,EAAE,SAAS,GAAG,EAAE,MAAM,EAAE,CAAC;IACzC;IAEA,gBAAe,MAAK,EAAE,YAAW,EAAE,SAAQ;QACzC,MAAM,OAAM,CAAC;QAEb,KAAK,MAAM,SAAQ,OAAO;YACxB,MAAM,QAAO,IAAI,CAAC,gBAChB,MAAK,SAAS,cACd,cACA;YAEF,IAAG,CAAC,MAAK,GAAG;QACd;QAEA,OAAO;IAEP,+BAA+B;IAC/B,uBAAuB;IACvB,oEAAoE;IACpE,0CAA0C;IAC1C,mBAAmB;IACnB,qBAAqB;IACrB,QAAQ;IACR,MAAM;IAEN,kBAAkB;IAClB,MAAM;IACR;AACF;;;;;AC1TA;AACA;AACA;AAEA,MAAM,eAAe;kBAEN;IACb;QACE,MAAM,WAAW,IAAI,CAAC,cAAc,IAAI,CAAC,KAAO,GAAG,KAAK;QACxD,MAAM,WAAW,SAAS,IAAI,OAAO;YACnC,MAAM,WAAW,MAAM,IAAI,CAAC,WAAW,QAAQ;YAE/C,MAAM,YAAY,SAAS,IAAI,OAAO;gBACpC,MAAM,UAAU,MAAM,IAAI,CAAC,WAAW,QAAQ;gBAC9C,QAAQ,UAAU;gBAClB,OAAO;YACT;YAEA,QAAQ,WAAW,MAAM,QAAQ,IAAI;YACrC,OAAO;QACT;QAEA,OAAO,QAAQ,IAAI;IACrB;IAEA;QACE,OAAO,CAAA,GAAA,+CAAiB,EAAE,mBAAmB;IAC/C;IAEA,MAAM,YAAW,SAAS;QACxB,qGAAqG;QACrG,uCAAuC;QACvC,KAAK;QAEL,MAAM,WAAW,MAAM,CAAA,GAAA,+CAAiB,EAAE,qBACxC,WACA;QAGF,MAAM,WAAW,SAAS,IAAI,CAAC;YAC7B,IAAI,GAAG,KAAK,UAAU,CAAA,GAAA,yCAAqB,EAAE,MAC3C,OAAO,IAAI,CAAC,oBAAoB,GAAG,GAAG;YACxC,OAAO,QAAQ,QAAQ;QACzB;QAEA,OAAO,QAAQ,IAAI,UAAU,KAAK,CAAC;YACjC,OAAO,OAAO,OAAO,IAAI,CAAC,KAAO,GAAG;QACtC;IACF;IAEA,qBAAoB,OAAO;QACzB,OAAO,CAAA,GAAA,+CAAiB,EAAE,YACxB,SACA,CAAA,GAAA,uCAAe,EAAE;IAGnB,uCAAuC;IACvC,6EAA6E;IAC7E,MAAM;IAEN,mDAAmD;IACnD,iDAAiD;IACjD,OAAO;IACT;IAEA,YAAW,SAAS;QAClB,OAAO,CAAA,GAAA,+CAAiB,EAAE,YACxB,WACA,CAAA,GAAA,sCAAc,EAAE,cAChB,KAAK,CAAC;YACN,OAAO,OAAO,IAAI,CAAC,KAAO,GAAG;QAC/B;IACF;AACF;;;;;ACxEA,IAAI;AACJ,IAAI,aAAa;IACf,SAAS,QAAQ;IACjB,IAAI,OAAO,YAAY,SAAS,OAAO;IACvC,OAAO,SAAS,QAAQ,oBAAmC;IACjD,OAAO,kBAAkB,QAAQ,oBAAmC;IACpE,OAAO,WAAW;IAE5B,OAAO,eAAe,QAAQ,oBAAgC;IAC9D,QAAQ,oBAAiC,QAAQ;IACjD,OAAO,YAAY;IACnB,OAAO,SAAS;AAClB;AACA;kBAEe;;;;;A;;A,I,gB;I,M;I,O;Q,M,C;I;I,Y;Q,a,C,G,4B;I;I;Q,O,C;I;I;I,0B;I,qE;I;I,S;I;A;A,I,U,O,kB,a,c,U;kB,S,wC;;;A,I,S;I,I,M,I;I,I,K,I;I,I,K,I,M,M;I,O,G,O;Q,a;I,G;Q,G,a;Y,O;gB,Q,I;gB,c;gB,a;Y;Q;K,E;A;A,I,kB,E;A,Q,S;A,Q,kB;;;;;AAff,IAAI,OAAO,KAAO;kBAEH,CAAA,UAEf;;;;;ACJA,IAAI;AACJ,IAAI,aAAa;IACf,SAAS,QAAQ;IACjB,IAAI,OAAO,YAAY,SAAS,OAAO;IACvC,OAAO,SAAS,QAAQ,oBAAgC;IAC9C,OAAO,kBAAkB,QAAQ,oBAAgC;IACjE,OAAO,WAAW;IAE5B,OAAO,eAAe,QAAQ,oBAA6B;IAC3D,QAAQ,oBAA8B,QAAQ;IAC9C,OAAO,YAAY;IACnB,OAAO,SAAS;AAClB;AACA;kBAEe;;;;;A;A;;A,I,gB;I,M;I,O;Q,S,C;Q,S,C;Q,Y,C;I;I,Y;Q,sB,C,G,mC;I;I;Q,O;Y,e,E;Q;I;I;Q,I,C,gB,I,C;I;I,S;Q;Y,wC;Y,qD;Y,oB;Y,qB;Y,O;Y,O;gB;oB,M;oB,O;gB;gB;oB,M;oB,O;gB;gB;oB,M;oB,O;gB;gB;oB,M;oB,O;gB;a;Q;I;A;A,I,U,O,kB,a,c,U;kB,S,wC;;;A,I,S;I,I,M,I;I,I,K,I;I,I,K,I,M,M;I,O,G,O;Q,a;I,G;Q,G,O;Y,a;Q,G;Y,G,e;gB,a;gB,O;oB,O,I,W;oB,U,S,G;wB,I,K,I,Y,sB;oB;oB,Y;gB;Y,G;gB,I,G;a;S,E;Q,I,G;Q,G,O;Y,a;Q,G;Y,G,O;gB,a;Y,G;gB,G,O;oB,a;gB,G;oB,I,G;iB;gB,I,G;gB,G,O;oB,a;gB,G;oB,G,O;wB,a;oB,G;wB,G,Y;4B,G,S;gC,I,G;6B;4B,I,G;4B,G,Y;gC,O;oC,O,I,Q;oC,U,S,G;wC,I,K,I,S,Y;oC;oC,Y;gC;4B;yB,E;qB,E;oB,I,G;oB,G,O;wB,a;oB,G;wB,G,O;4B,a;wB,G;4B,G,e;gC,a;gC,O;oC,O,I,Q;oC,U,S,G;wC,I,K,I,S,e;oC;oC,Y;gC;4B,G;gC,I,G;6B;yB,E;wB,I,G;wB,I,Q,c,G,O;4B,a;wB,G;4B,G,sB;gC,a;gC,O;oC,W,I,Q;gC;4B;yB,E,K,I;qB;iB;a;Y,I,G;Y,G,O;gB,a;Y,G;gB,G,O;oB,a;gB,G;oB,I,G;iB;gB,I,G;gB,G,O;oB,a;gB,G;oB,G,O;wB,a;oB,G;wB,G,Y;4B,G,S;gC,I,G;6B;4B,I,G;4B,G,Y;gC,O;oC,O,I,Q;oC,U,S,G;wC,I,K,I,S,Y;oC;oC,Y;gC;4B;yB,E;qB,E;oB,I,G;oB,G,O;wB,a;oB,G;wB,G,O;4B,a;wB,G;4B,G,e;gC,a;gC,O;oC,O,I,Q;oC,U,S,G;wC,I,K,I,S,e;oC;oC,Y;gC;4B,G;gC,I,G;6B;yB,E;wB,I,G;wB,I,Q,c,G,O;4B,a;wB,G;4B,G,sB;gC,a;gC,O;oC,W,I,Q;gC;4B;yB,E,K,I;qB;iB;a;S;K;A;A,I,kB,E;A,Q,S;A,Q,kB;;;;;AAff,IAAI,OAAO,KAAO;kBAEH,CAAA,UAEf;;;;;ACLA;;kBAEe,CAAA,GAAA,sBAAK,CAAC,CAAC;;;;;;;;;;;;AAYtB,CAAC;;;;;ACdD;;kBAEe,CAAA,GAAA,sBAAK,CAAC,CAAC;;;;;;;;;;;;AAYtB,CAAC;;;A,I,S;I,I,M,I;I,I,K,I;I,I,K,I,M,M;I,O,G,a;Q,a;Q,O;Y,a,I;Q;Q,I;Y,mB,S,M;gB,I,a;Y;Y,oB,S,M;gB,I,a;Y;Y,a,S,M;gB,O,I,Y;Y;Q;I,G;Q,G,mB;Y,a;Q,G;Y,I,G,I,G,I;S;Q,I,G;Q,G,qB;Y,a;Q,G;Y,I,iB,I,M,Y,G,kB;gB,O;oB,iB;oB,kB;oB,e;oB,Q,I;oB,W,I;oB,W,I;oB,mB,I;oB,kB,I;oB,kB,I;oB,c,I;gB;gB,I;oB,iB,I;oB,gB,I;oB,gB,I;gB;Y,K,A,I,iB,I,M,gB,G,0B;gB,O;oB,c,I;oB,W,I,c;oB,W,I,c;gB;Y,K,A,I,iB,I,M,S,G,gB;gB,O;oB,Q,I;gB;Y,K,A,I,iB,I,M,U,G,O;gB,a;Y,G;gB,G,uB;oB,O;wB,W;oB;gB;a,E,K,A,I,iB,I,M,Q,G,O;gB,a;Y,G;gB,G,W;oB,a;gB,G;oB,I,G;iB;a,E,K,A,I,iB,I,M,U,G,O;gB,a;Y,G;gB,G,W;oB,a;gB,G;oB,I,G;iB;a,E,K,A,I,iB,I,M,W,G,O;gB,a;Y,G;gB,G,O;oB,a;gB,G;oB,I,G,I,G,I,W;iB;gB,I,G;gB,G,mB;oB,a;oB,O;wB,W;wB,Y,I;oB;gB;a,E,K,I;S,E;Q,I,G;Q,G,qB;Y,G,a;gB,a;gB,I;oB,S,S,M;wB,O,I,Y;oB;gB;Y,G;gB,I,G;a;Y,I,G;Y,G,a;gB,a;gB,O;oB,Y,I;gB;gB,I;oB,S,I;gB;Y,G;gB,I,G;a;Y,I,G;Y,G,a;gB,a;gB,O;oB,Y,I;gB;gB,I;oB,S,I;gB;Y,G;gB,I,G;a;Y,I,G;Y,G,a;gB,a;gB,O;oB,Y,I;gB;gB,I;oB,S,I;gB;Y,G;gB,I,G;a;S,E;K,E;A;A,I,kB,E;A,Q,S;A,Q,kB;;;;;ANbD,IAAI,OAAO,KAAO;kBAEH,CAAA,UAEf;;;;AOLA;;AAEA;AAKA;;AACA;;AAGA,MAAM,SAAS;IACb;QACE,MAAM;QACN,mBAAmB,CAAA,GAAA,mBAAE,EAAE,OAAO,CAAA,GAAA,0CAAsB;QACpD,OAAO;YACL,OAAO;YACP,gBAAgB;QAClB;QACA,OAAO;YACL,QAAQ;YACR,MAAM;QACR;IACF;IACA;QACE,MAAM;QACN,mBAAmB,CAAA,GAAA,mBAAE,EAAE,OAAO,CAAA,GAAA,8BAAU;QACxC,OAAO;YACL,OAAO;YACP,gBAAgB;QAClB;QACA,OAAO;YACL,QAAQ;YACR,MAAM;QACR;IACF;CACD;AAGD,KAAK,MAAM,WAAW,OAAQ;IAC5B,MAAM,iBAAiB,CAAA,GAAA,4EAAmB,EAAE,gBAAgB;IAC5D,CAAA,GAAA,4EAAmB,EAAE,kBAAkB,QAAQ,MAAM;AACvD;;;AC1CA;;;;;;;;;;;;;;;;;;;;;;CAsBC,GAED,MAAM,EACJ,yBAAyB,EACzB,cAAc,EACf,GAAG,QAAQ;AAEZ,MAAM,uBAAuB,QAAQ,oBACnC,2BACA;AAGF,OAAO,UAAU;IACf;AACF;;;ACpCA;;;;;;;;;;;;;;;;;;;;;;CAsBC,GAED,SAAS,WAAW,MAAM;IACxB,MAAM,MAAM,CAAC;IACb,IAAI,OAAO,OAAO,YAAY,aAAa;QACzC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UAAU,OAAO,KAAK,IAAI,CAAC,WAAW,QAAQ,IAAI,CAAC;oBAC1D,EAAE,OAAO,GAAG;wBACV,QAAQ,MAAM;oBAChB;gBACF;gBACA;;;;SAIC,GACD,WAAW,MAAM,EAAE;oBACjB,MAAM,QAAQ,SAAS,KAAK,IAAI;oBAChC,MAAM,WAAW;gBACnB;gBACA;;;;SAIC,GACD,YAAY,MAAM,EAAE;oBAClB,IAAI,IAAI,CAAC,UAAU,QAAQ,IAAI,CAAC,MAAM,gBAAgB,OACpD,IAAI,CAAC,UAAU,KAAK,IAAI,EAAE;yBACnB,IAAI,CAAC,WAAW,KAAK,IAAI,EAAE;gBACtC;YACF;YACA,OAAO;QACT;QAEA;;;;KAIC,GACD,mBAAkB,IAAI,EAAE,cAAc;YACpC,oBAAoB;YACpB,OAAO,SAAS,QAAQ,oBAAoB,kBAC1C,MACA;YAEF,qBAAqB;YACrB,OAAO,OAAO,sBAAsB,aAAa;QACnD;IACF;AACF;;;;;AC3SA,IAAI;AACJ,IAAI,aAAa;IACf,SAAS,QAAQ;IACjB,IAAI,OAAO,YAAY,SAAS,OAAO;IACvC,OAAO,SAAS,QAAQ,oBAA0C;IACxD,OAAO,kBAAkB,QAAQ,oBAA0C;IAC3E,OAAO,WAAW;IAE5B,OAAO,eAAe,QAAQ,oBAAuC;IACrE,QAAQ,oBAAwC,QAAQ;IACxD,OAAO,YAAY;IACnB,OAAO,SAAS;AAClB;AACA;kBAEe;;;;;A;;A;;A;;A;;A;A,0D;A,I,gB;I,M;I,Y;Q,sB,C,G,oC;Q,0B,C,G,6B;Q,kB,C,G,gC;Q,0B,C,G,uC;I;I;Q,O;Y,S;Y,Q;Y,O;Y,Q;Y,O;Y,gB;Y,e;Y,W;Y,gB;Y,M;gB,a;oB,e;oB,wC;oB,O,E;gB;gB,c;oB,e;oB,wC;oB,O,E;gB;gB,W;oB,S;oB,M;oB,O,E;oB,Q,C,G,kD,E;oB,U,K;gB;gB,kB;oB,e;oB,c;oB,c;wB,U,K;oB;gB;Y;Y,Q;gB,W;oB,O;oB,S;gB;gB,Y;oB,O;oB,S;gB;gB,W;oB,O;oB,S;gB;Y;Q;I;I,S;Q,M,Q,M;Y,I,C,Y,O,Q;Y,I,C,iB,O,a;Q;Q,W;Q;Y,I,C,K,Y,Q,E;Y,I,C,U;Q;Q;Y,I,C,K,a,Q,E;Y,I,C,U;Q;Q;Y,I,C,gB;Q;Q,Y,I,G;I;I,U;I;I,O;Q;Y,I,C,U;Q;Q;Y,I,C,U;Q;Q;Y,I,C,U;QAkGf;IACA;AACA;A,I,U,O,kB,a,c,U;kBAGA,SAAA,wCAAA;;;;;ACtHA,IAAI;AACJ,IAAI,aAAa;IACf,SAAS,QAAQ;IACjB,IAAI,OAAO,YAAY,SAAS,OAAO;IACvC,OAAO,SAAS,QAAQ,oBAAoC;IAClD,OAAO,kBAAkB,QAAQ,oBAAoC;IACrE,OAAO,WAAW;IAE5B,OAAO,eAAe,QAAQ,oBAAiC;IAC/D,QAAQ,oBAAkC,QAAQ;IAClD,OAAO,YAAY;IACnB,OAAO,SAAS;AAClB;AACA;kBAEe;;;;;A;A;A,I,gB;I,M;I,O;Q,Y;Q,mB;Q,oB;Q,W,C;I;I;Q,I,C,S,C,G,+B;Q,O;Y,yB;Y,U;Q;I;I,S;Q;Y,I,C,W;Y,W;gB,I,C,W;Y,G;Q;Q,e;Q,0D;Q,I;Q;Y,C,G,6D,E,U,+B;gB,gB,I,C,2B;gB,W,I,C;gB,U,C,U;oB,I,C,0B;oB,I,C,U,U;oB,I,U;wB,I,C,U,O,I;wB,I,C,U,Q,I;wB,I,C,U,S,I;oB,O;wB,I,C,U,O;wB,I,C,U,Q,E;wB,I,C,U,S;wB,I,C,U,W,I;oB;gB;Y;Q;I;I,O;Q;Y,Q,I,2B,I,C;Y,I,I,C,0B,I;gB,M,Q,I,C,O,K,C,K,G,M,I,C;gB,I,C,U,U;gB,I,C,U,O,M;gB,I,C,U,Q,M,S,E;gB,I,C,U,S,M;Y;Y,I,C,M;Q;I;A;A,I,U,O,kB,a,c,U;kB,S,wC;;;ACff,iCAAiC;AACjC,oCAAoC;;;oDAWvB;AATb;AASO,MAAM,iBAAiB,OAAO,OAAO;IACzC;QAAE,IAAI;QAAG,MAAM;QAAuE,SAAS;QAAM,QAAQ,CAAA,GAAA,kDAAQ,EAAE;QAAa,OAAO,CAAA,GAAA,kDAAQ,EAAE;QAAU,OAAO;YAAC;SAAI;IAAC;IAC5K;QAAE,IAAI;QAAG,MAAM;QAA8E,SAAS;QAAM,QAAQ,CAAA,GAAA,kDAAQ,EAAE;QAAa,OAAO,CAAC,CAAC,EAAE,CAAA,GAAA,kDAAQ,EAAE,SAAS,CAAC;QAAE,OAAO;YAAC;SAAI;IAAC;IACzL;QAAE,IAAI;QAAG,MAAM;QAA2E,SAAS;QAAM,QAAQ,CAAA,GAAA,kDAAQ,EAAE;QAAa,OAAO,CAAC,CAAC,EAAE,CAAA,GAAA,kDAAQ,EAAE,SAAS,CAAC,CAAC;QAAE,OAAO;YAAC;SAAI;IAAC;IACvL;QAAE,IAAI;QAAG,MAAM;QAA4E,SAAS;QAAM,QAAQ,CAAA,GAAA,kDAAQ,EAAE;QAAa,OAAO,CAAC,EAAE,CAAA,GAAA,kDAAQ,EAAE,SAAS,CAAC,CAAC;QAAE,OAAO;YAAC;SAAI;IAAC;CACzL;;;A,I,S;I,I,M,I;I,I,K,I;I,I,K,I,M,M;I,O,G,O;Q,a;I,G;Q,I,W,G,O;Y,a;Q,G;Y,G,W;gB,a;Y,G;gB,I,G,I,Q,S,I,E,K;oB,O,G,gB;wB,Y;4B;gC,M;gC,S;gC,O,K;gC,Y;4B;yB;wB,K;oB,G;wB,G,Y;4B,a;4B,O;gC,S,K;4B;4B,O;gC,O,I;gC,U,S,G;oC,I,0B;gC;gC,Y;4B;wB,G;4B,I,G,I,G,K;yB;qB,E;gB;gB,I,G;gB,G,gB;oB,G,Y;wB,a;wB,O;4B,S;4B,Y;wB;wB,O;4B,O,I;4B,U,S,G;gC,I,0B;4B;4B,Y;wB;oB,G;wB,G,K;4B,I;gC,S,I;4B;wB,G;4B,I,G;yB;qB;iB,E;a,E;S,E,K,G,O;Y,a;Q,G;Y,I,G;S;K;A;A,I,kB,E;A,Q,S;A,Q,kB;;;;;ADjBD,IAAI,OAAO,KAAO;kBAEH,CAAA,UAEf;;;;;AEJA,IAAI;AACJ,IAAI,aAAa;IACf,SAAS,QAAQ;IACjB,IAAI,OAAO,YAAY,SAAS,OAAO;IACvC,OAAO,SAAS,QAAQ,oBAA6B;IAC3C,OAAO,kBAAkB,QAAQ,oBAA6B;IAC9D,OAAO,WAAW;IAE5B,OAAO,eAAe,QAAQ,oBAA0B;IACxD,QAAQ,oBAA2B,QAAQ;IAC3C,OAAO,YAAY;IACnB,OAAO,SAAS;AAClB;AACA;kBAEe;;;;;A;A,2E;A,6E;A,kE;A;A,I,gB;I,M;I,O;Q,c,C;Q,e,C;Q,W,C;Q,O,C;Q,W,C;Q,gB,C;Q,S,C;Q,kB,C;I;I;Q,I,C,S;Y,S;Y,Q;Y,U;Y,S;Y,O;Q;Q,yC;Q,2C;Q,I,C,O,E;Q,O;Y,S;Y,U;Y,c;Y,U,I,C,O;Y,Y,E;Y,c,E;Y,yB;Y,U;gB,O;gB,I;Y;Q;I;I,S;Q,M;Y,I,C,W,I,C,O;Y,I,C,a,K,C,E,mB,E,qB,E;gB,O,C,G,mE,E,W,qB,uB,I,C,W,K,C,E,I,E,Q,E,M,E;oB,I,C,O;oB,I,C,a;oB,I,C,e;oB,I,C,W;oB,I,C,W,I,C,O;oB,I,C,M;gB;Y,iE;Y,qE;Y,2B;Y,yC;Y,6B;Y;Q;Q,M;Y,I,C,W,I,C,O;Y,I,O;mB,I,C;a;Y,I,I,C,yB,O,I,C,K,O,C,K,G,S,S;Y,M,c,K;Y,I,U;Y,M,C,W,K,S,E;gB,M,O,K;gB,I;oB,I,M;wB,M,W,M,I,C,oB,I,C,W,I,C,gB;wB,Q,I,Y;wB,M,C,G,mE,E,a,I,C,W,M;wB,I,C,U,K,M,A,M,C,c,K,M,I;oB;gB,E,O,O;oB,Q,M;oB,U;gB;Y;YAuGf,IAAA,SAAA;gBACA,IAAA,CAAA,WAAA,IAAA,CAAA,OAAA;gBACA;Y;YAGA,IAAA,CAAA,WAAA,IAAA,CAAA,OAAA;QACA;QAEA,sDAAA;QACA,+CAAA;Q,8B;QAEA,kBAAA;QACA,sBAAA;QACA,mBAAA;QACA,wBAAA;QACA,mBAAA;QACA,WAAA;QACA,SAAA;QACA,KAAA;QAEA,0EAAA;QACA,iCAAA;QACA,iBAAA;QACA,yDAAA;QACA,sBAAA;QACA,mBAAA;QACA,gBAAA;QACA,WAAA;QAEA,2EAAA;QACA,yBAAA;QACA,yCAAA;QACA,oEAAA;Q,iB;Q,oC;QAIA,wBAAA;QACA,4BAAA;QACA,yBAAA;QACA,8BAAA;QACA,yBAAA;QACA,iBAAA;QACA,cAAA;QACA,6BAAA;QACA,kCAAA;QACA,yCAAA;QACA,oEAAA;QACA,iBAAA;QAEA,oCAAA;QACA,wBAAA;QACA,4BAAA;QACA,yBAAA;QACA,8BAAA;QACA,yBAAA;QACA,iBAAA;QACA,eAAA;QACA,cAAA;QACA,uBAAA;QACA,OAAA;QACA,KAAA;QAEA,MAAA,qBAAA,SAAA,EAAA,MAAA,EAAA,IAAA;Y,I,C,I,C,S,OAEA,OAAA;YAGA,MAAA,MAAA,IAAA,CAAA,SAAA;YAEA,sCAAA;YACA,8DAAA;YACA,KAAA;YACA,MAAA,QAAA,MAAA,CAAA,GAAA,4DAAA,EAAA,cACA,KAAA,OACA,KAAA,MACA;YAGA,MAAA,aACA,SAAA,MAAA,eAAA,MAAA,eAAA;Y,M,W,M,C,G,+C,E,Y,Q;gBAGA,uDAAA;gBACA,CAAA,GAAA,kDAAA,EAAA;aACA;YAEA,MAAA,cAAA,SAAA,KACA,CAAA,KAAA,GAAA,KAAA,SAAA;YAGA,IAAA,aAAA,OAAA,YAAA,GAAA;YAEA,4DAAA;YACA,iBAAA;YACA,aAAA;YACA,eAAA;YACA,KAAA;Y,M,S,M,C,G,2D,E,WAGA,Y,QAEA;YAGA,CAAA,GAAA,+CAAA,EAAA,SAAA;YACA,OAAA,OAAA,QAAA;Q;QAGA,gBAAA,MAAA;YACA,IAAA,CAAA,WAAA;YACA,WAAA;gBACA,IAAA,CAAA,WAAA,IAAA,CAAA,OAAA;YACA,GAAA;QACA;QAEA;Y,M,W;gBAEA,CAAA,GAAA,mEAAA,EAAA,qBACA,IAAA,CAAA,aAAA,OACA,IAAA,CAAA,aAAA,eACA,IAAA,CAAA;gBAEA,CAAA,GAAA,mEAAA,EAAA,qBACA,IAAA,CAAA,cAAA,O,I,C,c,eAEA,IAAA,CAAA;aAEA;YAEA,OAAA,QAAA,IAAA,UAAA,KAAA,CAAA;gBACA,OAAA;oBACA,qBAAA,MAAA,CAAA,EAAA,IAAA,MAAA,CAAA,EAAA,CAAA;oBACA,uBAAA,MAAA,CAAA,EAAA,IAAA,MAAA,CAAA,EAAA,CAAA;gBACA;YACA;QACA;QAEA,aAAA,QAAA;YACA,MAAA,QACA,CAAA,GAAA,mEAAA,EAAA,qBAAA;YACA,OAAA,OAAA,YAAA,OAAA,KAAA,SAAA,sBACA;QAEA;IACA;I,U;QAEA;YACA,OACA,AAAA,IAAA,CAAA,aAAA,MAAA,WAAA,KACA,IAAA,CAAA,aAAA,cAAA,OAAA,WAAA,KACA,IAAA,CAAA,cAAA,MAAA,WAAA,K,I,C,c,c,O,W;QAGA;IACA;IACA,OAAA;QACA;YACA,IAAA,IAAA,CAAA,SAAA;gBACA,IAAA,CAAA,WAAA,IAAA,CAAA,OAAA;gBACA,IAAA,CAAA,WAAA;YACA;QACA;I;AAKA;AAEA,IAAA,UAAA,OAAA,kBAAA,aAAA,cAAA,UAAA;kBACA,SAAA,wCAAA;;;A,I,S;I,I,M,I;I,I,K,I;I,I,K,I,M,M;I,O,G,O;Q,a;I,G;Q,I,a,I,O,S,G,O;Y,a;Q,G;Y,C,I,W,G,a;gB,a;gB,O;oB,Y,I;gB;gB,I;oB,S,I;gB;Y,G;gB,I,G;a,I,A,I,W,G,O;gB,a;Y,G;gB,G,O;oB,a;gB,G;oB,G,a;wB,a;wB,I;4B,S,S,M;gC,O,I,Y,I;4B;wB;oB,G;wB,I,G,oC,I,G,I,W,U;qB;oB,I,G;oB,G,a;wB,a;wB,I;4B,S,S,M;gC,O,I,Y,I;4B;wB;oB,G;wB,I,G,sC,I,G,I,a,U;qB;iB,E;gB,I,G;gB,G,O;oB,a;gB,G;oB,G,O;wB,a;oB,G;wB,G,e;4B,a;4B,O;gC,O,I,S;gC,U,S,G;oC,I,K,I,U,S;gC;gC,Y;4B;wB,G;4B,I,G;yB;qB,E;oB,I,G;oB,G,O;wB,a;oB,G;wB,G,Y;4B,G,S;gC,I,G;6B;4B,I,G;4B,G,Y;gC,O;oC,Y,C,I,S;gC;gC,O;oC,O,I,S;oC,U,S,G;wC,I,K,I,U,M;oC;oC,Y;gC;4B;yB,E;qB,E;iB;gB,I,G;gB,G,O;oB,a;gB,G;oB,G,e;wB,a;wB,O;4B,O,I;4B,U,S,G;gC,I,0B;4B;4B,Y;wB;oB,G;wB,I,G;qB;iB,E;gB,I,G;gB,G,O;oB,a;gB,G;oB,G,a;wB,a;wB,O;4B,Y,I;wB;wB,I;4B,S,I;wB;oB,G;wB,I,G;qB;iB,E;a,I,I;S,E,K,A,I,a,I,O,U,G,O;Y,a;Q,G;Y,G,uB;gB,O;oB,W;gB;Y;S,E,K,A,I,a,I,O,W,G,O;Y,a;Q,G;Y,G,O;gB,a;Y,G;gB,I,G,I,G,I,W;a;Y,I,G;Y,G,mB;gB,a;gB,O;oB,W;oB,Y,I;gB;Y;S,E,K,A,I,a,I,O,U,G,O;Y,a;Q,G;Y,G,W;gB,a;Y,G;gB,I,G;a;S,E,K,A,I,a,I,O,Q,G,O;Y,a;Q,G;Y,G,W;gB,a;Y,G;gB,I,G;a;S,E,K,I;K;A;A,I,kB,E;A,Q,S;A,Q,kB;;;;;AA/RA,IAAI,OAAO,KAAO;kBAEH,CAAA,UAEf;;;;;ACJA,IAAI;AACJ,IAAI,aAAa;IACf,SAAS,QAAQ;IACjB,IAAI,OAAO,YAAY,SAAS,OAAO;IACvC,OAAO,SAAS,QAAQ,oBAAgC;IAC9C,OAAO,kBAAkB,QAAQ,oBAAgC;IACjE,OAAO,WAAW;IAE5B,OAAO,eAAe,QAAQ,oBAA6B;IAC3D,QAAQ,oBAA8B,QAAQ;IAC9C,OAAO,YAAY;IACnB,OAAO,SAAS;AAClB;AACA;kBAEe;;;;;A;;A;A,6E;A;A,I,gB;I,M;I,O;Q,Q,C;I;I;Q,O;Y,Y,E;Y,c,E;Y,qB;Y,e;Y,O;Q;I;I,S;Q,M;Y,M,I,C;Y,I,C;Y,I,C,gB;Y,I,C,M;Q;Q;Y,I,C,O,Q,E;Y,I,C;Y,I,C,gB;Y,I,C,M;Q,0B;Q,wB;Q;Q,M;Y,M,qB,O,O,Y,O;Y,I,mB,W,G;gB,O,M;gB;Y;Y,M,Y,M,I,C,a;Y,K,M,W,U,I,C,c;Q,yD;Q,2C;Q,qD;Q,kE;Q,I;Q;Q,c,U;Y,M,Q,W,I,C;gB,O,C,G,yD,E,a,G,O,G;Y;Y,O,Q,I;Q;Q,e,E,K,E,S,E;Y,M,e,I,C,O,M,K,C,K,G,M,O,M;Y,I,C,c;gB,I,C,O,M,K;oB;oB;gB;gB;Y;Y,K,M,Q,U;gB,M,Q,a,U,K,C,K,O;gB,I,C,O,a,U,K;Y;Q;Q;Y,I,C,Q;Y,K,M,Q,I,C,O,MAuEf,IAAA,CAAA,SAAA,KAAA,UAAA;QAEA;QAEA;Y,kE;YAEA,uCAAA;YACA,MAAA;YACA,wEAAA;YACA,WAAA;YACA,KAAA;YAEA,IAAA,CAAA,OAAA,MAAA,QAAA,CAAA,EAAA,KAAA,EAAA,SAAA,EAAA;gBACA,OAAA,OAAA,YAAA,OAAA,KAAA,SAAA,aACA,WACA;YAEA;QACA;QAEA;YACA,IAAA,CAAA,sBAAA;YACA,CAAA,GAAA,mEAAA,EAAA,qBACA,IAAA,CAAA,OAAA,OACA,IAAA,CAAA,OAAA,eACA,KAAA,CAAA;gBACA,IAAA,CAAA,aAAA,OAAA;gB,I,C,e,O;gBAEA,IAAA,CAAA,gBAAA;gBACA,IAAA,CAAA,sBAAA;YACA;QACA;Q;YAGA,MAAA,QAAA,CAAA,GAAA,mEAAA,EAAA,qB,I,C;Y,O,O,Y,O,K,S,sBAKA;Q;QAIA;YACA,MAAA,QAAA,CAAA,GAAA,mEAAA,EAAA,qBACA,IAAA,CAAA;Y,O,O,Y,O,K,S,sBAIA;QAEA;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;QAEtD,OAAO,YAAY,IAAI,SAAS,EAAE;YAChC,OAAO,SAAS;QAClB;IACF;IAEA,UACE,GAKC,EACD,UAGE,EAVJ;QAYE,IAAK,IAAI,IAAI,GAAG,IAAI,WAAW,QAAQ,IAAK;YAC1C,MAAM,iBAAiB,UAAU,CAAC,EAAE,CAAC;YACrC,MAAM,eAAe,UAAU,CAAC,EAAE,CAAC;YAEnC,MAAM,QAAQ,IAAI,WAAW,KAAK,CAAA;gBAChC,OAAO,OAAO,mBAAmB,eAC/B,eAAe,WAAW,IACxB,GAAG,YAAY,kBACb,aAAa,OAAO,sBACtB,GAAG,YAAY,kBACb,aAAa,OAAO,uBACpB,kBAAkB,GAAG;YAC7B;YAEA,IAAI,OAAO,UAAU,aACnB,OAAO;QAEV;QAED,OAAO;IACT;IAEA,SAAS,EAAE,EAAE,KAAK,EAAlB;QACE,IAAK,IAAI,IAAI,GAAG,IAAI,MAAM,QAAQ,IAAK;YACrC,IAAI,YAAY,KAAK,CAAC,EAAE,CAAC;YACzB,IAAI,aAAa,KAAK,CAAC,EAAE,CAAC;YAE1B,IAAI,QAAQ,GAAG,WAAW,KAAK,CAAA;gBAC7B,IAAI,OAAO,eAAe,aACxB,OAAO,UAAU,KAAK,IAAI;gBAG5B,OACE,UAAU,KAAK,IAAI,gBAAgB,WAAW,KAAK,IAAI;YAE3D;YAEA,IAAI,OAAO,UAAU,aACnB,OAAO;QAEV;QAED,OAAO;IACT;AACD;AAED,QAAA,UAAe,IAAI;;;A,I,S;I,I,M,I;I,I,K,I;I,I,K,I,M,M;I,O,G,O;Q,a;I,G;Q,G,O;Y,a;Q,G;Y,I,G,a,I,G,I,S;S;Q,I,G;Q,G,O;Y,a;Q,G;Y,G,a;gB,I;oB,S,I;gB;Y,G;gB,G,W;oB,I,G;iB;gB,I,G;gB,G,c;oB,O;wB,Y;oB;gB,G;oB,I,G;iB;a,E;Y,I,G;Y,G,a;gB,I;oB,S,I;gB;Y,G;gB,G,W;oB,I,G;iB;gB,I,G;gB,G,c;oB,O;wB,Y;oB;gB,G;oB,I,G;iB;a,E;Y,I,G;Y,G,a;gB,I;oB,S,I;gB;Y,G;gB,G,W;oB,I,G;iB;gB,I,G;gB,G,c;oB,O;wB,Y;oB;gB,G;oB,I,G;iB;a,E;S,E;Q,I,G;Q,G,O;Y,G,Y;gB,G,S;oB,I,G;iB;gB,I,G;gB,G,Y;oB,O;wB,O,I,O;wB,U,S,G;4B,I,K,I,Q,iB;wB;wB,Y;oB;gB;a,E;S,E;Q,I,G;Q,G,O;Y,I,gB,G,O;gB,G,a;oB,a;oB,I;wB,S,I;oB;gB,G;oB,I,G,mB,I,G,I,W,U;iB;gB,I,G;gB,G,a;oB,a;oB,I;wB,S,I;oB;gB,G;oB,I,G,mB,I,G,I,a,U;iB;a,E,K,I;Y,I,G;Y,C,I,sB,G,a;gB,a;gB,O;oB,Y,I;gB;gB,I;oB,S,I;gB;Y,G;gB,I,G;a,I,I;Y,I,G;Y,I,sB,G,uB;gB,O;oB,e;oB,a;oB,W;gB;Y,K,I;S,E;K;A;A,I,kB,E;A,Q,S;A,Q,kB;;;;;AJ7NnB,IAAI,OAAO,KAAO;kBAEH,CAAA,UAEf;;;;;AKJA,IAAI;AACJ,IAAI,aAAa;IACf,SAAS,QAAQ;IACjB,IAAI,OAAO,YAAY,SAAS,OAAO;IACvC,OAAO,SAAS,QAAQ,oBAAuC;IACrD,OAAO,kBAAkB,QAAQ,oBAAuC;IACxE,OAAO,WAAW;IAE5B,OAAO,eAAe,QAAQ,oBAAoC;IAClE,QAAQ,oBAAqC,QAAQ;IACrD,OAAO,YAAY;IACnB,OAAO,SAAS;AAClB;AACA;kBAEe;;;;;A;A,I,gB;I,M;I,O;Q,Q,C;I;I;Q,O,C;I;I,S;Q;Y,C,G,6D,E,U,+B;gB,Q,I,C;gB,U,C;oB,I,C,O,e;oB,I,C,O,a,W;gB;Y;Q;I;A;A,I,U,O,kB,a,c,U;kB,S,wC;;;A,I,S;I,I,M,I;I,I,K,I;I,I,K,I,M,M;I,O,G,W;Q,G,gB;Y,G,Y;gB,G,S;oB,I,G;iB;gB,I,G;gB,G,Y;oB,O;wB,O,I,O;wB,U,S,G;4B,I,K,I,Q,iB;wB;wB,Y;oB;gB;a,E;S,E;Q,I,G;Q,G,gB;Y,G,Y;gB,a;gB,O;oB,S;gB;gB,O;oB,O,I,O;oB,U,S,G;wB,I,K,I,Q,gB;oB;oB,Y;gB;Y,G;gB,I,G;a;S,E;Q,I,G;Q,G,gB;Y,G,Y;gB,a;gB,O;oB,Y;oB,S;gB;gB,O;oB,O,I,O;oB,U,S,G;wB,I,K,I,Q,gB;oB;oB,Y;gB;Y,G;gB,G,K;oB,I;wB,S,I;oB;gB,G;oB,I,G;iB;a;S,E;K,E;A;A,I,kB,E;A,Q,S;A,Q,kB;;;;;AAff,IAAI,OAAO,KAAO;kBAEH,CAAA,UAEf;;;A,I,S;I,I,S,I;I,I,M,I;I,I,K,I;I,I,K,I,M,M;I,O,G,O;Q,a;I,G;Q,G,e;Y,a;Y,O;gB,e;gB,qB;Y;Y,I;gB,c,I;Y;Q,G;Y,G,W;gB,O;oB,M;oB,Y;oB,kB;gB;Y,G;gB,G,O;oB,a;gB,G;oB,G,kB;wB,O;4B,U,I,K;wB;wB,I;4B,S,I;4B,W;gC,O,O,U;4B;wB;oB;iB,E;a;Y,I,G;Y,G,W;gB,O;oB,M;oB,Y;oB,kB;gB;Y,G;gB,G,c;oB,a;gB,G;oB,G,kB;wB,O;4B,U,I,K;wB;wB,I;4B,S,I;4B,W;gC,O,O,U;4B;wB;oB;iB,E;a,E;Y,I,G;Y,G,W;gB,O;oB,M;oB,Y;oB,kB;oB,Y,I;gB;Y,G;gB,G,c;oB,a;gB,G;oB,G,sB;wB,O;4B,e,I,K;4B,gB,I,K;4B,a,I,K;wB;wB,I;4B,W;gC,O,O,U;4B;wB;oB;iB,E;a,E;Y,I,G;Y,G,W;gB,O;oB,M;oB,Y;oB,kB;gB;Y,G;gB,G,0B;oB,O;wB,U,I,K;oB;gB;a,E;Y,I,G;Y,G,W;gB,O;oB,M;oB,Y;oB,kB;gB;Y,G;gB,G,O;oB,a;gB,G;oB,G,0B;wB,O;4B,gB,I,K;4B,iB,I,K;4B,a,I,K;4B,oB,I,K;4B,a,I;4B,kB,I;4B,W,I;wB;wB,I;4B,Y;gC,O,O,U;4B;wB;oB;iB,E;a;S,E;K,E;A;A,I,kB,E;A,Q,S;A,Q,kB;;;;;ATJA,IAAI,OAAO,KAAO;kBAEH,CAAA,UAEf;;;;;AUJA,IAAI;AACJ,IAAI,aAAa;IACf,SAAS,QAAQ;IACjB,IAAI,OAAO,YAAY,SAAS,OAAO;IACvC,OAAO,SAAS,QAAQ,oBAA8B;IAC5C,OAAO,kBAAkB,QAAQ,oBAA8B;IAC/D,OAAO,WAAW;IAE5B,OAAO,eAAe,QAAQ,oBAA2B;IACzD,QAAQ,oBAA4B,QAAQ;IAC5C,OAAO,YAAY;IACnB,OAAO,SAAS;AAClB;AACA;kBAEe;;;;;A,kD;A;A;;A;;A,M,E,yB,E,G,Q;A,I,gB;I,M;I;Q,O;Y,c;Y,M,E;Q;I;I,S;Q,Q,M;Y,I,C,e;Q;Q,W;Q,U,K;Y,0B,O,uB,M,S;Q;Q,Y,S;Y,2B;Y,O,C,G,2D,E,yB,W,K,C;gB,I,W,W,I,O;oB,I,O,G,K;oB,sE;oB,I,C,S,G,M,C,G,2D,E,iB,K;oB,iF;oB,I,C,U,G,M,C,G,2D,E,2B,K;oB,O;gB;gB,O,Q,I;Y;Q;Q,e,I;Y,I,e,K,Q,I,C,K,G;Y,O,a,S,I,a,K,Q;Q;Q,c,I;Y,I,c,K,O,I,C,K,G;Y,O,Y,S,I,Y,K,Q;Q;Q;Y,O;gB;oB,K;oB,Q;oB,O;gB;gB;oB,K;oB,Q;oB,O;gB;gB;oB,K;oB,Q;oB,O;gB;gB;oB,K;oB,Q;oB,O;gB;gB;oBAwEf,KAAA;oBACA,QAAA;oBACA,OAAA;gB;gBAEA;oB,K;oBAEA,QAAA;oB,O;gBAEA;gBACA;oB,K;oBAEA,QAAA;oBACA,OAAA;gBACA;aACA;QACA;QAEA;YACA,OAAA,IAAA,CAAA,KAAA,IAAA,CAAA;gBACA,EAAA,CAAA,QAAA,GAAA,IAAA,CAAA,aAAA;gBACA,EAAA,CAAA,SAAA,GAAA,IAAA,CAAA,cAAA;gBACA,OAAA;YACA;Q;Q;YAIA,IAAA,SAAA;gBACA;oBACA,MAAA,CAAA,aAAA,EAAA,IAAA,CAAA,aAAA,KAAA,CAAA;oBACA,QAAA;oBACA,MAAA;wB;4BAEA,MAAA,CAAA,aAAA,EAAA,IAAA,CAAA,aAAA,KAAA,CAAA;4BACA,QAAA,IAAA,CAAA;4BACA,MAAA,IAAA,CAAA;wBACA;qBACA;gBACA;aACA;YAEA,CAAA,GAAA,wDAAA,EAAA,OAAA,QAAA,KAAA,CAAA;gBACA,CAAA,GAAA,yBAAA,EAAA,OAAA,IAAA,KAAA,SAAA,CAAA,cAAA,CAAA;YACA;QACA;IACA;IACA,OAAA;QACA;YACA,IAAA,CAAA,WAAA,IAAA,CAAA,aAAA,IAAA,KAAA,CAAA;gBACA,IAAA,CAAA,SAAA,CAAA,eAAA,EAAA,IAAA,CAAA,aAAA,KAAA,CAAA;gBACA,IAAA,CAAA,OAAA;Y;QAEA;IACA;AACA;AAEA,IAAA,UAAA,OAAA,kBAAA,aAAA,cAAA,UAAA;kBACA,SAAA,wCAAA;;;;AE9HA,CAAA,SAAA,CAAA,EAAA,CAAA;IAAA,IAAA,cAAA,OAAA,UAAA,OAAA,KAAA,OAAA,EAAA,EAAA;SAAA;AAAA,CAAA,EAAA,IAAA,EAAA;IAAA;IAAA,SAAS,EAAK,CAAd,EAAoB,CAApB;QAA0B,OACJ,eAAhB,OAAO,IAAsB,IAAO;YAAE,SAAO,CAAA;QAAT,IACf,YAAhB,OAAO,KACd,CAAA,QAAQ,KAAK,uDACb,IAAO;YAAE,SAAS,CAAC;QAAZ,CAAA,GAKL,EAAK,WAAW,6EAA6E,KAAK,EAAK,QAClG,IAAI,KAAK;YAAA;YAA8B;SAAvC,EAA8C;YAAE,MAAM,EAAK;QAAb,KAEhD;IACR;IAED,SAAS,EAAU,CAAnB,EAAwB,CAAxB,EAA8B,CAA9B;QACE,IAAI,IAAM,IAAI;QACd,EAAI,KAAK,OAAO,IAChB,EAAI,eAAe,QACnB,EAAI,SAAS;YACX,EAAO,EAAI,UAAU,GAAM;QAC5B,GACD,EAAI,UAAU;YACZ,QAAQ,MAAM;QACf,GACD,EAAI;IACL;IAED,SAAS,EAAa,CAAtB;QACE,IAAI,IAAM,IAAI;QAEd,EAAI,KAAK,QAAQ,GAAjB,CAAA;QACA,IAAI;YACF,EAAI;QACL,EAAC,OAAO,GAAG,CAAE;QACd,OAAqB,OAAd,EAAI,UAA+B,OAAd,EAAI;IACjC;IAGD,SAAS,EAAO,CAAhB;QACE,IAAI;YACF,EAAK,cAAc,IAAI,WAAW;QACnC,EAAC,OAAO,GAAG;YACV,IAAI,IAAM,SAAS,YAAY;YAC/B,EAAI,eAAe,SAAnB,CAAA,GAAA,CAAA,GAAwC,QAAQ,GAAG,GAAG,GAAG,IACnC,IADtB,CAAA,GAAA,CAAA,GAAA,CAAA,GAAA,CAAA,GACsD,GAAG,OACzD,EAAK,cAAc;QACpB;IACF;I,IAtDG,IAA4B,YAAlB,OAAO,UAAuB,OAAO,WAAW,SAC1D,SAAyB,YAAhB,OAAO,QAAqB,KAAK,SAAS,OACnD,OAAyB,YAAlB,OAAO,UAAuB,OAAO,WAAW,SACvD,SADO,KAAA,GAyDP,IAAiB,EAAQ,aAAa,YAAY,KAAK,UAAU,cAAc,cAAc,KAAK,UAAU,cAAc,CAAC,SAAS,KAAK,UAAU,YAEnJ,IAAS,EAAQ,UAEA,CAAA,YAAlB,OAAO,UAAuB,WAAW,IACtC,YAAiC,IAGlC,cAAc,kBAAkB,aAAa,CAAC,IAC/C,SAAiB,CAAjB,EAAuB,CAAvB,EAA6B,CAA7B;QAAmC,IAC/B,IAAM,EAAQ,OAAO,EAAQ,WAC7B,IAAI,SAAS,cAAc;QAC/B,IAAO,KAAQ,EAAK,QAAQ,YAE5B,EAAE,WAAW,GACb,EAAE,MAAM,YAKY,YAAhB,OAAO,IAET,CAAA,EAAE,OAAO,GACL,EAAE,WAAW,SAAS,SAKxB,EAAM,KAJN,EAAY,EAAE,QACV,EAAS,GAAM,GAAM,KACrB,EAAM,GAAG,EAAE,SAAS,SAAf,IAMX,CAAA,EAAE,OAAO,EAAI,gBAAgB,IAC7B,WAAW;YAAc,EAAI,gBAAgB,EAAE;QAAO,GAAE,MACxD,WAAW;YAAc,EAAM;QAAI,GAAE,EAA3B;IAEb,IAGC,sBAAsB,YACtB,SAAiB,CAAjB,EAAuB,CAAvB,EAA6B,CAA7B;QAGA,IAFA,IAAO,KAAQ,EAAK,QAAQ,YAER,YAAhB,OAAO,GAUT,UAAU,iBAAiB,EAAI,GAAM,IAAO;aAT5C,IAAI,EAAY,IACd,EAAS,GAAM,GAAM;aAChB;YACL,IAAI,IAAI,SAAS,cAAc;YAC/B,EAAE,OAAO,GACT,EAAE,SAAS,UACX,WAAW;gBAAc,EAAM;YAAI;QACpC;IAIJ,IAGC,SAAiB,CAAjB,EAAuB,CAAvB,EAA6B,CAA7B,EAAmC,CAAnC;QASA,IANA,IAAQ,KAAS,KAAK,IAAI,WACtB,KACF,CAAA,EAAM,SAAS,QACf,EAAM,SAAS,KAAK,YAAY,gBAAA,GAGd,YAAhB,OAAO,GAAmB,OAAO,EAAS,GAAM,GAAM;QAThB,IAWtC,IAAsB,+BAAd,EAAK,MACb,IAAW,eAAe,KAAK,EAAQ,gBAAgB,EAAQ,QAC/D,IAAc,eAAe,KAAK,UAAU;QAEhD,IAAI,AAAC,CAAA,KAAgB,KAAS,KAAa,CAAA,KAAyC,eAAtB,OAAO,YAA4B;YAE/F,IAAI,IAAS,IAAI;YACjB,EAAO,YAAY;gBACjB,IAAI,IAAM,EAAO;gBACjB,IAAM,IAAc,IAAM,EAAI,QAAQ,gBAAgB,0BAClD,IAAO,EAAM,SAAS,OAAO,IAC5B,WAAW,GAChB,IAAQ;YACT,GACD,EAAO,cAAc;QACtB,OAAM;YAAA,IACD,IAAM,EAAQ,OAAO,EAAQ,WAC7B,IAAM,EAAI,gBAAgB;YAC1B,IAAO,EAAM,WAAW,IACvB,SAAS,OAAO,GACrB,IAAQ,MACR,WAAW;gBAAc,EAAI,gBAAgB;YAAM,GAAE;QACtD;IACF,CAAA;IAGH,EAAQ,SAAS,EAAO,SAAS,GAG/B,OAAO,UAAU;AAvJnB;;;A,I,S;I,I,M,I;I,I,K,I;I,I,K,I,M,M;I,O,G,c;Q,a;I,G;Q,G,O;Y,a;Q,G;Y,G,a;gB,a;gB,I;oB,S,I;gB;Y,G;gB,I,G;a;S,E;Q,I,G;Q,I,e,G,Y;Y,a;Y,a,I,G;gB;oB,K;oB,I,S,G;wB,I,O,I;wB,O,G,gB,C,G;4B,G,iB;gC,a;gC,O;oC,Y;oC,c;oC,S,K;gC;4B,G;gC,I,G,I,G,K,c;6B;4B,I,G;4B,G,iB;gC,a;gC,O;oC,Y;oC,S,K;gC;4B,G;gC,I,G,I,G,K;6B;4B,I,G;4B,G,iB;gC,a;gC,O;oC,Y;oC,S,I,c;gC;4B,G;gC,I,G,I,G,I,c,S;6B;4B,I,G;4B,G,iB;gC,a;gC,O;oC,Y;oC,S,I,a;gC;4B,G;gC,I,G,I,G,I,a,S;6B;yB,E;oB;gB;a,E,M,O;Y,O;gB,O,I;gB,U,S,G;oB,I,O;gB;gB,Y;Y;Q,G;Y,G,wB;gB,O;oB,Y;oB,kB;gB;Y;S,E,K,I;K,E;A;A,I,kB,E;A,Q,S;A,Q,kB;;;;;AFjBA,IAAI,OAAO,KAAO;kBAEH,CAAA,UAEf;;;AGLA","sources":["node_modules/spinal-env-viewer-plugin-network-tree/src/index.js","node_modules/spinal-env-viewer-plugin-network-tree/src/buttons/index.js","node_modules/spinal-env-viewer-plugin-network-tree/src/buttons/network_buttons/createNetwork.js","node_modules/spinal-env-viewer-context-menu-service/index.js","node_modules/spinal-env-viewer-context-menu-service/SpinalContextMenuService.js","node_modules/spinal-env-viewer-context-menu-service/SpinalContextApp.js","node_modules/spinal-env-viewer-context-menu-service/constants.js","node_modules/spinal-env-viewer-panel-manager-service/index.js","node_modules/spinal-env-viewer-panel-manager-service/SpinalPanelManagerService.js","node_modules/spinal-env-viewer-panel-manager-service/SpinalPanelApp.js","node_modules/spinal-env-viewer-panel-manager-service/SpinalMountExtention.js","node_modules/spinal-env-viewer-plugin-network-tree/src/buttons/network_buttons/createNetworkContext.js","node_modules/spinal-env-viewer-plugin-network-tree/src/buttons/network_buttons/addElement.js","node_modules/spinal-env-viewer-plugin-network-tree/src/buttons/network_buttons/generateAutomateContext.js","node_modules/spinal-env-viewer-plugin-network-tree/src/buttons/network_buttons/seeSubItems.js","node_modules/spinal-env-viewer-plugin-network-tree/src/buttons/network_buttons/clearAutomateContent.js","node_modules/spinal-env-viewer-plugin-network-tree/src/buttons/link_to_virtual_profil/linkProfil.js","node_modules/spinal-env-viewer-plugin-network-tree/src/buttons/link_to_virtual_profil/editLinkButton.js","node_modules/@parcel/runtime-js/lib/runtime-133da8f4d445ce17.js","node_modules/spinal-env-viewer-plugin-network-tree/src/buttons/link_to_virtual_profil/unlinkProfil.js","node_modules/spinal-env-viewer-plugin-network-tree/src/buttons/link_to_gtb_network/linkToGtb.js","node_modules/spinal-env-viewer-plugin-network-tree/src/vue/dialogs/index.js","node_modules/spinal-env-viewer-plugin-network-tree/src/vue/dialogs/network_dialogs/dialog.vue","node_modules/spinal-env-viewer-plugin-network-tree/src/vue/dialogs/link_to_virtual_profil/linkAutomateToProfil.vue","node_modules/spinal-env-viewer-room-manager/js/event.js","node_modules/spinal-env-viewer-room-manager/js/utilities.js","node_modules/spinal-env-viewer-room-manager/services/service.js","node_modules/spinal-env-viewer-room-manager/services/constants.js","node_modules/spinal-env-viewer-plugin-network-tree/src/vue/components/links/LinkComponent.vue","node_modules/spinal-env-viewer-plugin-network-tree/src/vue/components/links/linkToGroupTemplate.vue","node_modules/spinal-env-viewer-plugin-network-tree/src/vue/components/links/resultComponent.vue","node_modules/spinal-env-viewer-plugin-network-tree/src/vue/dialogs/link_to_virtual_profil/confirmUnlikProfil.vue","node_modules/spinal-env-viewer-plugin-network-tree/src/js/controllers/links/unLinkProfilController.js","node_modules/spinal-env-viewer-plugin-network-tree/src/vue/dialogs/link_to_virtual_profil/editLinksDialog.vue","node_modules/spinal-env-viewer-plugin-network-tree/src/vue/components/links/editLinks.vue","node_modules/spinal-env-viewer-plugin-network-tree/src/js/controllers/links/editLinksControllers.js","node_modules/spinal-env-viewer-plugin-network-tree/src/vue/dialogs/network_dialogs/personalizedAttributeDialog.vue","node_modules/spinal-env-viewer-plugin-network-tree/src/js/flags.js","node_modules/spinal-env-viewer-plugin-network-tree/src/vue/components/code-mirror/SpinalCodeMirror.vue","node_modules/spinal-env-viewer-plugin-network-tree/src/js/personalized_functions/function.js","node_modules/@parcel/runtime-js/lib/runtime-54b8d148f2bf5828.js","node_modules/spinal-env-viewer-plugin-network-tree/src/vue/dialogs/network_dialogs/personalizeNamingConvention.vue","node_modules/spinal-env-viewer-plugin-network-tree/src/js/personalized_functions/naming_convention_function.js","node_modules/spinal-env-viewer-plugin-network-tree/src/vue/dialogs/link_to_gtb/linkToGtbDialog.vue","node_modules/spinal-env-viewer-plugin-network-tree/src/js/controllers/links/linkBimToBmsControllers.js","node_modules/spinal-env-viewer-plugin-network-tree/src/js/network/networkService.js","node_modules/spinal-env-viewer-plugin-network-tree/src/vue/dialogs/link_to_gtb/confirmLinkToGTB.vue","node_modules/spinal-env-viewer-plugin-network-tree/src/vue/components/links/configuration.vue","node_modules/spinal-env-viewer-plugin-network-tree/src/js/personalized_functions/replace_by.js","node_modules/spinal-env-viewer-plugin-network-tree/src/js/personalized_functions/replace-by.js","node_modules/spinal-env-viewer-plugin-network-tree/src/vue/panels/index.js","node_modules/spinal-env-viewer-panel-manager-service_spinalforgeextention/index.js","node_modules/spinal-env-viewer-panel-manager-service_spinalforgeextention/SpinalForgeExtention.js","node_modules/spinal-env-viewer-plugin-network-tree/src/vue/panels/generateAutomateContext.vue","node_modules/spinal-env-viewer-plugin-network-tree/src/vue/components/steps/configurationStep.vue","node_modules/spinal-env-viewer-plugin-network-tree/src/js/attributeConfig.js","node_modules/spinal-env-viewer-plugin-network-tree/src/vue/components/steps/launchStep.vue","node_modules/spinal-env-viewer-plugin-network-tree/src/vue/components/steps/selectionStep.vue","node_modules/spinal-env-viewer-bim-manager-service/dist/index.js","node_modules/spinal-env-viewer-bim-manager-service/src/index.ts","node_modules/spinal-env-viewer-bim-manager-service/dist/bimObjects/bimService.js","node_modules/spinal-env-viewer-bim-manager-service/src/bimObjects/bimService.ts","node_modules/spinal-env-viewer-plugin-network-tree/src/vue/components/steps/namingConventionStep.vue","node_modules/spinal-env-viewer-plugin-network-tree/src/vue/panels/detailPanel.vue","node_modules/file-saver/dist/FileSaver.min.js","node_modules/file-saver/src/FileSaver.js","node_modules/@parcel/node-resolver-core/lib/_empty.js"],"sourcesContent":["\nimport \"./buttons\";\nimport \"./vue/dialogs\";\nimport \"./vue/panels\";\n\n// import spinalNetworkTreeService from \"../src/services\";\n\n\n// export {\n//   spinalNetworkTreeService\n// }\n\n// export default spinalNetworkTreeService;","import createNetworkBtn from \"./network_buttons/createNetwork\";\nimport createNetworkTreeContextBtn from \"./network_buttons/createNetworkContext\";\nimport addBimObjectBtn from \"./network_buttons/addElement\";\nimport generateNetworkTreeBtn from \"./network_buttons/generateAutomateContext\";\nimport seeSubItems from \"./network_buttons/seeSubItems\";\nimport clearAutomateContent from \"./network_buttons/clearAutomateContent\";\n// import viewDetailBtn from \"./network_buttons/tableDetail\"\n\nimport linkProfilBtn from \"./link_to_virtual_profil/linkProfil\";\nimport editLinkButton from \"./link_to_virtual_profil/editLinkButton\";\nimport unlinkProfil from \"./link_to_virtual_profil/unlinkProfil\";\n\nimport linkToGTBNetworkBtn from \"./link_to_gtb_network/linkToGtb\";\n\nexport {\n  addBimObjectBtn,\n  createNetworkBtn,\n  createNetworkTreeContextBtn,\n  // viewDetailBtn,\n  generateNetworkTreeBtn,\n  linkProfilBtn,\n  unlinkProfil,\n  editLinkButton,\n  seeSubItems,\n  linkToGTBNetworkBtn,\n  clearAutomateContent\n}","import { SpinalContextApp, spinalContextMenuService } from \"spinal-env-viewer-context-menu-service\";\n\nconst { spinalPanelManagerService } = require(\"spinal-env-viewer-panel-manager-service\");\n\n// import networkService from \"../../services\"\nimport { CONSTANTS } from \"spinal-env-viewer-plugin-network-tree-service\";\n\nconst SIDEBAR = \"GraphManagerSideBar\";\n\n\n\nclass CreateNetWork extends SpinalContextApp {\n  constructor() {\n    super(\"Create Subnetwork\", \"Create Subnetwork\", {\n      icon: \"device_hub\",\n      icon_type: \"in\",\n      backgroundColor: \"#FF00000\",\n      fontColor: \"#FFFFFF\"\n    })\n  }\n\n  isShown(option) {\n    let contextType = option.context.type.get();\n\n    // return Promise.resolve(contextType === networkService.constants.CONTEXT_TYPE ? true : -1);\n    return Promise.resolve(contextType === CONSTANTS.CONTEXT_TYPE ? true : -1);\n  }\n\n  action(option) {\n    let dialogParams = {\n      title: \"Create network\",\n      label: \"Enter name\",\n      selectedNode: option.selectedNode,\n      context: option.context,\n      createContext: false\n    };\n\n    spinalPanelManagerService.openPanel('createNetworkDialog', dialogParams);\n  }\n\n}\n\nconst createNetworkBtn = new CreateNetWork()\nspinalContextMenuService.registerApp(SIDEBAR, createNetworkBtn, [3]);\n\nexport default createNetworkBtn;","/*\n * Copyright 2018 SpinalCom - www.spinalcom.com\n *\n * This file is part of SpinalCore.\n *\n * Please read all of the following terms and conditions\n * of the Free Software license Agreement (\"Agreement\")\n * carefully.\n *\n * This Agreement is a legally binding contract between\n * the Licensee (as defined below) and SpinalCom that\n * sets forth the terms and conditions that govern your\n * use of the Program. By installing and/or using the\n * Program, you agree to abide by all the terms and\n * conditions stated or referenced herein.\n *\n * If you do not agree to abide by these terms and\n * conditions, do not demonstrate your acceptance and do\n * not install or use the Program.\n * You should have received a copy of the license along\n * with this file. If not, see\n * <http://resources.spinalcom.com/licenses.pdf>.\n */\n\nconst G_root = typeof window == \"undefined\" ? global : window;\nconst SpinalContextMenuService = require(\"./SpinalContextMenuService\");\nconst SpinalContextApp = require(\"./SpinalContextApp\");\nconst Constant = require('./constants');\nif (typeof G_root.spinal === \"undefined\") G_root.spinal = {};\nif (typeof G_root.spinal.spinalContextMenuService === \"undefined\")\n  G_root.spinal.spinalContextMenuService = new SpinalContextMenuService();\n\nmodule.exports = {\n  constants: Constant,\n  spinalContextMenuService: G_root.spinal.spinalContextMenuService,\n  SpinalContextApp,\n  install(Vue) {\n    Vue.prototype.$spinalContextMenuService =\n      G_root.spinal.spinalContextMenuService;\n  }\n};\n","/*\n * Copyright 2018 SpinalCom - www.spinalcom.com\n *\n * This file is part of SpinalCore.\n *\n * Please read all of the following terms and conditions\n * of the Free Software license Agreement (\"Agreement\")\n * carefully.\n *\n * This Agreement is a legally binding contract between\n * the Licensee (as defined below) and SpinalCom that\n * sets forth the terms and conditions that govern your\n * use of the Program. By installing and/or using the\n * Program, you agree to abide by all the terms and\n * conditions stated or referenced herein.\n *\n * If you do not agree to abide by these terms and\n * conditions, do not demonstrate your acceptance and do\n * not install or use the Program.\n * You should have received a copy of the license along\n * with this file. If not, see\n * <http://resources.spinalcom.com/licenses.pdf>.\n */\n\nimport * as Q from 'q';\nvar debounce = require('lodash.debounce');\n\n/**\n *  Containter like service to register and get applications relative to a hookname\n *\n * @property {object} apps key = hookname, value array of apps\n * @class SpinalContextMenuService\n */\nclass SpinalContextMenuService {\n  /**\n   *Creates an instance of SpinalContextMenuService.\n   * @memberof SpinalContextMenuService\n   */\n  constructor() {\n    this.apps = {};\n    this.promiseByAppProfileId = {};\n    this.appRdy = Q.defer();\n    this.debouncedRdy = debounce(\n      () => {\n        this.appRdy.resolve();\n        this.debouncedRdy = () => {};\n      },\n      1000,\n      { leading: false, trailing: true }\n    );\n  }\n\n  // waitRdy() {\n  //   this.appRdy.promise;\n  // }\n\n  /**\n   * Return true if user has access to this appProfile\n   * @param appProfileId\n   * @return {PromiseLike<boolean > | Promise<boolean>}\n   */\n  async hasUserRight(appProfileId) {\n    this.debouncedRdy();\n    await window.spinal.spinalSystem.init();\n    const path =\n      '/etc/UserProfileDir/' + window.spinal.spinalSystem.getUser().username;\n    const userProfile = await window.spinal.spinalSystem.load(path);\n    let res = false;\n    if (userProfile) {\n      for (let i = 0; i < userProfile.appProfiles.length && !res; i++) {\n        res = ((1 << userProfile.appProfiles[i]) & appProfileId) !== 0;\n      }\n    }\n    return res;\n  }\n\n  /**\n   * method to register the Application to a hook\n   *\n   * @param {string} hookname the place where is application button is located\n   * @param {SpinalContextApp} spinalContextApp the application\n   * @param {number} appProfileId id of the group that can use the application\n   * button\n   * @memberof SpinalContextMenuService\n   */\n  registerApp(hookname, spinalContextApp, appProfileId) {\n    this.debouncedRdy();\n    if (typeof appProfileId === 'undefined') {\n      console.warn(\n        'Deprecated: The usage of this function without the third' +\n          ' parameter appProfileId is deprecated your button is lock for admin' +\n          ' only until you set the third parameter'\n      );\n      appProfileId = 1;\n    }\n    // get the array of apps of the hook\n    let appsInHooks = this.apps[hookname];\n\n    // create the array if not exist\n    if (!(appsInHooks instanceof Array)) {\n      appsInHooks = this.apps[hookname] = [];\n    }\n\n    if (!this.promiseByAppProfileId.hasOwnProperty(appProfileId)) {\n      this.promiseByAppProfileId[appProfileId] =\n        this.hasUserRight(appProfileId);\n    }\n\n    this.promiseByAppProfileId[appProfileId].then((hasAccess) => {\n      // push the app if not exist ans user has access to the button\n      if (hasAccess && appsInHooks.indexOf(spinalContextApp) === -1) {\n        appsInHooks.push(spinalContextApp);\n      }\n    });\n  }\n\n  /**\n   * method to get the applications registered to a hookname\n   *\n   * @param {String} hookname\n   * @param {object} option\n   * @memberof SpinalContextMenuService\n   * @returns {Promise} resolve : [spinalContextApp, ...]; reject: Error\n   */\n  async getApps(hookname, option) {\n    await this.appRdy.promise;\n    // get the array of apps of the hook\n    let appsInHooks = this.apps[hookname];\n\n    // create the array if not exist\n    if (!(appsInHooks instanceof Array)) {\n      return Promise.resolve([]);\n    }\n    let promises = appsInHooks.map(async function (e, idx) {\n      try {\n        const res = await e.isShown(option);\n        return res === -1 ? -1 : e;\n      } catch (error) {\n        console.error(error);\n        return -1;\n      }\n    });\n    try {\n      const appRes = await Promise.all(promises);\n      return appRes.filter((itm) => itm !== -1);\n    } catch (error) {\n      console.error(error);\n      return [];\n    }\n  }\n}\n\nmodule.exports = SpinalContextMenuService;\n","/*\n * Copyright 2018 SpinalCom - www.spinalcom.com\n *\n * This file is part of SpinalCore.\n *\n * Please read all of the following terms and conditions\n * of the Free Software license Agreement (\"Agreement\")\n * carefully.\n *\n * This Agreement is a legally binding contract between\n * the Licensee (as defined below) and SpinalCom that\n * sets forth the terms and conditions that govern your\n * use of the Program. By installing and/or using the\n * Program, you agree to abide by all the terms and\n * conditions stated or referenced herein.\n *\n * If you do not agree to abide by these terms and\n * conditions, do not demonstrate your acceptance and do\n * not install or use the Program.\n * You should have received a copy of the license along\n * with this file. If not, see\n * <http://resources.spinalcom.com/licenses.pdf>.\n */\n\n/**\n *  Interface like class to define a Contextual Application button\n * @see https://material.io/tools/icons/?style=baseline for material icons\n *\n * @class SpinalContextApp\n * @property {string} label=notset short name to be shown in the application\n * @property {string} description description of what the Application button do\n * @property {object} buttonCfg Object configuration of the Application button\n * @property {string} buttonCfg.icon=tab can be a font-awsome or material icon string\n * @property {string} buttonCfg.icon_type=in Where to place the icon in the `md-icon`. Should be one of theses `class`, `in`, `src`\n * @property {string} buttonCfg.backgroundColor=#0000FF backgroud color of the button\n * @property {string} buttonCfg.fontColor=#FFFFFF font color of the button\n * @property {objet} [badgeCfg] Object configuration of the Application button badge\n * @property {string} badgeCfg.label string shown in a badge; if empty it's not shown\n * @property {string} badgeCfg.backgroundColor=#FF0000 backgroud color of the badge\n * @property {string} badgeCfg.fontColor=#FFFFFF font color of the badge\n */\nclass SpinalContextApp {\n  /**\n   * Creates an instance of SpinalContextApp.\n   * @param {string} label=notset short name to be shown in the application\n   * @param {string} description description of what the Application button do\n   * @param {object} buttonCfg Object configuration of the Application button\n   * @param {string} buttonCfg.icon=tab can be a font-awsome or material icon string\n   * @param {string} buttonCfg.icon_type=in Where to place the icon in the `md-icon`. Should be one of theses `class`, `in`, `src`\n   * @param {string} buttonCfg.backgroundColor=#0000FF backgroud color of the button\n   * @param {string} buttonCfg.fontColor=#FFFFFF font color of the button\n   * @param {objet} [badgeCfg] Object configuration of the Application button badge\n   * @param {string} badgeCfg.label string shown in a badge; if empty it's not shown\n   * @param {string} badgeCfg.backgroundColor=#FF0000 backgroud color of the badge\n   * @param {string} badgeCfg.fontColor=#FFFFFF font color of the badge\n   * @memberof SpinalContextApp\n   */\n  constructor(label, description, buttonCfg, badgeCfg = {}) {\n    this.label = label || \"notset\";\n    this.description = description || \"\";\n    this.buttonCfg = {\n      icon: buttonCfg.icon || \"tab\",\n      icon_type: buttonCfg.icon_type || \"in\",\n      backgroundColor: colorHash(buttonCfg.backgroundColor || \"#0000FF\"),\n      fontColor: colorHash(buttonCfg.fontColor || \"#FFFFFF\")\n    };\n\n    this.badgeCfg = {\n      label: badgeCfg.label || \"\",\n      backgroundColor: colorHash(badgeCfg.backgroundColor || \"#FF0000\"),\n      fontColor: colorHash(badgeCfg.fontColor || \"#FFFFFF\")\n    };\n  }\n\n  /**\n   * Method called by `SpinalContextMenuService.getApps`\n   * to filter the Application button to show in the context hook\n   *\n   * @param {object} option\n   * @memberof SpinalContextApp\n   * @returns {Promise} Resolve: not shown if === -1;\n   */\n  isShown(option) {}\n\n  /**\n   * Method to call on click of the application button\n   *\n   * @param {object} option {}\n   * @memberof SpinalContextApp\n   */\n  action(option) {}\n}\n\nmodule.exports = SpinalContextApp;\n\nfunction colorHash(color) {\n  if (color[0] === \"#\") return color;\n  return \"#\" + color;\n}\n","\n\nmodule.exports = {\n  ADMINISTRATEUR: 'ADMINISTRATEUR',\n  MAINTENEUR: 'MAINTENEUR',\n  INTEGRATEUR: 'INTEGRATEUR',\n  ASSET_MANAGEUR: 'ASSET MANAGER',\n};","/*\n * Copyright 2018 SpinalCom - www.spinalcom.com\n *\n * This file is part of SpinalCore.\n *\n * Please read all of the following terms and conditions\n * of the Free Software license Agreement (\"Agreement\")\n * carefully.\n *\n * This Agreement is a legally binding contract between\n * the Licensee (as defined below) and SpinalCom that\n * sets forth the terms and conditions that govern your\n * use of the Program. By installing and/or using the\n * Program, you agree to abide by all the terms and\n * conditions stated or referenced herein.\n *\n * If you do not agree to abide by these terms and\n * conditions, do not demonstrate your acceptance and do\n * not install or use the Program.\n * You should have received a copy of the license along\n * with this file. If not, see\n * <http://resources.spinalcom.com/licenses.pdf>.\n */\n\nconst G_root = typeof window == \"undefined\" ? global : window;\nconst SpinalPanelManagerService = require(\"./SpinalPanelManagerService\");\nconst SpinalPanelApp = require(\"./SpinalPanelApp\");\n\nif (typeof G_root.spinal === \"undefined\") G_root.spinal = {};\nif (typeof G_root.spinal.spinalPanelManagerService === \"undefined\")\n  G_root.spinal.spinalPanelManagerService = new SpinalPanelManagerService();\nconst SpinalMountExtention = require(\"./SpinalMountExtention.js\")(\n  G_root.spinal.spinalPanelManagerService,\n  SpinalPanelApp\n);\n\nmodule.exports = {\n  spinalPanelManagerService: G_root.spinal.spinalPanelManagerService,\n  SpinalPanelApp,\n  SpinalMountExtention,\n  install(Vue) {\n    Vue.prototype.$spinalPanelManagerService =\n      G_root.spinal.spinalPanelManagerService;\n  }\n};\n","/*\n * Copyright 2018 SpinalCom - www.spinalcom.com\n *\n * This file is part of SpinalCore.\n *\n * Please read all of the following terms and conditions\n * of the Free Software license Agreement (\"Agreement\")\n * carefully.\n *\n * This Agreement is a legally binding contract between\n * the Licensee (as defined below) and SpinalCom that\n * sets forth the terms and conditions that govern your\n * use of the Program. By installing and/or using the\n * Program, you agree to abide by all the terms and\n * conditions stated or referenced herein.\n *\n * If you do not agree to abide by these terms and\n * conditions, do not demonstrate your acceptance and do\n * not install or use the Program.\n * You should have received a copy of the license along\n * with this file. If not, see\n * <http://resources.spinalcom.com/licenses.pdf>.\n */\n\n/**\n *  Containter like service to register and get applications relative to a hookname\n *\n * @property {object} panels key = panelName, value = an instance of SpinalPanelApp\n * @class SpinalPanelManagerService\n */\nclass SpinalPanelManagerService {\n  /**\n   *Creates an instance of SpinalPanelManagerService.\n   * @memberof SpinalPanelManagerService\n   */\n  constructor() {\n    this.panels = {};\n  }\n\n  /**\n   * method to register an Panel Application\n   *\n   * @param {string} panelName the name of the panel\n   * @param {SpinalPanelApp} spinalPanelApp the application\n   * @memberof SpinalPanelManagerService\n   */\n  registerPanel(panelName, spinalPanelApp) {\n    this.panels[panelName] = spinalPanelApp;\n  }\n\n  /**\n   *\n   *\n   * @param {*} panelName\n   * @param {*} option\n   * @returns {bool}\n   * @memberof SpinalPanelManagerService\n   */\n  openPanel(panelName, option) {\n    if (typeof this.panels[panelName] !== \"undefined\")\n      return this.panels[panelName].openPanel(option);\n    return false;\n  }\n  /**\n   *\n   *\n   * @param {*} panelName\n   * @param {*} option\n   * @returns {bool}\n   * @memberof SpinalPanelManagerService\n   */\n  closePanel(panelName, option) {\n    if (typeof this.panels[panelName] !== \"undefined\")\n      return this.panels[panelName].closePanel(option);\n    return false;\n  }\n  /**\n   *\n   *\n   * @param {*} panelName\n   * @param {*} option\n   * @returns {bool}\n   * @memberof SpinalPanelManagerService\n   */\n  tooglePanel(panelName, option) {\n    if (typeof this.panels[panelName] !== \"undefined\")\n      return this.panels[panelName].tooglePanel(option);\n    return false;\n  }\n}\n\nmodule.exports = SpinalPanelManagerService;\n","/*\n * Copyright 2018 SpinalCom - www.spinalcom.com\n *\n * This file is part of SpinalCore.\n *\n * Please read all of the following terms and conditions\n * of the Free Software license Agreement (\"Agreement\")\n * carefully.\n *\n * This Agreement is a legally binding contract between\n * the Licensee (as defined below) and SpinalCom that\n * sets forth the terms and conditions that govern your\n * use of the Program. By installing and/or using the\n * Program, you agree to abide by all the terms and\n * conditions stated or referenced herein.\n *\n * If you do not agree to abide by these terms and\n * conditions, do not demonstrate your acceptance and do\n * not install or use the Program.\n * You should have received a copy of the license along\n * with this file. If not, see\n * <http://resources.spinalcom.com/licenses.pdf>.\n */\n\n/**\n * Base interface like class of a panel\n *\n * @class SpinalPanelApp\n */\nclass SpinalPanelApp {\n  constructor() {}\n\n  openPanel(option) {}\n  closePanel(option) {}\n  tooglePanel(option) {}\n}\n\nmodule.exports = SpinalPanelApp;\n","/*\n * Copyright 2018 SpinalCom - www.spinalcom.com\n *\n * This file is part of SpinalCore.\n *\n * Please read all of the following terms and conditions\n * of the Free Software license Agreement (\"Agreement\")\n * carefully.\n *\n * This Agreement is a legally binding contract between\n * the Licensee (as defined below) and SpinalCom that\n * sets forth the terms and conditions that govern your\n * use of the Program. By installing and/or using the\n * Program, you agree to abide by all the terms and\n * conditions stated or referenced herein.\n *\n * If you do not agree to abide by these terms and\n * conditions, do not demonstrate your acceptance and do\n * not install or use the Program.\n * You should have received a copy of the license along\n * with this file. If not, see\n * <http://resources.spinalcom.com/licenses.pdf>.\n */\n\nfunction configInit(option) {\n  const cfg = {};\n  if (!option.vueMountComponent) {\n    throw new Error(\"mount : missing option vueMountComponent\");\n  }\n\n  cfg.name = option.name || \"SpinalMount\";\n  cfg.vueMountComponent = option.vueMountComponent;\n  cfg.parentContainer = option.parentContainer || document.body;\n  return cfg;\n}\n\nfunction getDialog() {\n  if (!this.dialog) {\n    this.dialog = document.createElement(\"div\");\n    const _compo = document.createElement(\"div\");\n    this.dialog.className = \"spinal-modal-container\";\n    this.cfg.parentContainer.appendChild(this.dialog);\n    this.dialog.appendChild(_compo);\n    this.compoment = new this.cfg.vueMountComponent({\n      propsData: {\n        onFinised: this.onFinised.bind(this)\n      }\n    }).$mount(_compo);\n  }\n  return this.dialog;\n}\n\n/**\n *\n * @param {*} spinalPanelManagerService\n * @param {*} SpinalPanelApp\n * @returns {object} { mount }\n */\nmodule.exports = function(spinalPanelManagerService, SpinalPanelApp) {\n  return {\n    /**\n```js\n{\n  name: \"myCustomDialogName\",\n  vueMountComponent: Vue.extend(aVueCompomentDialog),\n  parentContainer: document.body\n}```\n     *\n     * @param {*} option\n     */\n    mount(option) {\n      let cfg = configInit(option);\n      const SpinalMount = class extends SpinalPanelApp {\n        constructor() {\n          super();\n          this.cfg = cfg;\n          this.dialog = null;\n          this.compoment = null;\n        }\n\n        openPanel(opt) {\n          getDialog.call(this);\n          this.compoment.opened(opt);\n        }\n        closePanel(opt) {\n          if (this.dialog !== null) {\n            this.compoment.removed(opt);\n            this.dialog.remove();\n            this.dialog = null;\n            this.compoment = null;\n          }\n        }\n\n        tooglePanel(opt) {\n          if (this.dialog !== null) {\n            this.closePanel(opt);\n          } else {\n            this.openPanel(opt);\n          }\n        }\n\n        /**\n         * called when dialog closed by the dialog itself\n         */\n        onFinised(closeResult) {\n          this.closePanel(closeResult);\n        }\n      };\n      let SpinalMountInstance = new SpinalMount();\n      spinalPanelManagerService.registerPanel(cfg.name, SpinalMountInstance);\n    }\n  };\n};\n","import {\n  SpinalContextApp,\n  spinalContextMenuService\n} from \"spinal-env-viewer-context-menu-service\";\n\nconst {\n  spinalPanelManagerService,\n\n} = require(\"spinal-env-viewer-panel-manager-service\");\n\nconst HEADERBAR = \"GraphManagerTopBar\";\n\n\nclass CreateNetWorkContext extends SpinalContextApp {\n  constructor() {\n    super(\"Create Network Tree Context\", \"Create Network Tree Context\", {\n      icon: \"device_hub\",\n      icon_type: \"in\",\n      backgroundColor: \"#FF00000\",\n      fontColor: \"#FFFFFF\"\n    })\n  }\n\n  isShown() {\n    return Promise.resolve(true);\n  }\n\n  action() {\n    let dialogParams = {\n      title: \"Create network context\",\n      label: \"Enter context name\",\n      createContext: true\n    };\n\n    spinalPanelManagerService.openPanel('createNetworkDialog', dialogParams);\n  }\n\n}\n\n\nconst createNetworkContextBtn = new CreateNetWorkContext()\n\nspinalContextMenuService.registerApp(HEADERBAR, createNetworkContextBtn, [3]);\n\nexport default createNetworkContextBtn;","import {\n\tSpinalContextApp,\n\tspinalContextMenuService\n} from \"spinal-env-viewer-context-menu-service\";\n\n// import ContextGeographicService from \"spinal-env-viewer-context-geographic-service\";\n\n// import networkTreeService from \"../../services\";\n\nimport { CONSTANTS, NetworkTreeService } from \"spinal-env-viewer-plugin-network-tree-service\";\n\nconst SIDEBAR = \"GraphManagerSideBar\";\n\n\nclass AddBimObjects extends SpinalContextApp {\n\tconstructor() {\n\t\tsuper(\n\t\t\t\"add BimObject\",\n\t\t\t\"This button adds all elements selected\", {\n\t\t\ticon: \"post_add\",\n\t\t\ticon_type: \"in\",\n\t\t\tbackgroundColor: \"#FF0000\",\n\t\t\tfontColor: \"#FFFFFF\"\n\t\t}\n\t\t);\n\t}\n\n\tisShown(option) {\n\t\tlet typeSelected = option.context.type.get();\n\n\t\t// let display = networkTreeService.constants.CONTEXT_TYPE === typeSelected;\n\t\tlet display = CONSTANTS.CONTEXT_TYPE === typeSelected;\n\n\t\treturn Promise.resolve(display ? true : -1);\n\n\t}\n\n\taction(option) {\n\t\tconst viewer = window.spinal.ForgeViewer.viewer;\n\t\tvar bimSelected = viewer.getAggregateSelection();\n\n\t\tif (bimSelected.length === 0) {\n\t\t\talert(\"select an object\");\n\t\t\treturn;\n\t\t}\n\n\t\tNetworkTreeService.addBimObject(option.context.id.get(), option.selectedNode.id.get(), bimSelected);\n\n\t}\n\n}\n\nconst addBimObjectBtn = new AddBimObjects()\n\nspinalContextMenuService.registerApp(SIDEBAR, addBimObjectBtn, [3]);\n\n\nexport default addBimObjectBtn;","import {\n  SpinalContextApp,\n  spinalContextMenuService\n} from \"spinal-env-viewer-context-menu-service\";\n\nimport {\n  spinalPanelManagerService\n} from \"spinal-env-viewer-panel-manager-service\";\n\n// import spinalNetworkTreeService from \"../../services\";\nimport { CONSTANTS } from \"spinal-env-viewer-plugin-network-tree-service\";\n\n\nconst SIDEBAR = \"GraphManagerSideBar\";\n\n\nclass GenerateAutomateContext extends SpinalContextApp {\n  constructor() {\n    super(\"Generate automate tree structure\",\n      \"Generate automate tree structure\", {\n      icon: \"leak_add\",\n      icon_type: \"in\",\n      backgroundColor: \"#FF0000\",\n      fontColor: \"#FFFFFF\"\n    })\n  }\n\n  isShown(option) {\n    const type = option.context.type.get()\n\n    // if (type === spinalNetworkTreeService.constants.CONTEXT_TYPE) return Promise.resolve(true);\n    if (type === CONSTANTS.CONTEXT_TYPE) return Promise.resolve(true);\n    return Promise.resolve(-1);\n  }\n\n  action(option) {\n    spinalPanelManagerService.openPanel(\"generateAutomateContextPanel\", {\n      context: option.context.get(),\n      selectedNode: option.selectedNode.get()\n    });\n  }\n\n}\n\nconst generateAutomateContext = new GenerateAutomateContext();\n\nspinalContextMenuService.registerApp(SIDEBAR, generateAutomateContext, [3]);\n\nexport default generateAutomateContext;","import {\n  SpinalContextApp,\n  spinalContextMenuService,\n} from \"spinal-env-viewer-context-menu-service\";\nimport {\n  SpinalGraphService,\n  SPINAL_RELATION_PTR_LST_TYPE,\n} from \"spinal-env-viewer-graph-service\";\n\n// import spinalNetworkTreeService from \"../../services\";\nimport {\n  CONSTANTS,\n  NetworkTreeService,\n} from \"spinal-env-viewer-plugin-network-tree-service\";\nimport * as lodash from \"lodash\";\n\nconst SIDEBAR = \"GraphManagerSideBar\";\n\nconst automateWatched = new Map();\n\nclass SeeSubItems extends SpinalContextApp {\n  constructor() {\n    super(\"see sub-items\", \"See sub-items\", {\n      icon: \"visibility\",\n      icon_type: \"\",\n      backgroundColor: \"#FF0000\",\n      fontColor: \"#FFFFFF\",\n    });\n  }\n\n  isShown(option) {\n    const contextType = option.context.type.get();\n\n    // if (contextType !== spinalNetworkTreeService.constants.CONTEXT_TYPE) return Promise.resolve(-1);\n    if (contextType !== CONSTANTS.CONTEXT_TYPE) return Promise.resolve(-1);\n\n    const id = option.selectedNode.id.get();\n    const realNode = SpinalGraphService.getRealNode(id);\n\n    // if (realNode.hasRelation(spinalNetworkTreeService.constants.NETWORK_BIMOJECT_RELATION, SPINAL_RELATION_PTR_LST_TYPE)) {\n    if (\n      realNode.hasRelation(\n        CONSTANTS.NETWORK_BIMOJECT_RELATION,\n        SPINAL_RELATION_PTR_LST_TYPE\n      )\n    ) {\n      // this.buttonCfg.icon = typeof automateWatched.get(id) === \"undefined\" ? \"visibility\" : \"visibility_off\";\n      return Promise.resolve(true);\n    }\n\n    return Promise.resolve(-1);\n  }\n\n  async action({ selectedNode, context }) {\n    const node = selectedNode.get();\n    const children = await NetworkTreeService.getBimObjectsLinked(node.id);\n\n    const bims = [node, ...children.map((el) => el.get())];\n\n    const ids = [];\n    const grouped = lodash.groupBy(bims, (item) => item.bimFileId);\n    lodash.forEach(grouped, (value, key) => {\n      ids.push({\n        bimFileId: key,\n        dbIds: value.map((el) => el.dbid),\n      });\n    });\n\n    ids.forEach(({ bimFileId, dbIds }) => {\n      const model = spinal.BimObjectService.getModelByBimfile(bimFileId);\n      window.spinal.ForgeViewer.viewer.impl.visibilityManager.isolate(\n        dbIds,\n        model\n      );\n    });\n  }\n}\n\n// const convertColorToRGB = (hexColor) => {\n//   var result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hexColor);\n//   return result\n//     ? {\n//         r: parseInt(result[1], 16),\n//         g: parseInt(result[2], 16),\n//         b: parseInt(result[3], 16),\n//       }\n//     : null;\n// };\n\n// const convertRGBTOVector = (hexColor) => {\n//   const rgbColor = convertColorToRGB(hexColor);\n//   return rgbColor\n//     ? // eslint-disable-next-line no-undef\n//       new THREE.Vector4(\n//         rgbColor.r / 255,\n//         rgbColor.g / 255,\n//         rgbColor.b / 255,\n//         0.7\n//       )\n//     : // eslint-disable-next-line no-undef\n//       new THREE.Vector4(1, 0, 0, 0);\n// };\n\nconst seeSubItems = new SeeSubItems();\nspinalContextMenuService.registerApp(SIDEBAR, seeSubItems, [3]);\n\nexport default seeSubItems;\n","import {\n   SpinalContextApp,\n   spinalContextMenuService\n} from \"spinal-env-viewer-context-menu-service\";\nimport { SpinalGraphService, SPINAL_RELATION_PTR_LST_TYPE } from \"spinal-env-viewer-graph-service\";\n\nimport { spinalPanelManagerService } from \"spinal-env-viewer-panel-manager-service\";\n\n// import spinalNetworkTreeService from \"../../services\";\nimport { CONSTANTS } from \"spinal-env-viewer-plugin-network-tree-service\";\n\n\nconst SIDEBAR = \"GraphManagerSideBar\";\n\n\nclass ClearAutomateContent extends SpinalContextApp {\n   constructor() {\n      super(\"Remove Items linked\",\n         \"Remove Items linked\", {\n         icon: \"leak_remove\",\n         icon_type: \"in\",\n         backgroundColor: \"#FF0000\",\n         fontColor: \"#FFFFFF\"\n      })\n   }\n\n   isShown(option) {\n      const contextType = option.context.type.get();\n      const type = option.selectedNode.type.get();\n\n      // if (contextType === spinalNetworkTreeService.constants.CONTEXT_TYPE) return Promise.resolve(true);\n      if (contextType === CONSTANTS.CONTEXT_TYPE) return Promise.resolve(true);\n      return Promise.resolve(-1);\n   }\n\n   action(option) {\n      // spinalPanelManagerService.openPanel(\"generateAutomateContextPanel\", {\n      //    context: option.context.get(),\n      //    selectedNode: option.selectedNode.get()\n      // });\n      const contextId = option.context.id.get();\n      const nodeId = option.selectedNode.id.get();\n\n      removeRelation(contextId, nodeId);\n\n   }\n\n}\n\nconst removeRelation = async (contextId, nodeId) => {\n   const realNode = SpinalGraphService.getRealNode(nodeId);\n   // if (realNode.hasRelation(spinalNetworkTreeService.constants.NETWORK_BIMOJECT_RELATION, SPINAL_RELATION_PTR_LST_TYPE)) {\n   //    const children = await SpinalGraphService.getChildrenInContext(nodeId, contextId);\n   //    await realNode.removeRelation(spinalNetworkTreeService.constants.NETWORK_BIMOJECT_RELATION, SPINAL_RELATION_PTR_LST_TYPE);\n   //    return children.map(el => {\n   //       return removeRelation(contextId, el.id.get());\n   //    })\n   // }\n\n   if (realNode.hasRelation(CONSTANTS.NETWORK_BIMOJECT_RELATION, SPINAL_RELATION_PTR_LST_TYPE)) {\n      const children = await SpinalGraphService.getChildrenInContext(nodeId, contextId);\n      await realNode.removeRelation(CONSTANTS.NETWORK_BIMOJECT_RELATION, SPINAL_RELATION_PTR_LST_TYPE);\n      return children.map(el => {\n         return removeRelation(contextId, el.id.get());\n      })\n   }\n\n}\n\nconst clearAutomateContent = new ClearAutomateContent();\n\nspinalContextMenuService.registerApp(SIDEBAR, clearAutomateContent, [3]);\n\nexport default clearAutomateContent;","import {\n  SpinalContextApp,\n  spinalContextMenuService,\n} from \"spinal-env-viewer-context-menu-service\";\n\nimport { spinalPanelManagerService } from \"spinal-env-viewer-panel-manager-service\";\n\nimport { CONSTANTS } from \"spinal-env-viewer-plugin-network-tree-service\";\nimport {\n  SpinalGraphService,\n  SPINAL_RELATION_PTR_LST_TYPE,\n} from \"spinal-env-viewer-graph-service\";\n\nconst SIDEBAR = \"GraphManagerSideBar\";\n\n// import spinalNetworkTreeService from \"../../services\";\n\nclass LinkAutomateToProfil extends SpinalContextApp {\n  constructor() {\n    super(\"link automate to profile\", \"link automate to profile\", {\n      icon: \"add_link\",\n      icon_type: \"in\",\n      backgroundColor: \"#FF0000\",\n      fontColor: \"#FFFFFF\",\n    });\n  }\n\n  isShown(option) {\n    const contextType = option.context.type.get();\n    const contextId = option.context.id.get();\n    const nodeId = option.selectedNode.id.get();\n\n    if (contextType !== CONSTANTS.CONTEXT_TYPE) return Promise.resolve(-1);\n    if (contextId === nodeId && contextType == CONSTANTS.CONTEXT_TYPE)\n      return Promise.resolve(true);\n\n    const automate = SpinalGraphService.getRealNode(nodeId);\n\n    const found = [\n      CONSTANTS.NETWORK_RELATION,\n      CONSTANTS.NETWORK_BIMOJECT_RELATION,\n    ].findIndex((el) => automate.hasRelation(el, SPINAL_RELATION_PTR_LST_TYPE));\n\n    return Promise.resolve(found);\n  }\n\n  async action(option) {\n    let contextId = option.context.id.get();\n    let nodeId = option.selectedNode.id.get();\n\n    spinalPanelManagerService.openPanel(\"linkAutomateToProfilDialog\", {\n      contextId,\n      nodeId,\n    });\n  }\n}\n\nconst linkAutomateToProfil = new LinkAutomateToProfil();\n\nspinalContextMenuService.registerApp(SIDEBAR, linkAutomateToProfil, [3]);\n\nexport default linkAutomateToProfil;\n","import {\n  SpinalContextApp,\n  spinalContextMenuService\n} from \"spinal-env-viewer-context-menu-service\";\nimport { SpinalGraphService } from \"spinal-env-viewer-graph-service\";\n\n// import utilities from \"../../js/utilities\";\n// import spinalNetworkTreeService from \"../../services\";\n\nimport { LinkNetworkTreeService, CONSTANTS } from \"spinal-env-viewer-plugin-network-tree-service\";\n\nimport {\n  spinalPanelManagerService\n} from \"spinal-env-viewer-panel-manager-service\";\n\nimport { BIM_OBJECT_TYPE } from \"spinal-env-viewer-plugin-forge/dist/Constants\";\n\nconst SIDEBAR = \"GraphManagerSideBar\";\n\nconst editLinkIcon = require(\"../../assets/link-edit.svg\");\n\nclass EditAutomateLink extends SpinalContextApp {\n  constructor() {\n    super(\"Edit link between automate and profile\",\n      \"Edit link between automate and profile\", {\n      icon: editLinkIcon,\n      icon_type: \"src\",\n      backgroundColor: \"#FF0000\",\n      fontColor: \"#FFFFFF\"\n    })\n  }\n\n  async isShown(option) {\n    const contextType = option.context.type.get();\n\n    const serviceContextType = CONSTANTS.CONTEXT_TYPE;\n\n    if (contextType !== serviceContextType) {\n      return -1;\n    }\n\n    const nodeId = option.selectedNode.id.get();\n\n    const profilLinked = await LinkNetworkTreeService.getProfilLinked(nodeId);\n\n    if (typeof profilLinked !== \"undefined\") {\n\n      return true\n    };\n\n    return -1;\n  }\n\n  async action(option) {\n    let contextId = option.context.id.get();\n    let nodeId = option.selectedNode.id.get();\n\n    // const data = await utilities.getDeviceAndProfilData(nodeId)\n    // const data = await LinkNetworkTreeService.getDeviceAndProfilData(nodeId);\n\n\n    spinalPanelManagerService.openPanel(\"editAutomateLinkDialog\", {\n      contextId,\n      nodeId,\n      // data,\n      // callback: async (res) => {\n      //   // const validPromises = res.valids.map(({ automateItem, profileItem }) => utilities.linkAutomateItemToProfilItem(automateItem.id, profileItem.id));\n      //   const validPromises = res.valids.map(({ automateItem, profileItem }) => LinkNetworkTreeService.linkAutomateItemToProfilItem(automateItem.id, profileItem.id));\n\n      //   await Promise.all(validPromises).then(() => {\n      //     // const invaliPromises = res.invalidAutomateItems.map(el => utilities.unLinkAutomateItemToProfilItem(el.id));\n      //     const invaliPromises = res.invalidAutomateItems.map(el => LinkNetworkTreeService.unLinkAutomateItemToProfilItem(el.id));\n      //     return Promise.all(invaliPromises);\n      //   })\n\n      // }\n    })\n  }\n\n}\n\nconst editAutomateLink = new EditAutomateLink();\n\nspinalContextMenuService.registerApp(SIDEBAR, editAutomateLink, [3]);\n\nexport default editAutomateLink;","module.exports = require('./helpers/bundle-url').getBundleURL('f4stD') + require('./helpers/bundle-manifest').resolve(\"jowb9\");","import {\n  SpinalContextApp,\n  spinalContextMenuService,\n} from \"spinal-env-viewer-context-menu-service\";\n\nimport {\n  SpinalGraphService,\n  SPINAL_RELATION_PTR_LST_TYPE,\n} from \"spinal-env-viewer-graph-service\";\n\nimport { spinalPanelManagerService } from \"spinal-env-viewer-panel-manager-service\";\n\nimport { BIM_OBJECT_TYPE } from \"spinal-env-viewer-plugin-forge/dist/Constants\";\n\n// import spinalNetworkTreeService from \"../../services\";\n// import utilities from \"../../js/utilities\";\n\nimport { CONSTANTS } from \"spinal-env-viewer-plugin-network-tree-service\";\n\nconst SIDEBAR = \"GraphManagerSideBar\";\n\nclass UnLinkAutomateToProfil extends SpinalContextApp {\n  constructor() {\n    super(\"unlink automate(s) to profile\", \"unlink automate(s) to profile\", {\n      icon: \"link_off\",\n      icon_type: \"in\",\n      backgroundColor: \"#FF0000\",\n      fontColor: \"#FFFFFF\",\n    });\n  }\n\n  isShown(option) {\n    const contextType = option.context.type.get();\n    const contextId = option.context.id.get();\n    const nodeId = option.selectedNode.id.get();\n\n    if (contextType !== CONSTANTS.CONTEXT_TYPE) return Promise.resolve(-1);\n    if (contextId === nodeId && contextType == CONSTANTS.CONTEXT_TYPE)\n      return Promise.resolve(true);\n\n    const automate = SpinalGraphService.getRealNode(nodeId);\n\n    // const hasProfilLinked = automate.hasRelation(utilities.AUTOMATES_TO_PROFILE_RELATION, SPINAL_RELATION_PTR_LST_TYPE);\n    // const hasProfilItemLinked = automate.hasRelation(utilities.OBJECT_TO_BACNET_ITEM_RELATION, SPINAL_RELATION_PTR_LST_TYPE);\n\n    // const hasProfilLinked = automate.hasRelation(\n    //   CONSTANTS.AUTOMATES_TO_PROFILE_RELATION,\n    //   SPINAL_RELATION_PTR_LST_TYPE\n    // );\n\n    // const hasProfilItemLinked = automate.hasRelation(\n    //   CONSTANTS.OBJECT_TO_BACNET_ITEM_RELATION,\n    //   SPINAL_RELATION_PTR_LST_TYPE\n    // );\n\n    const found = [\n      CONSTANTS.NETWORK_RELATION,\n      CONSTANTS.NETWORK_BIMOJECT_RELATION,\n    ].findIndex((el) => automate.hasRelation(el, SPINAL_RELATION_PTR_LST_TYPE));\n\n    return Promise.resolve(found);\n  }\n\n  async action(option) {\n    let contextId = option.context.id.get();\n    let nodeId = option.selectedNode.id.get();\n\n    spinalPanelManagerService.openPanel(\"confirmUnlikProfilDialog\", {\n      contextId,\n      nodeId,\n    });\n  }\n}\n\nconst unLinkAutomateToProfil = new UnLinkAutomateToProfil();\n\nspinalContextMenuService.registerApp(SIDEBAR, unLinkAutomateToProfil, [3]);\n\nexport default unLinkAutomateToProfil;\n","import {\n  SpinalContextApp,\n  spinalContextMenuService,\n} from \"spinal-env-viewer-context-menu-service\";\n\nimport { spinalPanelManagerService } from \"spinal-env-viewer-panel-manager-service\";\nimport { BIM_OBJECT_TYPE } from \"spinal-env-viewer-plugin-forge/dist/Constants\";\n\nconst SIDEBAR = \"GraphManagerSideBar\";\n\n// import spinalNetworkTreeService from \"../../services\";\nimport { CONSTANTS } from \"spinal-env-viewer-plugin-network-tree-service\";\n\nclass LinkToGTBNetworkBtn extends SpinalContextApp {\n  constructor() {\n    super(\"link automate to BMS Devices\", \"link to BMS network Devices\", {\n      icon: \"settings_input_antenna\",\n      icon_type: \"in\",\n      backgroundColor: \"#FF0000\",\n      fontColor: \"#FFFFFF\",\n    });\n  }\n\n  isShown(option) {\n    const type = option.selectedNode.type.get();\n    const contextType = option.context.type.get();\n\n    // const isAutomate = option.selectedNode.isAutomate && option.selectedNode.isAutomate.get()\n    if (contextType !== CONSTANTS.CONTEXT_TYPE) return Promise.resolve(-1);\n\n    if (type === BIM_OBJECT_TYPE && !nodeIsAutomate(option.selectedNode))\n      return Promise.resolve(-1);\n\n    return Promise.resolve(true);\n  }\n\n  async action(option) {\n    let contextId = option.context.id.get();\n    let nodeId = option.selectedNode.id.get();\n    // const isAutomate = option.selectedNode.isAutomate && option.selectedNode.isAutomate.get()\n\n    //   if (option.selectedNode.type.get() === BIM_OBJECT_TYPE) {\n    //     automates = [option.selectedNode];\n    //   } else {\n    //     automates = await SpinalGraphService.getChildren(nodeId, [spinalNetworkTreeService.constants.NETWORK_BIMOJECT_RELATION])\n    //   }\n\n    spinalPanelManagerService.openPanel(\"linkToGtbDialog\", {\n      // automates\n      nodeId,\n      contextId,\n      // isAutomate: isAutomate || false\n    });\n  }\n}\n\nconst nodeIsAutomate = (selectedNode) => {\n  const type = selectedNode.type.get();\n  if (type === BIM_OBJECT_TYPE) {\n    return selectedNode.isAutomate && selectedNode.isAutomate.get();\n  }\n  return false;\n};\n\nconst linkToGTBNetworkBtn = new LinkToGTBNetworkBtn();\n\nspinalContextMenuService.registerApp(SIDEBAR, linkToGTBNetworkBtn, [3]);\n\nexport default linkToGTBNetworkBtn;\n","import Vue from \"vue\";\nconst { SpinalMountExtention } = require(\"spinal-env-viewer-panel-manager-service\");\n\n\n\nimport dialogComponent from \"./network_dialogs/dialog.vue\";\nimport linkAutomateToProfil from './link_to_virtual_profil/linkAutomateToProfil.vue';\n// import linkDevicesDialog from \"./linkDevices.vue\";\nimport confirmUnlikProfilDialog from \"./link_to_virtual_profil/confirmUnlikProfil.vue\";\nimport editAutomateLinkDialog from './link_to_virtual_profil/editLinksDialog.vue'\nimport PersonalizedAttributeDialog from \"./network_dialogs/personalizedAttributeDialog.vue\"\nimport PersonalizeNamingConvention from \"./network_dialogs/personalizeNamingConvention.vue\";\n\nimport LinkToGtbDialog from \"./link_to_gtb/linkToGtbDialog.vue\";\nimport EditLinkToGTBDevice from \"./link_to_gtb/confirmLinkToGTB.vue\"\n\nconst dialogs = [{\n    name: \"createNetworkDialog\",\n    vueMountComponent: Vue.extend(dialogComponent),\n    parentContainer: document.body\n},\n{\n    name: \"linkAutomateToProfilDialog\",\n    vueMountComponent: Vue.extend(linkAutomateToProfil),\n    parentContainer: document.body\n},\n{\n    name: \"confirmUnlikProfilDialog\",\n    vueMountComponent: Vue.extend(confirmUnlikProfilDialog),\n    parentContainer: document.body\n}, {\n    name: \"editAutomateLinkDialog\",\n    vueMountComponent: Vue.extend(editAutomateLinkDialog),\n    parentContainer: document.body\n},\n{\n    name: \"personalizedAttributeDialog\",\n    vueMountComponent: Vue.extend(PersonalizedAttributeDialog),\n    parentContainer: document.body\n},\n{\n    name: \"personalizeNamingConvention\",\n    vueMountComponent: Vue.extend(PersonalizeNamingConvention),\n    parentContainer: document.body\n},\n{\n    name: \"linkToGtbDialog\",\n    vueMountComponent: Vue.extend(LinkToGtbDialog),\n    parentContainer: document.body\n},\n{\n    name: \"editLinkToGTBDevice\",\n    vueMountComponent: Vue.extend(EditLinkToGTBDevice),\n    parentContainer: document.body\n}\n]\n\n\nfor (let index = 0; index < dialogs.length; index++) {\n    SpinalMountExtention.mount(dialogs[index]);\n}","<!--\nCopyright 2021 SpinalCom - www.spinalcom.com\n\nThis file is part of SpinalCore.\n\nPlease read all of the following terms and conditions\nof the Free Software license Agreement (\"Agreement\")\ncarefully.\n\nThis Agreement is a legally binding contract between\nthe Licensee (as defined below) and SpinalCom that\nsets forth the terms and conditions that govern your\nuse of the Program. By installing and/or using the\nProgram, you agree to abide by all the terms and\nconditions stated or referenced herein.\n\nIf you do not agree to abide by these terms and\nconditions, do not demonstrate your acceptance and do\nnot install or use the Program.\nYou should have received a copy of the license along\nwith this file. If not, see\n<http://resources.spinalcom.com/licenses.pdf>.\n-->\n\n<template>\n\n   <md-dialog\n      :md-active.sync=\"showDialog\"\n      @md-closed=\"closeDialog(false)\"\n   >\n      <md-dialog-title>{{title}}</md-dialog-title>\n      <md-dialog-content>\n         <md-field>\n            <label>{{label}}</label>\n            <md-input v-model=\"inputValue\"></md-input>\n         </md-field>\n\n      </md-dialog-content>\n      <md-dialog-actions>\n         <md-button\n            class=\"md-primary\"\n            @click=\"closeDialog(false)\"\n         >Close</md-button>\n         <md-button\n            class=\"md-primary\"\n            @click=\"closeDialog(true)\"\n            :disabled=\"!(inputValue.trim().length > 0)\"\n         >Save</md-button>\n      </md-dialog-actions>\n   </md-dialog>\n</template>\n\n<script>\n// import networkTreeService from \"../../../services\";\n\nimport { NetworkTreeService } from \"spinal-env-viewer-plugin-network-tree-service\";\n\nexport default {\n   name: \"createNetworkDialog\",\n   props: [\"onFinised\"],\n   data() {\n      return {\n         showDialog: true,\n         inputValue: \"\",\n         title: \"\",\n         label: \"\",\n         createContext: \"\",\n         selectedNode: null,\n         context: null,\n      };\n   },\n   methods: {\n      opened(option) {\n         this.title = option.title;\n         this.label = option.label;\n         this.selectedNode = option.selectedNode;\n         this.context = option.context;\n         this.createContext = option.createContext;\n      },\n\n      removed(option) {\n         if (option.closeResult && option.inputValue.trim().length > 0) {\n            let name = this.inputValue.trim();\n            if (this.createContext) {\n               // networkTreeService.createNetworkContext(name);\n               NetworkTreeService.createNetworkContext(name);\n            } else {\n               // networkTreeService.addNetwork(\n               //    name,\n               //    this.selectedNode.id.get(),\n               //    this.context.id.get()\n               // );\n               NetworkTreeService.addNetwork(\n                  name,\n                  this.selectedNode.id.get(),\n                  this.context.id.get()\n               );\n            }\n         }\n         this.showDialog = false;\n      },\n\n      closeDialog(closeResult) {\n         if (typeof this.onFinised === \"function\") {\n            this.onFinised({ closeResult, inputValue: this.inputValue });\n         }\n      },\n   },\n};\n</script>","<!--\nCopyright 2020 SpinalCom - www.spinalcom.com\n\nThis file is part of SpinalCore.\n\nPlease read all of the following terms and conditions\nof the Free Software license Agreement (\"Agreement\")\ncarefully.\n\nThis Agreement is a legally binding contract between\nthe Licensee (as defined below) and SpinalCom that\nsets forth the terms and conditions that govern your\nuse of the Program. By installing and/or using the\nProgram, you agree to abide by all the terms and\nconditions stated or referenced herein.\n\nIf you do not agree to abide by these terms and\nconditions, do not demonstrate your acceptance and do\nnot install or use the Program.\nYou should have received a copy of the license along\nwith this file. If not, see\n<http://resources.spinalcom.com/licenses.pdf>.\n-->\n\n<template>\n  <md-dialog class=\"mdDialogContainer\"\n             :md-active.sync=\"showDialog\"\n             @md-closed=\"closeDialog(false)\">\n    <md-dialog-title class=\"dialogTitle\">Link Automates to Profil\n    </md-dialog-title>\n    <md-dialog-content class=\"content\">\n      <link-component v-if=\"pageSelected === PAGES.selection\"\n                      :context_title=\"'Profils'\"\n                      :category_title=\"'Categories'\"\n                      :group_title=\"'Devices'\"\n                      :data=\"data\"\n                      :profils=\"profils\"\n                      :devices=\"devices\"\n                      :contextSelected=\"contextSelected\"\n                      :profilSelected=\"profilSelected\"\n                      :deviceSelected=\"deviceSelected\"\n                      @selectContext=\"selectContext\"\n                      @selectProfil=\"selectProfil\"\n                      @selectDevice=\"selectDevice\"></link-component>\n\n      <md-content class=\"results md-scrollbar\"\n                  v-else-if=\"pageSelected === PAGES.result\">\n        <result-component v-for=\"item in linkResult\"\n                          class=\"result-component\"\n                          :ref=\"`result-${item.automate.id}`\"\n                          :key=\"item.automate.id\"\n                          :results=\"item\"\n                          @edit=\"editAutomateLinks\">\n        </result-component>\n      </md-content>\n\n      <div class=\"state\"\n           v-else-if=\"pageSelected === PAGES.loading\">\n        <md-progress-spinner md-mode=\"indeterminate\"></md-progress-spinner>\n      </div>\n\n      <div class=\"state\"\n           v-else-if=\"pageSelected === PAGES.success\">\n        <md-icon class=\"md-size-5x\">done</md-icon>\n      </div>\n\n      <div class=\"state\"\n           v-else-if=\"pageSelected === PAGES.error\">\n        <md-icon class=\"md-size-5x\">error_outline</md-icon>\n      </div>\n\n      <div class=\"progress-bar\"\n           v-else-if=\"pageSelected === PAGES.creation\">\n        <div class=\"percent-number\">{{percent}} %</div>\n        <md-progress-bar class=\"percent-bar\"\n                         md-mode=\"buffer\"\n                         :md-value=\"percent\"></md-progress-bar>\n      </div>\n\n    </md-dialog-content>\n\n    <md-dialog-actions>\n      <md-button class=\"md-primary\"\n                 @click=\"closeDialog(false)\">Close</md-button>\n\n      <md-button class=\"md-primary\"\n                 :disabled=\"disabled()\"\n                 v-if=\"pageSelected === PAGES.selection\"\n                 @click=\"goToNext\">Next</md-button>\n\n      <md-button class=\"md-primary\"\n                 v-if=\"pageSelected === PAGES.result\"\n                 @click=\"goToPreviousStep\">Previous</md-button>\n\n      <md-button class=\"md-primary\"\n                 v-if=\"pageSelected === PAGES.result\"\n                 @click=\"createLinks\">Save</md-button>\n\n    </md-dialog-actions>\n  </md-dialog>\n\n</template>\n\n<script>\nimport EventBus from \"spinal-env-viewer-room-manager/js/event\";\n// import deviceProfilService from \"../../../js/devices_profil_services\";\n\n// import linkAutomateToProfilUtilities from \"../../../js/link_utilities/linkAutomateToProfil\";\nimport {\n  LinkNetworkTreeService,\n  DeviceProfileUtilities,\n} from \"spinal-env-viewer-plugin-network-tree-service\";\n\nimport LinkComponent from \"../../components/links/LinkComponent.vue\";\nimport ResultComponent from \"../../components/links/resultComponent.vue\";\n\nimport { SpinalGraphService } from \"spinal-env-viewer-graph-service\";\nimport { BIM_OBJECT_TYPE } from \"spinal-env-viewer-plugin-forge/dist/Constants\";\n\nexport default {\n  name: \"dialogComponent\",\n  components: {\n    \"link-component\": LinkComponent,\n    \"result-component\": ResultComponent,\n  },\n  props: [\"onFinised\"],\n  data() {\n    this.physicalParams;\n\n    this.PAGES = {\n      selection: 0,\n      result: 1,\n      loading: 2,\n      creation: 3,\n      success: 4,\n      error: 5,\n    };\n\n    // this.validMaps = new Map();\n    // this.invalidMaps = new Map();\n\n    return {\n      percent: 0,\n      resultMaps: new Map(),\n      showDialog: true,\n      pageSelected: this.PAGES.selection,\n\n      data: [],\n      profils: [],\n      devices: [],\n\n      contextSelected: undefined,\n      profilSelected: undefined,\n      deviceSelected: undefined,\n      callback: undefined,\n      linkResult: [],\n    };\n  },\n\n  mounted() {\n    EventBus.$on(\"itemCreated\", (id) => {\n      this.pageSelected = this.PAGES.loading;\n\n      this.getAllData().then(() => {\n        this.pageSelected = this.PAGES.selection;\n      });\n    });\n  },\n\n  methods: {\n    async opened(option) {\n      // this.physicalContextId = option.contextId;\n      // // this.physicalProfilId = option.nodeId;\n      // this.automates = option.automates;\n      this.pageSelected = this.PAGES.loading;\n\n      this.callback = option.callback;\n\n      Promise.all([\n        this.getAllData(),\n        this.getAutomates(option.contextId, option.nodeId),\n      ]).then(([data, automates]) => {\n        this.physicalParams = {\n          contextId: option.contextId,\n          automates: automates.map((el) => el.get()),\n        };\n\n        this.data = data;\n        this.updateProfils();\n\n        this.pageSelected = this.PAGES.selection;\n      });\n    },\n\n    removed(option) {\n      this.showDialog = false;\n    },\n\n    closeDialog(closeResult) {\n      if (typeof this.onFinised === \"function\") {\n        this.onFinised(closeResult);\n      }\n    },\n\n    getAutomates(contextId, nodeId) {\n      const nodeInfo = SpinalGraphService.getInfo(nodeId);\n      if (\n        nodeInfo.type.get() === BIM_OBJECT_TYPE &&\n        nodeInfo.isAutomate &&\n        nodeInfo.isAutomate.get()\n      ) {\n        return Promise.resolve([nodeInfo]);\n      }\n\n      return SpinalGraphService.findInContext(nodeId, contextId, (node) => {\n        if (\n          node.getType().get() === BIM_OBJECT_TYPE &&\n          node.info.isAutomate &&\n          node.info.isAutomate.get()\n        ) {\n          SpinalGraphService._addNode(node);\n          return true;\n        }\n        return false;\n      });\n    },\n\n    async createLinks() {\n      this.pageSelected = this.PAGES.creation;\n\n      let isError = false;\n      const liste = Array.from(this.resultMaps.keys()).map((key) => {\n        return [key, this.resultMaps.get(key)];\n      });\n\n      const listeLength = liste.length;\n\n      while (!isError && liste.length > 0) {\n        const item = liste.shift();\n        if (item) {\n          console.log(item);\n          const [key, value] = item;\n          try {\n            await LinkNetworkTreeService.linkProfilToDevice(\n              key,\n              this.deviceSelected,\n              value.valids\n            );\n            this.percent = Math.floor(\n              (100 * (listeLength - liste.length)) / listeLength\n            );\n          } catch (err) {\n            console.error(err);\n            isError = true;\n          }\n        }\n      }\n\n      if (isError) {\n        this.pageSelected = this.PAGES.error;\n        return;\n      }\n\n      this.pageSelected = this.PAGES.success;\n\n      // this.linkNode(liste, this.deviceSelected, liste.length)\n      //    .then(() => {\n      //       this.pageSelected = this.PAGES.success;\n      //    })\n      //    .catch((err) => {\n      //       console.error(err);\n      //       this.pageSelected = this.PAGES.error;\n      //    });\n    },\n\n    // linkNode(liste, deviceProfilId, listeLength) {\n    //    return new Promise((resolve, reject) => {\n    //       this.linkNodeRecur(liste, deviceProfilId, listeLength, resolve);\n    //    });\n    // },\n\n    // linkNodeRecur(liste, deviceProfilId, listeLength, resolve) {\n    //    const item = liste.shift();\n    //    if (item) {\n    //       const [key, value] = item;\n    //       // linkAutomateToProfilUtilities\n    //       LinkNetworkTreeService.linkProfilToDevice(\n    //          key,\n    //          deviceProfilId,\n    //          value.valids\n    //       )\n    //          .then(() => {\n    //             this.percent = Math.floor(\n    //                (100 * (listeLength - liste.length)) / listeLength\n    //             );\n\n    //             this.linkNodeRecur(\n    //                liste,\n    //                deviceProfilId,\n    //                listeLength,\n    //                resolve\n    //             );\n    //          })\n    //          .catch(() => {\n    //             this.percent = Math.floor(\n    //                (100 * (listeLength - liste.length)) / listeLength\n    //             );\n\n    //             this.linkNodeRecur(\n    //                liste,\n    //                deviceProfilId,\n    //                listeLength,\n    //                resolve\n    //             );\n    //          });\n    //    } else {\n    //       resolve(true);\n    //    }\n    // },\n\n    getAllData() {\n      // return deviceProfilService\n      return DeviceProfileUtilities.getDeviceContextTreeStructure();\n      // .then(\n      //    (result) => {\n      //       this.data = result;\n      //       this.updateProfils();\n      //       return;\n      //    }\n      // );\n    },\n\n    disabled() {\n      return !(this.contextSelected && this.deviceSelected);\n    },\n\n    /* Change Step */\n\n    goToPreviousStep() {\n      this.pageSelected = this.PAGES.selection;\n    },\n\n    goToNext() {\n      this.pageSelected = this.PAGES.loading;\n      const virtualItems = this.getItemsList(this.deviceSelected);\n      return this.createMaps(virtualItems)\n        .then(() => {\n          this.pageSelected = this.PAGES.result;\n        })\n        .catch((err) => {\n          this.pageSelected = this.PAGES.error;\n        });\n    },\n\n    createMaps(virtualItems) {\n      // return linkAutomateToProfilUtilities\n      console.log(this.physicalParams.automates, virtualItems);\n\n      return LinkNetworkTreeService.createMaps(\n        this.physicalParams.automates,\n        virtualItems\n      ).then((resultMap) => {\n        this.resultMaps = resultMap;\n        this.linkResult = Array.from(resultMap.values());\n      });\n    },\n\n    /** */\n    editAutomateLinks(res) {\n      const { automateId, value } = res;\n      this.resultMaps.set(automateId, value);\n\n      this.linkResult = Array.from(this.resultMaps.values());\n\n      // // if (this.$refs[`result-${res.automateId}`]) {\n      // //   const [ref] = this.$refs[`result-${res.automateId}`];\n      // //   console.log(ref);\n      // //   if (ref) ref.forceRerender();\n      // // }\n      // const keysIterator = this.resultMaps.keys();\n      // let processing = true;\n      // let next;\n\n      // do {\n      //    next = keysIterator.next().value;\n      //    if (typeof next === \"undefined\") {\n      //       processing = false;\n      //    } else if (next === res.automateId) {\n      //       // console.log(next, res.automateId);\n      //       this.resultMaps.set(next, res.value);\n      //       // console.log(this.resultMaps);\n      //       this.$forceUpdate();\n      //       // const reference = this.$refs[`result-${res.automateId}`][0];\n      //       // reference.forceRerender();\n      //       processing = false;\n      //    }\n      // } while (processing);\n    },\n\n    getItemsList(deviceId) {\n      const found = this.devices.find((el) => el.id === deviceId);\n      if (found) return found.itemList;\n    },\n\n    /* Selection */\n    selectContext(id) {\n      this.contextSelected = id;\n    },\n\n    selectProfil(id) {\n      this.profilSelected = id;\n    },\n\n    selectDevice(id) {\n      this.deviceSelected = id;\n    },\n\n    /* Update */\n    updateProfils() {\n      this.categories = [];\n      if (this.contextSelected) {\n        let val = this.data.find((el) => el.id === this.contextSelected);\n        if (val) this.profils = val.profils;\n      }\n    },\n\n    updateDevices() {\n      this.devices = [];\n      if (this.profilSelected) {\n        let val = this.profils.find((el) => el.id === this.profilSelected);\n        if (val) this.devices = val.devices;\n      }\n    },\n  },\n  //   computed: {\n  //     linkResult() {\n  //       return Array.from(this.resultMaps.values());\n  //     },\n  //   },\n  watch: {\n    async contextSelected() {\n      await this.updateProfils();\n      this.profilSelected = undefined;\n    },\n    async profilSelected() {\n      this.updateDevices();\n      this.deviceSelected = undefined;\n    },\n  },\n};\n</script>\n\n<style scoped>\n.mdDialogContainer {\n  width: 60%;\n  height: 600px;\n}\n\n.mdDialogContainer .dialogTitle {\n  text-align: center;\n}\n\n.mdDialogContainer .content {\n  padding: 0 10px 24px 24px;\n}\n\n.mdDialogContainer .content .state {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.mdDialogContainer .content .progress-bar {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n}\n\n.mdDialogContainer .content .progress-bar .percent-number {\n  font-size: 1.8em;\n  margin-bottom: 10px;\n}\n\n.mdDialogContainer .content .progress-bar .percent-bar {\n  width: 90%;\n}\n\n.mdDialogContainer .content .results {\n  width: 100%;\n  height: 100%;\n  /* display: flex;\n  justify-content: space-between;\n  flex-wrap: wrap;\n  overflow: auto; */\n}\n\n.mdDialogContainer .content .results .result-component {\n  width: 100%;\n  height: 70px;\n  border: 1px solid gray;\n  margin: 5px 0 5px 0;\n}\n\n/* .mdDialogContainer .content {\n  display: flex;\n  justify-content: space-between;\n  align-items: stretch;\n}\n\n.mdDialogContainer .content .section {\n  width: 33%;\n  border: 1px solid grey;\n  border-radius: 4% 4% 0 0;\n  padding: 15px;\n} */\n\n/* .mdIcon {\n  display: flex;\n  align-items: center;\n} */\n</style>\n\n<style>\n.mdDialogContainer .md-dialog-container {\n  max-width: 100%;\n  max-height: 100%;\n}\n</style>","import Vue from 'vue';\nimport utilities from \"./utilities\";\n\n\nconst EventBus = new Vue();\n\nEventBus.$on(\"mouseover\", (item) => {\n  utilities.getBimObjects(item.id).then(res => {\n    let selections = [];\n\n    res.forEach(el => {\n      let info = el.get();\n      let model = window.spinal.BimObjectService.getModelByBimfile(\n        info.bimFileId);\n\n      let selected = selections.find(el2 => {\n        return el2.model.id === model.id\n      });\n\n      if (selected) {\n        selected.ids.push(el.dbid);\n      } else {\n        selections.push({\n          model: model,\n          ids: [info.dbid]\n        })\n      }\n\n\n    })\n\n    window.spinal.ForgeViewer.viewer.impl.selector\n      .setAggregateSelection(selections);\n\n  })\n})\n\nEventBus.$on(\"mouseleave\", () => {\n  window.spinal.ForgeViewer.viewer.select();\n})\n\nexport default EventBus;","import {\n  // ROOMS_CATEGORY_RELATION,\n  // ROOMS_GROUP_RELATION,\n  // ROOMS_TO_ELEMENT_RELATION,\n  // EQUIPMENTS_CATEGORY_RELATION,\n  // EQUIPMENTS_GROUP_RELATION,\n  // EQUIPMENTS_TO_ELEMENT_RELATION,\n  // ROOMS_GROUP_CONTEXT,\n  // ROOMS_GROUP,\n  // ROOMS_CATEGORY,\n  // EQUIPMENTS_GROUP_CONTEXT,\n  // EQUIPMENTS_CATEGORY,\n  // EQUIPMENTS_GROUP\n  groupService,\n} from \"../services/service\";\nimport { SpinalGraphService } from \"spinal-env-viewer-graph-service\";\n\nimport { BIM_OBJECT_TYPE } from \"spinal-env-viewer-plugin-forge/dist/Constants\";\n\nimport geographicService from \"spinal-env-viewer-context-geographic-service\";\n\nimport { groupManagerService } from \"spinal-env-viewer-plugin-group-manager-service\";\n\nlet ItemColoredMap = new Map();\nlet BimElementsColor = new Map();\n\nconst ROOMS_RELATIONS = [\n  // groupService.constants.CATEGORY_TO_GROUP_RELATION,\n  // groupService.constants.CONTEXT_TO_CATEGORY_RELATION,\n  // groupService.constants.GROUP_TO_ROOMS_RELATION,\n  groupManagerService.constants.CATEGORY_TO_GROUP_RELATION,\n  groupManagerService.constants.CONTEXT_TO_CATEGORY_RELATION,\n  groupManagerService.constants.OLD_RELATIONS_TYPES.GROUP_TO_ROOMS_RELATION,\n  `groupHas${geographicService.constants.ROOM_TYPE}`,\n  geographicService.constants.REFERENCE_RELATION,\n  geographicService.constants.EQUIPMENT_RELATION,\n];\n\nconst EQUIPMENTS_RELATIONS = [\n  // groupService.constants.CATEGORY_TO_GROUP_RELATION,\n  // groupService.constants.CONTEXT_TO_CATEGORY_RELATION,\n  groupManagerService.constants.CATEGORY_TO_GROUP_RELATION,\n  groupManagerService.constants.CONTEXT_TO_CATEGORY_RELATION,\n  groupManagerService.constants.OLD_RELATIONS_TYPES\n    .GROUP_TO_EQUIPMENTS_RELATION,\n  `groupHas${geographicService.constants.EQUIPMENT_TYPE}`,\n];\n\nconst ROOMS_TYPES = [\n  groupManagerService.constants.OLD_CONTEXTS_TYPES.ROOMS_GROUP_CONTEXT,\n  groupManagerService.constants.CATEGORY_TYPE,\n  groupManagerService.constants.OLD_GROUPS_TYPES.ROOMS_GROUP,\n  `${geographicService.constants.ROOM_TYPE}GroupContext`,\n  `${geographicService.constants.ROOM_TYPE}Group`,\n];\n\n// eslint-disable-next-line no-unused-vars\nconst EQUIPMENTS_TYPES = [\n  groupManagerService.constants.OLD_CONTEXTS_TYPES.EQUIPMENTS_GROUP_CONTEXT,\n  groupManagerService.constants.CATEGORY_TYPE,\n  groupManagerService.constants.OLD_GROUPS_TYPES.EQUIPMENTS_GROUP,\n  `${geographicService.constants.EQUIPMENT_TYPE}GroupContext`,\n  `${geographicService.constants.EQUIPMENT_TYPE}Group`,\n];\n\nlet utilities = {\n  getIcon(selectedNode) {\n    return this._isColored(selectedNode).then((isColored) => {\n      return isColored;\n    });\n  },\n\n  getBimObjects(nodeId) {\n    let nodeInfo = SpinalGraphService.getInfo(nodeId);\n    let type = nodeInfo.type.get();\n\n    if (type === BIM_OBJECT_TYPE) {\n      return Promise.resolve([nodeInfo]);\n    } else if (type === geographicService.constants.ROOM_TYPE) {\n      return SpinalGraphService.getChildren(nodeId, [\n        geographicService.constants.REFERENCE_RELATION,\n        geographicService.constants.EQUIPMENT_RELATION,\n      ]);\n    } else {\n      let relations = [\n        groupService.constants.CONTEXT_TO_CATEGORY_RELATION,\n        groupService.constants.GROUP_TO_ROOMS_RELATION,\n        geographicService.constants.REFERENCE_RELATION,\n        geographicService.constants.EQUIPMENT_RELATION,\n        groupService.constants.CATEGORY_TO_GROUP_RELATION,\n        groupService.constants.GROUP_TO_EQUIPMENTS_RELATION,\n      ];\n\n      if (ROOMS_TYPES.indexOf(type) !== -1) {\n        relations = ROOMS_RELATIONS;\n      } else {\n        relations = EQUIPMENTS_RELATIONS;\n      }\n\n      return SpinalGraphService.findNodes(nodeId, relations, (node) => {\n        return node.getType().get() === BIM_OBJECT_TYPE;\n      }).then((res) => {\n        return res.map((el) => {\n          SpinalGraphService._addNode(el);\n          return el.info;\n        });\n      });\n    }\n  },\n\n  getGroups(selectedNode) {\n    let type = selectedNode.type.get();\n    let nodeId = selectedNode.id.get();\n\n    if (groupManagerService.isGroup(type)) {\n      return Promise.resolve([selectedNode]);\n    }\n\n    let relations = [];\n\n    return SpinalGraphService.findNodes(nodeId, relations, (node) => {\n      let argType = node.getType().get();\n      return groupManagerService.isGroup(argType);\n    }).then((res) => {\n      return res.map((el) => {\n        SpinalGraphService._addNode(el);\n        return el.info;\n      });\n    });\n  },\n\n  colorItem(selectedNode) {\n    this.getGroups(selectedNode).then((res) => {\n      res.forEach((el) => {\n        let id = el.id.get();\n        let color = el.color ? el.color.get() : undefined;\n        this.colorGroup(id, color);\n      });\n    });\n  },\n\n  restoreItem(selectedNode) {\n    this.getGroups(selectedNode).then((res) => {\n      res.forEach((el) => {\n        let id = el.id.get();\n        this.restoreGroup(id);\n      });\n    });\n  },\n\n  colorGroup(groupId, argColor) {\n    this.getBimObjects(groupId).then((res) => {\n      let color =\n        typeof argColor !== \"undefined\"\n          ? this._convertHexColorToRGB(argColor)\n          : this._convertHexColorToRGB(\"#000000\");\n\n      ItemColoredMap.set(groupId, groupId);\n\n      res.forEach((child) => {\n        let BimColors = BimElementsColor.get(child.dbid.get())\n          ? BimElementsColor.get(child.dbid.get())\n          : [];\n\n        BimColors.push({\n          id: groupId, //node.id.get(),\n          color: color,\n        });\n\n        BimElementsColor.set(child.dbid.get(), BimColors);\n\n        let model = window.spinal.BimObjectService.getModelByBimfile(\n          child.bimFileId.get()\n        );\n\n        console.log(\"model\", model);\n\n        model.setThemingColor(\n          child.dbid.get(),\n          new THREE.Vector4(\n            color.r / 255,\n            color.g / 255,\n            color.b / 255,\n            0.7,\n            true\n          )\n        );\n      });\n    });\n  },\n\n  restoreGroup(groupId) {\n    ItemColoredMap.delete(groupId);\n    this.getBimObjects(groupId).then((res) => {\n      res.forEach((child) => {\n        let model = window.spinal.BimObjectService.getModelByBimfile(\n          child.bimFileId.get()\n        );\n\n        model.setThemingColor(\n          child.dbid.get(),\n          // eslint-disable-next-line no-undef\n          new THREE.Vector4(0, 0, 0, 0),\n          true\n        );\n\n        let allColors = BimElementsColor.get(child.dbid.get());\n\n        if (allColors) {\n          //   allColors = allColors.filter(el => el.id !== node.id.get());\n          allColors = allColors.filter((el) => el.id !== groupId);\n          BimElementsColor.set(child.dbid.get(), allColors);\n\n          if (allColors.length > 0) {\n            let color = allColors[0].color;\n            model.setThemingColor(\n              child.dbid.get(),\n              // eslint-disable-next-line no-undef\n              new THREE.Vector4(\n                color.r / 255,\n                color.g / 255,\n                color.b / 255,\n                0.7\n              ),\n              true\n            );\n          }\n        }\n      });\n    });\n  },\n\n  async consumeBatch(promises, batchSize = 2) {\n    let index = 0;\n    const result = { successed: [], failed: [] };\n    while (index < promises.length) {\n      let endIndex = index + batchSize;\n      if (promises.length <= endIndex) endIndex = promises.length;\n      const slice = promises.slice(index, endIndex);\n      // const resProm = await Promise.all(slice.map((e) => e()));\n      // result.push(...resProm);\n      const { successed, failed } = await this.getPromiseResult(\n        slice.map((e) => e())\n      );\n      result.successed.push(...successed);\n      result.failed.push(...failed);\n\n      index = endIndex;\n    }\n    return result;\n  },\n\n  getPromiseResult(liste) {\n    return Promise.allSettled(liste).then((result) => {\n      const obj = { successed: [], failed: [] };\n      for (const { status, value } of result) {\n        if (status === \"fulfilled\") obj.successed.push(value);\n        else obj.failed.push(value);\n      }\n      return obj;\n    });\n  },\n\n  //////////////////////////////////////////////////////////////////////////////////////////////////\n  //                                                    Private                                   //\n  //////////////////////////////////////////////////////////////////////////////////////////////////\n\n  _isColored(selectedNode) {\n    return this.getGroups(selectedNode).then((res) => {\n      if (res.length === 0) return false;\n\n      for (let index = 0; index < res.length; index++) {\n        const id = res[index].id.get();\n\n        if (typeof ItemColoredMap.get(id) === \"undefined\") {\n          return false;\n        }\n      }\n\n      return true;\n    });\n  },\n\n  _convertHexColorToRGB(hex) {\n    var result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n    return result\n      ? {\n          r: parseInt(result[1], 16),\n          g: parseInt(result[2], 16),\n          b: parseInt(result[3], 16),\n        }\n      : null;\n  },\n\n  ///////////////////////////////////////////////////////////////////////////////////////////\n  //                                    Parcours ascendant                                 //\n  ///////////////////////////////////////////////////////////////////////////////////////////\n\n  async getGeographicTree(endNodeId) {\n    let obj = {\n      id: endNodeId,\n      children: [],\n    };\n\n    let parents = [];\n\n    do {\n      let tempParents = await SpinalGraphService.getParents(\n        id,\n        geographicService.constants.GEOGRAPHIC_RELATIONS\n      );\n\n      parents = tempParents && tempParents.map((el) => el.get());\n\n      // parent && result.push(parent.get());\n\n      // id = (parent && parent.id) && parent.id.get();\n    } while (parents.length);\n\n    // return result;\n  },\n\n  addObjToParent(obj, parentId) {\n    return {\n      id: parentId,\n      children: obj,\n    };\n  },\n};\n\nexport default utilities;\n","const {\n  SPINAL_RELATION_PTR_LST_TYPE,\n  SpinalGraphService\n} = require(\"spinal-env-viewer-graph-service\");\n\nconst {\n  Model\n} = require(\"spinal-core-connectorjs_type\");\n\nconst constants = require(\"./constants\");\n\n\nlet groupService = {\n  constants: constants,\n  createGroupContext(name, type) {\n    const context = SpinalGraphService.getContext(name);\n\n    if (typeof context !== \"undefined\") return Promise.resolve(false);\n\n    return SpinalGraphService.addContext(\n      name,\n      type,\n      new Model({\n        name: name\n      })\n    );\n  },\n  addElement(contextId, elementId, elementType, elementName, iconName,\n    color) {\n    let contextInfo = SpinalGraphService.getInfo(contextId)\n    let contextType = contextInfo && contextInfo.type ? contextInfo.type\n      .get() : undefined;\n\n    let typeAndRelation = this.getTypeAndRelation(elementType, contextType);\n\n\n    let type = typeAndRelation.type;\n    let relationName = typeAndRelation.relation;\n\n    if (typeof type !== \"undefined\" && typeof relationName !== \"undefined\") {\n      let info = {\n        name: elementName,\n        type: type\n      }\n\n      if (iconName) {\n        info[\"icon\"] = iconName;\n      }\n\n      if (color) {\n        info[\"color\"] = color;\n      }\n\n      let childId = SpinalGraphService.createNode(info,\n        new Model({\n          name: elementName\n        })\n      );\n\n\n      return SpinalGraphService.addChildInContext(\n        elementId,\n        childId,\n        contextId,\n        relationName,\n        SPINAL_RELATION_PTR_LST_TYPE\n      );\n    }\n\n    // // let type =\n    // //   contextType === ROOMS_GROUP_CONTEXT ? ROOMS_GROUP : EQUIPMENTS_GROUP;\n\n    // // let relationName =\n    // //   contextType === ROOMS_GROUP_CONTEXT ?\n    // //   ROOMS_GROUP_RELATION :\n    // //   EQUIPMENTS_GROUP_RELATION;\n\n\n\n  },\n  elementIsLinkedToGroup(groupId, elementId) {\n    let realNode = SpinalGraphService.getRealNode(groupId);\n    const type = realNode.getType().get();\n\n    let relationName = constants.GROUP_RELATION_ASSOCIATION.get(type)\n\n    try {\n      let ids = realNode.children[SPINAL_RELATION_PTR_LST_TYPE][relationName]\n        .children.info.ids;\n\n      return Promise.resolve(ids.has((el) => {\n        return el.get() === elementId\n      }))\n    } catch (error) {\n      // let type = SpinalGraphService.getInfo(groupId).type.get();\n      // let relationName = type === ROOMS_GROUP ? ROOMS_TO_ELEMENT_RELATION :\n      //   EQUIPMENTS_TO_ELEMENT_RELATION;\n\n      return SpinalGraphService.getChildren(groupId, [relationName]).then(\n        children => {\n          for (let i = 0; i < children.length; i++) {\n            const element = children[i];\n            if (element.id.get() === elementId) return true;\n\n          }\n          return false;\n        });\n    }\n\n  },\n  linkElementToGroup(groupId, elementId, contextId) {\n\n    let groupInfo = SpinalGraphService.getInfo(groupId);\n\n    let relationName = constants.GROUP_RELATION_ASSOCIATION.get(groupInfo.type\n      .get());\n\n\n    return this.getCategorie(groupInfo).then(category => {\n\n      return this.elementIsInCategorie(category[0].id.get(), elementId)\n        .then(\n          group => {\n            let result = {\n              old_group: undefined,\n              newGroup: groupId\n            }\n\n            if (typeof group !== \"undefined\") {\n              this.removeLink(group.id.get(), elementId);\n              result.old_group = group.id.get();\n            }\n\n            SpinalGraphService.addChildInContext(groupId,\n              elementId, contextId, relationName,\n              SPINAL_RELATION_PTR_LST_TYPE);\n\n\n            return result;\n\n          })\n    })\n\n  },\n  removeLink(groupId, elementId) {\n    let type = SpinalGraphService.getInfo(groupId).type.get();\n    let relationName = constants.GROUP_RELATION_ASSOCIATION.get(type);\n\n    return SpinalGraphService.removeChild(groupId, elementId,\n      relationName,\n      SPINAL_RELATION_PTR_LST_TYPE)\n  },\n  getTypeAndRelation(elementType, contextType) {\n\n    switch (elementType) {\n      case contextType:\n        return {\n          type: constants.CATEGORY_TYPE,\n            relation: constants.CONTEXT_TO_CATEGORY_RELATION\n        };\n\n        // case ROOMS_GROUP:\n        //   return {\n        //     type: \"undefined\",\n        //       relation:\n        //   };\n      case constants.CATEGORY_TYPE:\n        // eslint-disable-next-line no-case-declarations\n        let type = constants.CONTEXT_GROUP_ASSOCIATION.get(contextType);\n        return {\n          type: type,\n            relation: constants.CATEGORY_TO_GROUP_RELATION\n        };\n\n        // case constants.ROOMS_GROUP:\n        // case constants.EQUIPMENTS_GROUP:\n        // case constants.ENDPOINT_GROUP:\n        //   return {\n        //     type: \"\",\n        //       relation: constants.GROUP_RELATION_ASSOCIATION.get(elementType)\n        //   }\n\n      default:\n        return {};\n    }\n  },\n\n  getElementsLinked(groupId) {\n    let type = SpinalGraphService.getInfo(groupId).type.get();\n    let relationName = constants.GROUP_RELATION_ASSOCIATION.get(type);\n\n    return SpinalGraphService.getChildren(groupId, [relationName]);\n  },\n\n  getGroups(selectedNode) {\n\n    // const ROOMS_TYPES = [\n    //   ROOMS_GROUP_CONTEXT,\n    //   ROOMS_CATEGORY,\n    //   ROOMS_GROUP\n    // ]\n\n\n    let type = selectedNode.type.get();\n    let nodeId = selectedNode.id.get();\n\n    if (typeof constants.GROUP_RELATION_ASSOCIATION.get(type) !==\n      \"undefined\") {\n      return Promise.resolve([selectedNode]);\n    }\n\n    let relations = [\n      constants.CONTEXT_TO_CATEGORY_RELATION,\n      constants.CATEGORY_TO_GROUP_RELATION,\n      constants.GROUP_TO_ROOMS_RELATION,\n      constants.GROUP_TO_EQUIPMENTS_RELATION,\n      constants.GROUP_TO_ENDPOINT_RELATION\n    ];\n\n    return SpinalGraphService.findNodes(nodeId, relations, (node) => {\n      let argType = node.getType().get()\n      return typeof constants.GROUP_RELATION_ASSOCIATION.get(argType) !==\n        \"undefined\"\n    }).then(res => {\n      return res.map(el => {\n        SpinalGraphService._addNode(el);\n        return el.info;\n      })\n    })\n  },\n\n  getCategorie(selectedNode) {\n    let type = selectedNode.type.get();\n    let nodeId = selectedNode.id.get();\n\n    if (type === constants.CATEGORY_TYPE) {\n      return Promise.resolve(selectedNode);\n    } else if (constants.CONTEXTS_TYPES.indexOf(type) !== -1) {\n      return SpinalGraphService.getChildren(nodeId, [constants\n        .CONTEXT_TO_CATEGORY_RELATION\n      ]);\n\n    } else {\n      let relationRefPromises = [];\n\n\n      let node = SpinalGraphService.getRealNode(nodeId);\n\n      let relationList = node.parents[constants.CATEGORY_TO_GROUP_RELATION];\n\n      if (relationList) {\n        for (let i = 0; i < relationList.length; i++) {\n          const element = relationList[i];\n          relationRefPromises.push(element.load());\n        }\n\n      }\n\n      return Promise.all(relationRefPromises).then(refs => {\n\n        let promises = refs.map(node => {\n          return node.parent.load();\n        })\n\n\n        return Promise.all(promises).then(parents => {\n          // let p = [];\n          // parents.forEach(el => {\n          //   if (el && !(el instanceof SpinalContext)) {\n          //     p.push(new SpinalCalNode(el));\n          //   }\n          // })\n\n          // return p;\n\n          return parents.map(el => {\n            return el.info;\n          });\n\n        });\n\n      })\n\n\n    }\n  },\n\n  elementIsInCategorie(categoryId, elementId) {\n\n    // let nodeInfo = SpinalGraphService.getInfo(categoryId);\n    // let type = nodeInfo.type.get();\n\n    // let relationName =\n    //   type === ROOMS_CATEGORY ?\n    //   ROOMS_GROUP_RELATION :\n    //   EQUIPMENTS_GROUP_RELATION;\n\n    return SpinalGraphService.getChildren(categoryId, [constants\n        .CATEGORY_TO_GROUP_RELATION\n      ])\n      .then(\n        children => {\n\n          return children.find(child => {\n            return child.childrenIds.find(el => {\n              return el === elementId\n            })\n          })\n\n        })\n\n  }\n\n};\n\nmodule.exports = {\n  // ROOMS_GROUP_CONTEXT,\n  // ROOMS_GROUP,\n  // EQUIPMENTS_GROUP,\n  // ROOMS_GROUP_RELATION,\n  // EQUIPMENTS_GROUP_RELATION,\n  // EQUIPMENTS_GROUP_CONTEXT,\n  // ROOMS_TO_ELEMENT_RELATION,\n  // EQUIPMENTS_TO_ELEMENT_RELATION,\n  // ROOMS_CATEGORY,\n  // ROOMS_CATEGORY_RELATION,\n  // EQUIPMENTS_CATEGORY,\n  // EQUIPMENTS_CATEGORY_RELATION,\n  // typeLst,\n  // TYPE_AND_RELATION,\n\n  groupService\n};","// ////////////////////////////////////////////////////\n// // ROOMS\n// ////////////////////////////////////////////////////\n// const ROOMS_GROUP_CONTEXT = \"RoomsGroupContext\";\n// const ROOMS_GROUP = \"RoomsGroup\";\n// const ROOMS_GROUP_RELATION = \"hasRoomsGroup\";\n// const ROOMS_TO_ELEMENT_RELATION = \"groupHasRooms\";\n// const ROOMS_CATEGORY = \"Rooms_category\";\n// const ROOMS_CATEGORY_RELATION = \"hasRoomsCategory\";\n\n\n\n// ///////////////////////////////////////////////////////\n// // BimObject\n// ///////////////////////////////////////////////////////\n// const EQUIPMENTS_GROUP_CONTEXT = \"EquipmentGroupContext\";\n// const EQUIPMENTS_GROUP = \"EquipmentGroup\";\n// const EQUIPMENTS_GROUP_RELATION = \"hasEquipmentsGroup\";\n// const EQUIPMENTS_TO_ELEMENT_RELATION = \"groupHasEquipments\";\n// const EQUIPMENTS_CATEGORY = \"Equipment_category\";\n// const EQUIPMENTS_CATEGORY_RELATION = \"hasEquipmentsCategory\";\n\n\n\n// const typeLst = [\n//   ROOMS_GROUP_CONTEXT,\n//   ROOMS_GROUP,\n//   ROOMS_CATEGORY,\n//   EQUIPMENTS_GROUP_CONTEXT,\n//   EQUIPMENTS_GROUP,\n//   EQUIPMENTS_CATEGORY\n// ]\n\n\n\n// const TYPE_AND_RELATION = new Map();\n// TYPE_AND_RELATION.set(ROOMS_GROUP_CONTEXT, ROOMS_CATEGORY_RELATION)\n// TYPE_AND_RELATION.set(ROOMS_GROUP, ROOMS_TO_ELEMENT_RELATION)\n// TYPE_AND_RELATION.set(ROOMS_CATEGORY, ROOMS_GROUP_RELATION)\n// TYPE_AND_RELATION.set(EQUIPMENTS_GROUP_CONTEXT, EQUIPMENTS_CATEGORY_RELATION)\n// TYPE_AND_RELATION.set(EQUIPMENTS_GROUP, EQUIPMENTS_TO_ELEMENT_RELATION)\n// TYPE_AND_RELATION.set(EQUIPMENTS_CATEGORY, EQUIPMENTS_GROUP_RELATION)\n\n// const CONTEXT_TYPE = \"groupingContext\";\n// const CATEGORY_TYPE = \"groupingCategory\";\n\n// ///////////////////////////////////////////\n// //            Groups Types               //\n// ///////////////////////////////////////////\n// const ROOMS_GROUP = \"roomsGroup\";\n// const EQUIPMENTS_GROUP = \"equipmentGroup\";\n// const ENDPOINT_GROUP = \"endpointGroup\"\n\n// ///////////////////////////////////////////\n// //            Relations                  //\n// ///////////////////////////////////////////\n\n// const CONTEXT_TO_CATEGORY_RELATION = \"hasCategory\";\n// const CATEGORY_TO_GROUP_RELATION = \"hasGroup\";\n// const GROUP_TO_ROOMS_RELATION = \"groupHasRooms\";\n// const GROUP_TO_EQUIPMENTS_RELATION = \"groupHasEquipments\";\n// const GROUP_TO_ENDPOINT_RELATION = \"groupHasEndpoints\";\n\n\n\nclass GroupServiceConstants {\n  constructor() {\n    ///////////////////////////////////////\n    // CONTEXT\n    ///////////////////////////////////////\n    this.ROOMS_GROUP_CONTEXT = \"RoomsGroupContext\";\n    this.EQUIPMENTS_GROUP_CONTEXT = \"EquipmentGroupContext\";\n    this.ENDPOINTS_GROUP_CONTEXT = \"EndpointGroupContext\";\n\n    this.CONTEXTS_TYPES = [\n      this.ROOMS_GROUP_CONTEXT,\n      this.EQUIPMENTS_GROUP_CONTEXT,\n      this.ENDPOINTS_GROUP_CONTEXT\n    ];\n\n    //Category\n\n    this.CATEGORY_TYPE = \"groupingCategory\";\n\n    ///////////////////////////////////////////\n    //            Groups Types               //\n    ///////////////////////////////////////////\n    this.ROOMS_GROUP = \"roomsGroup\";\n    this.EQUIPMENTS_GROUP = \"equipmentGroup\";\n    this.ENDPOINT_GROUP = \"endpointGroup\";\n\n    this.GROUPS_TYPES = [\n      this.ROOMS_GROUP,\n      this.EQUIPMENTS_GROUP,\n      this.ENDPOINT_GROUP\n    ];\n\n    ///////////////////////////////////////////\n    //            Relations                  //\n    ///////////////////////////////////////////\n\n    this.CONTEXT_TO_CATEGORY_RELATION = \"hasCategory\";\n    this.CATEGORY_TO_GROUP_RELATION = \"hasGroup\";\n    this.GROUP_TO_ROOMS_RELATION = \"groupHasRooms\";\n    this.GROUP_TO_EQUIPMENTS_RELATION = \"groupHasEquipments\";\n    this.GROUP_TO_ENDPOINT_RELATION = \"groupHasEndpoints\";\n\n    ////////////////////////////////////////////\n    // Maps\n    ////////////////////////////////////////////\n\n    this.CONTEXT_GROUP_ASSOCIATION = new Map([\n      [this.ROOMS_GROUP_CONTEXT, this.ROOMS_GROUP],\n      [this.EQUIPMENTS_GROUP_CONTEXT, this.EQUIPMENTS_GROUP],\n      [this.ENDPOINTS_GROUP_CONTEXT, this.ENDPOINT_GROUP]\n    ]);\n\n    this.GROUP_RELATION_ASSOCIATION = new Map([\n      [this.ROOMS_GROUP, this.GROUP_TO_ROOMS_RELATION],\n      [this.EQUIPMENTS_GROUP, this\n        .GROUP_TO_EQUIPMENTS_RELATION\n      ],\n      [this.ENDPOINT_GROUP, this.GROUP_TO_ENDPOINT_RELATION]\n\n    ])\n  }\n\n}\n\nmodule.exports = new GroupServiceConstants();","<!--\nCopyright 2021 SpinalCom - www.spinalcom.com\n\nThis file is part of SpinalCore.\n\nPlease read all of the following terms and conditions\nof the Free Software license Agreement (\"Agreement\")\ncarefully.\n\nThis Agreement is a legally binding contract between\nthe Licensee (as defined below) and SpinalCom that\nsets forth the terms and conditions that govern your\nuse of the Program. By installing and/or using the\nProgram, you agree to abide by all the terms and\nconditions stated or referenced herein.\n\nIf you do not agree to abide by these terms and\nconditions, do not demonstrate your acceptance and do\nnot install or use the Program.\nYou should have received a copy of the license along\nwith this file. If not, see\n<http://resources.spinalcom.com/licenses.pdf>.\n-->\n\n<template>\n   <div class=\"selection_container\">\n      <div :class=\"isAutomate ? 'section' : 'middle'\">\n         <link-template\n            :title=\"context_title\"\n            :data=\"data\"\n            :itemSelected=\"contextSelected\"\n            @select=\"selectContext\"\n         ></link-template>\n      </div>\n\n      <div :class=\"isAutomate ? 'section' : 'middle'\">\n         <link-template\n            :title=\"category_title\"\n            :data=\"profils\"\n            :itemSelected=\"profilSelected\"\n            @select=\"selectProfil\"\n         ></link-template>\n\n      </div>\n\n      <div\n         class=\"section\"\n         v-if=\"isAutomate\"\n      >\n         <link-template\n            :title=\"group_title\"\n            :data=\"devices\"\n            :itemSelected=\"deviceSelected\"\n            @select=\"selectDevice\"\n         ></link-template>\n      </div>\n   </div>\n</template>\n\n\n<script>\nimport LinkToGroupTemplate from \"./linkToGroupTemplate.vue\";\n\nexport default {\n   name: \"selectionComponent\",\n   props: {\n      context_title: {},\n      category_title: {},\n      group_title: {},\n      data: {},\n      profils: {},\n      devices: {},\n      contextSelected: {},\n      profilSelected: {},\n      deviceSelected: {},\n      isAutomate: {\n         type: Boolean,\n         default: true,\n      },\n   },\n   components: { \"link-template\": LinkToGroupTemplate },\n   methods: {\n      selectContext(res) {\n         this.$emit(\"selectContext\", res);\n      },\n\n      selectProfil(res) {\n         this.$emit(\"selectProfil\", res);\n      },\n\n      selectDevice(res) {\n         this.$emit(\"selectDevice\", res);\n      },\n   },\n};\n</script>\n\n<style scoped>\n.selection_container {\n   width: 100%;\n   height: 100%;\n   display: flex;\n   justify-content: space-between;\n   align-items: stretch;\n}\n\n.selection_container .section {\n   width: 33%;\n   border: 1px solid grey;\n   border-radius: 4% 4% 0 0;\n   padding: 15px;\n}\n\n.selection_container .middle {\n   width: 49%;\n   border: 1px solid grey;\n   border-radius: 4% 4% 0 0;\n   padding: 15px;\n}\n</style>","<!--\nCopyright 2020 SpinalCom - www.spinalcom.com\n\nThis file is part of SpinalCore.\n\nPlease read all of the following terms and conditions\nof the Free Software license Agreement (\"Agreement\")\ncarefully.\n\nThis Agreement is a legally binding contract between\nthe Licensee (as defined below) and SpinalCom that\nsets forth the terms and conditions that govern your\nuse of the Program. By installing and/or using the\nProgram, you agree to abide by all the terms and\nconditions stated or referenced herein.\n\nIf you do not agree to abide by these terms and\nconditions, do not demonstrate your acceptance and do\nnot install or use the Program.\nYou should have received a copy of the license along\nwith this file. If not, see\n<http://resources.spinalcom.com/licenses.pdf>.\n-->\n\n\n<template>\n  <div class=\"subContent\">\n    <div class=\"title\">\n      <div>{{title}}</div>\n    </div>\n\n    <md-content class=\"container md-scrollbar\">\n      <md-list>\n        <md-list-item class=\"list-item\"\n                      v-for=\"(item,index) in data\"\n                      :key=\"index\"\n                      @click=\"selectItem(item.id)\"\n                      :class=\"{'selected' : item.id === itemSelected}\"\n                      v-tooltip=\"item.name\">\n\n          <span class=\"md-list-item-text\">{{item.name}}</span>\n\n        </md-list-item>\n      </md-list>\n    </md-content>\n\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"linkToGroupTemplate\",\n  props: [\"data\", \"title\", \"itemSelected\", \"disableBtn\"],\n  methods: {\n    createEvent() {\n      this.$emit(\"create\");\n    },\n    selectItem(id) {\n      this.$emit(\"select\", id);\n    },\n  },\n};\n</script>\n\n<style scoped>\n.subContent {\n  width: 100%;\n  height: 100%;\n}\n\n.subContent .title {\n  width: 100%;\n  height: 10%;\n  /* text-align: center; */\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0 15px 0 15px;\n  border-bottom: 1px dashed grey;\n}\n\n.subContent .container {\n  width: 100%;\n  height: 90%;\n  padding: 0px !important;\n  /* border: 1px solid red; */\n  overflow: hidden;\n  overflow-y: auto;\n}\n\n.subContent .container .list-item {\n  border-bottom: 1px solid grey;\n}\n\n.subContent .container .list-item .md-list-item-text {\n  width: 100%;\n  display: block;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n\n.subContent .container .list-item.selected {\n  background-color: #448aff;\n}\n</style>","<!--\nCopyright 2021 SpinalCom - www.spinalcom.com\n\nThis file is part of SpinalCore.\n\nPlease read all of the following terms and conditions\nof the Free Software license Agreement (\"Agreement\")\ncarefully.\n\nThis Agreement is a legally binding contract between\nthe Licensee (as defined below) and SpinalCom that\nsets forth the terms and conditions that govern your\nuse of the Program. By installing and/or using the\nProgram, you agree to abide by all the terms and\nconditions stated or referenced herein.\n\nIf you do not agree to abide by these terms and\nconditions, do not demonstrate your acceptance and do\nnot install or use the Program.\nYou should have received a copy of the license along\nwith this file. If not, see\n<http://resources.spinalcom.com/licenses.pdf>.\n-->\n\n<template>\n  <div class=\"result_container\">\n    <div class=\"title\"\n         v-tooltip=\"results.automate.name\">{{results.automate.name}}</div>\n    <div class=\"content\">\n\n      <div class=\"valids textDiv\"\n           v-tooltip=\"`${results.valids.length} Items linked`\">\n        <div class=\"value\">{{results.valids.length}}</div>\n        <div class=\"name\">Items linked</div>\n      </div>\n\n      <div class=\"invalids textDiv\"\n           v-tooltip=\"`${results.invalidAutomateItems.length} Items not linked`\">\n        <div class=\"value\">{{results.invalidAutomateItems.length}}</div>\n        <div class=\"name\">Items not linked</div>\n      </div>\n\n      <div class=\"button\">\n        <md-button class=\"md-raised md-primary\"\n                   @click=\"editLink\">Edit</md-button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { spinalPanelManagerService } from \"spinal-env-viewer-panel-manager-service\";\n// import Vue from \"vue\";\n// Vue.forceUpdate();\n\nexport default {\n  name: \"resultComponent\",\n  props: {\n    // automate: {},\n    results: {},\n  },\n  data() {\n    return {\n      // renderComponent: true,\n    };\n  },\n  methods: {\n    editLink() {\n      spinalPanelManagerService.openPanel(\"editAutomateLinkDialog\", {\n        data: this.results,\n        nodeId: this.results.automate.id,\n        callback: (dataEdited) => {\n          console.log(\"dataEdited\", dataEdited);\n          this.$emit(\"edit\", {\n            automateId: this.results.automate.id,\n            value: dataEdited,\n          });\n        },\n      });\n    },\n\n    forceRerender() {\n      this.$forceUpdate();\n    },\n  },\n};\n</script>\n\n<style scoped>\n.result_container {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.result_container .title {\n  width: 40%;\n  font-size: 1em;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  /* text-align: center; */\n  padding: 5px;\n}\n\n.result_container .content {\n  width: 45%;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.result_container .content .textDiv {\n  max-width: 100px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  font-size: 1.2em;\n  margin-right: 5px;\n}\n\n.result_container .content .textDiv .name {\n  width: 100%;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n\n.result_container .content .textDiv.invalids {\n  color: #ff5252;\n}\n\n.result_container .content .textDiv.valids {\n  color: #448aff;\n}\n\n/* .result_container .title {\n   width: 100%;\n   height: 20%;\n   display: block;\n   overflow: hidden;\n   white-space: nowrap;\n   text-overflow: ellipsis;\n   text-align: center;\n   padding: 5px;\n   background: grey;\n}\n\n.result_container .content {\n   width: 100%;\n   height: 80%;\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   justify-content: space-around;\n   align-items: center;\n}\n\n.result_container .content .textDiv {\n   font-size: 1.5em;\n} */\n</style>\n","<!--\nCopyright 2021 SpinalCom - www.spinalcom.com\n\nThis file is part of SpinalCore.\n\nPlease read all of the following terms and conditions\nof the Free Software license Agreement (\"Agreement\")\ncarefully.\n\nThis Agreement is a legally binding contract between\nthe Licensee (as defined below) and SpinalCom that\nsets forth the terms and conditions that govern your\nuse of the Program. By installing and/or using the\nProgram, you agree to abide by all the terms and\nconditions stated or referenced herein.\n\nIf you do not agree to abide by these terms and\nconditions, do not demonstrate your acceptance and do\nnot install or use the Program.\nYou should have received a copy of the license along\nwith this file. If not, see\n<http://resources.spinalcom.com/licenses.pdf>.\n-->\n\n<template>\n  <md-dialog class=\"mdDialogContainer\"\n             :md-active.sync=\"showDialog\"\n             @md-closed=\"closeDialog(false)\">\n    <md-dialog-title style=\"text-align : center\">Unlink Profil</md-dialog-title>\n    <md-dialog-content>\n      <div class=\"content\">\n        <div class=\"normal\"\n             v-if=\"state == STATES.normal\">\n          <div>\n            <!-- style=\"text-align : center\" -->\n            Do you want to delete the profil link ?\n          </div>\n          <div>\n            <md-checkbox v-model=\"unLinkAlsoBmsDevice\"\n                         class=\"md-primary\">Remove Also bmsDevices</md-checkbox>\n          </div>\n        </div>\n        <div class=\"state\"\n             v-else>\n          <md-progress-spinner md-mode=\"indeterminate\"\n                               v-if=\"state == STATES.loading\">\n          </md-progress-spinner>\n          <md-icon class=\"md-size-5x\"\n                   v-else-if=\"state == STATES.success\">done</md-icon>\n          <md-icon class=\"md-size-5x\"\n                   v-else-if=\"state == STATES.error\">error</md-icon>\n        </div>\n      </div>\n\n    </md-dialog-content>\n    <md-dialog-actions>\n      <md-button class=\"md-primary\"\n                 @click=\"closeDialog(false)\">No</md-button>\n      <md-button class=\"md-primary\"\n                 :disabled=\"state != STATES.normal\"\n                 @click=\"removeLink\">Yes</md-button>\n    </md-dialog-actions>\n  </md-dialog>\n</template>\n\n<script>\nimport unlinkController from \"../../../js/controllers/links/unLinkProfilController\";\n\nexport default {\n  name: \"confirmUnlikProfilDialog\",\n  props: [\"onFinised\"],\n  data() {\n    this.contextId;\n    this.nodeId;\n\n    this.STATES = {\n      loading: 1,\n      normal: 2,\n      error: 3,\n      success: 4,\n    };\n    return {\n      state: this.STATES.normal,\n      showDialog: true,\n      unLinkAlsoBmsDevice: true,\n    };\n  },\n  methods: {\n    opened(option) {\n      this.contextId = option.contextId;\n      this.nodeId = option.nodeId;\n    },\n\n    async removeLink() {\n      try {\n        this.state = this.STATES.loading;\n        await unlinkController.unLink(\n          this.contextId,\n          this.nodeId,\n          this.unLinkAlsoBmsDevice\n        );\n        this.state = this.STATES.success;\n      } catch (error) {\n        console.error(error);\n        this.state = this.STATES.error;\n      }\n    },\n\n    removed(option) {\n      // if (typeof this.callback === \"function\") {\n      //   this.callback(option);\n      // }\n      this.showDialog = false;\n    },\n    closeDialog(closeResult) {\n      if (typeof this.onFinised === \"function\") {\n        this.onFinised(closeResult);\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\n.mdDialogContainer {\n  width: 500px;\n  height: 500px;\n}\n\n.mdDialogContainer .md-dialog-container {\n  max-width: 100%;\n  max-height: 100%;\n}\n\n.content {\n  width: 100%;\n  height: 100%;\n  font-size: 1.5em;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n</style>","import { BIM_OBJECT_TYPE } from \"spinal-env-viewer-plugin-forge/dist/Constants\";\nimport {\n  CONSTANTS,\n  LinkNetworkTreeService,\n} from \"spinal-env-viewer-plugin-network-tree-service\";\n\nimport {\n  SpinalGraphService,\n  SPINAL_RELATION_PTR_LST_TYPE,\n} from \"spinal-env-viewer-graph-service\";\n\nconst lodash = require(\"lodash\");\n\nexport default {\n  async getFloors(contextId) {\n    return SpinalGraphService.getChildren(contextId, [\n      CONSTANTS.NETWORK_RELATION,\n      CONSTANTS.NETWORK_BIMOJECT_RELATION,\n    ]);\n  },\n  async getContextAutomates(nodeId) {\n    const floors = await this.getFloors(nodeId);\n\n    const promises = floors.map((el) => this.getAutomates(el.id.get()));\n    return Promise.all(promises).then((result) => {\n      return lodash.flattenDeep(result);\n    });\n  },\n  async getAutomates(nodeId) {\n    const nodeRef = SpinalGraphService.getInfo(nodeId);\n    return nodeRef.isAutomate && nodeRef.isAutomate.get()\n      ? [nodeRef]\n      : await SpinalGraphService.getChildren(nodeId, [\n          CONSTANTS.NETWORK_BIMOJECT_RELATION,\n        ]);\n  },\n\n  async unLink(contextId, nodeId, removeAlsoBmsDevice) {\n    let automates =\n      contextId === nodeId\n        ? await this.getContextAutomates(contextId)\n        : await this.getAutomates(nodeId);\n\n    console.log(\"automates\", automates);\n    console.log(automates.map((el) => el.name.get()));\n\n    const promises = automates.map((el) => {\n      try {\n        if (el.isAutomate && el.isAutomate.get()) {\n          return LinkNetworkTreeService.unLinkDeviceToProfil(\n            el.id.get(),\n            undefined,\n            removeAlsoBmsDevice\n          );\n        }\n\n        return LinkNetworkTreeService.unLinkAutomateItemToProfilItem(\n          el.id.get(),\n          undefined,\n          removeAlsoBmsDevice\n        );\n      } catch (error) {\n        console.error(el.name.get(), error);\n      }\n    });\n\n    return Promise.all(promises);\n\n    // const automatesArray = automates.map((el) =>\n    //   SpinalGraphService.getRealNode(el.id.get())\n    // );\n\n    // let counter = 0;\n\n    // while (counter < automatesArray.length) {\n    //   const automate = automatesArray[counter];\n    //   const automateId = automate.getId().get();\n    //   const isAutomate = automate.hasRelation(\n    //     CONSTANTS.AUTOMATES_TO_PROFILE_RELATION,\n    //     SPINAL_RELATION_PTR_LST_TYPE\n    //   );\n    //   if (isAutomate) {\n    //     await LinkNetworkTreeService.unLinkDeviceToProfil(\n    //       automateId,\n    //       undefined,\n    //       removeAlsoBmsDevice\n    //     );\n    //     counter++;\n    //     continue;\n    //   }\n    //   const isAutomateItem = automate.hasRelation(\n    //     utilities.OBJECT_TO_BACNET_ITEM_RELATION,\n    //     SPINAL_RELATION_PTR_LST_TYPE\n    //   );\n\n    //   if (isAutomateItem) {\n    //     await LinkNetworkTreeService.unLinkAutomateItemToProfilItem(\n    //       automateId,\n    //       undefined,\n    //       removeAlsoBmsDevice\n    //     );\n    //   }\n    // }\n\n    // for (const automate of automatesArray) {\n    //   const automateId = automate.getId().get();\n\n    // if (\n    //   automate.hasRelation(\n    //     CONSTANTS.AUTOMATES_TO_PROFILE_RELATION,\n    //     SPINAL_RELATION_PTR_LST_TYPE\n    //   )\n    // ) {\n    //   LinkNetworkTreeService.unLinkDeviceToProfil(\n    //     automateId,\n    //     undefined,\n    //     removeAlsoBmsDevice\n    //   );\n    // } else if (\n    //   automate.hasRelation(\n    //     utilities.OBJECT_TO_BACNET_ITEM_RELATION,\n    //     SPINAL_RELATION_PTR_LST_TYPE\n    //   )\n    // ) {\n    //   LinkNetworkTreeService.unLinkAutomateItemToProfilItem(\n    //     automateId,\n    //     undefined,\n    //     removeAlsoBmsDevice\n    //   );\n    // }\n    // }\n  },\n};\n","<!--\nCopyright 2021 SpinalCom - www.spinalcom.com\n\nThis file is part of SpinalCore.\n\nPlease read all of the following terms and conditions\nof the Free Software license Agreement (\"Agreement\")\ncarefully.\n\nThis Agreement is a legally binding contract between\nthe Licensee (as defined below) and SpinalCom that\nsets forth the terms and conditions that govern your\nuse of the Program. By installing and/or using the\nProgram, you agree to abide by all the terms and\nconditions stated or referenced herein.\n\nIf you do not agree to abide by these terms and\nconditions, do not demonstrate your acceptance and do\nnot install or use the Program.\nYou should have received a copy of the license along\nwith this file. If not, see\n<http://resources.spinalcom.com/licenses.pdf>.\n-->\n\n<template>\n  <md-dialog :md-active.sync=\"showDialog\"\n             @md-closed=\"closeDialog(false)\"\n             class=\"linkerDialogsContent\">\n    <md-dialog-title style=\"text-align : center\">Edit Profil Link\n    </md-dialog-title>\n\n    <md-dialog-content>\n      <edit-link v-if=\"!success\"\n                 :data=\"data\"\n                 :rightTitle=\"'Profil Items'\"\n                 :leftTitle=\"'Automate Items'\"></edit-link>\n\n      <div class=\"centered\"\n           v-else>\n        <md-icon class=\"md-size-5x\">done</md-icon>\n      </div>\n    </md-dialog-content>\n\n    <md-dialog-actions>\n      <md-button class=\"md-primary\"\n                 @click=\"closeDialog(false)\">close</md-button>\n\n      <md-button class=\"md-primary\"\n                 :disabled=\"success\"\n                 @click=\"editLink\">Save</md-button>\n    </md-dialog-actions>\n  </md-dialog>\n</template>\n\n\n<script>\nimport {\n  LinkNetworkTreeService,\n  CONSTANTS,\n} from \"spinal-env-viewer-plugin-network-tree-service\";\n\nimport editLinkContent from \"../../components/links/editLinks.vue\";\n\nexport default {\n  name: \"editLinksDialog\",\n  props: [\"onFinised\"],\n  components: {\n    \"edit-link\": editLinkContent,\n  },\n  data() {\n    this.callback;\n\n    return {\n      success: false,\n      showDialog: true,\n      data: undefined,\n    };\n  },\n  methods: {\n    async opened(option) {\n      if (option.data) {\n        console.log(\"inside data\");\n        this.data = JSON.parse(JSON.stringify(option.data));\n        this.callback = option.callback;\n        return;\n      }\n      // this.data = JSON.parse(JSON.stringify(option.data));\n      this.data = await LinkNetworkTreeService.getDeviceAndProfilData(\n        option.nodeId\n      );\n      // this.callback = option.callback;\n    },\n\n    async editLink() {\n      if (typeof this.callback === \"function\") {\n        console.log(\"this.callback is a function\");\n        return this.closeDialog(true);\n      }\n      const validPromises = this.data.valids.map(\n        ({ automateItem, profileItem }) =>\n          LinkNetworkTreeService.linkAutomateItemToProfilItem(\n            automateItem.id,\n            profileItem.id\n          )\n      );\n\n      await Promise.all(validPromises);\n\n      const invaliPromises = this.data.invalidAutomateItems.map((el) =>\n        LinkNetworkTreeService.unLinkAutomateItemToProfilItem(el.id)\n      );\n      await Promise.all(invaliPromises);\n\n      this.success = true;\n    },\n\n    async removed(option) {\n      if (option && typeof this.callback === \"function\") {\n        this.callback(this.data);\n        // const validPromises = this.data.valids.map(\n        //    ({ automateItem, profileItem }) =>\n        //       LinkNetworkTreeService.linkAutomateItemToProfilItem(\n        //          automateItem.id,\n        //          profileItem.id\n        //       )\n        // );\n        // await Promise.all(validPromises).then(() => {\n        //    const invaliPromises = res.invalidAutomateItems.map((el) =>\n        //       LinkNetworkTreeService.unLinkAutomateItemToProfilItem(el.id)\n        //    );\n        //    return Promise.all(invaliPromises);\n        // });\n      }\n\n      this.showDialog = false;\n    },\n\n    closeDialog(closeResult) {\n      if (typeof this.onFinised === \"function\") {\n        this.onFinised(closeResult);\n      }\n    },\n\n    // _formatInvalidData(data) {\n    //   console.log(\"data\", data);\n    //   data.invalidAutomateItems = data.invalidAutomateItems.map((el) => {\n    //     el.checked = false;\n    //     return el;\n    //   });\n    //   data.invalidProfileItems = data.invalidProfileItems.map((el) => {\n    //     el.checked = false;\n    //     return el;\n    //   });\n\n    //   return data;\n    // },\n  },\n};\n</script>\n\n<style scoped>\n.linkerDialogsContent {\n  width: 100%;\n  height: 100%;\n}\n\n.centered {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n</style>\n\n<style>\n.linkerDialogsContent .md-dialog-container {\n  max-width: 100%;\n  max-height: 100%;\n}\n</style>","<!--\nCopyright 2021 SpinalCom - www.spinalcom.com\n\nThis file is part of SpinalCore.\n\nPlease read all of the following terms and conditions\nof the Free Software license Agreement (\"Agreement\")\ncarefully.\n\nThis Agreement is a legally binding contract between\nthe Licensee (as defined below) and SpinalCom that\nsets forth the terms and conditions that govern your\nuse of the Program. By installing and/or using the\nProgram, you agree to abide by all the terms and\nconditions stated or referenced herein.\n\nIf you do not agree to abide by these terms and\nconditions, do not demonstrate your acceptance and do\nnot install or use the Program.\nYou should have received a copy of the license along\nwith this file. If not, see\n<http://resources.spinalcom.com/licenses.pdf>.\n-->\n\n<template>\n  <div class=\"link_container\"\n       v-if=\"data\">\n    <div class=\"links md-scrollbar\">\n      <div class=\"title\">Items Linked</div>\n      <div class=\"content\">\n        <div class=\"linkedTemplate\"\n             v-for=\"(item,index) of data.valids\"\n             :key=\"index\">\n          <div class=\"itemsLinked\"\n               v-tooltip=\"item.automateItem.name\">\n            <span>{{item.automateItem.name}}</span>\n          </div>\n          <div class=\"unlinkButton\">\n            <md-button class=\"md-icon-button md-raised unlink\"\n                       @click=\"unLinkItems(item.automateItem.id,item.profileItem.id)\"\n                       v-tooltip=\"'unlink'\">\n              <md-icon>link_off</md-icon>\n            </md-button>\n          </div>\n          <div class=\"itemsLinked\"\n               v-tooltip=\"item.profileItem.name\">\n            <span>{{item.profileItem.name}}</span>\n          </div>\n        </div>\n      </div>\n\n    </div>\n    <!-- \n  ////////////////////////////////////////////////////////////\n  //                    Items\n  ////////////////////////////////////////////////////////////\n -->\n    <div class=\"items\">\n      <div class=\"physical_automates\">\n        <div class=\"title\">{{leftTitle}}</div>\n        <div class=\"lists\">\n          <div class=\"list\"\n               v-if=\"data.invalidAutomateItems.length > 0\">\n            <div class=\"listItem\"\n                 v-for=\"automateItem of data.invalidAutomateItems\"\n                 :key=\"automateItem.id\"\n                 v-tooltip=\"automateItem.name\">\n              <!-- <md-checkbox class=\"md-primary\"\n                           v-model=\"automateItem.checked\"\n                           value=\"preview\" />\n              <span class=\"md-list-item-text\">{{automateItem.name}}</span> -->\n              <md-radio class=\"md-primary\"\n                        v-model=\"automateItemSelected\"\n                        :value=\"automateItem.id\">\n                {{automateItem.name}}\n              </md-radio>\n            </div>\n          </div>\n\n          <div v-else\n               class=\"allItemsLinked\">\n            All items are linked\n          </div>\n        </div>\n      </div>\n\n      <div class=\"linkButton\">\n        <md-button class=\"md-icon-button md-raised md-primary\"\n                   @click=\"linkItems()\"\n                   :disabled=\"disableLink()\">\n          <md-icon>add_link</md-icon>\n        </md-button>\n      </div>\n\n      <div class=\"virtual_automates\">\n        <div class=\"title\">{{rightTitle}}</div>\n        <div class=\"lists\">\n          <div class=\"list\"\n               v-if=\"data.invalidProfileItems.length > 0\">\n            <div class=\"listItem\"\n                 v-for=\"profileItem of data.invalidProfileItems\"\n                 :key=\"profileItem.id\"\n                 v-tooltip=\"profileItem.name\">\n              <!-- <md-checkbox class=\"md-primary\"\n                           v-model=\"profileItem.checked\"\n                           value=\"preview\" />\n              <span class=\"md-list-item-text\">{{profileItem.name}}</span> -->\n              <md-radio class=\"md-primary\"\n                        v-model=\"profileItemSelected\"\n                        :value=\"profileItem.id\">\n                {{profileItem.name}}\n              </md-radio>\n            </div>\n          </div>\n\n          <div v-else\n               class=\"allItemsLinked\">\n            All items are linked\n          </div>\n        </div>\n\n      </div>\n    </div>\n  </div>\n\n  <div class=\"loading\"\n       v-else>\n    loading...\n  </div>\n</template>\n\n<script>\nimport editListController from \"../../../js/controllers/links/editLinksControllers\";\n\nexport default {\n  name: \"editLinkComponent\",\n  props: {\n    leftTitle: {},\n    rightTitle: {},\n    data: {},\n  },\n  data() {\n    return {\n      automateItemSelected: undefined,\n      profileItemSelected: undefined,\n    };\n  },\n  methods: {\n    linkItems() {\n      let automateItemList = this.data.invalidAutomateItems;\n      let profileItemList = this.data.invalidProfileItems;\n      const validList = this.data.valids;\n\n      this.data.valids = editListController.moveItemTovalidList(\n        automateItemList,\n        profileItemList,\n        this.automateItemSelected,\n        this.profileItemSelected,\n        validList\n      );\n\n      this.automateItemSelected = undefined;\n      this.profileItemSelected = undefined;\n    },\n\n    unLinkItems(automateItemId, profileItemId) {\n      let automateItemList = this.data.invalidAutomateItems;\n      let profileItemList = this.data.invalidProfileItems;\n      const validList = this.data.valids;\n\n      editListController\n        .removeItemFromValidList(\n          validList,\n          automateItemList,\n          profileItemList,\n          automateItemId,\n          profileItemId\n        )\n        .then(({ invalidAutomateItems, invalidProfileItems, validList }) => {\n          this.data.invalidAutomateItems = invalidAutomateItems;\n          this.data.invalidProfileItems = invalidProfileItems;\n          this.data.valids = validList;\n        });\n    },\n\n    disableLink() {\n      return (\n        typeof this.automateItemSelected === \"undefined\" ||\n        typeof this.profileItemSelected === \"undefined\"\n      );\n    },\n  },\n};\n</script>\n\n<style scoped>\n.link_container {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n}\n\n.link_container .links,\n.link_container .items {\n  width: 100%;\n  height: 49%;\n}\n\n.link_container .links {\n  border: 1px solid grey;\n  overflow-y: auto;\n}\n\n.link_container .links .title {\n  width: 100%;\n  height: 50px;\n  /* background: grey; */\n  margin: auto;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border-bottom: 1px solid grey;\n}\n\n.link_container .links .content {\n  width: 100%;\n  height: calc(100% - 50px);\n  overflow: auto;\n}\n\n.link_container .links .content .linkedTemplate {\n  width: 98%;\n  height: 50px;\n  display: flex;\n  margin: auto;\n  background: #686464;\n  margin-top: 10px;\n  margin-bottom: 5px;\n\n  /* padding: 5px 0; */\n}\n\n.link_container .links .content .linkedTemplate .itemsLinked {\n  width: calc(50% - 30px);\n  height: 100%;\n  display: flex;\n  /* justify-content: center; */\n  align-items: center;\n  text-align: center;\n}\n\n.link_container .links .content .linkedTemplate .itemsLinked span {\n  max-width: 95%;\n  font-size: 16px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  padding-left: 10px;\n}\n\n.link_container .links .content .linkedTemplate .unlinkButton {\n  width: 50px;\n  height: 100%;\n\n  /* border: 1px solid grey; */\n}\n\n.link_container .links .content .linkedTemplate .unlinkButton .unlink {\n  width: 100%;\n  height: 100%;\n  margin: 0px;\n  box-shadow: unset;\n  /* border-right: 2px solid white;\n  border-left: 2px solid white; */\n}\n\n.link_container .items {\n  display: flex;\n  /* justify-content: space-between; */\n}\n\n.link_container .items .physical_automates,\n.link_container .items .virtual_automates {\n  width: calc(50% - 30px);\n  height: 100%;\n  border: 1px solid grey;\n}\n\n.link_container .items .linkButton {\n  width: 60px;\n  height: 100%;\n  display: flex;\n  align-items: center;\n}\n\n.link_container .items .physical_automates .title,\n.link_container .items .virtual_automates .title {\n  width: 100%;\n  height: 50px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border: 1px solid grey;\n  /* background: grey; */\n}\n\n.link_container .items .physical_automates .lists,\n.link_container .items .virtual_automates .lists {\n  width: 100%;\n  height: calc(100% - 50px);\n  /* overflow-y: auto; */\n}\n\n.link_container .items .physical_automates .lists .list,\n.link_container .items .virtual_automates .lists .list {\n  width: 100%;\n  height: 100%;\n  overflow-y: auto;\n}\n\n.link_container .items .physical_automates .lists .list .listItem,\n.link_container .items .virtual_automates .lists .list .listItem {\n  width: 100%;\n  height: 50px;\n  display: flex;\n  align-items: center;\n  font-size: 16px;\n  font-weight: 400;\n  text-align: left;\n  padding: 4px 16px;\n}\n\n.link_container .items .physical_automates .lists .list .listItem:hover,\n.link_container .items .virtual_automates .lists .list .listItem:hover {\n  background: grey;\n}\n\n.link_container .items .allItemsLinked {\n  width: 100%;\n  height: calc(100% - 50px);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-size: 1.5em;\n}\n</style>\n\n<style>\n.link_container .items .physical_automates .lists .md-radio,\n.link_container .items .virtual_automates .lists .md-radio {\n  width: 100%;\n  padding: 0px;\n  margin: 0px;\n}\n\n.link_container .items .physical_automates .lists .md-radio .md-radio-label,\n.link_container .items .virtual_automates .lists .md-radio .md-radio-label {\n  width: calc(100% - 40px);\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n</style>","/**\n * ATTENTION\n * Toutes les fonctions du controlleur modifient les listes passes en paramtre\n */\nexport default {\n  moveItemTovalidList(\n    automateItemList,\n    profileItemList,\n    automateItemSelected,\n    profilItemSelected,\n    validList\n  ) {\n    let automateIndice = automateItemList.findIndex(\n      (el) => el.id === automateItemSelected\n    );\n\n    if (automateIndice == -1) return;\n\n    let profileIndice = profileItemList.findIndex(\n      (el) => el.id === profilItemSelected\n    );\n\n    if (profileIndice == -1) return;\n\n    let automateItemFound = automateItemList[automateIndice];\n    let profileItemFound = profileItemList[profileIndice];\n\n    if (automateItemFound && profileItemFound) {\n      validList = [\n        {\n          automateItem: automateItemFound,\n          profileItem: profileItemFound,\n        },\n        ...validList,\n      ];\n\n      profileItemList.splice(automateIndice, 1);\n      automateItemList.splice(profileIndice, 1);\n      return validList;\n    }\n  },\n\n  async removeItemFromValidList(\n    validList,\n    invalidAutomateItems,\n    invalidProfileItems,\n    automateItemId,\n    profileItemId\n  ) {\n    let indice = validList.findIndex(\n      (item) =>\n        item.automateItem.id === automateItemId &&\n        item.profileItem.id === profileItemId\n    );\n\n    if (indice != -1) {\n      const found = validList[indice];\n      if (found) {\n        return {\n          invalidAutomateItems: [found.automateItem, ...invalidAutomateItems],\n          invalidProfileItems: [found.profileItem, ...invalidProfileItems],\n          validList: validList.filter(\n            (item) =>\n              item.automateItem.id != automateItemId &&\n              item.profileItem.id != profileItemId\n          ),\n        };\n      }\n    }\n\n    return {\n      invalidAutomateItems,\n      invalidProfileItems,\n      validList,\n    };\n  },\n};\n","<template>\n   <md-dialog\n      :md-active.sync=\"showDialog\"\n      @md-closed=\"closeDialog(false)\"\n      class=\"personalizedDialog\"\n   >\n\n      <md-dialog-title class=\"personalizedDialogTitle\">Personnalize attribute</md-dialog-title>\n      <md-dialog-content class=\"personalizedDialogContent\">\n         <div class=\"radios\">\n            <div class=\"radio\">\n               <md-radio\n                  class=\"md-primary\"\n                  v-model=\"useRegex\"\n                  :value=\"true\"\n               >Use regex</md-radio>\n            </div>\n\n            <div class=\"radio\">\n               <div class=\"radio\">\n                  <md-radio\n                     class=\"md-primary\"\n                     v-model=\"useRegex\"\n                     :value=\"false\"\n                  >Use Function</md-radio>\n               </div>\n            </div>\n         </div>\n\n         <div v-if=\"useRegex\">\n            <div>\n               <!-- <div class=\"md-layout-item md-size-50\"><span class=\"md-caption\">use <b>{{`'${PCL_ATTR}'`}}</b> to represente PLC attribute value</span></div>\n               <div class=\"md-layout-item md-size-50\"><span class=\"md-caption\">use <b>{{`'${OBJECT_ATTR}'`}}</b> to represente PLC attribute value</span></div> -->\n               <div>\n                  <md-subheader class=\"md-primary\">use {{` '${PCL_ATTR}' `}} to represente PLC attribute value</md-subheader>\n               </div>\n\n               <div>\n                  <md-subheader class=\"md-primary\">use {{` '${OBJECT_ATTR}' `}} to represente Object controlled attribute value</md-subheader>\n               </div>\n            </div>\n\n            <md-list class=\"regex _content\">\n               <!-- <md-list-item class=\"radio\">\n\n            </md-list-item> -->\n\n               <!-- <md-list-item>\n               \n            </md-list-item> -->\n\n               <md-list-item>\n                  <div class=\"md-layout-item md-size-35\">\n                     <md-field>\n                        <label></label>\n                        <md-select\n                           id=\"vertical\"\n                           v-model=\"regexValue.select\"\n                        >\n                           <md-option :value=\"PCL_ATTR\">PCL Attribute Value</md-option>\n                           <md-option :value=\"OBJECT_ATTR\">Object controlled Attribute Value</md-option>\n                        </md-select>\n                     </md-field>\n                  </div>\n\n                  <div\n                     class=\"md-layout-item md-size-20\"\n                     style=\"text-align : center\"\n                  >\n                     must match with\n                  </div>\n\n                  <div class=\"md-layout-item md-size-35\">\n                     <md-field>\n                        <md-icon :md-src=\"slashIcon\"></md-icon>\n                        <label>Your regex</label>\n                        <md-input\n                           :disabled=\"!useRegex\"\n                           v-model=\"regexValue.text\"\n                        ></md-input>\n                        <md-icon :md-src=\"slashIcon\"></md-icon>\n                     </md-field>\n                  </div>\n\n               </md-list-item>\n\n               <md-list-item>\n                  <md-field class=\"_mdField\">\n                     <label>Flags</label>\n\n                     <md-select\n                        :disabled=\"!useRegex\"\n                        v-model=\"regexValue.flags\"\n                        name=\"flags\"\n                        id=\"flags\"\n                        md-dense\n                        multiple\n                     >\n\n                        <md-option\n                           v-for=\"(flag,index) in flagsList\"\n                           :key=\"index\"\n                           :value=\"flag.value\"\n                        >{{flag.name}}</md-option>\n\n                     </md-select>\n\n                  </md-field>\n               </md-list-item>\n\n            </md-list>\n         </div>\n\n         <div\n            class=\"function _content\"\n            v-else\n         >\n\n            <spinal-code-mirror\n               class=\"editorContainer\"\n               :codeObj=\"functionValue\"\n            ></spinal-code-mirror>\n\n         </div>\n\n      </md-dialog-content>\n\n      <md-dialog-actions>\n         <md-button\n            class=\"md-primary\"\n            @click=\"closeDialog(false)\"\n         >Close</md-button>\n         <md-button\n            class=\"md-primary\"\n            @click=\"closeDialog(true)\"\n         >Save</md-button>\n      </md-dialog-actions>\n   </md-dialog>\n</template>\n\n<script>\n// import { PLC_ATTR, OBJECT_ATTR } from \"../../../js/attributeConfig\";\nimport { CONSTANTS } from \"spinal-env-viewer-plugin-network-tree-service\";\n\nimport flagsList from \"../../../js/flags\";\nimport SpinalCodeMirror from \"../../components/code-mirror/SpinalCodeMirror.vue\";\nimport functionText from \"../../../js/personalized_functions/function\";\n\nconst slashIcon = require(\"../../../assets/slash.svg\");\n\nexport default {\n   name: \"personalizedAttributeDialog\",\n   props: [\"onFinised\"],\n   components: { \"spinal-code-mirror\": SpinalCodeMirror },\n   data() {\n      this.callback;\n      this.flagsList = flagsList;\n      this.PCL_ATTR = CONSTANTS.PLC_ATTR;\n      this.OBJECT_ATTR = CONSTANTS.OBJECT_ATTR;\n\n      this.slashIcon = slashIcon;\n\n      return {\n         useRegex: true,\n         showDialog: true,\n         regexValue: {\n            select: this.OBJECT_ATTR,\n            text: \"\",\n            flags: [],\n         },\n         functionValue: {\n            code: functionText,\n         },\n      };\n   },\n\n   methods: {\n      opened(option) {\n         if (option.isPersonalized) {\n            this.useRegex = option.attribute.isRegex;\n            if (this.useRegex) {\n               this.regexValue.text = option.attribute.text;\n               this.regexValue.flags = option.attribute.flags;\n               this.regexValue.select = option.attribute.select;\n            } else {\n               this.functionValue.code = option.attribute.callback;\n            }\n         }\n\n         this.callback = option.callback;\n      },\n\n      removed(option) {\n         if (option.closeResult) {\n            if (typeof this.callback === \"function\") {\n               if (this.useRegex) this.callback(this.useRegex, this.regexValue);\n               else this.callback(this.useRegex, this.functionValue);\n            }\n         }\n         this.showDialog = false;\n      },\n      closeDialog(closeResult) {\n         if (typeof this.onFinised === \"function\") {\n            this.onFinised({ closeResult });\n         }\n      },\n   },\n};\n</script>\n\n<style scoped>\n.personalizedDialog {\n   width: 1000px;\n   height: 500px;\n}\n\n.personalizedDialog .personalizedDialogTitle {\n   text-align: center;\n}\n\n.personalizedDialog .personalizedDialogContent {\n   width: 100%;\n   height: 100%;\n   /* display: flex;\n   justify-content: space-between; */\n}\n\n.personalizedDialog .personalizedDialogContent .radios {\n   width: 100%;\n   height: 50px;\n   display: flex;\n}\n\n.personalizedDialog .personalizedDialogContent ._content {\n   width: 100%;\n   height: calc(100% - 50px);\n}\n\n/* \n.personalizedDialog .personalizedDialogContent .regex {\n   width: 50%;\n   height: 100%;\n   border-right: 1px solid grey;\n\n}\n\n.personalizedDialog .personalizedDialogContent .function {\n   width: 49%;\n   height: 100%;\n\n}\n\n.personalizedDialog .personalizedDialogContent .function .radio {\n   width: 100%;\n   height: 50px;\n}\n\n.personalizedDialog .personalizedDialogContent .function .content {\n   max-width: 100%;\n   height: calc(100% - 50px);\n   overflow: auto;\n} */\n</style>\n\n<style>\n.personalizedDialog .md-dialog-container {\n   max-width: 100%;\n   max-height: 100%;\n}\n</style>","export default [\n   {\n      name: \"global\",\n      value: \"g\",\n      description: \"Don't return after first match\"\n   },\n   {\n      name: \"Multi line\",\n      value: \"m\",\n      description: \"^ and $ match start/end of line\"\n   },\n   {\n      name: \"Insensitive\",\n      value: \"i\",\n      description: \"Case insensitive match\"\n   },\n   {\n      name: \"unicode\",\n      value: \"u\",\n      description: \"Match with full unicode\"\n   }\n]","<template>\n   <!-- <div class=\"editorContainer\"> -->\n   <codemirror\n      v-model=\"codeObj.code\"\n      :options=\"cmOption\"\n   />\n   <!-- </div> -->\n\n</template>\n\n<script>\n// import dedent from \"dedent\";\nimport { codemirror } from \"vue-codemirror\";\n\n// language\nimport \"codemirror/mode/javascript/javascript\";\n\n// theme css\n// import \"codemirror/theme/monokai.css\";\n\n// require active-line\nimport \"codemirror/addon/selection/active-line\";\n\n// styleSelectedText\nimport \"codemirror/addon/selection/mark-selection\";\nimport \"codemirror/addon/search/searchcursor\";\n\n// hint\nimport \"codemirror/addon/hint/show-hint\";\n// import \"codemirror/addon/hint/show-hint.css\";\nimport \"codemirror/addon/hint/javascript-hint\";\nimport \"codemirror/addon/selection/active-line\";\n\n// highlightSelectionMatches\nimport \"codemirror/addon/scroll/annotatescrollbar\";\nimport \"codemirror/addon/search/matchesonscrollbar\";\nimport \"codemirror/addon/search/searchcursor\";\nimport \"codemirror/addon/search/match-highlighter\";\n\n// keyMap\nimport \"codemirror/mode/clike/clike\";\nimport \"codemirror/addon/edit/matchbrackets\";\nimport \"codemirror/addon/comment/comment\";\nimport \"codemirror/addon/dialog/dialog\";\n// import \"codemirror/addon/dialog/dialog.css\";\nimport \"codemirror/addon/search/searchcursor\";\nimport \"codemirror/addon/search/search\";\nimport \"codemirror/keymap/sublime\";\n\n// foldGutter\n// import \"codemirror/addon/fold/foldgutter.css\";\nimport \"codemirror/addon/fold/brace-fold\";\nimport \"codemirror/addon/fold/comment-fold\";\nimport \"codemirror/addon/fold/foldcode\";\nimport \"codemirror/addon/fold/foldgutter\";\nimport \"codemirror/addon/fold/indent-fold\";\nimport \"codemirror/addon/fold/markdown-fold\";\nimport \"codemirror/addon/fold/xml-fold\";\n\nexport default {\n   name: \"SpinalCodeMirror\",\n   components: {\n      codemirror,\n   },\n   props: {\n      codeObj: {},\n   },\n   data() {\n      return {\n         // code: this.codeObj.code,\n         cmOption: {\n            tabSize: 4,\n            styleActiveLine: true,\n            lineNumbers: true,\n            // styleSelectedText: false,\n            line: true,\n            // foldGutter: true,\n            lineWrapping: true,\n            gutters: [\"CodeMirror-linenumbers\", \"CodeMirror-foldgutter\"],\n            // highlightSelectionMatches: {\n            //    showToken: /\\w/,\n            //    annotateScrollbar: true,\n            // },\n            mode: \"text/javascript\",\n            // hint.js options\n            hintOptions: {\n               completeSingle: false,\n            },\n            keyMap: \"sublime\",\n            matchBrackets: true,\n            showCursorWhenSelecting: true,\n            theme: \"monokai\",\n            extraKeys: { \"Ctrl-Space\": \"autocomplete\" },\n         },\n      };\n   },\n   mounted() {\n      // setTimeout(() => {\n      //    (this.styleSelectedText = true),\n      //       (this.cmOption.styleActiveLine = true);\n      // }, 1800);\n   },\n};\n</script>\n\n<style>\n.editorContainer {\n   width: 100%;\n   height: 100%;\n}\n\n.CodeMirror-focused .cm-matchhighlight {\n   background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAIAAAACCAYAAABytg0kAAAAFklEQVQI12NgYGBgkKzc8x9CMDAwAAAmhwSbidEoSQAAAABJRU5ErkJggg==);\n   background-position: bottom;\n   background-repeat: repeat-x;\n}\n.cm-matchhighlight {\n   background-color: lightgreen;\n}\n.CodeMirror-selection-highlight-scrollbar {\n   background-color: green;\n}\n\n/*\n////////////////////////////////////////////////////////////////////////\n//     codemirror/lib/codemirror.css\n//////////////////////////////////////////////////////////////////////// \n*/\n\n/* BASICS */\n\n.CodeMirror {\n   /* Set height, width, borders, and global font properties here */\n   font-family: monospace;\n   height: 300px;\n   color: black;\n   direction: ltr;\n}\n\n/* PADDING */\n\n.CodeMirror-lines {\n   padding: 4px 0; /* Vertical padding around content */\n}\n.CodeMirror pre.CodeMirror-line,\n.CodeMirror pre.CodeMirror-line-like {\n   padding: 0 4px; /* Horizontal padding of content */\n}\n\n.CodeMirror-scrollbar-filler,\n.CodeMirror-gutter-filler {\n   background-color: transparent; /* The little square between H and V scrollbars */\n}\n\n/* GUTTER */\n\n.CodeMirror-gutters {\n   border-right: 1px solid #ddd;\n   background-color: #f7f7f7;\n   white-space: nowrap;\n}\n.CodeMirror-linenumbers {\n}\n.CodeMirror-linenumber {\n   padding: 0 3px 0 5px;\n   min-width: 20px;\n   text-align: right;\n   color: #999;\n   white-space: nowrap;\n}\n\n.CodeMirror-guttermarker {\n   color: black;\n}\n.CodeMirror-guttermarker-subtle {\n   color: #999;\n}\n\n/* CURSOR */\n\n.CodeMirror-cursor {\n   border-left: 1px solid black;\n   border-right: none;\n   width: 0;\n}\n/* Shown when moving in bi-directional text */\n.CodeMirror div.CodeMirror-secondarycursor {\n   border-left: 1px solid silver;\n}\n.cm-fat-cursor .CodeMirror-cursor {\n   width: auto;\n   border: 0 !important;\n   background: #7e7;\n}\n.cm-fat-cursor div.CodeMirror-cursors {\n   z-index: 1;\n}\n.cm-fat-cursor-mark {\n   background-color: rgba(20, 255, 20, 0.5);\n   -webkit-animation: blink 1.06s steps(1) infinite;\n   -moz-animation: blink 1.06s steps(1) infinite;\n   animation: blink 1.06s steps(1) infinite;\n}\n.cm-animate-fat-cursor {\n   width: auto;\n   border: 0;\n   -webkit-animation: blink 1.06s steps(1) infinite;\n   -moz-animation: blink 1.06s steps(1) infinite;\n   animation: blink 1.06s steps(1) infinite;\n   background-color: #7e7;\n}\n@-moz-keyframes blink {\n   0% {\n   }\n   50% {\n      background-color: transparent;\n   }\n   100% {\n   }\n}\n@-webkit-keyframes blink {\n   0% {\n   }\n   50% {\n      background-color: transparent;\n   }\n   100% {\n   }\n}\n@keyframes blink {\n   0% {\n   }\n   50% {\n      background-color: transparent;\n   }\n   100% {\n   }\n}\n\n/* Can style cursor different in overwrite (non-insert) mode */\n.CodeMirror-overwrite .CodeMirror-cursor {\n}\n\n.cm-tab {\n   display: inline-block;\n   text-decoration: inherit;\n}\n\n.CodeMirror-rulers {\n   position: absolute;\n   left: 0;\n   right: 0;\n   top: -50px;\n   bottom: 0;\n   overflow: hidden;\n}\n.CodeMirror-ruler {\n   border-left: 1px solid #ccc;\n   top: 0;\n   bottom: 0;\n   position: absolute;\n}\n\n/* DEFAULT THEME */\n\n.cm-s-default .cm-header {\n   color: blue;\n}\n.cm-s-default .cm-quote {\n   color: #090;\n}\n.cm-negative {\n   color: #d44;\n}\n.cm-positive {\n   color: #292;\n}\n.cm-header,\n.cm-strong {\n   font-weight: bold;\n}\n.cm-em {\n   font-style: italic;\n}\n.cm-link {\n   text-decoration: underline;\n}\n.cm-strikethrough {\n   text-decoration: line-through;\n}\n\n.cm-s-default .cm-keyword {\n   color: #708;\n}\n.cm-s-default .cm-atom {\n   color: #219;\n}\n.cm-s-default .cm-number {\n   color: #164;\n}\n.cm-s-default .cm-def {\n   color: #00f;\n}\n.cm-s-default .cm-variable,\n.cm-s-default .cm-punctuation,\n.cm-s-default .cm-property,\n.cm-s-default .cm-operator {\n}\n.cm-s-default .cm-variable-2 {\n   color: #05a;\n}\n.cm-s-default .cm-variable-3,\n.cm-s-default .cm-type {\n   color: #085;\n}\n.cm-s-default .cm-comment {\n   color: #a50;\n}\n.cm-s-default .cm-string {\n   color: #a11;\n}\n.cm-s-default .cm-string-2 {\n   color: #f50;\n}\n.cm-s-default .cm-meta {\n   color: #555;\n}\n.cm-s-default .cm-qualifier {\n   color: #555;\n}\n.cm-s-default .cm-builtin {\n   color: #30a;\n}\n.cm-s-default .cm-bracket {\n   color: #997;\n}\n.cm-s-default .cm-tag {\n   color: #170;\n}\n.cm-s-default .cm-attribute {\n   color: #00c;\n}\n.cm-s-default .cm-hr {\n   color: #999;\n}\n.cm-s-default .cm-link {\n   color: #00c;\n}\n\n.cm-s-default .cm-error {\n   color: #f00;\n}\n.cm-invalidchar {\n   color: #f00;\n}\n\n.CodeMirror-composing {\n   border-bottom: 2px solid;\n}\n\n/* Default styles for common addons */\n\ndiv.CodeMirror span.CodeMirror-matchingbracket {\n   color: #0b0;\n}\ndiv.CodeMirror span.CodeMirror-nonmatchingbracket {\n   color: #a22;\n}\n.CodeMirror-matchingtag {\n   background: rgba(255, 150, 0, 0.3);\n}\n.CodeMirror-activeline-background {\n   background: #e8f2ff;\n}\n\n/* STOP */\n\n/* The rest of this file contains styles related to the mechanics of\n   the editor. You probably shouldn't touch them. */\n\n.CodeMirror {\n   position: relative;\n   overflow: hidden;\n   background: white;\n}\n\n.CodeMirror-scroll {\n   overflow: scroll !important; /* Things will break if this is overridden */\n   /* 50px is the magic margin used to hide the element's real scrollbars */\n   /* See overflow: hidden in .CodeMirror */\n   margin-bottom: -50px;\n   margin-right: -50px;\n   padding-bottom: 50px;\n   height: 100%;\n   outline: none; /* Prevent dragging from highlighting the element */\n   position: relative;\n}\n.CodeMirror-sizer {\n   position: relative;\n   border-right: 50px solid transparent;\n}\n\n/* The fake, visible scrollbars. Used to force redraw during scrolling\n   before actual scrolling happens, thus preventing shaking and\n   flickering artifacts. */\n.CodeMirror-vscrollbar,\n.CodeMirror-hscrollbar,\n.CodeMirror-scrollbar-filler,\n.CodeMirror-gutter-filler {\n   position: absolute;\n   z-index: 6;\n   display: none;\n   outline: none;\n}\n.CodeMirror-vscrollbar {\n   right: 0;\n   top: 0;\n   overflow-x: hidden;\n   overflow-y: scroll;\n}\n.CodeMirror-hscrollbar {\n   bottom: 0;\n   left: 0;\n   overflow-y: hidden;\n   overflow-x: scroll;\n}\n.CodeMirror-scrollbar-filler {\n   right: 0;\n   bottom: 0;\n}\n.CodeMirror-gutter-filler {\n   left: 0;\n   bottom: 0;\n}\n\n.CodeMirror-gutters {\n   position: absolute;\n   left: 0;\n   top: 0;\n   min-height: 100%;\n   z-index: 3;\n}\n.CodeMirror-gutter {\n   white-space: normal;\n   height: 100%;\n   display: inline-block;\n   vertical-align: top;\n   margin-bottom: -50px;\n}\n.CodeMirror-gutter-wrapper {\n   position: absolute;\n   z-index: 4;\n   background: none !important;\n   border: none !important;\n}\n.CodeMirror-gutter-background {\n   position: absolute;\n   top: 0;\n   bottom: 0;\n   z-index: 4;\n}\n.CodeMirror-gutter-elt {\n   position: absolute;\n   cursor: default;\n   z-index: 4;\n}\n.CodeMirror-gutter-wrapper ::selection {\n   background-color: transparent;\n}\n.CodeMirror-gutter-wrapper ::-moz-selection {\n   background-color: transparent;\n}\n\n.CodeMirror-lines {\n   cursor: text;\n   min-height: 1px; /* prevents collapsing before first draw */\n}\n.CodeMirror pre.CodeMirror-line,\n.CodeMirror pre.CodeMirror-line-like {\n   /* Reset some styles that the rest of the page might have set */\n   -moz-border-radius: 0;\n   -webkit-border-radius: 0;\n   border-radius: 0;\n   border-width: 0;\n   background: transparent;\n   font-family: inherit;\n   font-size: inherit;\n   margin: 0;\n   white-space: pre;\n   word-wrap: normal;\n   line-height: inherit;\n   color: inherit;\n   z-index: 2;\n   position: relative;\n   overflow: visible;\n   -webkit-tap-highlight-color: transparent;\n   -webkit-font-variant-ligatures: contextual;\n   font-variant-ligatures: contextual;\n}\n.CodeMirror-wrap pre.CodeMirror-line,\n.CodeMirror-wrap pre.CodeMirror-line-like {\n   word-wrap: break-word;\n   white-space: pre-wrap;\n   word-break: normal;\n}\n\n.CodeMirror-linebackground {\n   position: absolute;\n   left: 0;\n   right: 0;\n   top: 0;\n   bottom: 0;\n   z-index: 0;\n}\n\n.CodeMirror-linewidget {\n   position: relative;\n   z-index: 2;\n   padding: 0.1px; /* Force widget margins to stay inside of the container */\n}\n\n.CodeMirror-widget {\n}\n\n.CodeMirror-rtl pre {\n   direction: rtl;\n}\n\n.CodeMirror-code {\n   outline: none;\n}\n\n/* Force content-box sizing for the elements where we expect it */\n.CodeMirror-scroll,\n.CodeMirror-sizer,\n.CodeMirror-gutter,\n.CodeMirror-gutters,\n.CodeMirror-linenumber {\n   -moz-box-sizing: content-box;\n   box-sizing: content-box;\n}\n\n.CodeMirror-measure {\n   position: absolute;\n   width: 100%;\n   height: 0;\n   overflow: hidden;\n   visibility: hidden;\n}\n\n.CodeMirror-cursor {\n   position: absolute;\n   pointer-events: none;\n}\n.CodeMirror-measure pre {\n   position: static;\n}\n\ndiv.CodeMirror-cursors {\n   visibility: hidden;\n   position: relative;\n   z-index: 3;\n}\ndiv.CodeMirror-dragcursors {\n   visibility: visible;\n}\n\n.CodeMirror-focused div.CodeMirror-cursors {\n   visibility: visible;\n}\n\n.CodeMirror-selected {\n   background: #d9d9d9;\n}\n.CodeMirror-focused .CodeMirror-selected {\n   background: #d7d4f0;\n}\n.CodeMirror-crosshair {\n   cursor: crosshair;\n}\n.CodeMirror-line::selection,\n.CodeMirror-line > span::selection,\n.CodeMirror-line > span > span::selection {\n   background: #d7d4f0;\n}\n.CodeMirror-line::-moz-selection,\n.CodeMirror-line > span::-moz-selection,\n.CodeMirror-line > span > span::-moz-selection {\n   background: #d7d4f0;\n}\n\n.cm-searching {\n   background-color: #ffa;\n   background-color: rgba(255, 255, 0, 0.4);\n}\n\n/* Used to force a border model for a node */\n.cm-force-border {\n   padding-right: 0.1px;\n}\n\n@media print {\n   /* Hide the cursor when printing */\n   .CodeMirror div.CodeMirror-cursors {\n      visibility: hidden;\n   }\n}\n\n/* See issue #2901 */\n.cm-tab-wrap-hack:after {\n   content: \"\";\n}\n\n/* Help users use markselection to safely style text background */\nspan.CodeMirror-selectedtext {\n   background: none;\n}\n\n/*\n////////////////////////////////////////////////////////////////////////\n//     Based on Sublime Text's Monokai theme\n//////////////////////////////////////////////////////////////////////// \n*/\n\n.cm-s-monokai.CodeMirror {\n   background: #272822;\n   color: #f8f8f2;\n}\n.cm-s-monokai div.CodeMirror-selected {\n   background: #49483e;\n}\n.cm-s-monokai .CodeMirror-line::selection,\n.cm-s-monokai .CodeMirror-line > span::selection,\n.cm-s-monokai .CodeMirror-line > span > span::selection {\n   background: rgba(73, 72, 62, 0.99);\n}\n.cm-s-monokai .CodeMirror-line::-moz-selection,\n.cm-s-monokai .CodeMirror-line > span::-moz-selection,\n.cm-s-monokai .CodeMirror-line > span > span::-moz-selection {\n   background: rgba(73, 72, 62, 0.99);\n}\n.cm-s-monokai .CodeMirror-gutters {\n   background: #272822;\n   border-right: 0px;\n}\n.cm-s-monokai .CodeMirror-guttermarker {\n   color: white;\n}\n.cm-s-monokai .CodeMirror-guttermarker-subtle {\n   color: #d0d0d0;\n}\n.cm-s-monokai .CodeMirror-linenumber {\n   color: #d0d0d0;\n}\n.cm-s-monokai .CodeMirror-cursor {\n   border-left: 1px solid #f8f8f0;\n}\n\n.cm-s-monokai span.cm-comment {\n   color: #75715e;\n}\n.cm-s-monokai span.cm-atom {\n   color: #ae81ff;\n}\n.cm-s-monokai span.cm-number {\n   color: #ae81ff;\n}\n\n.cm-s-monokai span.cm-comment.cm-attribute {\n   color: #97b757;\n}\n.cm-s-monokai span.cm-comment.cm-def {\n   color: #bc9262;\n}\n.cm-s-monokai span.cm-comment.cm-tag {\n   color: #bc6283;\n}\n.cm-s-monokai span.cm-comment.cm-type {\n   color: #5998a6;\n}\n\n.cm-s-monokai span.cm-property,\n.cm-s-monokai span.cm-attribute {\n   color: #a6e22e;\n}\n.cm-s-monokai span.cm-keyword {\n   color: #f92672;\n}\n.cm-s-monokai span.cm-builtin {\n   color: #66d9ef;\n}\n.cm-s-monokai span.cm-string {\n   color: #e6db74;\n}\n\n.cm-s-monokai span.cm-variable {\n   color: #f8f8f2;\n}\n.cm-s-monokai span.cm-variable-2 {\n   color: #9effff;\n}\n.cm-s-monokai span.cm-variable-3,\n.cm-s-monokai span.cm-type {\n   color: #66d9ef;\n}\n.cm-s-monokai span.cm-def {\n   color: #fd971f;\n}\n.cm-s-monokai span.cm-bracket {\n   color: #f8f8f2;\n}\n.cm-s-monokai span.cm-tag {\n   color: #f92672;\n}\n.cm-s-monokai span.cm-header {\n   color: #ae81ff;\n}\n.cm-s-monokai span.cm-link {\n   color: #ae81ff;\n}\n.cm-s-monokai span.cm-error {\n   background: #f92672;\n   color: #f8f8f0;\n}\n\n.cm-s-monokai .CodeMirror-activeline-background {\n   background: #373831;\n}\n.cm-s-monokai .CodeMirror-matchingbracket {\n   text-decoration: underline;\n   color: white !important;\n}\n\n/*\n////////////////////////////////////////////////////////////////////////\n//     Show hint\n//////////////////////////////////////////////////////////////////////// \n\n*/\n\n.CodeMirror-hints {\n   position: absolute;\n   z-index: 10;\n   overflow: hidden;\n   list-style: none;\n\n   margin: 0;\n   padding: 2px;\n\n   -webkit-box-shadow: 2px 3px 5px rgba(0, 0, 0, 0.2);\n   -moz-box-shadow: 2px 3px 5px rgba(0, 0, 0, 0.2);\n   box-shadow: 2px 3px 5px rgba(0, 0, 0, 0.2);\n   border-radius: 3px;\n   border: 1px solid silver;\n\n   background: white;\n   font-size: 90%;\n   font-family: monospace;\n\n   max-height: 20em;\n   overflow-y: auto;\n}\n\n.CodeMirror-hint {\n   margin: 0;\n   padding: 0 4px;\n   border-radius: 2px;\n   white-space: pre;\n   color: black;\n   cursor: pointer;\n}\n\nli.CodeMirror-hint-active {\n   background: #08f;\n   color: white;\n}\n\n/*\n\n////////////////////////////////////////////////////////////////////////\n//     import \"codemirror/addon/dialog/dialog.css\n//////////////////////////////////////////////////////////////////////// \n\n*/\n\n.CodeMirror-dialog {\n   position: absolute;\n   left: 0;\n   right: 0;\n   background: inherit;\n   z-index: 15;\n   padding: 0.1em 0.8em;\n   overflow: hidden;\n   color: inherit;\n}\n\n.CodeMirror-dialog-top {\n   border-bottom: 1px solid #eee;\n   top: 0;\n}\n\n.CodeMirror-dialog-bottom {\n   border-top: 1px solid #eee;\n   bottom: 0;\n}\n\n.CodeMirror-dialog input {\n   border: none;\n   outline: none;\n   background: transparent;\n   width: 20em;\n   color: inherit;\n   font-family: monospace;\n}\n\n.CodeMirror-dialog button {\n   font-size: 70%;\n}\n\n/*\n\n////////////////////////////////////////////////////////////////////////\n//     import \"codemirror/addon/fold/foldgutter.css\"\n//////////////////////////////////////////////////////////////////////// \n\n*/\n.CodeMirror-foldmarker {\n   color: blue;\n   text-shadow: #b9f 1px 1px 2px, #b9f -1px -1px 2px, #b9f 1px -1px 2px,\n      #b9f -1px 1px 2px;\n   font-family: arial;\n   line-height: 0.3;\n   cursor: pointer;\n}\n.CodeMirror-foldgutter {\n   width: 0.7em;\n}\n.CodeMirror-foldgutter-open,\n.CodeMirror-foldgutter-folded {\n   cursor: pointer;\n}\n.CodeMirror-foldgutter-open:after {\n   content: \"\\25BE\";\n}\n.CodeMirror-foldgutter-folded:after {\n   content: \"\\25B8\";\n}\n</style>","\nimport dedent from \"dedent\";\n\nexport default dedent`\n   /**\n   *   1 - Don't change the function name and parameters\n   *   2 - This function must return a boolean\n   *   3 - Change function content to match with your test\n   *   4 - All your code must be inside the function\n   */\n\n   function elementIsControlled(automateAttrValue, elementAttrValue) {\n      const automateAttrValueSplited = automateAttrValue.split(\"-\");\n      const elementAttrValueSplited = elementAttrValue.split(\"-\");\n      const aut_substr = automateAttrValueSplited[0] + \"-\" + automateAttrValueSplited[1] + \"-\" + automateAttrValueSplited[automateAttrValueSplited.length - 1];\n      const elm_substr = elementAttrValueSplited[0] + \"-\" + elementAttrValueSplited[1] + \"-\" + elementAttrValueSplited[elementAttrValueSplited.length - 1];\n\n\n      const substr = aut_substr.toString().replace(/.$/,'');\n      const regex = new RegExp(substr + '[1-9]$');\n\n      return elm_substr.toString().match(regex) ? true : false\n   }`\n\n\n\n\n/*\n`\n   function elementIsControlled(automateAttrValue, elementAttrValue) {\n\n      const automateSubstr = automateAttrValue.substring(0, automateAttrValue.length);\n      const elementSubstr = elementAttrValue.substring(0, elementAttrValue.length);\n\n      if(automateSubstr === elementSubstr) {\n         const autEnd = automateAttrValue[automateAttrValue.length];\n         const elementEnd = elementAttrValue[elementAttrValue.length];\n\n         return  elementEnd > autEnd\n      }\n\n      return false\n   }\n`\n\n*/","module.exports = require('./helpers/bundle-url').getBundleURL('f4stD') + require('./helpers/bundle-manifest').resolve(\"5TG4M\");","<template>\n   <md-dialog\n      :md-active.sync=\"showDialog\"\n      @md-closed=\"closeDialog(false)\"\n      class=\"personalizedDialog\"\n   >\n      <md-dialog-title class=\"personalizedDialogTitle\">Personnalize Naming convention</md-dialog-title>\n\n      <md-dialog-content class=\"personalizedDialogContent\">\n         <div class=\"function _content\">\n\n            <spinal-code-mirror\n               class=\"editorContainer\"\n               :codeObj=\"functionValue\"\n            ></spinal-code-mirror>\n\n         </div>\n\n      </md-dialog-content>\n\n      <md-dialog-actions>\n         <md-button\n            class=\"md-primary\"\n            @click=\"closeDialog(false)\"\n         >Close</md-button>\n         <md-button\n            class=\"md-primary\"\n            @click=\"closeDialog(true)\"\n         >Save</md-button>\n      </md-dialog-actions>\n   </md-dialog>\n</template>\n\n\n<script>\nimport SpinalCodeMirror from \"../../components/code-mirror/SpinalCodeMirror.vue\";\nimport functionText from \"../../../js/personalized_functions/naming_convention_function\";\n\nexport default {\n   name: \"PersonalizeNamingConvention\",\n   props: [\"onFinised\"],\n   components: { \"spinal-code-mirror\": SpinalCodeMirror },\n   data() {\n      this.callback;\n\n      return {\n         showDialog: true,\n         functionValue: {\n            code: functionText,\n         },\n      };\n   },\n   methods: {\n      opened(option) {\n         if (!option.config.useAttrValue) {\n            this.functionValue.code = option.config.personalized.callback;\n         }\n\n         this.callback = option.callback;\n      },\n\n      removed(option) {\n         if (option.closeResult) {\n            if (typeof this.callback === \"function\") {\n               this.callback(this.functionValue.code);\n            }\n         }\n         this.showDialog = false;\n      },\n\n      closeDialog(closeResult) {\n         if (typeof this.onFinised === \"function\") {\n            this.onFinised({ closeResult });\n         }\n      },\n   },\n};\n</script>\n\n<style scoped>\n.personalizedDialog {\n   width: 1000px;\n   height: 500px;\n}\n\n.personalizedDialog .personalizedDialogTitle {\n   text-align: center;\n}\n\n.personalizedDialog .personalizedDialogContent {\n   width: 100%;\n   height: 100%;\n   /* display: flex;\n   justify-content: space-between; */\n}\n\n.personalizedDialog .personalizedDialogContent ._content {\n   width: 100%;\n   height: calc(100% - 50px);\n}\n</style>\n\n<style>\n.personalizedDialog .md-dialog-container {\n   max-width: 100%;\n   max-height: 100%;\n}\n</style>","import dedent from 'dedent';\n\nexport default dedent`\n   /**\n   *   1 - Don't change the function name and parameters\n   *   2 - This function must return a String (the naming convention)\n   *   3 - Change function content to match with your test\n   *   4 - All your code must be inside the function\n   */\n\n   function getNamingConvention(attributeValue) {\n      const attributeSplitted = attributeValue.split('-');\n      const before = attributeSplitted[attributeSplitted.length - 2];\n      const last = attributeSplitted[attributeSplitted.length - 1];\n\n      if(before && last) return before + \"_\" + last[last.length - 1];\n\n      return attributeValue\n   }\n\n`","<!--\nCopyright 2021 SpinalCom - www.spinalcom.com\n\nThis file is part of SpinalCore.\n\nPlease read all of the following terms and conditions\nof the Free Software license Agreement (\"Agreement\")\ncarefully.\n\nThis Agreement is a legally binding contract between\nthe Licensee (as defined below) and SpinalCom that\nsets forth the terms and conditions that govern your\nuse of the Program. By installing and/or using the\nProgram, you agree to abide by all the terms and\nconditions stated or referenced herein.\n\nIf you do not agree to abide by these terms and\nconditions, do not demonstrate your acceptance and do\nnot install or use the Program.\nYou should have received a copy of the license along\nwith this file. If not, see\n<http://resources.spinalcom.com/licenses.pdf>.\n-->\n\n<template>\n  <md-dialog class=\"mdDialogContainer\"\n             :md-active.sync=\"showDialog\"\n             @md-closed=\"closeDialog(false)\">\n    <md-dialog-title class=\"dialogTitle\">{{title}}</md-dialog-title>\n\n    <md-dialog-content class=\"content\">\n      <link-component v-if=\"pageSelected === PAGES.selection\"\n                      :context_title=\"'Contexts'\"\n                      :category_title=\"'Subnetworks'\"\n                      :group_title=\"'Bms devices'\"\n                      :data=\"data\"\n                      :profils=\"networks\"\n                      :devices=\"devices\"\n                      :contextSelected=\"contextSelected\"\n                      :profilSelected=\"networkSelected\"\n                      :deviceSelected=\"deviceSelected\"\n                      :isAutomate=\"isAutomate\"\n                      @selectContext=\"selectContext\"\n                      @selectProfil=\"selectNetwork\"\n                      @selectDevice=\"selectDevice\"></link-component>\n\n      <configuration-template v-else-if=\"pageSelected === PAGES.configuration\"\n                              :properties=\"configuration\"\n                              :bimData=\"configuration.bimData\"\n                              :bmsData=\"configuration.bmsData\">\n      </configuration-template>\n\n      <confirm-link v-else-if=\"pageSelected === PAGES.result\"\n                    :data=\"result\"></confirm-link>\n\n      <div class=\"state\"\n           v-else-if=\"pageSelected === PAGES.loading\">\n        <md-progress-spinner md-mode=\"indeterminate\"></md-progress-spinner>\n      </div>\n\n      <div class=\"state\"\n           v-else-if=\"pageSelected === PAGES.error\">\n        <md-icon class=\"md-size-5x\">error_outline</md-icon>\n      </div>\n\n      <div class=\"state\"\n           v-else-if=\"pageSelected === PAGES.success\">\n        <md-icon class=\"md-size-5x\">done</md-icon>\n      </div>\n\n      <div class=\"progress-bar\"\n           v-else-if=\"pageSelected === PAGES.creation\">\n        <div class=\"percent-number\">{{percent}} %</div>\n        <md-progress-bar class=\"percent-bar\"\n                         md-mode=\"buffer\"\n                         :md-value=\"percent\"></md-progress-bar>\n      </div>\n\n    </md-dialog-content>\n\n    <md-dialog-actions>\n      <md-button class=\"md-primary\"\n                 @click=\"closeDialog(false)\">Close</md-button>\n\n      <md-button class=\"md-primary\"\n                 :disabled=\"disabledPreviousButton()\"\n                 @click=\"goToPrevious\">Previous</md-button>\n\n      <md-button class=\"md-primary\"\n                 :disabled=\"disabledNextButton()\"\n                 @click=\"goToNext\">Next</md-button>\n\n      <md-button :disabled=\"disabledLinkButton()\"\n                 class=\"md-primary\"\n                 @click=\"createLink\">Link</md-button>\n    </md-dialog-actions>\n\n  </md-dialog>\n\n</template>\n\n<script>\nimport linkBimToBmsControllers from \"../../../js/controllers/links/linkBimToBmsControllers\";\n// import linkAutomateToBmsDeviceUtilities from \"../../../js/link_utilities/linkAutomateToBmsDevice\";\n\nimport {\n  AttributesUtilities,\n  LinkBmsDeviceService,\n} from \"spinal-env-viewer-plugin-network-tree-service\";\n\nimport networkService from \"../../../js/network/networkService\";\n\nimport LinkComponent from \"../../components/links/LinkComponent.vue\";\nimport ConfirmLinkToGTB from \"./confirmLinkToGTB.vue\";\nimport ConfigurationTemplate from \"../../components/links/configuration.vue\";\n\nimport bmsDataFunction from \"../../../js/personalized_functions/replace_by\";\nimport bimDataFunction from \"../../../js/personalized_functions/replace-by\";\n// import { SpinalForgeViewer } from \"spinal-env-viewer-plugin-forge\";\n\nconst lodash = require(\"lodash\");\n\nexport default {\n  name: \"linkToGtbDialog\",\n  components: {\n    \"link-component\": LinkComponent,\n    \"confirm-link\": ConfirmLinkToGTB,\n    \"configuration-template\": ConfigurationTemplate,\n  },\n  props: [\"onFinised\"],\n  data() {\n    this.PAGES = {\n      selection: 0,\n      configuration: 1,\n      result: 2,\n      creation: 3,\n      loading: 4,\n      success: 5,\n      error: 6,\n    };\n\n    this.bimDevices = [];\n\n    this.contextId;\n    this.nodeId;\n    this.callback = undefined;\n\n    return {\n      configuration: {\n        bimData: {\n          property: \"CFA_Repre d'quipement\",\n          useFunction: false,\n          callback: { code: bimDataFunction },\n        },\n        bmsData: {\n          property: \"name\",\n          useFunction: false,\n          callback: { code: bmsDataFunction },\n        },\n\n        useTheseAttributes: false,\n      },\n\n      percent: 0,\n      title: \"\",\n      result: undefined,\n      showDialog: true,\n      pageSelected: this.PAGES.selection,\n      isAutomate: false,\n\n      data: [],\n      networks: [],\n      devices: [],\n\n      contextSelected: undefined,\n      networkSelected: undefined,\n      deviceSelected: undefined,\n    };\n  },\n  methods: {\n    opened(option) {\n      this.pageSelected = this.PAGES.loading;\n\n      this.contextId = option.contextId;\n      this.nodeId = option.nodeId;\n      this.isAutomate = option.isAutomate;\n\n      this.loadData()\n        .then((result) => {\n          this.updateNetworks();\n          this.title = \"Select context, subnetwork or the bms device\";\n          this.pageSelected = this.PAGES.selection;\n        })\n        .catch((err) => {\n          console.error(err);\n          this.pageSelected = this.PAGES.error;\n        });\n\n      // this.getDeviceContextTreeStructure()\n      //   .then(async () => {\n      //     this.title = \"Select context, subnetwork or the bms device\";\n      //     this.bimDevices = await this._getAutomates(\n      //       this.nodeId,\n      //       this.contextId,\n      //       this.isAutomate\n      //     );\n      //     this.pageSelected = this.PAGES.selection;\n      //   })\n      //   .catch((err) => {\n      //     this.pageSelected = this.PAGES.error;\n      //   });\n    },\n\n    removed(save) {\n      if (save) {\n      }\n      this.showDialog = false;\n    },\n\n    closeDialog(closeResult) {\n      if (typeof this.onFinised === \"function\") {\n        this.onFinised(closeResult);\n      }\n    },\n\n    async createLink() {\n      this.pageSelected = this.PAGES.creation;\n\n      return (() => {\n        if (!this.configuration.useTheseAttributes)\n          return this._useProfileToLink();\n        return this._useAttributeToLink();\n      })()\n        .then(() => {\n          this.pageSelected = this.PAGES.success;\n        })\n        .catch((err) => {\n          console.error(err);\n          this.pageSelected = this.PAGES.error;\n        });\n    },\n\n    _useProfileToLink() {\n      return linkBimToBmsControllers.createLinkBetweenBimAndBms(\n        this.contextSelected,\n        this.result.valids,\n        this.percent\n      );\n    },\n\n    _useAttributeToLink() {\n      return linkBimToBmsControllers.createLinkBetweenBimAndBmsUsingAttribute(\n        this.contextSelected,\n        this.result.valids,\n        this.percent\n      );\n    },\n\n    loadData() {\n      const bmsTreeProm =\n        linkBimToBmsControllers.getBmsDevicesContextTreeStructure();\n      const automateBimsProm = linkBimToBmsControllers.getAutomateBims(\n        this.nodeId,\n        this.contextId\n      );\n      return Promise.all([bmsTreeProm, automateBimsProm]).then(\n        ([data, automatesBims]) => {\n          this.data = data;\n          this.bimDevices = automatesBims;\n        }\n      );\n    },\n\n    goToNext() {\n      const currentPage = this.pageSelected;\n      this.pageSelected = this.PAGES.loading;\n\n      switch (currentPage) {\n        case this.PAGES.selection:\n          this._goToConfiguration();\n          break;\n        case this.PAGES.configuration:\n          this._getResult().catch((error) => {\n            console.error(error);\n            this.pageSelected = this.PAGES.error;\n          });\n          break;\n\n        default:\n          break;\n      }\n    },\n\n    goToPrevious() {\n      const currentPage = this.pageSelected;\n      this.pageSelected = this.PAGES.loading;\n\n      switch (currentPage) {\n        case this.PAGES.result:\n          this.pageSelected = this.PAGES.configuration;\n          break;\n        case this.PAGES.configuration:\n          this.pageSelected = this.PAGES.selection;\n          break;\n\n        default:\n          break;\n      }\n    },\n\n    _goToConfiguration() {\n      this.title = \"Configuration\";\n      this.pageSelected = this.PAGES.configuration;\n    },\n\n    async _getResult() {\n      this.title = \"Edit Link\";\n\n      // const bmsDevices = await this._getBmsDevicesProperties(\n      //   this.configuration.bmsData.property\n      // );\n\n      // const bimDevices = await this.getElementProperties(\n      //   this.bimDevices,\n      //   this.configuration.bimData.property\n      // );\n\n      const bmsAttributeName = this.configuration.bmsData.property;\n      const bimAttributeName = this.configuration.bimData.property;\n      const listObj = {\n        devices: this.devices,\n        networks: this.networks,\n        tree: this.data,\n      };\n\n      linkBimToBmsControllers\n        .getLinkResultBetweenBimAndBms(\n          bmsAttributeName,\n          this.contextSelected,\n          this.networkSelected,\n          this.deviceSelected,\n          listObj,\n          this.bimDevices,\n          bimAttributeName,\n          this.configuration\n        )\n        .then((res) => {\n          this.pageSelected = this.PAGES.result;\n          this.result = res;\n        })\n        .catch((err) => {\n          console.error(err);\n          this.pageSelected = this.PAGES.err;\n        });\n    },\n\n    // _getBmsDevicesProperties(attributeName) {\n    //   const devices = this._getBmsDevices();\n    //   return linkBimToBmsControllers._getBmsDevicesProperties(\n    //     attributeName,\n    //     devices\n    //   );\n    // },\n\n    // _getBmsDevices() {\n    //   if (typeof this.deviceSelected !== \"undefined\") {\n    //     return this.devices.filter((el) => el.id === this.deviceSelected);\n    //   } else if (typeof this.networkSelected !== \"undefined\") {\n    //     const found = this.networks.find(\n    //       (el) => el.id === this.networkSelected\n    //     );\n    //     return found && found.devices ? found.devices : [];\n    //   } else if (typeof this.contextSelected !== \"undefined\") {\n    //     const devices = [];\n    //     const found = this.data.find((el) => el.id === this.contextSelected);\n\n    //     if (found && found.networks) {\n    //       for (const network of found.networks) {\n    //         if (network.devices) {\n    //           devices.push(...network.devices);\n    //         }\n    //       }\n    //     }\n\n    //     return devices;\n    //   }\n    // },\n\n    // _formatBimProperty(bim) {\n    //   if (this.configuration.bimData.useFunction) {\n    //     return this._formatValue(\n    //       bim.property.displayValue,\n    //       this.configuration.bimData.callback.code\n    //     );\n    //   }\n\n    //   return bim.property.displayValue;\n    // },\n\n    // _formatBmsProperty(bms) {\n    //   if (this.configuration.bmsData.useFunction) {\n    //     return this._formatValue(\n    //       bms.property.displayValue,\n    //       this.configuration.bmsData.callback.code\n    //     );\n    //   }\n    //   return bms.property.displayValue;\n    // },\n\n    // _formatValue(value, callback) {\n    //   return eval(`(${callback})('${value}')`);\n    // },\n\n    // will be change\n    // getElementProperties(argItems, attributeName) {\n    //   const dbIdMap = new Map();\n    //   const promises = argItems.map(async (el) => {\n    //     const fileName = spinal.spinalGraphService\n    //       .getInfo(el.bimFileId)\n    //       .name.get();\n\n    //     const model = window.spinal.BimObjectService.getModelByName(fileName);\n\n    //     if (!model) throw \"make sure your load all scene\";\n\n    //     el.property = await AttributesUtilities.findAttribute(\n    //       model,\n    //       el.dbid,\n    //       attributeName\n    //     );\n    //     return el;\n    //   });\n\n    //   try {\n    //     return Promise.all(promises).then((result) => {\n    //       return {\n    //         validItems: result.filter((el) => el.property),\n    //         invalidItems: result.filter((el) => !el.property),\n    //       };\n    //     });\n    //   } catch (error) {\n    //     throw error;\n    //   }\n    // },\n\n    // _getItemPropertiesFormatted(model, itemList, attributeName, nodeId) {\n    //    const promises = itemList.map(async (el) => {\n    //       el.model = model;\n    //       el.property = this._getAttributeByName(\n    //          el.properties,\n    //          attributeName\n    //       );\n\n    //       return el;\n    //    });\n\n    //    return Promise.all(promises);\n    // },\n\n    // _getAttributeByName(properties, propertyName) {\n    //    return properties.find((obj) => {\n    //       return (\n    //          (obj.displayName === propertyName ||\n    //             obj.attributeName === propertyName) &&\n    //          obj.displayValue &&\n    //          (obj.displayValue + \"\").length > 0\n    //       );\n    //    });\n    // },\n\n    /* Selection */\n    selectContext(id) {\n      this.contextSelected = id;\n    },\n\n    selectNetwork(id) {\n      this.networkSelected = id;\n    },\n\n    selectDevice(id) {\n      this.deviceSelected = id;\n    },\n\n    /* Update */\n    updateNetworks() {\n      this.networks = [];\n      if (this.contextSelected) {\n        let val = this.data.find((el) => el.id === this.contextSelected);\n        if (val) this.networks = val.networks;\n      }\n    },\n\n    updateDevices() {\n      this.devices = [];\n      if (this.networkSelected) {\n        let val = this.networks.find((el) => el.id === this.networkSelected);\n        if (val) this.devices = val.devices;\n      }\n    },\n\n    /* Disabled */\n\n    disabledPreviousButton() {\n      return (\n        this.pageSelected === this.PAGES.loading ||\n        this.pageSelected === this.PAGES.selection ||\n        this.pageSelected === this.PAGES.success\n      );\n    },\n\n    disabledNextButton() {\n      /* !this.contextSelected || */\n      return (\n        (this.isAutomate && !this.deviceSelected) ||\n        // !this.networkSelected ||\n        !this.contextSelected ||\n        this.pageSelected === this.PAGES.loading ||\n        this.pageSelected === this.PAGES.result ||\n        this.pageSelected === this.PAGES.success\n      );\n    },\n\n    disabledLinkButton() {\n      return (\n        this.pageSelected === this.PAGES.loading ||\n        this.pageSelected !== this.PAGES.result ||\n        this.pageSelected === this.PAGES.success ||\n        this.pageSelected === this.PAGES.error\n      );\n    },\n  },\n  watch: {\n    async contextSelected() {\n      await this.updateNetworks();\n      this.networkSelected = undefined;\n    },\n\n    async networkSelected() {\n      this.updateDevices();\n      this.deviceSelected = undefined;\n    },\n  },\n};\n</script>\n\n<style scoped>\n.mdDialogContainer {\n  width: 60%;\n  height: 600px;\n}\n\n.mdDialogContainer .dialogTitle {\n  text-align: center;\n}\n\n.mdDialogContainer .content {\n  padding: 0 10px 24px 24px;\n}\n\n.mdDialogContainer .content .state {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.mdDialogContainer .content .progress-bar {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n}\n\n.mdDialogContainer .content .progress-bar .percent-number {\n  font-size: 1.8em;\n  margin: 10px 0;\n}\n\n.mdDialogContainer .content .progress-bar .percent-bar {\n  width: 90%;\n}\n</style>\n\n<style>\n.mdDialogContainer .md-dialog-container {\n  max-width: 100%;\n  max-height: 100%;\n}\n</style>","import { SpinalGraphService } from \"spinal-env-viewer-graph-service\";\nimport networkService from \"../../network/networkService\";\n\nimport {\n  AttributesUtilities,\n  LinkBmsDeviceService,\n} from \"spinal-env-viewer-plugin-network-tree-service\";\nimport { SpinalBmsDevice } from \"spinal-model-bmsnetwork\";\n\nexport default {\n  getBmsDevicesContextTreeStructure() {\n    return networkService.getDeviceContextTreeStructure();\n  },\n\n  getAutomateBims(nodeId, contextId) {\n    const nodeRef = SpinalGraphService.getInfo(nodeId);\n    if (nodeRef.isAutomate && nodeRef.isAutomate.get()) return [nodeRef.get()];\n\n    return SpinalGraphService.findInContext(nodeId, contextId, (node) => {\n      if (node.info.isAutomate && node.info.isAutomate.get()) {\n        SpinalGraphService._addNode(node);\n        return true;\n      }\n\n      return false;\n    }).then((result) => {\n      return result.map((el) => el.get());\n    });\n  },\n\n  async createLinkBetweenBimAndBms(bmsContextId, validResultList, percent) {\n    console.log(\"use profile\");\n    const listeLength = validResultList.length;\n    let isError = false;\n    let counter = 0;\n\n    while (!isError && listeLength > counter) {\n      const { profileItem, automateItem } = validResultList[counter];\n      console.log(profileItem, automateItem);\n      if (profileItem && automateItem) {\n        try {\n          await LinkBmsDeviceService.LinkBmsDeviceToBimDevices(\n            bmsContextId,\n            profileItem.id,\n            automateItem.id\n          );\n\n          counter++;\n\n          percent = Math.floor((100 * counter) / listeLength);\n        } catch (error) {\n          console.error(error);\n          counter++;\n          // isError = true;\n        }\n      }\n    }\n  },\n\n  async createLinkBetweenBimAndBmsUsingAttribute(\n    bmsContextId,\n    validResultList,\n    percent\n  ) {\n    const listeLength = validResultList.length;\n    let isError = false;\n    let counter = 0;\n\n    while (!isError && listeLength > counter) {\n      const { profileItem, automateItem } = validResultList[counter];\n\n      if (profileItem && automateItem) {\n        try {\n          const bmsConfig = {\n            contextId: bmsContextId,\n            deviceId: profileItem.id,\n            attribute: {\n              attributeName: profileItem.property.attributeName,\n              categoryName: profileItem.property.categoryName,\n            },\n          };\n\n          const bimConfig = {\n            nodeId: automateItem.id,\n            model: window.spinal.BimObjectService.getModelByBimfile(\n              automateItem.bimFileId\n            ),\n            attribute: {\n              attributeName: automateItem.property.attributeName,\n              categoryName: automateItem.property.categoryName,\n            },\n          };\n\n          await LinkBmsDeviceService.LinkBmsDeviceToBimDevicesUsingAttribute(\n            bmsConfig,\n            bimConfig\n          );\n\n          counter++;\n\n          percent = Math.floor((100 * counter) / listeLength);\n        } catch (error) {\n          console.error(error);\n          counter++;\n          // isError = true;\n        }\n      }\n    }\n  },\n\n  getLinkResultBetweenBimAndBms(\n    bmsAttributeName,\n    contextSelected,\n    networkSelected,\n    deviceSelected,\n    listObj,\n    bimAutomates,\n    bimAttributeName,\n    configuration\n  ) {\n    return this.getProperties(\n      bmsAttributeName,\n      contextSelected,\n      networkSelected,\n      deviceSelected,\n      listObj,\n      bimAutomates,\n      bimAttributeName\n    )\n      .then(([bmsDevices, bimDevices]) => {\n        const res = {\n          valids: [],\n          invalidAutomateItems: [...bimDevices.invalidItems],\n          invalidProfileItems: [],\n        };\n\n        const { bimData, bmsData } = configuration;\n\n        const bmsDeviceObj = this.transFormToObj(\n          bmsDevices,\n          bmsData.useFunction,\n          bmsData.callback.code\n        );\n\n        for (const bim of bimDevices.validItems) {\n          const bimPropValue = this._formatProperty(\n            bim.property.displayValue,\n            bimData.useFunction,\n            bimData.callback.code\n          );\n          let found = bmsDeviceObj[bimPropValue];\n          if (found) {\n            delete bmsDeviceObj[bimPropValue];\n            res.valids.push({ automateItem: bim, profileItem: found });\n          } else {\n            res.invalidAutomateItems.push(bim);\n          }\n        }\n\n        const keys = Object.keys(bmsDeviceObj);\n        res.invalidProfileItems = keys.map((key) => bmsDeviceObj[key]);\n\n        return res;\n      })\n      .catch((err) => {\n        throw err;\n      });\n  },\n\n  getProperties(\n    bmsAttributeName,\n    contextSelected,\n    networkSelected,\n    deviceSelected,\n    listObj,\n    bimAutomates,\n    bimAttributeName\n  ) {\n    const bmsPropsProm = this._getBmsDevicesProperties(\n      bmsAttributeName,\n      contextSelected,\n      networkSelected,\n      deviceSelected,\n      listObj\n    );\n\n    const bimPropsProm = this._getAutomateBimProperties(\n      bimAutomates,\n      bimAttributeName\n    );\n\n    return Promise.all([bmsPropsProm, bimPropsProm]);\n  },\n\n  _getBmsDevicesProperties(\n    attributeName,\n    contextSelected,\n    networkSelected,\n    deviceSelected,\n    listObj\n  ) {\n    const bmsDevices = this._findDevices(\n      contextSelected,\n      networkSelected,\n      deviceSelected,\n      listObj\n    );\n\n    const promises = bmsDevices.map(async (el) => {\n      el.property = await AttributesUtilities.findSpinalAttributeById(\n        el.id,\n        attributeName\n      );\n      return el;\n    });\n\n    return Promise.all(promises);\n  },\n\n  _findDevices(contextSelected, networkSelected, deviceSelected, listObj) {\n    const nodeId = deviceSelected || networkSelected || contextSelected;\n\n    if (nodeId === deviceSelected) {\n      return listObj.devices.filter((el) => el.id === nodeId);\n    } else if (nodeId === networkSelected) {\n      const found = listObj.networks.find((el) => el.id === nodeId);\n      return found && found.devices ? found.devices : [];\n    } else if (nodeId === contextSelected) {\n      const devices = [];\n      const found = listObj.tree.find((el) => el.id === nodeId);\n\n      if (found && found.networks) {\n        for (const network of found.networks) {\n          if (network.devices) {\n            devices.push(...network.devices);\n          }\n        }\n      }\n\n      return devices;\n    }\n  },\n\n  _getAutomateBimProperties(bimAutomates, attributeName) {\n    const promises = bimAutomates.map(async (el) => {\n      //   const fileName = spinal.spinalGraphService\n      //     .getInfo(el.bimFileId)\n      //     .name.get();\n\n      const { bimFileId, dbid, id } = el;\n\n      const model = window.spinal.BimObjectService.getModelByBimfile(bimFileId);\n\n      // if (!model) throw \"make sure you load all scene\";\n\n      el.property = await AttributesUtilities.findAttribute(\n        model,\n        dbid,\n        attributeName,\n        id\n      );\n      return el;\n    });\n\n    try {\n      return Promise.all(promises).then((result) => {\n        return {\n          validItems: result.filter((el) => el.property),\n          invalidItems: result.filter((el) => !el.property),\n        };\n      });\n    } catch (error) {\n      throw error;\n    }\n  },\n\n  _formatProperty(propertyValue, useFunction, callback) {\n    if (useFunction) {\n      return this._formatValue(propertyValue, callback);\n    }\n\n    return propertyValue;\n  },\n\n  _formatValue(value, callback) {\n    return eval(`(${callback})('${value}')`);\n  },\n\n  transFormToObj(liste, useFunction, callback) {\n    const obj = {};\n\n    for (const item of liste) {\n      const prop = this._formatProperty(\n        item.property.displayValue,\n        useFunction,\n        callback\n      );\n      obj[prop] = item;\n    }\n\n    return obj;\n\n    // bmsDevices.find((el, i) => {\n    //   if (el.property) {\n    //     const bmsPropValue = console.log(bimPropValue, bmsPropValue);\n    //     if (bmsPropValue == bimPropValue) {\n    //       index = i;\n    //       return true;\n    //     }\n    //   }\n\n    //   return false;\n    // });\n  },\n};\n","import { SpinalGraphService } from \"spinal-env-viewer-graph-service\";\nimport { SpinalBmsNetwork, SpinalBmsDevice } from \"spinal-model-bmsnetwork\";\nimport { SpinalOrganConfigModel } from \"spinal-model-bacnet\";\n\nconst CONTEXT_TYPE = \"Network\";\n\nexport default {\n  getDeviceContextTreeStructure() {\n    const contexts = this.getContexts().map((el) => el.info.get());\n    const promises = contexts.map(async (context) => {\n      const networks = await this.getNetwork(context.id);\n\n      const promises2 = networks.map(async (network) => {\n        const devices = await this.getDevices(network.id);\n        network.devices = devices;\n        return network;\n      });\n\n      context.networks = await Promise.all(promises2);\n      return context;\n    });\n\n    return Promise.all(promises);\n  },\n\n  getContexts() {\n    return SpinalGraphService.getContextWithType(CONTEXT_TYPE);\n  },\n\n  async getNetwork(contextId) {\n    // return SpinalGraphService.getChildren(contextId, SpinalBmsNetwork.relationName).then((result) => {\n    //    return result.map(el => el.get())\n    // })\n\n    const networks = await SpinalGraphService.getChildrenInContext(\n      contextId,\n      contextId\n    );\n\n    const promises = networks.map((el) => {\n      if (el.type.get() === SpinalOrganConfigModel.TYPE)\n        return this.getNetworkFromOrgan(el.id.get());\n      return Promise.resolve(el);\n    });\n\n    return Promise.all(promises).then((result) => {\n      return result.flat().map((el) => el.get());\n    });\n  },\n\n  getNetworkFromOrgan(organId) {\n    return SpinalGraphService.getChildren(\n      organId,\n      SpinalBmsNetwork.relationName\n    );\n\n    //  const promises = organs.map((el) =>\n    // SpinalGraphService.getChildren(el.id.get(), SpinalBmsNetwork.relationName)\n    //  );\n\n    //  return Promise.all(promises).then((result) => {\n    //    return result.flat().map((el) => el.get());\n    //  });\n  },\n\n  getDevices(networkId) {\n    return SpinalGraphService.getChildren(\n      networkId,\n      SpinalBmsDevice.relationName\n    ).then((result) => {\n      return result.map((el) => el.get());\n    });\n  },\n};\n","<!--\nCopyright 2021 SpinalCom - www.spinalcom.com\n\nThis file is part of SpinalCore.\n\nPlease read all of the following terms and conditions\nof the Free Software license Agreement (\"Agreement\")\ncarefully.\n\nThis Agreement is a legally binding contract between\nthe Licensee (as defined below) and SpinalCom that\nsets forth the terms and conditions that govern your\nuse of the Program. By installing and/or using the\nProgram, you agree to abide by all the terms and\nconditions stated or referenced herein.\n\nIf you do not agree to abide by these terms and\nconditions, do not demonstrate your acceptance and do\nnot install or use the Program.\nYou should have received a copy of the license along\nwith this file. If not, see\n<http://resources.spinalcom.com/licenses.pdf>.\n-->\n\n<template>\n   <div class=\"linkerDialogsContent\">\n\n      <!-- <div class=\"content\"> -->\n      <edit-link\n         :data=\"data\"\n         :rightTitle=\"'BMS devices'\"\n         :leftTitle=\"'BIM devices'\"\n      ></edit-link>\n      <!-- </div> -->\n\n   </div>\n</template>\n\n<script>\nimport editLinkContent from \"../../components/links/editLinks.vue\";\n\nexport default {\n   name: \"editLinkToGTBDevice\",\n   props: { data: {} },\n   components: {\n      \"edit-link\": editLinkContent,\n   },\n   data() {\n      return {};\n   },\n   mounted() {\n      // console.log(\"mounted\");\n      // this.data = this._getResult(option.bmsDevices, option.bimDevices);\n   },\n   methods: {\n      // opened(option) {},\n      // removed(option) {\n      //    this.showDialog = false;\n      // },\n      // closeDialog(closeResult) {\n      //    if (typeof this.onFinised === \"function\") {\n      //       this.onFinised(closeResult);\n      //    }\n      // },\n   },\n};\n</script>\n\n<style scoped>\n.linkerDialogsContent {\n   width: 100%;\n   height: 100%;\n}\n\n/* .linkerDialogsContent .content {\n   width: 100%;\n   height: 100%;\n} */\n</style>","<!--\nCopyright 2022 SpinalCom - www.spinalcom.com\n\nThis file is part of SpinalCore.\n\nPlease read all of the following terms and conditions\nof the Free Software license Agreement (\"Agreement\")\ncarefully.\n\nThis Agreement is a legally binding contract between\nthe Licensee (as defined below) and SpinalCom that\nsets forth the terms and conditions that govern your\nuse of the Program. By installing and/or using the\nProgram, you agree to abide by all the terms and\nconditions stated or referenced herein.\n\nIf you do not agree to abide by these terms and\nconditions, do not demonstrate your acceptance and do\nnot install or use the Program.\nYou should have received a copy of the license along\nwith this file. If not, see\n<http://resources.spinalcom.com/licenses.pdf>.\n-->\n\n<template>\n  <div class=\"config_content\">\n    <div class=\"useThese\">\n      <md-checkbox class=\"md-primary\"\n                   v-model=\"properties.useTheseAttributes\">\n        Use also these configurations to link subItems</md-checkbox>\n    </div>\n\n    <div class=\"_container\">\n      <div class=\"subcontent\">\n        <div class=\"title\">BMS Attribute</div>\n        <div class=\"content\">\n          <div class=\"div_select\">\n            <!-- <md-field>\n              <label for=\"property\">BMS property</label>\n              <md-select v-model=\"bmsData.property\"\n                         name=\"Bms Property\"\n                         id=\"property\"\n                         placeholder=\"Bms Property\">\n                <md-option v-for=\"property in bmsProperties\"\n                           :value=\"property.value\"\n                           :key=\"property.value\">{{property.name}}</md-option>\n              </md-select>\n            </md-field> -->\n            <md-field>\n              <label>BMS Property</label>\n              <md-input v-model=\"bmsData.property\"></md-input>\n            </md-field>\n          </div>\n\n          <div class=\"div_code\">\n            <div class=\"checkbox_div\">\n              <md-checkbox class=\"md-primary\"\n                           v-model=\"bmsData.useFunction\">Use function to format\n                value</md-checkbox>\n            </div>\n\n            <div class=\"text_editor\"\n                 v-if=\"bmsData.useFunction\">\n              <spinal-code-mirror class=\"editorContainer\"\n                                  :codeObj=\"bmsData.callback\">\n              </spinal-code-mirror>\n            </div>\n          </div>\n\n        </div>\n      </div>\n      <div class=\"subcontent\">\n        <div class=\"title\">BIM Attribute</div>\n        <div class=\"content\">\n          <div class=\"div_select\">\n            <md-field>\n              <label>BIM Property</label>\n              <md-input v-model=\"bimData.property\"></md-input>\n            </md-field>\n          </div>\n\n          <div class=\"div_code\">\n            <div class=\"checkbox_div\">\n              <md-checkbox class=\"md-primary\"\n                           v-model=\"bimData.useFunction\">Use function to format\n                value</md-checkbox>\n            </div>\n\n            <div class=\"text_editor\"\n                 v-if=\"bimData.useFunction\">\n              <spinal-code-mirror class=\"editorContainer\"\n                                  :codeObj=\"bimData.callback\">\n              </spinal-code-mirror>\n            </div>\n\n          </div>\n\n        </div>\n      </div>\n    </div>\n  </div>\n\n</template>\n\n<script>\nimport { SpinalBmsDevice } from \"spinal-model-bmsnetwork\";\nimport SpinalCodeMirror from \"../../components/code-mirror/SpinalCodeMirror.vue\";\n\nexport default {\n  name: \"configurationTemplate\",\n  props: {\n    bimData: {},\n    bmsData: {},\n    properties: {},\n  },\n  components: { \"spinal-code-mirror\": SpinalCodeMirror },\n  data() {\n    return {\n      bmsProperties: [],\n    };\n  },\n  mounted() {\n    this.bmsProperties = this.getBmsProperties();\n  },\n  methods: {\n    getBmsProperties() {\n      // const device = new SpinalBmsDevice();\n      // return device._attribute_names.map((element) => ({\n      //    name: element,\n      //    value: element,\n      // }));\n      return [\n        {\n          name: \"Device ID\",\n          value: \"id\",\n        },\n        {\n          name: \"Device Name\",\n          value: \"name\",\n        },\n        {\n          name: \"IP address\",\n          value: \"address\",\n        },\n        {\n          name: \"Mac address\",\n          value: \"hostId\",\n        },\n      ];\n    },\n  },\n};\n</script>\n\n\n<style scoped>\n.config_content {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n}\n\n.config_content .useThese {\n  width: 100%;\n  height: 9%;\n  display: flex;\n  align-items: center;\n  font-size: 1.3em;\n}\n\n.config_content ._container {\n  width: 100%;\n  height: 90%;\n  display: flex;\n  justify-content: space-between;\n}\n\n.config_content ._container .subcontent {\n  width: 49%;\n  height: 100%;\n  border: 1px solid #ffffff;\n  border-radius: 5%;\n}\n\n.config_content ._container .subcontent .title {\n  width: 100%;\n  height: 50px;\n  border-bottom: 1px solid white;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.config_content ._container .subcontent .content {\n  height: calc(100% - 50px);\n  padding: 0 7px;\n}\n\n.config_content ._container .subcontent .content .div_select {\n  width: 100%;\n  height: 50px;\n}\n\n.config_content ._container .subcontent .content .div_code {\n  width: 100%;\n  height: calc(100% - 60px);\n}\n\n.config_content ._container .subcontent .content .div_code .checkbox_div {\n  width: 100%;\n  height: 50px;\n}\n\n.config_content ._container .subcontent .content .div_code .text_editor {\n  width: 100%;\n  height: calc(100% - 50px);\n}\n</style>\n\n<style>\n.config_content\n  ._container\n  .subcontent\n  .content\n  .div_code\n  .text_editor\n  .CodeMirror.cm-s-monokai.CodeMirror-wrap {\n  width: 100%;\n  height: 98%;\n}\n</style>","import dedent from 'dedent';\n\nexport default dedent`\n   /**\n   *   1 - Don't change the function name and parameters\n   *   2 - This function must return a String (the naming convention)\n   *   3 - Change function content to match with your test\n   *   4 - All your code must be inside the function\n   */\n\n   function formatAttributeValue(attributeValue) {\n      return attributeValue.replaceAll('_', '-');\n   }\n\n`","import dedent from 'dedent';\n\nexport default dedent`\n   /**\n   *   1 - Don't change the function name and parameters\n   *   2 - This function must return a String (the naming convention)\n   *   3 - Change function content to match with your test\n   *   4 - All your code must be inside the function\n   */\n\n   function formatAttributeValue(attributeValue) {\n      return attributeValue.replaceAll('-', '_');\n   }\n\n`","import Vue from \"vue\";\n\nimport {\n  SpinalForgeExtention,\n} from \"spinal-env-viewer-panel-manager-service_spinalforgeextention\";\n\n\nimport GenerateAutomateContext from \"./generateAutomateContext.vue\";\nimport detailPanel from \"./detailPanel.vue\";\n\n\nconst panels = [\n  {\n    name: \"generateAutomateContextPanel\",\n    vueMountComponent: Vue.extend(GenerateAutomateContext),\n    panel: {\n      title: \"Generate Automate\",\n      closeBehaviour: \"hide\",\n    },\n    style: {\n      height: \"475px\",\n      left: \"400px\",\n    },\n  },\n  {\n    name: \"networkTreeDetailPanel\",\n    vueMountComponent: Vue.extend(detailPanel),\n    panel: {\n      title: \"Network tree detail panel\",\n      closeBehaviour: \"hide\"\n    },\n    style: {\n      height: \"475px\",\n      left: \"400px\"\n    }\n  }\n];\n\n\nfor (const element of panels) {\n  const panelExtension = SpinalForgeExtention.createExtention(element);\n  SpinalForgeExtention.registerExtention(element.name, panelExtension);\n}","/*\n * Copyright 2018 SpinalCom - www.spinalcom.com\n *\n * This file is part of SpinalCore.\n *\n * Please read all of the following terms and conditions\n * of the Free Software license Agreement (\"Agreement\")\n * carefully.\n *\n * This Agreement is a legally binding contract between\n * the Licensee (as defined below) and SpinalCom that\n * sets forth the terms and conditions that govern your\n * use of the Program. By installing and/or using the\n * Program, you agree to abide by all the terms and\n * conditions stated or referenced herein.\n *\n * If you do not agree to abide by these terms and\n * conditions, do not demonstrate your acceptance and do\n * not install or use the Program.\n * You should have received a copy of the license along\n * with this file. If not, see\n * <http://resources.spinalcom.com/licenses.pdf>.\n */\n\nconst {\n  spinalPanelManagerService,\n  SpinalPanelApp\n} = require(\"spinal-env-viewer-panel-manager-service\");\n\nconst SpinalForgeExtention = require(\"./SpinalForgeExtention.js\")(\n  spinalPanelManagerService,\n  SpinalPanelApp\n);\n\nmodule.exports = {\n  SpinalForgeExtention\n};\n","/*\n * Copyright 2023 SpinalCom - www.spinalcom.com\n * \n * This file is part of SpinalCore.\n * \n * Please read all of the following terms and conditions\n * of the Free Software license Agreement (\"Agreement\")\n * carefully.\n * \n * This Agreement is a legally binding contract between\n * the Licensee (as defined below) and SpinalCom that\n * sets forth the terms and conditions that govern your\n * use of the Program. By installing and/or using the\n * Program, you agree to abide by all the terms and\n * conditions stated or referenced herein.\n * \n * If you do not agree to abide by these terms and\n * conditions, do not demonstrate your acceptance and do\n * not install or use the Program.\n * You should have received a copy of the license along\n * with this file. If not, see\n * <http://resources.spinalcom.com/licenses.pdf>.\n */\n\nfunction configInit(option) {\n  const cfg = {};\n  if (typeof option.toolbar !== \"undefined\") {\n    cfg.toolbar = {\n      icon: option.toolbar.icon || \"done\",\n      label: option.toolbar.label || \"label\",\n      subToolbarName: option.toolbar.subToolbarName || \"spinalcom\",\n      styleBtn: {},\n      styleIcon: {}\n    };\n    Object.assign(cfg.toolbar.styleBtn, option.toolbar.styleBtn);\n    Object.assign(cfg.toolbar.styleIcon, option.toolbar.styleIcon);\n  }\n  if (typeof option.panel !== \"undefined\") {\n    cfg.panel = {\n      title: option.panel.title || \"Spinalcom Panel\",\n      classname: option.panel.classname || \"spinal-pannel\",\n      closeBehaviour: option.panel.closeBehaviour || \"hide\"\n    };\n    if (typeof option.style !== \"undefined\") {\n      cfg.style = {};\n      Object.assign(cfg.style, option.style);\n    }\n  }\n  cfg.name = option.name || \"spinalExtention\";\n  cfg.vueMountComponent = option.vueMountComponent;\n  cfg.onLoad = option.onLoad;\n  cfg.onUnLoad = option.onUnLoad;\n  return cfg;\n}\n\nfunction onToolbarCreated() {\n  this.viewer.removeEventListener(\n    window.Autodesk.Viewing.TOOLBAR_CREATED_EVENT,\n    this.onToolbarCreatedBinded\n  );\n  this.onToolbarCreatedBinded = null;\n  createToolbar.call(this);\n}\n\nfunction createToolbar() {\n  this.toolbarButton = new window.Autodesk.Viewing.UI.Button(\n    this.cfg.toolbar.label\n  );\n  this.toolbarButton.onClick = () => {\n    this.tooglePanel(this.cfg);\n  };\n  var icon = this.toolbarButton.container.firstChild;\n  icon.className = \"adsk-button-icon md-icon md-icon-font md-theme-default\";\n  icon.innerHTML = this.cfg.toolbar.icon;\n\n  for (var key in this.cfg.toolbar.styleIcon) {\n    if (this.cfg.toolbar.styleIcon.hasOwnProperty(key)) {\n      icon.style[key] = this.cfg.toolbar.styleIcon[key];\n    }\n  }\n  for (var key in this.cfg.toolbar.styleBtn) {\n    if (this.cfg.toolbar.styleBtn.hasOwnProperty(key)) {\n      this.toolbarButton.container.style[key] = this.cfg.toolbar.styleBtn[key];\n    }\n  }\n\n  this.toolbarButton.setToolTip(this.cfg.toolbar.label);\n  this.subToolbar = this.viewer.toolbar.getControl(\n    this.cfg.toolbar.subToolbarName\n  );\n  if (!this.subToolbar) {\n    this.subToolbar = new window.Autodesk.Viewing.UI.ControlGroup(\n      this.cfg.toolbar.subToolbarName\n    );\n    this.viewer.toolbar.addControl(this.subToolbar);\n  }\n  this.subToolbar.addControl(this.toolbarButton);\n}\n\nfunction closeComponent() {\n  if (this.cfg.panel.closeBehaviour !== \"hide\") {\n    try {\n      this.component.removed.call(this.component);\n    } catch (e) {\n      console.error(e);\n    }\n    this.panel.container.remove();\n    this.panel = null;\n  } else {\n    try {\n      this.component.closed.call(this.component);\n    } catch (e) {\n      console.error(e);\n    }\n  }\n}\n\nfunction getPanel() {\n  if (this.panel === null) {\n    this.panel = new window.PanelClass(this.viewer, this.cfg.panel.title);\n    var _container = document.createElement(\"div\");\n    var _scrollContainer = this.panel.createScrollContainer();\n\n    _container.className +=\n      this.panel.container.id + \"-panelcontainer \" + this.cfg.panel.classname;\n    for (var key in this.cfg.style) {\n      if (this.cfg.style.hasOwnProperty(key)) {\n        this.panel.container.style[key] = this.cfg.style[key];\n      }\n    }\n\n    if (this.panel.container.style.left) {\n      this.panel.container.style.left = \"0\";\n    }\n\n    this.panel.container.appendChild(_scrollContainer);\n    _scrollContainer.style.height = \"calc(100% - 52px)\";\n    _scrollContainer.appendChild(_container);\n\n    var _footer = this.panel.createFooter();\n    this.panel.container.appendChild(_footer);\n\n    if (this.cfg.vueMountComponent) {\n      this.component = new this.cfg.vueMountComponent().$mount(_container);\n    }\n\n    const _this = this;\n    this.panel.addVisibilityListener(open => {\n      if (!open) {\n        closeComponent.call(_this);\n      }\n    });\n  }\n  return this.panel;\n}\n\n/**\n *\n *\n * @param {*} spinalPanelManagerService\n * @param {*} SpinalPanelApp\n * @returns {object} { createExtention, registerExtention }\n */\nmodule.exports = function (spinalPanelManagerService, SpinalPanelApp) {\n  return {\n    /**\n     * factory function to create a dynamic class that extends the `SpinalPanelApp` class\n     *```js\n{\n  name: \"extention_name\",\n  vueMountComponent: Vue.extend(aVueCompoment),\n  onLoad: () => {console.log(\"onLoad\");},\n  onUnLoad: () => {console.log(\"onUnLoad\");},\n  toolbar: {\n    icon: \"done\",\n    label: \"testLabel\",\n    subToolbarName: \"spinalcom\"\n  },\n  panel: {\n    title: \"Spinalcom Panel\",\n    classname: \"spinal-pannel\",\n    closeBehaviour: \"hide\"\n  },\n  style: {}\n}\n```\n     * @param {object} option see description\n     * @returns SpinalForgeExtention\n     */\n    createExtention(option) {\n      const cfg = configInit(option);\n      /**\n       * class returned by createExtention\n       * this extention is also registered in autodesk viweer\n       * @extends SpinalPanelApp\n       * @property {AutodeskViewer} viewer the autodesk view\n       * @property {AutodeskPanel} panel the panel\n       * @property {Vue.component} component the component mounted\n       * @property {Object} cfg the option given on creation\n       */\n      const SpinalForgeExtention = class extends SpinalPanelApp {\n        constructor(viewer, options) {\n          super();\n          window.Autodesk.Viewing.Extension.call(this, viewer, options);\n          this.viewer = viewer;\n          this.panel = null;\n          this.cfg = cfg;\n          spinalPanelManagerService.registerPanel(cfg.name, this);\n        }\n        /**\n         * method called on load of the extention (managed by the autodesk viewer)\n         * the method create a button in the toolbar if put in the option of `createExtention`.\n         */\n        load() {\n          if (typeof cfg.toolbar !== \"undefined\") {\n            // add toolbar\n            if (this.viewer.toolbar) {\n              createToolbar.call(this);\n            } else {\n              this.onToolbarCreatedBinded = onToolbarCreated.bind(this);\n              this.viewer.addEventListener(\n                window.Autodesk.Viewing.TOOLBAR_CREATED_EVENT,\n                this.onToolbarCreatedBinded\n              );\n            }\n          }\n          if (typeof cfg.onLoad !== \"undefined\") cfg.onLoad.call(this);\n          return true;\n        }\n        /**\n         * method called when the viewer unload of the extention\n         * (managed by the autodesk viewer)\n         */\n        unload() {\n          if (typeof cfg.toolbar !== \"undefined\") {\n            this.viewer.subToolbar.removeControl(this.toolbarButton);\n          }\n          if (typeof cfg.onUnLoad !== \"undefined\") cfg.onUnLoad.call(this);\n          return true;\n        }\n\n        activate() {\n          return this.load();\n        }\n\n        deactivate() {\n          return this.unload();\n        }\n\n        /**\n         *\n         * @param {*} option\n         */\n        openPanel(option) {\n          const panel = getPanel.call(this);\n          panel.setVisible(true);\n          try {\n            this.component.opened.call(this.component, option, this.viewer);\n          } catch (e) {\n            console.error(e);\n          }\n        }\n        /**\n         *\n         *\n         * @param {*} option\n         */\n        closePanel(option) {\n          const panel = getPanel.call(this);\n          panel.setVisible(false);\n        }\n        /**\n         *\n         *\n         * @param {*} option\n         */\n        tooglePanel(option) {\n          if (this.panel === null || this.panel.isVisible() === false) {\n            this.openPanel.call(this, option);\n          } else { this.closePanel.call(this, option); }\n        }\n      };\n      return SpinalForgeExtention;\n    },\n\n    /**\n     * Method to register an extention to the viewer and the forge viewer\n     * @param {string} name name of the extention\n     * @param {*} classExtention an extention created by `createExtention`\n     */\n    registerExtention(name, classExtention) {\n      // register to forge\n      window.Autodesk.Viewing.theExtensionManager.registerExtension(\n        name,\n        classExtention\n      );\n      // register to viewer\n      window.spinal.ForgeExtentionManager.addExtention(name);\n    }\n  };\n};\n","<!--\nCopyright 2020 SpinalCom - www.spinalcom.com\n\nThis file is part of SpinalCore.\n\nPlease read all of the following terms and conditions\nof the Free Software license Agreement (\"Agreement\")\ncarefully.\n\nThis Agreement is a legally binding contract between\nthe Licensee (as defined below) and SpinalCom that\nsets forth the terms and conditions that govern your\nuse of the Program. By installing and/or using the\nProgram, you agree to abide by all the terms and\nconditions stated or referenced herein.\n\nIf you do not agree to abide by these terms and\nconditions, do not demonstrate your acceptance and do\nnot install or use the Program.\nYou should have received a copy of the license along\nwith this file. If not, see\n<http://resources.spinalcom.com/licenses.pdf>.\n-->\n\n<template>\n   <div class=\"generation_container\">\n      <md-steppers\n         md-vertical\n         class=\"steppers\"\n         :md-dynamic-height=\"true\"\n         @md-changed=\"changeStep\"\n      >\n\n         <md-step\n            id=\"first\"\n            md-label=\"Controller selection\"\n            md-description=\"Select all controllers\"\n         >\n            <div class=\"step-container md-scrollbar\">\n               <selection-step\n                  :config=\"data.objAutomate\"\n                  @clear=\"clearAutomates\"\n                  @changed=\"() => this.changed = true\"\n               ></selection-step>\n            </div>\n\n         </md-step>\n\n         <md-step\n            id=\"second\"\n            md-label=\"Selection of controlled objects\"\n            md-description=\"Select all controlled objects\"\n         >\n            <md-content class=\"step-container md-scrollbar\">\n               <selection-step\n                  :config=\"data.objEquipment\"\n                  @clear=\"clearEquipments\"\n                  @changed=\"() => this.changed = true\"\n               ></selection-step>\n            </md-content>\n         </md-step>\n\n         <md-step\n            id=\"third\"\n            md-label=\"Configuration Controllers and objects association\"\n            md-description=\"Wich objects are controlled by which controller\"\n            :md-error=\"errorInConfig\"\n         >\n            <md-content class=\"step-container md-scrollbar\">\n               <configuration-step\n                  :automateObj=\"data.objAutomate\"\n                  :equipmentObj=\"data.objEquipment\"\n                  :attribute=\"data.attribute\"\n                  @changed=\"() => this.changed = true\"\n               ></configuration-step>\n            </md-content>\n\n         </md-step>\n\n         <md-step\n            id=\"fourth\"\n            md-label=\"Configure naming Convention\"\n            md-description=\"create the network tree structure\"\n         >\n            <naming-convention-step :config=\"data.namingConvention\"></naming-convention-step>\n         </md-step>\n\n         <md-step\n            id=\"fifth\"\n            md-label=\"Creation Step\"\n            md-description=\"create the network tree structure\"\n         >\n\n            <div class=\"step-container md-scrollbar\">\n               <launch-generation-step\n                  :automatesObj=\"data.objAutomate\"\n                  :equipmentsObj=\"data.objEquipment\"\n                  :attribute=\"data.attribute\"\n                  :namingConvention=\"data.namingConvention\"\n                  :contextId=\"contextId\"\n                  :selectedNodeId=\"selectedNodeId\"\n                  :changed=\"changed\"\n                  @verified=\"() => this.changed = false\"\n               >\n               </launch-generation-step>\n            </div>\n\n         </md-step>\n\n      </md-steppers>\n   </div>\n</template>\n\n<script>\nimport ConfigurationStep from \"../components/steps/configurationStep.vue\";\nimport launchGenerationStep from \"../components/steps/launchStep.vue\";\nimport selectionStep from \"../components/steps/selectionStep.vue\";\nimport namingConventionStep from \"../components/steps/namingConventionStep.vue\";\n\nimport { CONSTANTS } from \"spinal-env-viewer-plugin-network-tree-service\";\n\n// import { OBJECT_ATTR } from \"../../js/attributeConfig\";\n\nexport default {\n   name: \"heatmapPanel\",\n   components: {\n      \"configuration-step\": ConfigurationStep,\n      \"launch-generation-step\": launchGenerationStep,\n      \"selection-step\": selectionStep,\n      \"naming-convention-step\": namingConventionStep,\n   },\n   data() {\n      return {\n         changed: false,\n         active: \"first\",\n         first: false,\n         second: false,\n         third: false,\n         firstStepError: false,\n         errorInConfig: null,\n         contextId: \"\",\n         selectedNodeId: \"\",\n         data: {\n            objAutomate: {\n               attributeName: \"CFA_Repre d'quipement\",\n               // attributeName: \"CFA_Code quipement\",\n               items: [],\n            },\n            objEquipment: {\n               attributeName: \"CFA_Repre d'quipement\",\n               // attributeName: \"CFA_Code quipement\",\n               items: [],\n            },\n            attribute: {\n               isRegex: true,\n               text: \"\",\n               flags: [],\n               select: CONSTANTS.OBJECT_ATTR,\n               callback: () => {},\n            },\n            namingConvention: {\n               attributeName: \"CFA_Repre d'quipement\",\n               useAttrValue: true,\n               personalized: {\n                  callback: () => {},\n               },\n            },\n            // attribute: {\n            //    id: Date.now(),\n            //    attributeName: \"Attribut GTB\",\n            //    separator: \"_\",\n            //    indice: 3,\n            // },\n         },\n         errors: {\n            firstStep: { error: false, message: \"\" },\n            secondStep: { error: false, message: \"\" },\n            thirdStep: { error: false, message: \"\" },\n         },\n      };\n   },\n   methods: {\n      async opened(option) {\n         this.contextId = option.context.id;\n         this.selectedNodeId = option.selectedNode.id;\n      },\n\n      closed() {},\n\n      clearAutomates() {\n         this.data.objAutomate.items = [];\n         this.changed = true;\n      },\n\n      clearEquipments() {\n         this.data.objEquipment.items = [];\n         this.changed = true;\n      },\n\n      errorInFirstStep() {\n         this.errorInConfig = \"This is an error!\";\n      },\n\n      changeStep(step) {},\n   },\n   computed: {\n      // attribute_attributeName() {\n      //    return this.data.attribute.attributeName;\n      // },\n      // attribute_separator() {\n      //    return this.data.attribute.separator;\n      // },\n      // attribute_indice() {\n      //    return this.data.attribute.indice;\n      // },\n   },\n   watch: {\n      attribute_attributeName() {\n         this.changed = true;\n      },\n\n      attribute_separator() {\n         this.changed = true;\n      },\n\n      attribute_indice() {\n         this.changed = true;\n      },\n   },\n};\n</script>\n\n<style scoped>\n.generation_container {\n   width: 100%;\n   height: 100%;\n   padding: unset;\n}\n\n.generation_container .selection_content {\n   width: 100%;\n   min-height: 150px;\n   display: flex;\n   flex-direction: column;\n}\n\n.generation_container .selection_content .text {\n   width: 100%;\n   height: 50px;\n   display: flex;\n   align-items: center;\n   justify-content: center;\n}\n\n.generation_container .attribute {\n   padding: 0px 10px 0px 10px;\n}\n\n.generation_container .selection_content .buttons {\n   display: flex;\n   justify-content: center;\n   align-items: center;\n}\n\n.generation_container .launch_content {\n   display: flex;\n   justify-content: center;\n   align-items: center;\n}\n</style>\n\n<style>\n/*\n.generation_container .attribute {\n}\n\n.generation_container .launch_content .md-button {\n}*/\n</style>\n\n<style>\n.generation_container .steppers .md-field {\n   min-height: unset;\n}\n</style>","<!--\nCopyright 2020 SpinalCom - www.spinalcom.com\nThis file is part of SpinalCore.\nPlease read all of the following terms and conditions\nof the Free Software license Agreement (\"Agreement\")\ncarefully.\nThis Agreement is a legally binding contract between\nthe Licensee (as defined below) and SpinalCom that\nsets forth the terms and conditions that govern your\nuse of the Program. By installing and/or using the\nProgram, you agree to abide by all the terms and\nconditions stated or referenced herein.\nIf you do not agree to abide by these terms and\nconditions, do not demonstrate your acceptance and do\nnot install or use the Program.\nYou should have received a copy of the license along\nwith this file. If not, see\n<http://resources.spinalcom.com/licenses.pdf>.\n-->\n\n<template>\n\t<div class=\"_container\">\n\t\t<div class=\"content\" v-if=\"isLoaded\">\n\t\t\t<md-list class=\"radios\">\n\t\t\t\t<md-list-item\n\t\t\t\t\tv-for=\"(item, index) in radios\"\n\t\t\t\t\t:key=\"index\"\n\t\t\t\t\tv-tooltip=\"item.name\"\n\t\t\t\t>\n\t\t\t\t\t<md-radio\n\t\t\t\t\t\tclass=\"md-primary\"\n\t\t\t\t\t\tv-model=\"attributeConfigSelected\"\n\t\t\t\t\t\t:value=\"item.id\"\n\t\t\t\t\t\t>{{ item.name }}</md-radio\n\t\t\t\t\t>\n\t\t\t\t</md-list-item>\n\n\t\t\t\t<md-list-item>\n\t\t\t\t\t<md-radio\n\t\t\t\t\t\tclass=\"md-primary\"\n\t\t\t\t\t\tv-model=\"attributeConfigSelected\"\n\t\t\t\t\t\t:value=\"-1\"\n\t\t\t\t\t\t:disabled=\"true\"\n\t\t\t\t\t\t><a @click=\"personalized\">Personalized</a></md-radio\n\t\t\t\t\t>\n\t\t\t\t</md-list-item>\n\t\t\t</md-list>\n\n\t\t\t<!-- <div class=\"md-layout md-gutter\">\n        <div class=\"md-layout-item md-size-33\">\n          <md-field>\n            <label>Attribute name</label>\n            <md-input v-model=\"attribute.attributeName\"></md-input>\n          </md-field>\n        </div>\n\n        <div class=\"md-layout-item md-size-33\">\n          <md-field>\n            <label>Separator</label>\n            <md-input v-model=\"attribute.separator\"></md-input>\n          </md-field>\n        </div>\n\n        <div class=\"md-layout-item md-size-33\">\n          <md-field>\n            <label>index</label>\n            <md-input v-model=\"attribute.indice\"\n                      type=\"number\"></md-input>\n          </md-field>\n        </div>\n      </div> -->\n\t\t</div>\n\t\t<div class=\"loading\" v-else>loading...</div>\n\t</div>\n</template>\n\n<script>\n\timport { DEFAULT_VALUES } from \"../../../js/attributeConfig\";\n\timport { spinalPanelManagerService } from \"spinal-env-viewer-panel-manager-service\";\n\texport default {\n\t\tname: \"configuration\",\n\t\tprops: {\n\t\t\t// data: {},\n\t\t\t// automateObj: {},\n\t\t\t// equipmentObj: {},\n\t\t\tattribute: {},\n\t\t},\n\t\tdata() {\n\t\t\tthis.radios = DEFAULT_VALUES;\n\t\t\treturn {\n\t\t\t\tattributeConfigSelected: \"\",\n\t\t\t\tisLoaded: true,\n\t\t\t};\n\t\t},\n\t\tmethods: {\n\t\t\trefresh() {\n\t\t\t\tthis.isLoaded = false;\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.isLoaded = true;\n\t\t\t\t}, 300);\n\t\t\t},\n\t\t\t// goToNext() {\n\t\t\t//   this.$emit(\"next\", { id: \"first\", index: \"second\" });\n\t\t\t// }\n\t\t\tpersonalized() {\n\t\t\t\tspinalPanelManagerService.openPanel(\"personalizedAttributeDialog\", {\n\t\t\t\t\tisPersonalized: this.attributeConfigSelected == -1,\n\t\t\t\t\tattribute: this.attribute,\n\t\t\t\t\tcallback: (useRegex, res) => {\n\t\t\t\t\t\tthis.attributeConfigSelected = -1;\n\t\t\t\t\t\tthis.attribute.isRegex = useRegex;\n\t\t\t\t\t\tif (useRegex) {\n\t\t\t\t\t\t\tthis.attribute.text = res.text;\n\t\t\t\t\t\t\tthis.attribute.flags = res.flags;\n\t\t\t\t\t\t\tthis.attribute.select = res.select;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.attribute.text = \"\";\n\t\t\t\t\t\t\tthis.attribute.flags = [];\n\t\t\t\t\t\t\tthis.attribute.select = \"\";\n\t\t\t\t\t\t\tthis.attribute.callback = res.code;\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t},\n\t\t},\n\t\twatch: {\n\t\t\tattributeConfigSelected() {\n\t\t\t\tconsole.log(\n\t\t\t\t\t\"attributeConfigSelected\",\n\t\t\t\t\tthis.attributeConfigSelected\n\t\t\t\t);\n\t\t\t\tif (this.attributeConfigSelected > -1) {\n\t\t\t\t\tconst found = this.radios.find(\n\t\t\t\t\t\t(el) => el.id == this.attributeConfigSelected\n\t\t\t\t\t);\n\t\t\t\t\tthis.attribute.isRegex = true;\n\t\t\t\t\tthis.attribute.text = found.value;\n\t\t\t\t\tthis.attribute.flags = found.flags || [];\n\t\t\t\t\tthis.attribute.select = found.select;\n\t\t\t\t}\n\n\t\t\t\tthis.$emit(\"changed\");\n\t\t\t},\n\t\t},\n\t};\n</script>\n\n<style scoped>\n\t._container {\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\tpadding: 0 0 0 0;\n\t}\n\t._container .content {\n\t\twidth: 100%;\n\t\theight: 100%;\n\t}\n\t/* .container .buttons {\n  width: 100%;\n  height: 10%;\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n} */\n</style>\n\n<style>\n\t._container\n\t\t.content\n\t\t.radios\n\t\t.md-list-item-content\n\t\t> .md-checkbox:first-child,\n\t._container .content .md-list-item-content > .md-radio:first-child {\n\t\twidth: 100%;\n\t\tmargin-right: 0px;\n\t}\n\n\t._container\n\t\t.content\n\t\t.radios\n\t\t.md-list-item-content\n\t\t> .md-checkbox:first-child,\n\t._container .content .md-list-item-content > .md-radio .md-radio-label {\n\t\twidth: calc(100% - 60px);\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t}\n</style>\n","\n// export const PLC_ATTR = 'PLC';\n// export const OBJECT_ATTR = 'OBJ';\n\nimport { CONSTANTS } from \"spinal-env-viewer-plugin-network-tree-service\";\n\n// export const DEFAULT_VALUES = Object.freeze([\n//    { id: 0, name: \"Object controlled attribute value must contains PLC attribute value\", isRegex: true, select: OBJECT_ATTR, value: PLC_ATTR, flags: ['i'] },\n//    { id: 1, name: \"Object controlled attribute value must starts with the PLC attribute value\", isRegex: true, select: OBJECT_ATTR, value: `^${PLC_ATTR}`, flags: ['i'] },\n//    { id: 2, name: \"Object controlled attribute value must equal to the PLC attribute value\", isRegex: true, select: OBJECT_ATTR, value: `^${PLC_ATTR}$`, flags: ['i'] },\n//    { id: 3, name: \"Object controlled attribute value must ends with the PLC attribute value\", isRegex: true, select: OBJECT_ATTR, value: `${PLC_ATTR}$`, flags: ['i'] },\n// ])\n\nexport const DEFAULT_VALUES = Object.freeze([\n   { id: 0, name: \"Object controlled attribute value must contains PLC attribute value\", isRegex: true, select: CONSTANTS.OBJECT_ATTR, value: CONSTANTS.PLC_ATTR, flags: ['i'] },\n   { id: 1, name: \"Object controlled attribute value must starts with the PLC attribute value\", isRegex: true, select: CONSTANTS.OBJECT_ATTR, value: `^${CONSTANTS.PLC_ATTR}`, flags: ['i'] },\n   { id: 2, name: \"Object controlled attribute value must equal to the PLC attribute value\", isRegex: true, select: CONSTANTS.OBJECT_ATTR, value: `^${CONSTANTS.PLC_ATTR}$`, flags: ['i'] },\n   { id: 3, name: \"Object controlled attribute value must ends with the PLC attribute value\", isRegex: true, select: CONSTANTS.OBJECT_ATTR, value: `${CONSTANTS.PLC_ATTR}$`, flags: ['i'] },\n])","<!--\nCopyright 2020 SpinalCom - www.spinalcom.com\nThis file is part of SpinalCore.\nPlease read all of the following terms and conditions\nof the Free Software license Agreement (\"Agreement\")\ncarefully.\nThis Agreement is a legally binding contract between\nthe Licensee (as defined below) and SpinalCom that\nsets forth the terms and conditions that govern your\nuse of the Program. By installing and/or using the\nProgram, you agree to abide by all the terms and\nconditions stated or referenced herein.\nIf you do not agree to abide by these terms and\nconditions, do not demonstrate your acceptance and do\nnot install or use the Program.\nYou should have received a copy of the license along\nwith this file. If not, see\n<http://resources.spinalcom.com/licenses.pdf>.\n-->\n\n<template>\n\t<div class=\"content\">\n\t\t<div class=\"buttons\" v-if=\"appState === STATES.normal\">\n\t\t\t<md-button\n\t\t\t\tv-if=\"!verified\"\n\t\t\t\t:disabled=\"disableVerificationButton\"\n\t\t\t\tclass=\"md-raised md-primary\"\n\t\t\t\t@click=\"launchVerification\"\n\t\t\t>\n\t\t\t\tVerify\n\t\t\t</md-button>\n\n\t\t\t<div class=\"content-items\" v-else-if=\"verified\">\n\t\t\t\t<div class=\"content-item\">\n\t\t\t\t\t<md-button\n\t\t\t\t\t\tclass=\"resultVerification md-dense md-primary\"\n\t\t\t\t\t\t@click=\"selectItems(validItems)\"\n\t\t\t\t\t>\n\t\t\t\t\t\tValid item(s) :\n\t\t\t\t\t\t{{ validItems.length }}\n\t\t\t\t\t</md-button>\n\n\t\t\t\t\t<md-button\n\t\t\t\t\t\tclass=\"resultVerification md-dense md-accent\"\n\t\t\t\t\t\t@click=\"selectItems(invalidItems)\"\n\t\t\t\t\t>\n\t\t\t\t\t\tinvalid item(s) :\n\t\t\t\t\t\t{{ invalidItems.length }}\n\t\t\t\t\t</md-button>\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"content-item classifyContent\">\n\t\t\t\t\t<div class=\"checkbox\">\n\t\t\t\t\t\t<md-checkbox v-model=\"classify.class\" class=\"md-primary\"\n\t\t\t\t\t\t\t>Classify controllers By</md-checkbox\n\t\t\t\t\t\t>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"input\">\n\t\t\t\t\t\t<md-field>\n\t\t\t\t\t\t\t<label>Attribute name</label>\n\t\t\t\t\t\t\t<md-input\n\t\t\t\t\t\t\t\t:disabled=\"!classify.class\"\n\t\t\t\t\t\t\t\tv-model=\"classify.by\"\n\t\t\t\t\t\t\t></md-input>\n\t\t\t\t\t\t</md-field>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"content-item\">\n\t\t\t\t\t<md-checkbox v-model=\"dontCreateEmptyAutomate\" class=\"md-primary\"\n\t\t\t\t\t\t>Don't create Controllers which do not control\n\t\t\t\t\t\tequipment</md-checkbox\n\t\t\t\t\t>\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"content-item\">\n\t\t\t\t\t<md-button\n\t\t\t\t\t\t:disabled=\"error\"\n\t\t\t\t\t\tclass=\"md-raised md-primary\"\n\t\t\t\t\t\t@click=\"launchGeneration\"\n\t\t\t\t\t\t>Launch Generation</md-button\n\t\t\t\t\t>\n\n\t\t\t\t\t<!--  \n               <md-button\n                  :disabled=\"error\"\n                  class=\"md-raised md-primary\"\n               >Edit Links</md-button>-->\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class=\"state\" v-else-if=\"appState === STATES.loading\">\n\t\t\t<md-progress-spinner md-mode=\"indeterminate\"></md-progress-spinner>\n\t\t</div>\n\n\t\t<div class=\"progress-bar\" v-else-if=\"appState === STATES.creation\">\n\t\t\t<div class=\"percent-number\">{{ percent }} %</div>\n\t\t\t<!-- md-mode=\"determinate\" -->\n\t\t\t<md-progress-bar\n\t\t\t\tclass=\"percent-bar\"\n\t\t\t\tmd-mode=\"buffer\"\n\t\t\t\t:md-value=\"percent\"\n\t\t\t></md-progress-bar>\n\t\t</div>\n\n\t\t<div class=\"state\" v-else-if=\"appState === STATES.success\">\n\t\t\t<md-icon class=\"md-size-4x\">check</md-icon>\n\t\t</div>\n\n\t\t<div class=\"state\" v-else-if=\"appState === STATES.error\">\n\t\t\t<md-icon class=\"md-size-4x\">close</md-icon>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\n\timport { SpinalGraphService } from \"spinal-env-viewer-graph-service\";\n\t// // import { SpinalGraphService } from \"spinal-env-viewer-graph-service\";\n\t// import generateAutomateService from \"../../../js/generateAutomateService\";\n\t// import spinalNetworkTreeService from \"../../../services/index\";\n\n\timport {\n\t\tNetworkTreeService,\n\t\tGenerateNetworkTreeService,\n\t\tAttributesUtilities,\n\t\tCONSTANTS,\n\t} from \"spinal-env-viewer-plugin-network-tree-service\";\n\n\texport default {\n\t\tname: \"launchGeneration\",\n\t\tprops: {\n\t\t\tautomatesObj: {},\n\t\t\tequipmentsObj: {},\n\t\t\tattribute: {},\n\t\t\terror: {},\n\t\t\tcontextId: {},\n\t\t\tselectedNodeId: {},\n\t\t\tchanged: {},\n\t\t\tnamingConvention: {},\n\t\t},\n\t\tdata() {\n\t\t\tthis.STATES = {\n\t\t\t\tloading: 1,\n\t\t\t\tnormal: 2,\n\t\t\t\tcreation: 3,\n\t\t\t\tsuccess: 4,\n\t\t\t\terror: 5,\n\t\t\t};\n\t\t\t// this.automatesVerificationResult = {};\n\t\t\t// this.equipementsVerificationResult = {};\n\n\t\t\tthis.tree = [];\n\n\t\t\treturn {\n\t\t\t\tpercent: 0,\n\t\t\t\tverified: false,\n\t\t\t\tvalueGrouped: null,\n\t\t\t\tappState: this.STATES.normal,\n\t\t\t\tvalidItems: [],\n\t\t\t\tinvalidItems: [],\n\t\t\t\tdontCreateEmptyAutomate: true,\n\t\t\t\tclassify: {\n\t\t\t\t\tclass: true,\n\t\t\t\t\tby: \"Niveau\",\n\t\t\t\t},\n\t\t\t};\n\t\t},\n\t\tmethods: {\n\t\t\tasync launchVerification() {\n\t\t\t\tthis.appState = this.STATES.loading;\n\t\t\t\tthis.formatData().then(\n\t\t\t\t\t({ automatesProperties, equipementsProperties }) => {\n\t\t\t\t\t\treturn GenerateNetworkTreeService.createTree(\n\t\t\t\t\t\t\tautomatesProperties,\n\t\t\t\t\t\t\tequipementsProperties,\n\t\t\t\t\t\t\tthis.attribute\n\t\t\t\t\t\t).then(({ tree, invalids, valids }) => {\n\t\t\t\t\t\t\tthis.tree = tree;\n\t\t\t\t\t\t\tthis.validItems = valids;\n\t\t\t\t\t\t\tthis.invalidItems = invalids;\n\n\t\t\t\t\t\t\tthis.verified = true;\n\t\t\t\t\t\t\tthis.appState = this.STATES.normal;\n\t\t\t\t\t\t\tthis.$emit(\"verified\");\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\t// this.automatesVerificationResult = result.automatesProperties;\n\t\t\t\t\t\t// this.equipementsVerificationResult = result.equipementsProperties;\n\t\t\t\t\t\t//    this.verified = true;\n\t\t\t\t\t\t//    this.appState = this.STATES.normal;\n\t\t\t\t\t\t//    this.$emit(\"verified\");\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t},\n\n\t\t\tasync launchGeneration() {\n\t\t\t\tthis.appState = this.STATES.creation;\n\t\t\t\tlet tree = [...this.tree];\n\n\t\t\t\tif (this.dontCreateEmptyAutomate) {\n\t\t\t\t\ttree = this.tree.filter((el) => el.children.length > 0);\n\t\t\t\t}\n\n\t\t\t\tconst Listelength = tree.length;\n\t\t\t\tlet isError = false;\n\n\t\t\t\twhile (!isError && tree.length > 0) {\n\t\t\t\t\tconst item = tree.shift();\n\t\t\t\t\ttry {\n\t\t\t\t\t\tif (item) {\n\t\t\t\t\t\t\tconst parentId = await this.getOrCreateParentId(\n\t\t\t\t\t\t\t\tthis.contextId,\n\t\t\t\t\t\t\t\tthis.selectedNodeId,\n\t\t\t\t\t\t\t\titem\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tconsole.log(\"parentId\", item);\n\n\t\t\t\t\t\t\tawait GenerateNetworkTreeService._createNodes(\n\t\t\t\t\t\t\t\tthis.contextId,\n\t\t\t\t\t\t\t\titem,\n\t\t\t\t\t\t\t\tparentId\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tthis.percent = Math.floor(\n\t\t\t\t\t\t\t\t(100 * (Listelength - tree.length)) / Listelength\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\tconsole.error(error);\n\t\t\t\t\t\tisError = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (isError) {\n\t\t\t\t\tthis.appState = this.STATES.error;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.appState = this.STATES.success;\n\t\t\t},\n\n\t\t\t// createNode(liste, contextId, nodeId, Listelength) {\n\t\t\t//    return new Promise((resolve, reject) => {\n\t\t\t//       this.createNodeRecur(\n\t\t\t//          liste,\n\t\t\t//          contextId,\n\t\t\t//          nodeId,\n\t\t\t//          Listelength,\n\t\t\t//          resolve\n\t\t\t//       );\n\t\t\t//    });\n\t\t\t// },\n\n\t\t\t// async createNodeRecur(liste, contextId, nodeId, Listelength, resolve) {\n\t\t\t//    const item = liste.shift();\n\t\t\t//    if (item) {\n\t\t\t//       const parentId = await this.getOrCreateParentId(\n\t\t\t//          contextId,\n\t\t\t//          nodeId,\n\t\t\t//          item\n\t\t\t//       );\n\n\t\t\t//       GenerateNetworkTreeService._createNodes(contextId, item, parentId)\n\t\t\t//          .then(() => {\n\t\t\t//             this.percent = Math.floor(\n\t\t\t//                (100 * (Listelength - liste.length)) / Listelength\n\t\t\t//             );\n\n\t\t\t//             this.createNodeRecur(\n\t\t\t//                liste,\n\t\t\t//                contextId,\n\t\t\t//                nodeId,\n\t\t\t//                Listelength,\n\t\t\t//                resolve\n\t\t\t//             );\n\t\t\t//          })\n\t\t\t//          .catch((err) => {\n\t\t\t//             console.error(err);\n\t\t\t//             this.percent = Math.floor(\n\t\t\t//                (100 * (Listelength - liste.length)) / Listelength\n\t\t\t//             );\n\n\t\t\t//             this.createNodeRecur(\n\t\t\t//                liste,\n\t\t\t//                contextId,\n\t\t\t//                nodeId,\n\t\t\t//                Listelength,\n\t\t\t//                resolve\n\t\t\t//             );\n\t\t\t//          });\n\t\t\t//    } else {\n\t\t\t//       resolve(true);\n\t\t\t//    }\n\t\t\t// },\n\n\t\t\tasync getOrCreateParentId(contextId, nodeId, item) {\n\t\t\t\tif (!this.classify.class) {\n\t\t\t\t\treturn nodeId;\n\t\t\t\t}\n\n\t\t\t\tconst val = this.classify.by;\n\n\t\t\t\t// const found = item.properties.find(\n\t\t\t\t//    (el) => el.attributeName == val || el.displayName == val\n\t\t\t\t// );\n\t\t\t\tconst found = await AttributesUtilities.findAttribute(\n\t\t\t\t\titem.model,\n\t\t\t\t\titem.dbId,\n\t\t\t\t\tval\n\t\t\t\t);\n\n\t\t\t\tconst parentName =\n\t\t\t\t\tfound && found.displayValue ? found.displayValue : \"Others\";\n\n\t\t\t\tconst children = await SpinalGraphService.getChildren(nodeId, [\n\t\t\t\t\t// spinalNetworkTreeService.constants.NETWORK_RELATION,\n\t\t\t\t\tCONSTANTS.NETWORK_RELATION,\n\t\t\t\t]);\n\n\t\t\t\tconst parentFound = children.find(\n\t\t\t\t\t(el) => el.name.get() == parentName\n\t\t\t\t);\n\n\t\t\t\tif (parentFound) return parentFound.id.get();\n\n\t\t\t\t// const parent = await spinalNetworkTreeService.addNetwork(\n\t\t\t\t//    parentName,\n\t\t\t\t//    nodeId,\n\t\t\t\t//    contextId\n\t\t\t\t// );\n\n\t\t\t\tconst parent = await NetworkTreeService.addNetwork(\n\t\t\t\t\tparentName,\n\t\t\t\t\tnodeId,\n\t\t\t\t\tcontextId\n\t\t\t\t);\n\n\t\t\t\tSpinalGraphService._addNode(parent);\n\t\t\t\treturn parent.getId().get();\n\t\t\t},\n\n\t\t\t_displayResult(result) {\n\t\t\t\tthis.appState = result;\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.appState = this.STATES.normal;\n\t\t\t\t}, 1000);\n\t\t\t},\n\n\t\t\tformatData() {\n\t\t\t\tconst promises = [\n\t\t\t\t\tGenerateNetworkTreeService.getElementProperties(\n\t\t\t\t\t\tthis.automatesObj.items,\n\t\t\t\t\t\tthis.automatesObj.attributeName,\n\t\t\t\t\t\tthis.namingConvention\n\t\t\t\t\t),\n\t\t\t\t\tGenerateNetworkTreeService.getElementProperties(\n\t\t\t\t\t\tthis.equipmentsObj.items,\n\t\t\t\t\t\tthis.equipmentsObj.attributeName,\n\t\t\t\t\t\tthis.namingConvention\n\t\t\t\t\t),\n\t\t\t\t];\n\n\t\t\t\treturn Promise.all(promises).then((result) => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tautomatesProperties: result[0] && result[0].validItems,\n\t\t\t\t\t\tequipementsProperties: result[1] && result[1].validItems,\n\t\t\t\t\t};\n\t\t\t\t});\n\t\t\t},\n\n\t\t\tselectItems(argItems) {\n\t\t\t\tconst items =\n\t\t\t\t\tGenerateNetworkTreeService.classifyDbIdsByModel(argItems);\n\t\t\t\twindow.spinal.ForgeViewer.viewer.impl.selector.setAggregateSelection(\n\t\t\t\t\titems\n\t\t\t\t);\n\t\t\t},\n\t\t},\n\t\tcomputed: {\n\t\t\tdisableVerificationButton() {\n\t\t\t\treturn (\n\t\t\t\t\t(this.automatesObj.items.length === 0 &&\n\t\t\t\t\t\tthis.automatesObj.attributeName.trim().length === 0) ||\n\t\t\t\t\t(this.equipmentsObj.items.length === 0 &&\n\t\t\t\t\t\tthis.equipmentsObj.attributeName.trim().length === 0)\n\t\t\t\t);\n\t\t\t},\n\t\t},\n\t\twatch: {\n\t\t\tchanged() {\n\t\t\t\tif (this.changed) {\n\t\t\t\t\tthis.appState = this.STATES.normal;\n\t\t\t\t\tthis.verified = false;\n\t\t\t\t}\n\t\t\t},\n\t\t\t// attribute() {\n\t\t\t//   this.verified = false;\n\t\t\t// }\n\t\t},\n\t};\n</script>\n\n<style scoped>\n\t.content {\n\t\twidth: 100%;\n\t\theight: 100%;\n\t}\n\t.content .buttons {\n\t\twidth: 100%;\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t}\n\n\t.content .buttons .content-items {\n\t\twidth: 100%;\n\t\theight: 100%;\n\t}\n\n\t.content .buttons .content-items .content-item {\n\t\twidth: 100%;\n\t\theight: 50px;\n\t\tmargin-bottom: 5px;\n\t}\n\n\t.content .buttons .content-items .content-item.classifyContent {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t}\n\n\t/* .content\n   .buttons\n   .content-items\n   .content-item.content-item.classifyContent\n   .checkbox {\n}\n\n.content\n   .buttons\n   .content-items\n   .content-item.content-item.classifyContent\n   .input {\n} */\n\n\t.state {\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t}\n\n\t.progress-bar {\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t}\n\t.progress-bar .percent-number {\n\t\tfont-size: 1.8em;\n\t\tmargin: 10px 0;\n\t}\n\t.progress-bar .percent-bar {\n\t\twidth: 90%;\n\t}\n</style>\n","<!--\nCopyright 2020 SpinalCom - www.spinalcom.com\nThis file is part of SpinalCore.\nPlease read all of the following terms and conditions\nof the Free Software license Agreement (\"Agreement\")\ncarefully.\nThis Agreement is a legally binding contract between\nthe Licensee (as defined below) and SpinalCom that\nsets forth the terms and conditions that govern your\nuse of the Program. By installing and/or using the\nProgram, you agree to abide by all the terms and\nconditions stated or referenced herein.\nIf you do not agree to abide by these terms and\nconditions, do not demonstrate your acceptance and do\nnot install or use the Program.\nYou should have received a copy of the license along\nwith this file. If not, see\n<http://resources.spinalcom.com/licenses.pdf>.\n-->\n\n<template>\n   <div class=\"sub-content\">\n\n      <div class=\"countdiv\">\n         {{count}} item(s) selected\n      </div>\n\n      <div class=\"buttons\">\n         <md-button @click=\"addSelection\">\n            <md-icon>add</md-icon>\n            <md-tooltip md-delay=\"300\">Add Bim objects selected</md-tooltip>\n         </md-button>\n\n         <md-button @click=\"clearReferential\">\n            <md-icon>clear</md-icon>\n            <md-tooltip md-delay=\"300\">Clear selected</md-tooltip>\n         </md-button>\n\n         <md-button @click=\"showReferential\">\n            <md-icon>visibility</md-icon>\n            <md-tooltip md-delay=\"300\">Show referential</md-tooltip>\n         </md-button>\n      </div>\n\n      <div>\n         <md-field>\n            <label>Attribute</label>\n            <md-input v-model=\"config.attributeName\"></md-input>\n         </md-field>\n      </div>\n\n      <div>\n         <div v-if=\"displayResult\">\n            <md-button\n               class=\"md-dense md-primary\"\n               @click=\"selectValidItemsOnModel\"\n            >\n               {{validItems.length}} item(s) is/are valid\n            </md-button>\n\n            <md-button\n               class=\"md-dense md-accent\"\n               @click=\"selectInvalidItemsOnModel\"\n            >\n               {{invalidItems.length}} item(s) is/are not valid\n            </md-button>\n         </div>\n\n         <md-button\n            v-if=\"!loadAttributeResult\"\n            :disabled=\"displayResult\"\n            class=\"md-raised md-primary\"\n            @click=\"verifyResult\"\n         >Verify</md-button>\n\n         <md-progress-spinner\n            v-if=\"loadAttributeResult\"\n            :md-diameter=\"30\"\n            :md-stroke=\"3\"\n            md-mode=\"indeterminate\"\n         ></md-progress-spinner>\n      </div>\n\n   </div>\n</template>\n\n<script>\nimport geographicService from \"spinal-env-viewer-context-geographic-service\";\nimport { bimObjectManagerService } from \"spinal-env-viewer-bim-manager-service\";\n// import generateAutomateService from \"../../../js/generateAutomateService\";\n\nimport { GenerateNetworkTreeService } from \"spinal-env-viewer-plugin-network-tree-service\";\n\nexport default {\n   name: \"selectionStep\",\n   props: {\n      config: {},\n   },\n   data() {\n      return {\n         validItems: [],\n         invalidItems: [],\n         loadAttributeResult: false,\n         displayResult: false,\n         count: 0,\n      };\n   },\n   methods: {\n      async addSelection() {\n         await this.addItemSelected();\n         this.changeItemCount();\n         this.displayResult = false;\n         this.$emit(\"changed\");\n      },\n\n      clearReferential() {\n         this.config.items = [];\n         this.changeItemCount();\n         this.displayResult = false;\n         this.$emit(\"changed\");\n\n         // this.changeItemCount();\n\n         //  this.$emit(\"clear\");\n      },\n\n      async addItemSelected() {\n         const aggregateSelection = window.spinal.ForgeViewer.viewer.getAggregateSelection();\n\n         if (aggregateSelection.length === 0) {\n            window.alert(\"no bim object selected\");\n            return;\n         }\n\n         const selection = await this.getLeafDbIds(aggregateSelection);\n\n         for (const element of selection) {\n            this.addItemToList(element);\n         }\n\n         // let promisesValues = await Promise.all(nodespromises);\n         // for (const iterator of promisesValues) {\n         //   const listeFiltered = this.filterList(iterator);\n         //   this.config.items = [...this.config.items, ...listeFiltered];\n         // }\n      },\n\n      getLeafDbIds(selections) {\n         const dbIds = selections.map((el) => {\n            return bimObjectManagerService.getLeafDbIds(el.model, el.selection);\n         });\n         return Promise.all(dbIds);\n      },\n\n      addItemToList({ model, selection }) {\n         const elementFound = this.config.items.find(\n            (el) => el.model.id === model.id\n         );\n\n         if (!elementFound) {\n            this.config.items.push({ model, selection });\n            return;\n         }\n\n         for (const dbId of selection) {\n            const found = elementFound.selection.find((el) => el === dbId);\n            if (!found) elementFound.selection.push(dbId);\n         }\n      },\n\n      changeItemCount() {\n         this.count = 0;\n         for (const item of this.config.items) {\n            this.count += item.selection.length;\n         }\n      },\n\n      showReferential() {\n         // const items = this.config.items.map(({ model, selection }) => {\n         //    return { model, ids: selection };\n         // });\n         // window.spinal.ForgeViewer.viewer.impl.selector.setAggregateSelection(\n         //    items\n         // );\n\n         this.config.items.forEach(({ model, selection }) => {\n            window.spinal.ForgeViewer.viewer.impl.selector.setSelection(\n               selection,\n               model\n            );\n         });\n      },\n\n      verifyResult() {\n         this.loadAttributeResult = true;\n         GenerateNetworkTreeService.getElementProperties(\n            this.config.items,\n            this.config.attributeName\n         ).then((result) => {\n            this.validItems = result.validItems;\n            this.invalidItems = result.invalidItems;\n            this.displayResult = true;\n            this.loadAttributeResult = false;\n         });\n      },\n\n      selectValidItemsOnModel() {\n         const items = GenerateNetworkTreeService.classifyDbIdsByModel(\n            this.validItems\n         );\n\n         window.spinal.ForgeViewer.viewer.impl.selector.setAggregateSelection(\n            items\n         );\n      },\n\n      selectInvalidItemsOnModel() {\n         const items = GenerateNetworkTreeService.classifyDbIdsByModel(\n            this.invalidItems\n         );\n\n         window.spinal.ForgeViewer.viewer.impl.selector.setAggregateSelection(\n            items\n         );\n      },\n   },\n   watch: {\n      // config: {\n      //    items() {\n      //       this.changeItemCount();\n      //    },\n      // },\n   },\n};\n</script>\n\n<style scoped>\n.countdiv {\n   height: 60px;\n   display: flex;\n   align-items: center;\n   font-size: 1.2em;\n}\n</style>\n\n<style>\n.sub-content .buttons .md-button .md-ripple {\n   padding: 0px !important;\n}\n</style>","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst bimService_1 = require(\"./bimObjects/bimService\");\nexports.bimObjectManagerService = bimService_1.default;\n//# sourceMappingURL=index.js.map",null,"\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass BimObjectManagerService {\n    constructor() { }\n    getAllBimObjectsProperties(model) {\n        return this.getBimObjectProperties([\n            {\n                model: model,\n                selection: this.getLeafDbIds(model).selection\n            }\n        ]);\n    }\n    getBimObjectProperties(argBimObjects) {\n        // let properties = [];\n        let bimOjects = Array.isArray(argBimObjects)\n            ? argBimObjects\n            : [argBimObjects];\n        let promises = bimOjects.map(el => {\n            return this._getProperties(el.model, el.selection);\n        });\n        return Promise.all(promises).then(res => {\n            return res;\n        });\n    }\n    getLeafDbIds(model, rootId) {\n        const tree = model.getInstanceTree();\n        const dbIds = [];\n        if (typeof rootId === \"undefined\") {\n            rootId = [tree.nodeAccess.rootId];\n        }\n        else {\n            rootId = Array.isArray(rootId) ? rootId : [rootId];\n        }\n        rootId.forEach(el => {\n            const queue = [el];\n            let hasChildren;\n            while (queue.length) {\n                let id = queue.pop();\n                hasChildren = false;\n                tree.enumNodeChildren(id, childId => {\n                    hasChildren = true;\n                    queue.push(childId);\n                });\n                if (!hasChildren) {\n                    dbIds.push(id);\n                }\n            }\n        });\n        return { model: model, selection: dbIds };\n    }\n    getBimObjectsByPropertiesName(model, properties) {\n        return this.getAllBimObjectsProperties(model).then(res => {\n            let result = [];\n            for (let i = 0; i < res.length; i++) {\n                const element = res[i];\n                for (let j = 0; j < element.properties.length; j++) {\n                    const property = element.properties[j];\n                    if (typeof this._getLabel(property, properties) !== \"undefined\") {\n                        result.push(property);\n                    }\n                    // }\n                }\n                return result;\n            }\n        });\n    }\n    getBimObjectsValidated(referential, regEx) {\n        return this.getBimObjectProperties(referential).then(res => {\n            return res.map(element => {\n                return {\n                    model: element.model,\n                    properties: element.properties.filter(el => {\n                        return this._isValid(el, regEx);\n                    })\n                };\n            });\n        });\n    }\n    getBimObjectsByName(model, bimObjectName, labelName) {\n        return new Promise(resolve => {\n            model.search(bimObjectName.trim(), (res) => __awaiter(this, void 0, void 0, function* () {\n                let properties = yield this.getBimObjectProperties([\n                    { model: model, selection: res }\n                ]);\n                resolve(properties);\n            }), () => {\n                resolve([]);\n            }, labelName);\n        });\n    }\n    ////////////////////////////////////////////////////////////////////////\n    //                             PRIVATES                               //\n    ////////////////////////////////////////////////////////////////////////\n    _getProperties(model, selection) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let properties = selection.map(el => {\n                return new Promise(resolve => {\n                    model.getProperties(el, res => {\n                        // properties.push(res);\n                        resolve(res);\n                    }, err => {\n                        resolve(undefined);\n                    });\n                });\n            });\n            return {\n                model: model,\n                properties: yield Promise.all(properties)\n            };\n        });\n    }\n    _getAllDbIds(model) {\n        var instanceTree = model.getData().instanceTree;\n        var allDbIdsStr = Object.keys(instanceTree.nodeAccess.dbIdToIndex);\n        return allDbIdsStr.map(function (id) {\n            return parseInt(id);\n        });\n    }\n    _getLabel(bim, properties) {\n        for (let i = 0; i < properties.length; i++) {\n            const propertieValue = properties[i].value;\n            const propertyName = properties[i].name;\n            const found = bim.properties.find(el => {\n                return typeof propertieValue === \"undefined\" ||\n                    propertieValue.length === 0\n                    ? el.displayName.toLowerCase() ===\n                        propertyName.trim().toLocaleLowerCase()\n                    : el.displayName.toLowerCase() ===\n                        propertyName.trim().toLocaleLowerCase() &&\n                        propertieValue == el.displayValue;\n            });\n            if (typeof found === \"undefined\") {\n                return undefined;\n            }\n        }\n        return true;\n    }\n    _isValid(el, regEx) {\n        for (let i = 0; i < regEx.length; i++) {\n            let nameRegex = regEx[i].nameRegex;\n            let valueRegex = regEx[i].valueRegex;\n            let found = el.properties.find(res => {\n                if (typeof valueRegex === \"undefined\") {\n                    return nameRegex.test(res.displayName);\n                }\n                return (nameRegex.test(res.displayName) && valueRegex.test(res.displayValue));\n            });\n            if (typeof found === \"undefined\") {\n                return false;\n            }\n        }\n        return true;\n    }\n}\nexports.default = new BimObjectManagerService();\n//# sourceMappingURL=bimService.js.map",null,"<template>\n   <md-list>\n      <md-list-item>\n         <md-field>\n            <label>Attribute</label>\n            <md-input v-model=\"config.attributeName\"></md-input>\n         </md-field>\n      </md-list-item>\n      <md-list-item>\n         <md-radio\n            v-model=\"config.useAttrValue\"\n            :value=\"true\"\n            class=\"md-primary\"\n         >Use attribute value</md-radio>\n      </md-list-item>\n\n      <md-list-item>\n         <md-radio\n            v-model=\"config.useAttrValue\"\n            disabled\n            :value=\"false\"\n            class=\"md-primary\"\n         ><a @click=\"personalized\">Personalized</a></md-radio>\n      </md-list-item>\n\n   </md-list>\n\n</template>\n<script>\nimport { spinalPanelManagerService } from \"spinal-env-viewer-panel-manager-service\";\n\nexport default {\n   name: \"namingConventionStep\",\n   props: {\n      config: {},\n   },\n   data() {\n      return {};\n   },\n   methods: {\n      personalized() {\n         spinalPanelManagerService.openPanel(\"personalizeNamingConvention\", {\n            config: this.config,\n            callback: (argFunction) => {\n               this.config.useAttrValue = false;\n               this.config.personalized.callback = argFunction;\n            },\n         });\n      },\n   },\n};\n</script>\n<style scoped>\n</style>","<!--\nCopyright 2020 SpinalCom - www.spinalcom.com\n\nThis file is part of SpinalCore.\n\nPlease read all of the following terms and conditions\nof the Free Software license Agreement (\"Agreement\")\ncarefully.\n\nThis Agreement is a legally binding contract between\nthe Licensee (as defined below) and SpinalCom that\nsets forth the terms and conditions that govern your\nuse of the Program. By installing and/or using the\nProgram, you agree to abide by all the terms and\nconditions stated or referenced herein.\n\nIf you do not agree to abide by these terms and\nconditions, do not demonstrate your acceptance and do\nnot install or use the Program.\nYou should have received a copy of the license along\nwith this file. If not, see\n<http://resources.spinalcom.com/licenses.pdf>.\n-->\n\n<template>\n   <md-content class=\"myContainer md-scrollbar\">\n\n      <div class=\"header\">\n         <md-button\n            class=\"md-primary exportBtn\"\n            @click=\"exportFile\"\n         >Export</md-button>\n      </div>\n\n      <md-table\n         v-if=\"itemSelected\"\n         v-model=\"data\"\n         class=\"myTable md-scrollbar\"\n      >\n         <!-- <md-table-toolbar>\n      <h1 class=\"md-title\">Users</h1>\n    </md-table-toolbar> -->\n\n         <md-table-empty-state\n            md-label=\"No element found\"\n            md-description=\"No bim object found in this context\"\n         >\n         </md-table-empty-state>\n\n         <md-table-row\n            slot=\"md-table-row\"\n            slot-scope=\"{ item }\"\n         >\n\n            <md-table-cell\n               md-label=\"Id\"\n               md-numeric\n               :title=\"item.externalId\"\n               class=\"tableColumn\"\n            >{{ item.externalId }}\n            </md-table-cell>\n\n            <md-table-cell\n               md-label=\"Name\"\n               :title=\"item.name\"\n               class=\"tableColumn\"\n            >{{ item.name }}</md-table-cell>\n\n            <md-table-cell\n               md-label=\"Parent(s)\"\n               :title=\"formatParents(item)\"\n               class=\"tableColumn\"\n            >{{ formatParents(item)}}\n            </md-table-cell>\n\n            <md-table-cell\n               md-label=\"Group(s)\"\n               :title=\"formatGroups(item)\"\n               class=\"tableColumn\"\n            >{{ formatGroups(item) }}\n            </md-table-cell>\n\n         </md-table-row>\n      </md-table>\n   </md-content>\n</template>\n\n<script>\nconst {\n   spinalPanelManagerService,\n} = require(\"spinal-env-viewer-panel-manager-service\");\n\n// import spinalNetworktree from \"../../services\";\n\nimport { NetworkTreeService } from \"spinal-env-viewer-plugin-network-tree-service\";\n\nimport spinalExcelManager from \"spinal-env-viewer-plugin-excel-manager-service\";\nimport FileSaver from \"file-saver\";\n\nexport default {\n   name: \"networkTreeDetailPanel\",\n   data() {\n      return {\n         itemSelected: null,\n         data: [],\n      };\n   },\n   methods: {\n      opened(params) {\n         this.itemSelected = params;\n      },\n\n      closed() {},\n\n      setTitle(title) {\n         spinalPanelManagerService.panels.networkTreeDetailPanel.panel.setTitle(\n            title\n         );\n      },\n\n      getAllData(contextId) {\n         // return spinalNetworktree\n         return NetworkTreeService.getNetworkTreeBimObjects(contextId).then(\n            (bimObjects) => {\n               let promises = bimObjects.map(async (el) => {\n                  let info = el.info.get();\n                  // info[\"groups\"] = await spinalNetworktree.getNetworkGroups(info.id);\n                  info[\"groups\"] = await NetworkTreeService.getNetworkGroups(\n                     info.id\n                  );\n                  // info[\"parents\"] = await spinalNetworktree.getNetworkBimObjectParents(info.id);\n                  info[\n                     \"parents\"\n                  ] = await NetworkTreeService.getNetworkBimObjectParents(\n                     info.id\n                  );\n                  return info;\n               });\n\n               return Promise.all(promises);\n            }\n         );\n      },\n      formatParents(item) {\n         let parentsDbIds = item.parents.map((el) => el.externalId);\n         return parentsDbIds.length > 0 ? parentsDbIds.join(\", \") : \"-\";\n      },\n      formatGroups(item) {\n         let groupsNames = item.groups.map((el) => el.name);\n         return groupsNames.length > 0 ? groupsNames.join(\", \") : \"-\";\n      },\n\n      getHeader() {\n         return [\n            {\n               key: \"bimFileId\",\n               header: \"BimFileId\",\n               width: 20,\n            },\n            {\n               key: \"dbid\",\n               header: \"Dbid\",\n               width: 20,\n            },\n            {\n               key: \"externalId\",\n               header: \"ExternalId\",\n               width: 20,\n            },\n            {\n               key: \"name\",\n               header: \"Name\",\n               width: 20,\n            },\n            {\n               key: \"type\",\n               header: \"Type\",\n               width: 20,\n            },\n            {\n               key: \"parent\",\n               header: \"Parent(s)\",\n               width: 20,\n            },\n            {\n               key: \"group\",\n               header: \"Group(s)\",\n               width: 20,\n            },\n         ];\n      },\n\n      getRows() {\n         return this.data.map((el) => {\n            el[\"group\"] = this.formatGroups(el);\n            el[\"parent\"] = this.formatParents(el);\n            return el;\n         });\n      },\n\n      exportFile() {\n         let result = [\n            {\n               name: `Network Tree ${this.itemSelected.name}`,\n               author: \"spinalcom\",\n               data: [\n                  {\n                     name: `Network Tree ${this.itemSelected.name}`,\n                     header: this.getHeader(),\n                     rows: this.getRows(),\n                  },\n               ],\n            },\n         ];\n\n         spinalExcelManager.export(result).then((buffer) => {\n            FileSaver.saveAs(new Blob(buffer), `spinalcom.xlsx`);\n         });\n      },\n   },\n   watch: {\n      itemSelected() {\n         this.getAllData(this.itemSelected.id).then((objects) => {\n            this.setTitle(`Network Tree : ${this.itemSelected.name}`);\n            this.data = objects;\n         });\n      },\n   },\n};\n</script>\n\n<style scoped>\n.myContainer {\n   width: calc(100%);\n   height: calc(100%);\n   overflow: auto;\n}\n\n.myContainer .header {\n   width: calc(100%);\n   height: calc(10% - 10px);\n   margin-bottom: 10px;\n   display: flex;\n   justify-content: flex-end;\n}\n\n.myContainer .mytable {\n   width: calc(80%);\n   height: calc(90%);\n   margin: 10px;\n}\n\n.exportBtn {\n   border: 1px solid #448aff;\n   width: 150px;\n}\n\n/* .tableColumn {\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n} */\n</style>","(function(a,b){if(\"function\"==typeof define&&define.amd)define([],b);else if(\"undefined\"!=typeof exports)b();else{b(),a.FileSaver={exports:{}}.exports}})(this,function(){\"use strict\";function b(a,b){return\"undefined\"==typeof b?b={autoBom:!1}:\"object\"!=typeof b&&(console.warn(\"Deprecated: Expected third argument to be a object\"),b={autoBom:!b}),b.autoBom&&/^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i.test(a.type)?new Blob([\"\\uFEFF\",a],{type:a.type}):a}function c(a,b,c){var d=new XMLHttpRequest;d.open(\"GET\",a),d.responseType=\"blob\",d.onload=function(){g(d.response,b,c)},d.onerror=function(){console.error(\"could not download file\")},d.send()}function d(a){var b=new XMLHttpRequest;b.open(\"HEAD\",a,!1);try{b.send()}catch(a){}return 200<=b.status&&299>=b.status}function e(a){try{a.dispatchEvent(new MouseEvent(\"click\"))}catch(c){var b=document.createEvent(\"MouseEvents\");b.initMouseEvent(\"click\",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),a.dispatchEvent(b)}}var f=\"object\"==typeof window&&window.window===window?window:\"object\"==typeof self&&self.self===self?self:\"object\"==typeof global&&global.global===global?global:void 0,a=f.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),g=f.saveAs||(\"object\"!=typeof window||window!==f?function(){}:\"download\"in HTMLAnchorElement.prototype&&!a?function(b,g,h){var i=f.URL||f.webkitURL,j=document.createElement(\"a\");g=g||b.name||\"download\",j.download=g,j.rel=\"noopener\",\"string\"==typeof b?(j.href=b,j.origin===location.origin?e(j):d(j.href)?c(b,g,h):e(j,j.target=\"_blank\")):(j.href=i.createObjectURL(b),setTimeout(function(){i.revokeObjectURL(j.href)},4E4),setTimeout(function(){e(j)},0))}:\"msSaveOrOpenBlob\"in navigator?function(f,g,h){if(g=g||f.name||\"download\",\"string\"!=typeof f)navigator.msSaveOrOpenBlob(b(f,h),g);else if(d(f))c(f,g,h);else{var i=document.createElement(\"a\");i.href=f,i.target=\"_blank\",setTimeout(function(){e(i)})}}:function(b,d,e,g){if(g=g||open(\"\",\"_blank\"),g&&(g.document.title=g.document.body.innerText=\"downloading...\"),\"string\"==typeof b)return c(b,d,e);var h=\"application/octet-stream\"===b.type,i=/constructor/i.test(f.HTMLElement)||f.safari,j=/CriOS\\/[\\d]+/.test(navigator.userAgent);if((j||h&&i||a)&&\"undefined\"!=typeof FileReader){var k=new FileReader;k.onloadend=function(){var a=k.result;a=j?a:a.replace(/^data:[^;]*;/,\"data:attachment/file;\"),g?g.location.href=a:location=a,g=null},k.readAsDataURL(b)}else{var l=f.URL||f.webkitURL,m=l.createObjectURL(b);g?g.location=m:location.href=m,g=null,setTimeout(function(){l.revokeObjectURL(m)},4E4)}});f.saveAs=g.saveAs=g,\"undefined\"!=typeof module&&(module.exports=g)});\n\n//# sourceMappingURL=FileSaver.min.js.map","/*\n* FileSaver.js\n* A saveAs() FileSaver implementation.\n*\n* By Eli Grey, http://eligrey.com\n*\n* License : https://github.com/eligrey/FileSaver.js/blob/master/LICENSE.md (MIT)\n* source  : http://purl.eligrey.com/github/FileSaver.js\n*/\n\n// The one and only way of getting global scope in all environments\n// https://stackoverflow.com/q/3277182/1008999\nvar _global = typeof window === 'object' && window.window === window\n  ? window : typeof self === 'object' && self.self === self\n  ? self : typeof global === 'object' && global.global === global\n  ? global\n  : this\n\nfunction bom (blob, opts) {\n  if (typeof opts === 'undefined') opts = { autoBom: false }\n  else if (typeof opts !== 'object') {\n    console.warn('Deprecated: Expected third argument to be a object')\n    opts = { autoBom: !opts }\n  }\n\n  // prepend BOM for UTF-8 XML and text/* types (including HTML)\n  // note: your browser will automatically convert UTF-16 U+FEFF to EF BB BF\n  if (opts.autoBom && /^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i.test(blob.type)) {\n    return new Blob([String.fromCharCode(0xFEFF), blob], { type: blob.type })\n  }\n  return blob\n}\n\nfunction download (url, name, opts) {\n  var xhr = new XMLHttpRequest()\n  xhr.open('GET', url)\n  xhr.responseType = 'blob'\n  xhr.onload = function () {\n    saveAs(xhr.response, name, opts)\n  }\n  xhr.onerror = function () {\n    console.error('could not download file')\n  }\n  xhr.send()\n}\n\nfunction corsEnabled (url) {\n  var xhr = new XMLHttpRequest()\n  // use sync to avoid popup blocker\n  xhr.open('HEAD', url, false)\n  try {\n    xhr.send()\n  } catch (e) {}\n  return xhr.status >= 200 && xhr.status <= 299\n}\n\n// `a.click()` doesn't work for all browsers (#465)\nfunction click (node) {\n  try {\n    node.dispatchEvent(new MouseEvent('click'))\n  } catch (e) {\n    var evt = document.createEvent('MouseEvents')\n    evt.initMouseEvent('click', true, true, window, 0, 0, 0, 80,\n                          20, false, false, false, false, 0, null)\n    node.dispatchEvent(evt)\n  }\n}\n\n// Detect WebView inside a native macOS app by ruling out all browsers\n// We just need to check for 'Safari' because all other browsers (besides Firefox) include that too\n// https://www.whatismybrowser.com/guides/the-latest-user-agent/macos\nvar isMacOSWebView = _global.navigator && /Macintosh/.test(navigator.userAgent) && /AppleWebKit/.test(navigator.userAgent) && !/Safari/.test(navigator.userAgent)\n\nvar saveAs = _global.saveAs || (\n  // probably in some web worker\n  (typeof window !== 'object' || window !== _global)\n    ? function saveAs () { /* noop */ }\n\n  // Use download attribute first if possible (#193 Lumia mobile) unless this is a macOS WebView\n  : ('download' in HTMLAnchorElement.prototype && !isMacOSWebView)\n  ? function saveAs (blob, name, opts) {\n    var URL = _global.URL || _global.webkitURL\n    var a = document.createElement('a')\n    name = name || blob.name || 'download'\n\n    a.download = name\n    a.rel = 'noopener' // tabnabbing\n\n    // TODO: detect chrome extensions & packaged apps\n    // a.target = '_blank'\n\n    if (typeof blob === 'string') {\n      // Support regular links\n      a.href = blob\n      if (a.origin !== location.origin) {\n        corsEnabled(a.href)\n          ? download(blob, name, opts)\n          : click(a, a.target = '_blank')\n      } else {\n        click(a)\n      }\n    } else {\n      // Support blobs\n      a.href = URL.createObjectURL(blob)\n      setTimeout(function () { URL.revokeObjectURL(a.href) }, 4E4) // 40s\n      setTimeout(function () { click(a) }, 0)\n    }\n  }\n\n  // Use msSaveOrOpenBlob as a second approach\n  : 'msSaveOrOpenBlob' in navigator\n  ? function saveAs (blob, name, opts) {\n    name = name || blob.name || 'download'\n\n    if (typeof blob === 'string') {\n      if (corsEnabled(blob)) {\n        download(blob, name, opts)\n      } else {\n        var a = document.createElement('a')\n        a.href = blob\n        a.target = '_blank'\n        setTimeout(function () { click(a) })\n      }\n    } else {\n      navigator.msSaveOrOpenBlob(bom(blob, opts), name)\n    }\n  }\n\n  // Fallback to using FileReader and a popup\n  : function saveAs (blob, name, opts, popup) {\n    // Open a popup immediately do go around popup blocker\n    // Mostly only available on user interaction and the fileReader is async so...\n    popup = popup || open('', '_blank')\n    if (popup) {\n      popup.document.title =\n      popup.document.body.innerText = 'downloading...'\n    }\n\n    if (typeof blob === 'string') return download(blob, name, opts)\n\n    var force = blob.type === 'application/octet-stream'\n    var isSafari = /constructor/i.test(_global.HTMLElement) || _global.safari\n    var isChromeIOS = /CriOS\\/[\\d]+/.test(navigator.userAgent)\n\n    if ((isChromeIOS || (force && isSafari) || isMacOSWebView) && typeof FileReader !== 'undefined') {\n      // Safari doesn't allow downloading of blob URLs\n      var reader = new FileReader()\n      reader.onloadend = function () {\n        var url = reader.result\n        url = isChromeIOS ? url : url.replace(/^data:[^;]*;/, 'data:attachment/file;')\n        if (popup) popup.location.href = url\n        else location = url\n        popup = null // reverse-tabnabbing #460\n      }\n      reader.readAsDataURL(blob)\n    } else {\n      var URL = _global.URL || _global.webkitURL\n      var url = URL.createObjectURL(blob)\n      if (popup) popup.location = url\n      else location.href = url\n      popup = null // reverse-tabnabbing #460\n      setTimeout(function () { URL.revokeObjectURL(url) }, 4E4) // 40s\n    }\n  }\n)\n\n_global.saveAs = saveAs.saveAs = saveAs\n\nif (typeof module !== 'undefined') {\n  module.exports = saveAs;\n}\n","\"use strict\";"],"names":[],"version":3,"file":"spinal-env-viewer-plugin-network-tree.b309b6aa.js.map"}