{"mappings":"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,eAAe,GAAG,QAAQ,oBAAiC,eAAe;IACjF,OAAO,QAAQ,GAAG;IAE5B,OAAO,YAAY,GAAG,QAAQ,oBAA8B,OAAO;IACnE,QAAQ,oBAA+B,OAAO,CAAC;IAC/C,OAAO,SAAS,GAAG;IACnB,OAAO,MAAM,GAAG;AAClB;AACA;kBAEe;;;;;A;A;;A,I,gB;I,M;I,Y;uB,C,G,gC,A;I;I,M;Q,O;Y,Q;Y,Q;Y,O,E;Y,U,E;Y,e;Y,gB;Y,a,E;Y,W;Y,Y,E;Y,mB,E;Y,gB;Y,kB;Y,gB;Y,c,E;Y,gB,E;Y,oB,E;Y,sB,E;Y,Y;Y,a;Y,mB,E;Y,iB,E;Y,gB,E;Y,W,E;Y,Q,E;Y,O,E;Y,mB,C;Q;I;I,U;Q,qB;Y,I,C,U,C,M;Q;I;I,S;Q,M,S,M;Y,I,C,M,G;Y,I,C,K,G,E;Y,I,C,Q,G,O,Q;Y,I,C,a,G;Y,I,C,c,G;Y,I,C,W,G,E;Y,I,C,S,G;Y,I,C,U,G,E;Y,I,C,c,G;Y,I,C,Y,G,E;Y,I,C,c,G,E;Y,I,C,kB,G,E;Y,I,C,oB,G,E;Y,I,C,U,G;Y,I,C,iB,G,C;Q;Q,Q,S,M;Y,I,C,I,C;Y,I,I,I,G,I,I,C,Q,C,M,E,I,I,C,K,C,I,C;gB,M,I,C,Q,C,E,C,I,C,G;gB,O;Y;Y,I,C,M,G,O,M,C,W,C,M;Q;Q,mB,S,C;Y,I,C,a,G;Q;Q,gB,S,O;Y,C,G,mB,A,E,Q,O,C,G,E,I,C,C;gB,I,C,W,G,I,U;gB,I,C,S,G,I,U,C,M;gB,I,I,I,G,I,I,U,C,M,E,I,I,C,U,C,I,C,I;Y;Q;Q,0B,S,C;Y,I,C,c,G;Q;Q,4B,S,C;Y,I,C,gB,G;Q;Q,gB;Y,M,c,I,C,M,C,I,C,W,C,I,C,c,G,E,E,I,C,c;Y,M,gB,I,C,M,C,I,C,W,C,I,C,gB,G,E,E,I,C,gB;Y,I,C,U,G,M,I,C,S,C;Y,I,C,W,G,M,I,C,S,C;Y,I,C,Y,G,M,I,C,Q,C,I,C,U;YAyFf,IAAA,CAAA,cAAA,GAAA,MAAA,IAAA,CAAA,QAAA,CAAA,IAAA,CAAA,WAAA;YAEA,IAAA,eAAA,IAAA,CAAA,YAAA,CAAA,GAAA,CAAA,CAAA;gBACA,OAAA,IAAA,CAAA,aAAA,CAAA,MAAA,IAAA,CAAA,UAAA;YACA;Y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AA,GAAA;gBAAA,OAAA,IAAA,CAAA,KAAA;gBAAA,SAAA,IAAA,CAAA,OAAA;YAAA;QACA;IACA;AACA;AAEA,IAAA,UAAA,OAAA,kBAAA,aAAA,cAAA,OAAA,GAAA;kBACA,SAAA,wCAAA;;;A,I,S;I,I,M,I;I,I,K,I,c;I,I,K,I,K,C,E,I;I,O,G,O;Q,I,E,C,W,I,E,C,I,K,I,a,I,E,C,I,G,C,M,I;Q,G,S;Y,O;gB,Q;gB,Q;gB,S;Y;Y,I;gB,S,I,M;Y;Q,G;Y,G,U;gB,I,E,C;a;S,E;Q,I,E,C;Q,G,S;Y,O;gB,Q;gB,Q;gB,S;Y;Y,I;gB,S,I,O;Y;Q,G;Y,G,U;gB,I,E,C;a;S,E;K,E;A;A,I,kB,E;A,Q,M,G;A,Q,e,G;;;;;AApBA,IAAI,OAAO,KAAO;kBAEH,CAAA,UAEf;;;A,I,S;I,I,M,I;I,I,K,I,c;I,I,K,I,K,C,E,I;I,O,G,O;Q,a;I,G;Q,G,e;Y,O;gB,gB;gB,kB;Y;Q,G;Y,G,Y;gB,O;oB,Q;oB,gB;gB;Y,G;gB,G,U;oB,O;wB,Q;wB,O;wB,U;oB;gB,G;oB,G,Y;wB,O;4B,S,I,K;4B,Q;4B,S;4B,U;wB;wB,I;4B,S,I,iB;wB;oB;iB,E;gB,I,E,C;gB,I,c,G,G,U;oB,O;wB,U;wB,Q;oB;gB,G;oB,G,U;wB,O;4B,U;4B,O;wB;oB,G;wB,G,Y;4B,O;gC,S,I,U;gC,Q;gC,S;gC,U;4B;4B,I;gC,S,I,wB;4B;wB;qB,E;oB,I,E,C;oB,G,U;wB,O;4B,U;4B,O;wB;oB,G;wB,G,U;4B,a;4B,O;gC,S;4B;wB,G;4B,I,E,C;yB;qB,E;oB,I,E,C;oB,G,U;wB,O;4B,U;4B,O;wB;oB,G;wB,G,Y;4B,O;gC,S,I,U;gC,Q;gC,S;gC,U;4B;4B,I;gC,S,I,0B;4B;wB;qB,E;iB,E,K,I,E;gB,I,E,C;gB,I,c,K,K,I,gB,K,K,C,I,c,G,G,U;oB,G,S;wB,O;4B,S;wB;wB,I;4B,S,I,c;wB;oB,G;wB,I,E,C;qB;iB,E,K,I,E;gB,I,E,C;gB,I,c,G,G,U;oB,O;wB,U;wB,Q;oB;gB,G;oB,G,U;wB,O;4B,U;wB;oB,G;wB,I,E,C,+F,I,E,C,I,kB,C,M,I;qB;oB,I,E,C;oB,G,U;wB,O;4B,U;wB;oB,G;wB,G,O;4B,a;wB,G;4B,I,E,C;yB;qB;oB,I,E,C;oB,G,U;wB,O;4B,U;wB;oB,G;wB,I,E,C,8F,I,E,C,I,oB,C,M,I;qB;iB,E,K,I,E;gB,I,E,C;gB,I,c,G,G,U;oB,a;oB,O;wB,Q;oB;gB,G;oB,I,E,C;oB,G,O;wB,G,mB;4B,O;gC,O,I,iB;gC,S;gC,S,I,W;gC,W;4B;4B,I;gC,U,I,M;gC,W,I,O;4B;wB;wB,I,E,C;wB,G,mB;4B,O;gC,O,I,c;gC,S;gC,S,I,U;gC,W;4B;4B,I;gC,U,I,M;gC,W,I,O;4B;wB;qB,E;iB,I,I,E;a,E;S,E;K,E;A;A,I,kB,E;A,Q,M,G;A,Q,e,G;;;;;ADJA,IAAI,OAAO,KAAO;kBAEH,CAAA,UAEf","sources":["node_modules/spinal-env-viewer-plugin-version/index.js","node_modules/spinal-env-viewer-panel-manager-service_spinalforgeextention/index.js","node_modules/spinal-env-viewer-panel-manager-service/index.js","node_modules/spinal-env-viewer-panel-manager-service/SpinalPanelManagerService.js","node_modules/spinal-env-viewer-panel-manager-service/SpinalPanelApp.js","node_modules/spinal-env-viewer-panel-manager-service/SpinalMountExtention.js","node_modules/spinal-env-viewer-panel-manager-service_spinalforgeextention/SpinalForgeExtention.js","node_modules/spinal-env-viewer-plugin-version/src/OpenVersionButton.js","node_modules/spinal-env-viewer-plugin-version/src/utils.js","node_modules/spinal-env-viewer-plugin-version/src/vue/CompareVersion.vue","node_modules/spinal-env-viewer-plugin-version/src/vue/DbIdsSelector.vue"],"sourcesContent":["import { spinalContextMenuService } from \"spinal-env-viewer-context-menu-service\";\nimport { SpinalForgeExtention } from \"spinal-env-viewer-panel-manager-service_spinalforgeextention\";\n\nimport { OpenVersionButton } from \"./src/OpenVersionButton\";\nimport Vue from 'vue'\nimport Vuetify from 'vuetify'\nimport CompareVersion from \"./src/vue/CompareVersion.vue\";\nexport const TOP_BAR_HOOK_NAME = 'GraphManagerTopBar';\n\nVue.use(Vuetify);\n\nspinalContextMenuService.registerApp( TOP_BAR_HOOK_NAME, new OpenVersionButton(), [7] );\nconst compareVersion =  SpinalForgeExtention.createExtention( {\n  name: 'CompareVersion',\n  vueMountComponent: Vue.extend( CompareVersion ),\n  panel: {\n    title: \"Compare BIM Version\",\n    classname: \"spinal-pannel\",\n    closeBehaviour: \"hide\"\n  },\n  style: {\n    left: \"805px\",\n    width: \"430px\",\n    height: \"80vh\",\n    display: \"flex\"\n    \n  }\n} );\n\n\nSpinalForgeExtention.registerExtention( \"CompareVersion\", compareVersion );","/*\n * Copyright 2018 SpinalCom - www.spinalcom.com\n *\n * This file is part of SpinalCore.\n *\n * Please read all of the following terms and conditions\n * of the Free Software license Agreement (\"Agreement\")\n * carefully.\n *\n * This Agreement is a legally binding contract between\n * the Licensee (as defined below) and SpinalCom that\n * sets forth the terms and conditions that govern your\n * use of the Program. By installing and/or using the\n * Program, you agree to abide by all the terms and\n * conditions stated or referenced herein.\n *\n * If you do not agree to abide by these terms and\n * conditions, do not demonstrate your acceptance and do\n * not install or use the Program.\n * You should have received a copy of the license along\n * with this file. If not, see\n * <http://resources.spinalcom.com/licenses.pdf>.\n */\n\nconst {\n  spinalPanelManagerService,\n  SpinalPanelApp\n} = require(\"spinal-env-viewer-panel-manager-service\");\n\nconst SpinalForgeExtention = require(\"./SpinalForgeExtention.js\")(\n  spinalPanelManagerService,\n  SpinalPanelApp\n);\n\nmodule.exports = {\n  SpinalForgeExtention\n};\n","/*\n * Copyright 2018 SpinalCom - www.spinalcom.com\n *\n * This file is part of SpinalCore.\n *\n * Please read all of the following terms and conditions\n * of the Free Software license Agreement (\"Agreement\")\n * carefully.\n *\n * This Agreement is a legally binding contract between\n * the Licensee (as defined below) and SpinalCom that\n * sets forth the terms and conditions that govern your\n * use of the Program. By installing and/or using the\n * Program, you agree to abide by all the terms and\n * conditions stated or referenced herein.\n *\n * If you do not agree to abide by these terms and\n * conditions, do not demonstrate your acceptance and do\n * not install or use the Program.\n * You should have received a copy of the license along\n * with this file. If not, see\n * <http://resources.spinalcom.com/licenses.pdf>.\n */\n\nconst G_root = typeof window == \"undefined\" ? global : window;\nconst SpinalPanelManagerService = require(\"./SpinalPanelManagerService\");\nconst SpinalPanelApp = require(\"./SpinalPanelApp\");\n\nif (typeof G_root.spinal === \"undefined\") G_root.spinal = {};\nif (typeof G_root.spinal.spinalPanelManagerService === \"undefined\")\n  G_root.spinal.spinalPanelManagerService = new SpinalPanelManagerService();\nconst SpinalMountExtention = require(\"./SpinalMountExtention.js\")(\n  G_root.spinal.spinalPanelManagerService,\n  SpinalPanelApp\n);\n\nmodule.exports = {\n  spinalPanelManagerService: G_root.spinal.spinalPanelManagerService,\n  SpinalPanelApp,\n  SpinalMountExtention,\n  install(Vue) {\n    Vue.prototype.$spinalPanelManagerService =\n      G_root.spinal.spinalPanelManagerService;\n  }\n};\n","/*\n * Copyright 2018 SpinalCom - www.spinalcom.com\n *\n * This file is part of SpinalCore.\n *\n * Please read all of the following terms and conditions\n * of the Free Software license Agreement (\"Agreement\")\n * carefully.\n *\n * This Agreement is a legally binding contract between\n * the Licensee (as defined below) and SpinalCom that\n * sets forth the terms and conditions that govern your\n * use of the Program. By installing and/or using the\n * Program, you agree to abide by all the terms and\n * conditions stated or referenced herein.\n *\n * If you do not agree to abide by these terms and\n * conditions, do not demonstrate your acceptance and do\n * not install or use the Program.\n * You should have received a copy of the license along\n * with this file. If not, see\n * <http://resources.spinalcom.com/licenses.pdf>.\n */\n\n/**\n *  Containter like service to register and get applications relative to a hookname\n *\n * @property {object} panels key = panelName, value = an instance of SpinalPanelApp\n * @class SpinalPanelManagerService\n */\nclass SpinalPanelManagerService {\n  /**\n   *Creates an instance of SpinalPanelManagerService.\n   * @memberof SpinalPanelManagerService\n   */\n  constructor() {\n    this.panels = {};\n  }\n\n  /**\n   * method to register an Panel Application\n   *\n   * @param {string} panelName the name of the panel\n   * @param {SpinalPanelApp} spinalPanelApp the application\n   * @memberof SpinalPanelManagerService\n   */\n  registerPanel(panelName, spinalPanelApp) {\n    this.panels[panelName] = spinalPanelApp;\n  }\n\n  /**\n   *\n   *\n   * @param {*} panelName\n   * @param {*} option\n   * @returns {bool}\n   * @memberof SpinalPanelManagerService\n   */\n  openPanel(panelName, option) {\n    if (typeof this.panels[panelName] !== \"undefined\")\n      return this.panels[panelName].openPanel(option);\n    return false;\n  }\n  /**\n   *\n   *\n   * @param {*} panelName\n   * @param {*} option\n   * @returns {bool}\n   * @memberof SpinalPanelManagerService\n   */\n  closePanel(panelName, option) {\n    if (typeof this.panels[panelName] !== \"undefined\")\n      return this.panels[panelName].closePanel(option);\n    return false;\n  }\n  /**\n   *\n   *\n   * @param {*} panelName\n   * @param {*} option\n   * @returns {bool}\n   * @memberof SpinalPanelManagerService\n   */\n  tooglePanel(panelName, option) {\n    if (typeof this.panels[panelName] !== \"undefined\")\n      return this.panels[panelName].tooglePanel(option);\n    return false;\n  }\n}\n\nmodule.exports = SpinalPanelManagerService;\n","/*\n * Copyright 2018 SpinalCom - www.spinalcom.com\n *\n * This file is part of SpinalCore.\n *\n * Please read all of the following terms and conditions\n * of the Free Software license Agreement (\"Agreement\")\n * carefully.\n *\n * This Agreement is a legally binding contract between\n * the Licensee (as defined below) and SpinalCom that\n * sets forth the terms and conditions that govern your\n * use of the Program. By installing and/or using the\n * Program, you agree to abide by all the terms and\n * conditions stated or referenced herein.\n *\n * If you do not agree to abide by these terms and\n * conditions, do not demonstrate your acceptance and do\n * not install or use the Program.\n * You should have received a copy of the license along\n * with this file. If not, see\n * <http://resources.spinalcom.com/licenses.pdf>.\n */\n\n/**\n * Base interface like class of a panel\n *\n * @class SpinalPanelApp\n */\nclass SpinalPanelApp {\n  constructor() {}\n\n  openPanel(option) {}\n  closePanel(option) {}\n  tooglePanel(option) {}\n}\n\nmodule.exports = SpinalPanelApp;\n","/*\n * Copyright 2018 SpinalCom - www.spinalcom.com\n *\n * This file is part of SpinalCore.\n *\n * Please read all of the following terms and conditions\n * of the Free Software license Agreement (\"Agreement\")\n * carefully.\n *\n * This Agreement is a legally binding contract between\n * the Licensee (as defined below) and SpinalCom that\n * sets forth the terms and conditions that govern your\n * use of the Program. By installing and/or using the\n * Program, you agree to abide by all the terms and\n * conditions stated or referenced herein.\n *\n * If you do not agree to abide by these terms and\n * conditions, do not demonstrate your acceptance and do\n * not install or use the Program.\n * You should have received a copy of the license along\n * with this file. If not, see\n * <http://resources.spinalcom.com/licenses.pdf>.\n */\n\nfunction configInit(option) {\n  const cfg = {};\n  if (!option.vueMountComponent) {\n    throw new Error(\"mount : missing option vueMountComponent\");\n  }\n\n  cfg.name = option.name || \"SpinalMount\";\n  cfg.vueMountComponent = option.vueMountComponent;\n  cfg.parentContainer = option.parentContainer || document.body;\n  return cfg;\n}\n\nfunction getDialog() {\n  if (!this.dialog) {\n    this.dialog = document.createElement(\"div\");\n    const _compo = document.createElement(\"div\");\n    this.dialog.className = \"spinal-modal-container\";\n    this.cfg.parentContainer.appendChild(this.dialog);\n    this.dialog.appendChild(_compo);\n    this.compoment = new this.cfg.vueMountComponent({\n      propsData: {\n        onFinised: this.onFinised.bind(this)\n      }\n    }).$mount(_compo);\n  }\n  return this.dialog;\n}\n\n/**\n *\n * @param {*} spinalPanelManagerService\n * @param {*} SpinalPanelApp\n * @returns {object} { mount }\n */\nmodule.exports = function(spinalPanelManagerService, SpinalPanelApp) {\n  return {\n    /**\n```js\n{\n  name: \"myCustomDialogName\",\n  vueMountComponent: Vue.extend(aVueCompomentDialog),\n  parentContainer: document.body\n}```\n     *\n     * @param {*} option\n     */\n    mount(option) {\n      let cfg = configInit(option);\n      const SpinalMount = class extends SpinalPanelApp {\n        constructor() {\n          super();\n          this.cfg = cfg;\n          this.dialog = null;\n          this.compoment = null;\n        }\n\n        openPanel(opt) {\n          getDialog.call(this);\n          this.compoment.opened(opt);\n        }\n        closePanel(opt) {\n          if (this.dialog !== null) {\n            this.compoment.removed(opt);\n            this.dialog.remove();\n            this.dialog = null;\n            this.compoment = null;\n          }\n        }\n\n        tooglePanel(opt) {\n          if (this.dialog !== null) {\n            this.closePanel(opt);\n          } else {\n            this.openPanel(opt);\n          }\n        }\n\n        /**\n         * called when dialog closed by the dialog itself\n         */\n        onFinised(closeResult) {\n          this.closePanel(closeResult);\n        }\n      };\n      let SpinalMountInstance = new SpinalMount();\n      spinalPanelManagerService.registerPanel(cfg.name, SpinalMountInstance);\n    }\n  };\n};\n","/*\n * Copyright 2023 SpinalCom - www.spinalcom.com\n * \n * This file is part of SpinalCore.\n * \n * Please read all of the following terms and conditions\n * of the Free Software license Agreement (\"Agreement\")\n * carefully.\n * \n * This Agreement is a legally binding contract between\n * the Licensee (as defined below) and SpinalCom that\n * sets forth the terms and conditions that govern your\n * use of the Program. By installing and/or using the\n * Program, you agree to abide by all the terms and\n * conditions stated or referenced herein.\n * \n * If you do not agree to abide by these terms and\n * conditions, do not demonstrate your acceptance and do\n * not install or use the Program.\n * You should have received a copy of the license along\n * with this file. If not, see\n * <http://resources.spinalcom.com/licenses.pdf>.\n */\n\nfunction configInit(option) {\n  const cfg = {};\n  if (typeof option.toolbar !== \"undefined\") {\n    cfg.toolbar = {\n      icon: option.toolbar.icon || \"done\",\n      label: option.toolbar.label || \"label\",\n      subToolbarName: option.toolbar.subToolbarName || \"spinalcom\",\n      styleBtn: {},\n      styleIcon: {}\n    };\n    Object.assign(cfg.toolbar.styleBtn, option.toolbar.styleBtn);\n    Object.assign(cfg.toolbar.styleIcon, option.toolbar.styleIcon);\n  }\n  if (typeof option.panel !== \"undefined\") {\n    cfg.panel = {\n      title: option.panel.title || \"Spinalcom Panel\",\n      classname: option.panel.classname || \"spinal-pannel\",\n      closeBehaviour: option.panel.closeBehaviour || \"hide\"\n    };\n    if (typeof option.style !== \"undefined\") {\n      cfg.style = {};\n      Object.assign(cfg.style, option.style);\n    }\n  }\n  cfg.name = option.name || \"spinalExtention\";\n  cfg.vueMountComponent = option.vueMountComponent;\n  cfg.onLoad = option.onLoad;\n  cfg.onUnLoad = option.onUnLoad;\n  return cfg;\n}\n\nfunction onToolbarCreated() {\n  this.viewer.removeEventListener(\n    window.Autodesk.Viewing.TOOLBAR_CREATED_EVENT,\n    this.onToolbarCreatedBinded\n  );\n  this.onToolbarCreatedBinded = null;\n  createToolbar.call(this);\n}\n\nfunction createToolbar() {\n  this.toolbarButton = new window.Autodesk.Viewing.UI.Button(\n    this.cfg.toolbar.label\n  );\n  this.toolbarButton.onClick = () => {\n    this.tooglePanel(this.cfg);\n  };\n  var icon = this.toolbarButton.container.firstChild;\n  icon.className = \"adsk-button-icon md-icon md-icon-font md-theme-default\";\n  icon.innerHTML = this.cfg.toolbar.icon;\n\n  for (var key in this.cfg.toolbar.styleIcon) {\n    if (this.cfg.toolbar.styleIcon.hasOwnProperty(key)) {\n      icon.style[key] = this.cfg.toolbar.styleIcon[key];\n    }\n  }\n  for (var key in this.cfg.toolbar.styleBtn) {\n    if (this.cfg.toolbar.styleBtn.hasOwnProperty(key)) {\n      this.toolbarButton.container.style[key] = this.cfg.toolbar.styleBtn[key];\n    }\n  }\n\n  this.toolbarButton.setToolTip(this.cfg.toolbar.label);\n  this.subToolbar = this.viewer.toolbar.getControl(\n    this.cfg.toolbar.subToolbarName\n  );\n  if (!this.subToolbar) {\n    this.subToolbar = new window.Autodesk.Viewing.UI.ControlGroup(\n      this.cfg.toolbar.subToolbarName\n    );\n    this.viewer.toolbar.addControl(this.subToolbar);\n  }\n  this.subToolbar.addControl(this.toolbarButton);\n}\n\nfunction closeComponent() {\n  if (this.cfg.panel.closeBehaviour !== \"hide\") {\n    try {\n      this.component.removed.call(this.component);\n    } catch (e) {\n      console.error(e);\n    }\n    this.panel.container.remove();\n    this.panel = null;\n  } else {\n    try {\n      this.component.closed.call(this.component);\n    } catch (e) {\n      console.error(e);\n    }\n  }\n}\n\nfunction getPanel() {\n  if (this.panel === null) {\n    this.panel = new window.PanelClass(this.viewer, this.cfg.panel.title);\n    var _container = document.createElement(\"div\");\n    var _scrollContainer = this.panel.createScrollContainer();\n\n    _container.className +=\n      this.panel.container.id + \"-panelcontainer \" + this.cfg.panel.classname;\n    for (var key in this.cfg.style) {\n      if (this.cfg.style.hasOwnProperty(key)) {\n        this.panel.container.style[key] = this.cfg.style[key];\n      }\n    }\n\n    if (this.panel.container.style.left) {\n      this.panel.container.style.left = \"0\";\n    }\n\n    this.panel.container.appendChild(_scrollContainer);\n    _scrollContainer.style.height = \"calc(100% - 52px)\";\n    _scrollContainer.appendChild(_container);\n\n    var _footer = this.panel.createFooter();\n    this.panel.container.appendChild(_footer);\n\n    if (this.cfg.vueMountComponent) {\n      this.component = new this.cfg.vueMountComponent().$mount(_container);\n    }\n\n    const _this = this;\n    this.panel.addVisibilityListener(open => {\n      if (!open) {\n        closeComponent.call(_this);\n      }\n    });\n  }\n  return this.panel;\n}\n\n/**\n *\n *\n * @param {*} spinalPanelManagerService\n * @param {*} SpinalPanelApp\n * @returns {object} { createExtention, registerExtention }\n */\nmodule.exports = function (spinalPanelManagerService, SpinalPanelApp) {\n  return {\n    /**\n     * factory function to create a dynamic class that extends the `SpinalPanelApp` class\n     *```js\n{\n  name: \"extention_name\",\n  vueMountComponent: Vue.extend(aVueCompoment),\n  onLoad: () => {console.log(\"onLoad\");},\n  onUnLoad: () => {console.log(\"onUnLoad\");},\n  toolbar: {\n    icon: \"done\",\n    label: \"testLabel\",\n    subToolbarName: \"spinalcom\"\n  },\n  panel: {\n    title: \"Spinalcom Panel\",\n    classname: \"spinal-pannel\",\n    closeBehaviour: \"hide\"\n  },\n  style: {}\n}\n```\n     * @param {object} option see description\n     * @returns SpinalForgeExtention\n     */\n    createExtention(option) {\n      const cfg = configInit(option);\n      /**\n       * class returned by createExtention\n       * this extention is also registered in autodesk viweer\n       * @extends SpinalPanelApp\n       * @property {AutodeskViewer} viewer the autodesk view\n       * @property {AutodeskPanel} panel the panel\n       * @property {Vue.component} component the component mounted\n       * @property {Object} cfg the option given on creation\n       */\n      const SpinalForgeExtention = class extends SpinalPanelApp {\n        constructor(viewer, options) {\n          super();\n          window.Autodesk.Viewing.Extension.call(this, viewer, options);\n          this.viewer = viewer;\n          this.panel = null;\n          this.cfg = cfg;\n          spinalPanelManagerService.registerPanel(cfg.name, this);\n        }\n        /**\n         * method called on load of the extention (managed by the autodesk viewer)\n         * the method create a button in the toolbar if put in the option of `createExtention`.\n         */\n        load() {\n          if (typeof cfg.toolbar !== \"undefined\") {\n            // add toolbar\n            if (this.viewer.toolbar) {\n              createToolbar.call(this);\n            } else {\n              this.onToolbarCreatedBinded = onToolbarCreated.bind(this);\n              this.viewer.addEventListener(\n                window.Autodesk.Viewing.TOOLBAR_CREATED_EVENT,\n                this.onToolbarCreatedBinded\n              );\n            }\n          }\n          if (typeof cfg.onLoad !== \"undefined\") cfg.onLoad.call(this);\n          return true;\n        }\n        /**\n         * method called when the viewer unload of the extention\n         * (managed by the autodesk viewer)\n         */\n        unload() {\n          if (typeof cfg.toolbar !== \"undefined\") {\n            this.viewer.subToolbar.removeControl(this.toolbarButton);\n          }\n          if (typeof cfg.onUnLoad !== \"undefined\") cfg.onUnLoad.call(this);\n          return true;\n        }\n\n        activate() {\n          return this.load();\n        }\n\n        deactivate() {\n          return this.unload();\n        }\n\n        /**\n         *\n         * @param {*} option\n         */\n        openPanel(option) {\n          const panel = getPanel.call(this);\n          panel.setVisible(true);\n          try {\n            this.component.opened.call(this.component, option, this.viewer);\n          } catch (e) {\n            console.error(e);\n          }\n        }\n        /**\n         *\n         *\n         * @param {*} option\n         */\n        closePanel(option) {\n          const panel = getPanel.call(this);\n          panel.setVisible(false);\n        }\n        /**\n         *\n         *\n         * @param {*} option\n         */\n        tooglePanel(option) {\n          if (this.panel === null || this.panel.isVisible() === false) {\n            this.openPanel.call(this, option);\n          } else { this.closePanel.call(this, option); }\n        }\n      };\n      return SpinalForgeExtention;\n    },\n\n    /**\n     * Method to register an extention to the viewer and the forge viewer\n     * @param {string} name name of the extention\n     * @param {*} classExtention an extention created by `createExtention`\n     */\n    registerExtention(name, classExtention) {\n      // register to forge\n      window.Autodesk.Viewing.theExtensionManager.registerExtension(\n        name,\n        classExtention\n      );\n      // register to viewer\n      window.spinal.ForgeExtentionManager.addExtention(name);\n    }\n  };\n};\n","/*\n * Copyright 2019 SpinalCom - www.spinalcom.com\n *\n *  This file is part of SpinalCore.\n *\n *  Please read all of the following terms and conditions\n *  of the Free Software license Agreement (\"Agreement\")\n *  carefully.\n *\n *  This Agreement is a legally binding contract between\n *  the Licensee (as defined below) and SpinalCom that\n *  sets forth the terms and conditions that govern your\n *  use of the Program. By installing and/or using the\n *  Program, you agree to abide by all the terms and\n *  conditions stated or referenced herein.\n *\n *  If you do not agree to abide by these terms and\n *  conditions, do not demonstrate your acceptance and do\n *  not install or use the Program.\n *  You should have received a copy of the license along\n *  with this file. If not, see\n *  <http://resources.spinalcom.com/licenses.pdf>.\n */\n\nimport { SpinalContextApp } from 'spinal-env-viewer-context-menu-service';\nimport { SpinalGraphService } from \"spinal-env-viewer-graph-service\";\nimport { loadModelPtr } from \"./utils\";\n\nconst { spinalPanelManagerService } = require( \"spinal-env-viewer-panel-manager-service\" );\n\nexport class OpenVersionButton extends SpinalContextApp {\n  \n  constructor() {\n    super( 'Open Model Manager', 'Open Model Manager', {\n      icon: 'sort',\n      icon_type: 'in',\n      backgroundColor: '#000000',\n      fontColor: '#ffffff'\n    } );\n    \n    this.action = this.openPanel.bind( this );\n  }\n  \n  isShown( option ) {\n    return Promise.resolve( true );\n  }\n  \n \n  \n  openPanel(  ) {\n    const context = SpinalGraphService.getContext( 'BimFileContext' );\n    const promises = [];\n    \n    SpinalGraphService.getChildrenInContext( context.info.id.get(), context.info.id.get() )\n      .then( children => {\n       \n        spinalPanelManagerService.openPanel( \"CompareVersion\", {bimFiles: children} );\n      \n  \n      } )\n  }\n}","import {\n  FileSystem,\n  File,\n  Ptr\n} from 'spinal-core-connectorjs_type';\n\nconst mapModelDictionary = new Map();\n\nexport function loadModelPtr( model ) {\n  if (model instanceof File) {\n    return loadModelPtr( model._ptr );\n  }\n  if (!(model instanceof Ptr)) {\n    throw new Error( 'loadModelPtr must take Ptr as parameter' );\n  }\n  if (!model.data.value && model.data.model) {\n    return Promise.resolve( model.data.model );\n  } else if (!model.data.value) {\n    throw new Error( 'Trying to load a Ptr to 0' );\n  }\n  \n  if (mapModelDictionary.has( model.data.value )) {\n    return mapModelDictionary.get( model.data.value );\n  }\n  if (typeof FileSystem._objects[model.data.value] !== 'undefined') {\n    const promise = Promise.resolve( FileSystem._objects[model.data.value] );\n    mapModelDictionary.set( model.data.value, promise );\n    return promise;\n  }\n  const promise = new Promise( ( resolve, reject ) => {\n    model.load( m => {\n      if (!m) {\n        mapModelDictionary.delete( model.data.value );\n        reject( new Error( 'Error in load Ptr' ) );\n      } else {\n        resolve( m );\n      }\n    } );\n    \n  } );\n  mapModelDictionary.set( model.data.value, promise );\n  return promise;\n}\n\n\n\n\nexport default loadModelPtr;","<template>\n    <div class=\"compare-bim-panel\">\n        <v-container grid-list-md text-xs-center>\n\n            <v-layout wrap align-center>\n                <v-flex xs12 sm6 d-flex>\n\n                    <v-select\n                            :items=\"items\"\n                            :dark=\"true\"\n                            label=\"Model\"\n                            @input=\"onBIMFileSelected\"\n                            :attach=\"true\"\n                    ></v-select>\n\n                </v-flex>\n\n\n                <v-flex d-flex xs12 v-if=\"displayVersion\">\n\n                    <v-flex d-flex xs4>\n                        <v-select\n                                :items=\"versionNum\"\n                                :dark=\"true\"\n                                label=\"Nouvelle version\"\n                                @input=\"onPrimaryVersionSelected\"\n                                :attach=\"true\"\n                        ></v-select>\n                    </v-flex>\n                    <v-flex d-flex xs4>\n                        <v-icon class=\"compare-icon\" large>\n                            compare_arrows\n                        </v-icon>\n                    </v-flex>\n                    <v-flex d-flex xs4>\n                        <v-select\n                                :items=\"versionNum\"\n                                :dark=\"true\"\n                                label=\"Anciene version\"\n                                @input=\"onSecondaryVersionSelected\"\n                                :attach=\"true\"\n                        ></v-select>\n                    </v-flex>\n\n                </v-flex>\n\n                <v-flex v-if=\"primaryVersion !== 0 && secondaryVersion !== 0\n                  && !comparisonDone \">\n                    <v-btn color=\"blue\" @click=\"compareVersion\"> Comparer\n                    </v-btn>\n                </v-flex>\n                <v-flex d-flex xs12 v-if=\"comparisonDone\">\n                    <v-flex d-flex>\n                        Nombre object de la premiere version :\n                        {{primaryExternalIds.length}}\n                    </v-flex>\n                    <v-flex d-flex>\n                        <div class=\"empty-space\">\n                            test version comment\n                        </div>\n                    </v-flex>\n                    <v-flex d-flex>\n                        Nombre object de la seconde version :\n                        {{secondaryExternalIds.length}}\n                    </v-flex>\n\n                </v-flex>\n                <v-flex xs12 class=\"comparison-summary\" v-if=\"comparisonDone\">\n                    Resumé de comparaison\n                    <div>\n\n                        <db-ids-selector :ids=\"removedExternalId\"\n                                         title=\"Nombre object supprimé\"\n                                         :model=\"secondModel\"\n                                         typeIds=\"removed\"\n                                         @select=\"select\"\n                                         @isolate=\"isolate\"\n                        />\n<!--\n                        <db-ids-selector :ids=\"sameExternalIds\"\n                                         title=\"Nombre object conservé \"\n                                         :model=\"firstModel\"\n                                         typeIds=\"same\"\n                                         @select=\"select\"\n                                         @isolate=\"isolate\"\n                        />\n-->\n                        <db-ids-selector :ids=\"newExternalIds\"\n                                         title=\"Nombre de nouveaux object\"\n                                         :model=\"firstModel\"\n                                         typeIds=\"new\"\n                                         @select=\"select\"\n                                         @isolate=\"isolate\"\n                        />\n                    </div>\n                </v-flex>\n            </v-layout>\n\n        </v-container>\n    </div>\n</template>\n<script>\n  import { loadModelPtr } from \"../utils\";\n  import DbIdsSelector from \"./DbIdsSelector.vue\";\n\n  export default {\n    name: \"CompareVersion\",\n    components: { DbIdsSelector },\n    data: function () {\n      return {\n        viewer: null,\n        dialog: false,\n        items: [],\n        bimFiles: [],\n        selectedModel: \"\",\n        displayVersion: false,\n        versionList: [],\n        nbVersion: 0,\n        versionNum: [],\n        versionExcludeNum: [],\n        primaryVersion: 0,\n        secondaryVersion: 0,\n        comparisonDone: false,\n        primaryDbids: [],\n        secondaryDbids: [],\n        primaryExternalIds: [],\n        secondaryExternalIds: [],\n        firstModel: null,\n        secondModel: null,\n        removedExternalId: [],\n        sameExternalIds: [],\n        newExternalIds: [],\n        removedId: [],\n        sameId: [],\n        newId: [],\n        externalIdMapping: {}\n      }\n    },\n    computed: {\n      availableVersionNum: function () {\n        this.versionNum.filter()\n      }\n    },\n    methods: {\n\n      init: function ( option ) {\n        this.dialog = true;\n        this.items = [];\n        this.bimFiles = option.bimFiles;\n        this.selectedModel = \"\";\n        this.displayVersion = false;\n        this.versionList = [];\n        this.nbVersion = 0;\n        this.versionNum = [];\n        this.comparisonDone = false;\n        this.primaryDbids = [];\n        this.secondaryDbids = [];\n        this.primaryExternalIds = [];\n        this.secondaryExternalIds = [];\n        this.firstModel = null;\n        this.externalIdMapping = {}\n      },\n      opened: function ( option ) {\n        this.init( option );\n\n        for (let i = 0; i < this.bimFiles.length; i++) {\n          this.items.push( { text: this.bimFiles[i].name.get(), value: i } );\n        }\n\n        this.viewer = window.spinal.ForgeViewer.viewer;\n      },\n      onBIMFileSelected: function ( e ) {\n        this.selectedModel = e;\n      },\n      getVersionList: function ( bimFile ) {\n        loadModelPtr( bimFile.element.ptr ).then( elt => {\n          this.versionList = elt.versionLst;\n          this.nbVersion = elt.versionLst.length;\n          for (let i = 0; i < elt.versionLst.length; i++) {\n            this.versionNum.push( i + 1 );\n          }\n        } )\n      },\n      onPrimaryVersionSelected: function ( e ) {\n        this.primaryVersion = e;\n      },\n      onSecondaryVersionSelected: function ( e ) {\n        this.secondaryVersion = e;\n      },\n      compareVersion: async function () {\n\n        const primaryPath = this.getSVF(\n          this.versionList[this.primaryVersion - 1],\n          this.primaryVersion\n        );\n\n        const secondaryPath = this.getSVF(\n          this.versionList[this.secondaryVersion - 1],\n          this.secondaryVersion\n        );\n\n        this.firstModel = await this.loadModel( primaryPath );\n        this.secondModel = await this.loadModel( secondaryPath );\n\n\n        this.primaryDbids = await this.getDBIDs( this.firstModel );\n        this.secondaryDbids = await this.getDBIDs( this.secondModel );\n\n        let primaryProms = this.primaryDbids.map( dbId => {\n          return this.getExternalId( dbId, this.firstModel );\n        } );\n        let secondaryProm = this.secondaryDbids.map( dbId => {\n          return this.getExternalId( dbId, this.secondModel );\n        } );\n\n\n        this.primaryExternalIds = await this.promAll( primaryProms );\n        this.secondaryExternalIds = await this.promAll( secondaryProm );\n\n        this.removedExternalId = this.secondaryExternalIds\n          .filter( id => this.primaryExternalIds.indexOf( id ) === -1 );\n        this.sameExternalIds = this.primaryExternalIds.filter( id =>\n          this.secondaryExternalIds.indexOf( id ) !== -1 );\n        this.newExternalIds = this.primaryExternalIds.filter( id =>\n          this.secondaryExternalIds.indexOf( id ) === -1 );\n\n\n        this.mapExternalId()\n          .then( () => {\n            console.log( \"mapping done\" );\n            this.viewer = window.spinal.ForgeViewer.viewer;\n            console.log('mapping ici ', this);\n              /*  this.viewer.hide( this.sameId, this.firstModel );\n               this.viewer.hide( this.sameId, this.secondModel );\n               */\n            this.colorModel( this.newIds, this.firstModel, new THREE.Vector4(\n              0, 255, 0, 0.7 ) );\n            this.colorModel( this.removedId, this.secondModel, new\n            THREE.Vector4( 255, 0, 0, 0.7 ) );\n            window.newId = this.newIds;\n            window.removedId = this.removedId;\n\n\n            this.viewer.impl.invalidate();\n            this.comparisonDone = true;\n          } )\n\n      },\n      colorModel( ids, model, color ) {\n\n        for (let i = 0; i < ids.length; i++) {\n          const id = ids[i];\n\n          if (id !== 1) {\n            this.viewer.setThemingColor(\n              id,\n              color,\n              model,\n              false\n            );\n          }\n\n        }\n      },\n      mapExternalId:  function () {\n        return new Promise ( async (resolve, reject) => {\n          try {\n            this.removedId = await this.getAllDbIdFromExternalId( this.removedExternalId,\n              this.secondModel );\n            this.newIds = await this.getAllDbIdFromExternalId( this.newExternalIds,\n              this.firstModel );\n            resolve();\n          } catch ( e ) {\n            reject(e);\n          }\n        })\n\n\n      },\n\n      async promAll( proms ) {\n        const res = [];\n        for (let i = 0; i < proms.length; i++) {\n          try {\n\n            res.push( await proms[i] );\n          } catch ( e ) {\n            console.error( e );\n          }\n        }\n\n        return res;\n      },\n\n      getExternalId: function ( dbId, model ) {\n        return new Promise( ( resolve, reject ) => {\n          model.getProperties( dbId, ( props ) => {\n            resolve( props.externalId );\n          }, reject )\n        } )\n      },\n\n      getAllDbIdFromExternalId: function ( externalIds, model ) {\n        const proms = [];\n        for (let i = 0; i < externalIds.length; i++) {\n          proms.push( this.getDbIdFromExternalId( externalIds[i], model ) )\n        }\n\n        return Promise.all( proms )\n      },\n      getDbIdFromExternalId: function ( externalId, model ) {\n        return new Promise( ( resolve, reject ) => {\n          if (typeof this.externalIdMapping[model.id] === \"undefined\") {\n            model.getExternalIdMapping( (function external( res ) {\n              this.externalIdMapping[model.id] = res;\n              resolve( res[externalId] );\n            }).bind( this ), reject );\n          } else\n            resolve( this.externalIdMapping[model.id][externalId] );\n        } )\n      },\n\n      getAllDbIdsRec( model, callback ) {\n        let cbCount = 0; // count pending callbacks\n        const components = []; // store the results\n        let tree; // the instance tree\n\n        function getLeafComponentsRec( parent ) {\n          cbCount++;\n          if (tree.getChildCount( parent ) !== 0) {\n            tree.enumNodeChildren( parent, function ( children ) {\n              getLeafComponentsRec( children );\n            }, false );\n          } else\n            components.push( parent );\n          if (--cbCount === 0) callback( components );\n        }\n\n        model.getObjectTree( function ( objectTree ) {\n          tree = objectTree;\n          var allLeafComponents = getLeafComponentsRec( tree.getRootId() );\n        } );\n      },\n\n      getDBIDs( model ) {\n        return new Promise( resolve => {\n          this.getAllDbIdsRec( model, resolve );\n        } )\n      },\n\n      loadModel( path ) {\n        return new Promise( ( resolve, reject ) => {\n          const eventListener = ( e ) => {\n            this.viewer.removeEventListener( eventListener );\n            resolve( e.model )\n          };\n\n          this.viewer.addEventListener( Autodesk.Viewing.GEOMETRY_LOADED_EVENT,\n            eventListener.bind( this ) );\n\n          this.viewer.loadModel( path, {}, () => {}, ( e ) => {\n            this.viewer.removeEventListener( eventListener );\n            reject( e );\n\n          } );\n        } )\n      },\n      getSVF: function ( version ) {\n        const items = version.items;\n\n        for (let i = 0; i < items.length; i++) {\n          const item = items[i];\n          if (item.path.get().indexOf( 'svf' ) !== -1) {\n            //TODO change with env\n            return \"http://\" + window.location.host + item.path.get()\n          }\n        }\n      },\n\n      isolate: function ( event ) {\n        let ids;\n        switch ( event.typeIds ) {\n          case \"new\":\n            ids= this.newIds;\n            break;\n          case \"removed\":\n            ids = this.removedId;\n            break;\n          default:\n            ids = this.sameExternalIds;\n        }\n\n        if (event.model.id === 2){\n          this.hideModel(this.secondModel);\n        }\n        else {\n          this.hideModel(this.firstModel)\n        }\n\n        console.log( \"isolate\", event, this.removedId, this.newIds );\n        this.viewer.isolate( ids, event.model );\n\n      },\n      select: function ( event ) {\n        let ids;\n        switch ( event.typeIds ) {\n          case \"new\":\n            ids= this.newIds;\n            break;\n          case \"removed\":\n            ids = this.removedId;\n            break;\n          default:\n            ids = this.sameExternalIds;\n        }\n        if (event.model.id === 2){\n          this.hideModel(this.secondModel);\n        }\n        else {\n          this.hideModel(this.firstModel)\n        }\n        this.viewer.select( ids, event.model,\n          Autodesk.Viewing.SelectionMode.MIXED);\n      },\n      hideModel(model){\n        this.viewer.hideModel(model.id);\n        if (model.id === 2)\n          this.viewer.showModel(3);\n        else\n          this.viewer.showModel(2);\n      }\n    },\n    watch: {\n      selectedModel: {\n        handler: function ( value ) {\n          this.displayVersion = value !== \"\";\n          if (value !== \"\") {\n            const index = parseInt( value );\n            if (!isNaN( index ))\n              this.getVersionList( this.bimFiles[index] )\n          }\n\n        },\n        immediate: true\n      }\n    }\n  }\n</script>\n<style>\n    .compare-bim-panel {\n        height: calc(100% - 19px);\n        margin: 10px;\n    }\n\n    .compare-bim-panel * {\n        box-sizing: border-box;\n    }\n\n    .comparison-summary {\n        border: 1px solid white;\n        margin: 8px;\n        padding: 8px;\n\n    }\n\n    .empty-space {\n        visibility: hidden;\n    }\n\n    .compare-icon {\n        display: inline-flex;\n    }\n</style>\n\n","<template>\n    <div>\n        {{title}} :\n        {{ids.length}}\n        <v-btn flat icon color=\"white\" @click=\"select\">\n            <v-icon>select_all</v-icon>\n        </v-btn>\n        <v-btn flat icon color=\"white\" @click=\"isolate\">\n            <v-icon>settings_overscan</v-icon>\n        </v-btn>\n    </div>\n</template>\n\n<script>\n  export default {\n    name: \"DbIdsSelector\",\n    props: {\n      title: {type: String, required: true},\n      ids: {type: Array, required: true},\n      model: {type: Object, required: true},\n      typeIds : {type: String, required: true}\n    },\n    methods:{\n      isolate: function () {\n        this.$emit('isolate', {ids: this.ids, model: this.model, typeIds:\n          this.typeIds})\n      },\n      select: function (){\n        this.$emit('select', {ids: this.ids, model: this.model, typeIds: this.typeIds})\n      }\n    }\n  }\n</script>\n\n<style scoped>\n\n</style>"],"names":[],"version":3,"file":"spinal-env-viewer-plugin-version.d44c28fc.js.map"}