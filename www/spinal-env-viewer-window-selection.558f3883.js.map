{"mappings":"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","sources":["node_modules/spinal-env-viewer-window-selection/index.js","node_modules/spinal-env-viewer-window-selection/js/selection.js","node_modules/spinal-env-viewer-window-selection/extensions/Viewing.Extension.SelectionWindow.Tool.js","node_modules/spinal-env-viewer-window-selection/extensions/selectionExtension.js","node_modules/spinal-env-viewer-window-selection/extensions/GeometryIntersectsBox3.js","node_modules/spinal-env-viewer-window-selection/extensions/viewer.toolkit.js","node_modules/spinal-env-viewer-window-selection/extensions/EventsEmitter.js","node_modules/spinal-env-viewer-window-selection/extensions/cursors.js","node_modules/spinal-env-viewer-window-selection/js/createToolbar.js"],"sourcesContent":["import extensionName from \"./js/selection\";\n\nimport SpinalWindowSelection from \"./js/createToolbar\";\n\nconst TOOLBAR_GROUP_NAME = \"spinalcom\";\n\n\nconst EXTENSION_NAME = \"spinal-window-selection\";\n\nlet extension;\n\n// document.addEventListener('keydown', function(event) {\n//   extension = typeof extension === \"undefined\" ? window.spinal.ForgeViewer\n//     .viewer\n//     .getExtension(extensionName) : extension;\n\n//   if (event.altKey && event.ctrlKey) {\n//     extension.startSelection();\n//   }\n\n// })\n\n// document.addEventListener('keyup', function(event) {\n//   if (typeof extension !== \"undefined\" && (event.keyCode === 17 || event\n//       .keyCode === 18)) {\n//     extension.disableSelectionMode();\n//   }\n// })\n\n\nconst windowSelection = SpinalWindowSelection({\n  name: \"spinal-window-selection\",\n  icon: \"crop_free\",\n  label: \"window selection\",\n  subToolbarName: TOOLBAR_GROUP_NAME\n}, () => {\n  extension = typeof extension === \"undefined\" ? window.spinal.ForgeViewer\n    .viewer\n    .getExtension(extensionName) : extension;\n\n  if (!extension.active) {\n    extension.startSelection();\n  } else {\n    extension.disableSelectionMode();\n  }\n\n});\n\nwindow.Autodesk.Viewing.theExtensionManager.registerExtension(\n  EXTENSION_NAME,\n  windowSelection\n);\n\nwindow.spinal.ForgeExtentionManager.addExtention(EXTENSION_NAME);","import SelectionWindowTool from \"../extensions/Viewing.Extension.SelectionWindow.Tool\";\n// import Toolkit from '../extensions/viewer.toolkit';\n// import MultiModelExtensionBase from '../extensions/Viewer.MultiModelExtensionBase';\n\nclass SelectionComponent {\n\n  constructor(viewer) {\n    this.viewer = viewer;\n  }\n\n  load() {\n    this.selection = null;\n    this.active = false;\n\n    // this.viewer.loadExtension(\n    //   'Viewing.Extension.ContextMenu', {\n    //     buildMenu: (menu) => {\n    //       return menu.map((item) => {\n    //         const title = item.title.toLowerCase()\n    //         if (title === 'show all objects') {\n    //           return {\n    //             title: 'Show All objects',\n    //             target: () => {\n    //               Toolkit.isolateFull(this.viewer)\n    //               this.viewer.fitToView()\n    //             }\n    //           }\n    //         }\n    //         return item\n    //       })\n    //     }\n    //   })\n\n    this.onModelRootLoaded();\n\n    this.onModelActivated(this.viewer);\n\n\n    return true\n\n  }\n\n  get className() {\n\n    return 'selection-window'\n  }\n\n  /////////////////////////////////////////////////////////\n  // Extension Id\n  //\n  /////////////////////////////////////////////////////////\n  static get ExtensionId() {\n    return 'Viewing.Extension.SelectionWindow'\n  }\n\n  /////////////////////////////////////////////////////////\n  // Unload callback\n  //\n  /////////////////////////////////////////////////////////\n  unload() {\n\n\n    this.selectionWindowTool.off()\n\n    super.unload()\n\n    return true\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  onModelRootLoaded() {\n\n    this.selectionWindowTool =\n      new SelectionWindowTool(this.viewer)\n\n    this.selectionWindowTool.on('deactivate', () => {\n      this.active = false;\n    })\n\n    this.selectionWindowTool.on('activate', () => {\n      this.active = true;\n    })\n\n    this.selectionWindowTool.on('selection',\n      (selection) => {\n\n        this.viewer.impl.selector.setSelection(\n          selection.dbIds,\n          selection.model)\n\n        this.selection = selection;\n      })\n\n\n    this.viewer.addEventListener(window.Autodesk.Viewing.VIEWER_INITIALIZED,\n      () => {\n\n        this.viewer.toolController.registerTool(\n          this.selectionWindowTool)\n      })\n\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  onModelActivated(event) {\n\n    this.selectionWindowTool.setModel(event.model)\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  setPartialSelect(partialSelect) {\n\n    this.selectionWindowTool.setPartialSelect(partialSelect)\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  startSelection() {\n\n    this.selection = null;\n\n    this.viewer.toolController.activateTool(\n      this.selectionWindowTool.getName())\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  disableSelectionMode() {\n    this.selectionWindowTool.deactivate();\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n\n  onNodeClicked(node) {\n\n    const model = node.model\n\n    if (model) {\n\n      switch (node.type) {\n\n        case 'component':\n          this.viewer.impl.selector.setSelection(\n            [node.id],\n            model)\n          break\n\n        case 'root':\n          this.viewer.impl.selector.setSelection(\n            node.props.childIds,\n            model)\n          break\n      }\n    }\n  }\n\n}\n\n\nwindow.Autodesk.Viewing.theExtensionManager.registerExtension(\n  SelectionComponent.ExtensionId,\n  SelectionComponent)\n\nwindow.spinal.ForgeExtentionManager.addExtention(\n  'Viewing.Extension.SelectionWindow')\n\nexport default 'Viewing.Extension.SelectionWindow'","import SelectSet from './selectionExtension'\nimport EventsEmitter from './EventsEmitter'\nimport cursors from './cursors'\n\nvar _CROSS_MAX_WIDTH = 20;\n\nexport default class SelectionWindowTool extends EventsEmitter {\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  constructor(viewer) {\n\n    super()\n\n    this.onResize = this.onResize.bind(this)\n\n    this.selectSet = new SelectSet(viewer)\n\n    this.partialSelect = false\n    this.materialLine = null\n    this.isDragging = false\n    this.crossGeomX = null\n    this.crossGeomY = null\n    this.isActive = false\n    this.rectGroup = null\n    this.lineGeom = null\n    this.viewer = viewer\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  getNames() {\n\n    return [\"selectionWindowTool\"]\n  }\n\n  getName() {\n\n    return \"selectionWindowTool\"\n  }\n\n  getPriority() {\n\n    return 1000\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  onResize() {\n\n    const overlay =\n      this.viewer.impl.overlayScenes[\n        'selectionWindowOverlay']\n\n    if (overlay) {\n\n      const canvas = this.viewer.canvas\n\n      const camera = new window.THREE.OrthographicCamera(\n        0, canvas.clientWidth,\n        0, canvas.clientHeight,\n        1, 1000)\n\n      overlay.camera = camera\n    }\n\n    this.rectGroup = null\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  setModel() {\n\n    if (this.isActive) {\n      let allModels = Object.values(window.spinal.ForgeViewer.viewerManager\n        .models);\n\n      this.model = allModels;\n\n      this.selectSet.setModel(allModels);\n    }\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  setPartialSelect(partialSelect) {\n\n    this.partialSelect = partialSelect\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  activate() {\n\n    if (!this.isActive) {\n\n      this.viewer.clearSelection()\n\n      this.model = Object.values(window.spinal.ForgeViewer.viewerManager\n        .models);\n\n      this.selectSet.setModel(this.model)\n\n      this.materialLine = new window.THREE.LineBasicMaterial({\n        color: new window.THREE.Color(0x0000FF),\n        linewidth: 0.5,\n        opacity: .6\n      })\n\n      this.mouseStart = new window.THREE.Vector3(0, 0, -10)\n\n      this.mouseEnd = new window.THREE.Vector3(0, 0, -10)\n\n      const canvas = this.viewer.canvas\n\n      const camera = new window.THREE.OrthographicCamera(\n        0, canvas.clientWidth,\n        0, canvas.clientHeight,\n        1, 1000)\n\n      this.viewer.impl.createOverlayScene(\n        'selectionWindowOverlay',\n        this.materialLine,\n        this.materialLine,\n        camera)\n\n      this.viewer.impl.api.addEventListener(\n        window.Autodesk.Viewing.VIEWER_RESIZE_EVENT,\n        this.onResize)\n\n      this.isActive = true\n\n      this.emit('activate')\n    }\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  deactivate() {\n\n    if (this.isActive) {\n\n      this.viewer.impl.removeOverlayScene(\n        'selectionWindowOverlay')\n\n      this.mouseStart.set(0, 0, -10)\n      this.mouseEnd.set(0, 0, -10)\n\n      this.isDragging = false\n      this.isActive = false\n      this.rectGroup = null\n\n      this.viewer.impl.api.removeEventListener(\n        window.Autodesk.Viewing.VIEWER_RESIZE_EVENT,\n        this.onResize)\n\n      this.viewer.toolController.deactivateTool(\n        this.getName())\n\n      this.emit('deactivate')\n    }\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  getCursor() {\n\n    const tool = this.viewer.toolController.getTool(\"dolly\")\n\n    const mode = tool.getTriggeredMode()\n\n    switch (mode) {\n\n      case \"dolly\":\n        return cursors.dolly\n\n      case \"pan\":\n        return cursors.pan\n    }\n\n    return cursors.window\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  handleGesture() {\n    return true\n  }\n\n  handleSingleClick() {\n    return true\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  handleButtonDown(event, button) {\n\n    //left button down\n    if (button === 0) {\n\n      this.startDrag(event)\n      return true\n    }\n\n    return false\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  handleMouseMove(event) {\n\n    if (this.lineGeom && this.isDragging) {\n\n      this.pointerEnd = event.pointers ?\n        event.pointers[0] :\n        event\n\n      this.mouseEnd.x = event.canvasX\n      this.mouseEnd.y = event.canvasY\n\n      return true\n    }\n\n    return false\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  handleButtonUp(event, button) {\n\n    if (button === 0) {\n\n      this.endDrag()\n      return true\n    }\n\n    return false\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  handleKeyDown(event, keyCode) {\n\n    if (keyCode === 27) {\n\n      this.deactivate()\n    }\n\n    return false\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  startDrag(event) {\n\n    if (this.isDragging === false) {\n\n      this.pointerStart = event.pointers ?\n        event.pointers[0] :\n        event\n\n      // begin dragging\n      this.isDragging = true\n\n      this.mouseStart.x = event.canvasX\n      this.mouseStart.y = event.canvasY\n\n      this.mouseEnd.x = event.canvasX\n      this.mouseEnd.y = event.canvasY\n\n      if (this.rectGroup === null) {\n\n        this.lineGeom = new window.THREE.Geometry()\n\n        // rectangle of zoom window\n        this.lineGeom.vertices.push(\n          this.mouseStart.clone(),\n          this.mouseStart.clone(),\n          this.mouseStart.clone(),\n          this.mouseStart.clone(),\n          this.mouseStart.clone())\n\n        // cross for identify zoom window center.\n        this.crossGeomX = new window.THREE.Geometry()\n\n        this.crossGeomX.vertices.push(\n          this.mouseStart.clone(),\n          this.mouseStart.clone())\n\n        this.crossGeomY = new window.THREE.Geometry()\n\n        this.crossGeomY.vertices.push(\n          this.mouseStart.clone(),\n          this.mouseStart.clone())\n\n        // add geom to group\n        const line_mesh = new window.THREE.Line(\n          this.lineGeom,\n          this.materialLine,\n          window.THREE.LineStrip)\n\n        const line_cross_x = new window.THREE.Line(\n          this.crossGeomX,\n          this.materialLine,\n          window.THREE.LineStrip)\n\n        const line_cross_y = new window.THREE.Line(\n          this.crossGeomY,\n          this.materialLine,\n          window.THREE.LineStrip)\n\n        this.rectGroup = new window.THREE.Group()\n\n        this.rectGroup.add(line_mesh)\n        this.rectGroup.add(line_cross_x)\n        this.rectGroup.add(line_cross_y)\n\n      } else {\n\n        this.lineGeom.vertices[0] = this.mouseStart.clone()\n        this.lineGeom.vertices[1] = this.mouseStart.clone()\n        this.lineGeom.vertices[2] = this.mouseStart.clone()\n        this.lineGeom.vertices[3] = this.mouseStart.clone()\n        this.lineGeom.vertices[4] = this.mouseStart.clone()\n\n        this.crossGeomX.vertices[0] = this.mouseStart.clone()\n        this.crossGeomX.vertices[1] = this.mouseStart.clone()\n        this.crossGeomY.vertices[0] = this.mouseStart.clone()\n        this.crossGeomY.vertices[1] = this.mouseStart.clone()\n\n        this.crossGeomX.verticesNeedUpdate = true\n        this.crossGeomY.verticesNeedUpdate = true\n        this.lineGeom.verticesNeedUpdate = true\n      }\n\n      this.viewer.impl.addOverlay(\n        \"selectionWindowOverlay\",\n        this.rectGroup)\n    }\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  endDrag() {\n\n    if (this.isDragging === true) {\n\n      this.viewer.impl.removeOverlay(\n        \"selectionWindowOverlay\",\n        this.rectGroup)\n\n      this.isDragging = false\n    }\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  update() {\n\n    if (!this.isActive)\n      return;\n\n    if (this.lineGeom && this.isDragging) {\n\n      // draw rectangle\n      this.lineGeom.vertices[1].x = this.mouseStart.x\n      this.lineGeom.vertices[1].y = this.mouseEnd.y\n      this.lineGeom.vertices[2] = this.mouseEnd.clone()\n      this.lineGeom.vertices[3].x = this.mouseEnd.x\n      this.lineGeom.vertices[3].y = this.mouseStart.y\n      this.lineGeom.vertices[4] = this.lineGeom.vertices[0]\n\n      // draw cross\n      var width = Math.abs(this.mouseEnd.x - this.mouseStart.x);\n      var height = Math.abs(this.mouseEnd.y - this.mouseStart.y);\n      var length = width > height ? height : width;\n\n      if (length > _CROSS_MAX_WIDTH) {\n        length = _CROSS_MAX_WIDTH;\n      }\n\n      var half_length = length * 0.5;\n\n      var cross_center = [\n        (this.mouseEnd.x + this.mouseStart.x) * 0.5,\n        (this.mouseEnd.y + this.mouseStart.y) * 0.5\n      ]\n\n      this.crossGeomX.vertices[0].x = cross_center[0] - half_length\n      this.crossGeomX.vertices[0].y = cross_center[1]\n      this.crossGeomX.vertices[1].x = cross_center[0] + half_length\n      this.crossGeomX.vertices[1].y = cross_center[1]\n\n      this.crossGeomY.vertices[0].x = cross_center[0]\n      this.crossGeomY.vertices[0].y = cross_center[1] - half_length\n      this.crossGeomY.vertices[1].x = cross_center[0]\n      this.crossGeomY.vertices[1].y = cross_center[1] + half_length\n\n      this.crossGeomX.verticesNeedUpdate = true\n      this.crossGeomY.verticesNeedUpdate = true\n      this.lineGeom.verticesNeedUpdate = true\n\n      // only redraw overlay\n      this.viewer.impl.invalidate(false, false, true)\n\n    } else {\n\n      return this.select()\n    }\n\n    return false\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  select() {\n\n    const rectMinX = this.mouseStart.x\n    const rectMinY = this.mouseStart.y\n\n    const rectMaxX = this.mouseEnd.x\n    const rectMaxY = this.mouseEnd.y\n\n    const rectHeight = Math.abs(rectMaxY - rectMinY)\n    const rectWidth = Math.abs(rectMaxX - rectMinX)\n\n    if (rectWidth === 0 || rectHeight === 0) {\n\n      return false\n    }\n\n    const dbIdsByModel = this.selectSet.compute(\n      this.pointerStart,\n      this.pointerEnd,\n      this.partialSelect)\n\n    dbIdsByModel.forEach(el => {\n      for (const iterator of el) {\n        this.emit('selection', {\n          model: iterator.model,\n          guid: this.guid(),\n          dbIds: iterator.dbIds\n        })\n      }\n\n    })\n\n\n\n    this.deactivate()\n\n    return true\n  }\n}","///////////////////////////////////////////////////////////\n// SelectSet util for Selection Window in Forge Viewer\n// By Philippe Leefsma, September 2017\n//\n///////////////////////////////////////////////////////////\nimport geometryIntersectsBox3 from './GeometryIntersectsBox3'\nimport Toolkit from './viewer.toolkit'\n\nexport default class SelectSet {\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  constructor(viewer) {\n\n    this.viewer = viewer;\n  }\n\n\n  ///////////////////////////////////////////////////////////\n  //Filter an Object\n  //\n  ///////////////////////////////////////////////////////////\n\n  filterLeafIds(leafIds, hiddenIds) {\n\n    return leafIds.map(leaft => {\n\n      let modelFoundInHidden = hiddenIds.find(el => el.model.id === leaft\n        .model.id);\n\n      if (modelFoundInHidden) {\n        leaft.ids = leaft.ids.filter(el => {\n          return modelFoundInHidden.ids.indexOf(el) === -1;\n        })\n      }\n\n      return leaft;\n\n    })\n\n  }\n\n\n\n  /////////////////////////////////////////////////////////\n  // Set model: required to compute the bounding boxes\n  //\n  /////////////////////////////////////////////////////////\n  async setModel(models) {\n\n    this.model = models\n\n    const instanceTree = models.map(model => {\n      return {\n        model: model,\n        instanceTree: model.getData().instanceTree\n      }\n    });\n\n    const rootIds = instanceTree.map(el => {\n      return {\n        model: el.model,\n        rootId: el.instanceTree.getRootId()\n      }\n    })\n\n    const bboxRes = await Promise.all(rootIds.map(async obj => {\n      return {\n        model: obj.model,\n        bbox: await this.getComponentBoundingBox(obj.model, obj\n          .rootId)\n      }\n    }))\n\n\n\n    this.boundingSphere = bboxRes.map(el => {\n      return {\n        model: el.model,\n        boundingSphere: el.bbox.getBoundingSphere()\n      }\n    })\n\n\n\n\n    // let leafIds = await Toolkit.getLeafNodes(model);\n\n    let leafIds = await Promise.all(models.map(async model => {\n      return {\n        model: model,\n        ids: await Toolkit.getLeafNodes(model)\n      }\n    }))\n\n    let isolatedNodes = this.viewer.getAggregateIsolation();\n    let hiddenNodes = this.viewer.getAggregateHiddenNodes();\n\n    if (isolatedNodes.length > 0) {\n\n      leafIds = await Promise.all(isolatedNodes.map(async el => {\n        return {\n          model: el.model,\n          ids: await Toolkit.getLeafNodes(el.model, el.ids)\n        }\n      }));\n\n    } else if (hiddenNodes.length > 0) {\n      let allNodesHidden = await Promise.all(hiddenNodes.map(async hidden => {\n        return {\n          model: hidden.model,\n          ids: await Toolkit.getLeafNodes(hidden.model, hidden.ids)\n        }\n      }));\n\n      leafIds = this.filterLeafIds(leafIds, allNodesHidden);\n    }\n\n\n    this.boundingBoxInfo = leafIds.map((el) => {\n\n      el.ids = el.ids.map(dbId => {\n        const bbox = this.getLeafComponentBoundingBox(\n          el.model, dbId)\n\n        return {\n          bbox,\n          dbId\n        }\n      })\n\n      return el;\n\n    })\n  }\n\n  /////////////////////////////////////////////////////////\n  // Returns bounding box as it appears in the viewer\n  // (transformations could be applied)\n  //\n  /////////////////////////////////////////////////////////\n  getModifiedWorldBoundingBox(fragIds, fragList) {\n\n    const fragbBox = new window.THREE.Box3()\n    const nodebBox = new window.THREE.Box3()\n\n    fragIds.forEach(function(fragId) {\n\n      fragList.getWorldBounds(fragId, fragbBox)\n\n      nodebBox.union(fragbBox)\n    })\n\n    return nodebBox\n  }\n\n  /////////////////////////////////////////////////////////\n  // Returns bounding box for fragment list\n  //\n  /////////////////////////////////////////////////////////\n  async getComponentBoundingBox(model, dbId) {\n\n    const fragIds = await Toolkit.getFragIds(\n      model, dbId)\n\n    const fragList = model.getFragmentList()\n\n    return this.getModifiedWorldBoundingBox(\n      fragIds, fragList)\n  }\n\n  getLeafComponentBoundingBox(model, dbId) {\n\n    const fragIds = Toolkit.getLeafFragIds(\n      model, dbId)\n\n\n    const fragList = model.getFragmentList()\n\n    return this.getModifiedWorldBoundingBox(\n      fragIds, fragList)\n  }\n\n  /////////////////////////////////////////////////////////\n  // Creates Raycaster object from the mouse pointer\n  //\n  /////////////////////////////////////////////////////////\n  pointerToRay(pointer) {\n\n    const camera = this.viewer.navigation.getCamera()\n    const pointerVector = new window.THREE.Vector3()\n    const rayCaster = new window.THREE.Raycaster()\n    const pointerDir = new window.THREE.Vector3()\n    const domElement = this.viewer.canvas\n\n    const rect = domElement.getBoundingClientRect()\n\n    const x = ((pointer.clientX - rect.left) / rect.width) * 2 - 1\n    const y = -((pointer.clientY - rect.top) / rect.height) * 2 + 1\n\n    if (camera.isPerspective) {\n\n      pointerVector.set(x, y, 0.5)\n\n      pointerVector.unproject(camera)\n\n      rayCaster.set(camera.position,\n        pointerVector.sub(\n          camera.position).normalize())\n\n    } else {\n\n      pointerVector.set(x, y, -15)\n\n      pointerVector.unproject(camera)\n\n      pointerDir.set(0, 0, -1)\n\n      rayCaster.set(pointerVector,\n        pointerDir.transformDirection(\n          camera.matrixWorld))\n    }\n\n    return rayCaster.ray\n  }\n\n  /////////////////////////////////////////////////////////\n  // Returns true if the box is contained inside the\n  // closed volume defined by the the input planes\n  //\n  /////////////////////////////////////////////////////////\n  containsBox(planes, box) {\n\n    const {\n      min,\n      max\n    } = box\n\n    const vertices = [\n      new window.THREE.Vector3(min.x, min.y, min.z),\n      new window.THREE.Vector3(min.x, min.y, max.z),\n      new window.THREE.Vector3(min.x, max.y, max.z),\n      new window.THREE.Vector3(max.x, max.y, max.z),\n      new window.THREE.Vector3(max.x, max.y, min.z),\n      new window.THREE.Vector3(max.x, min.y, min.z),\n      new window.THREE.Vector3(min.x, max.y, min.z),\n      new window.THREE.Vector3(max.x, min.y, max.z)\n    ]\n\n    for (let vertex of vertices) {\n\n      for (let plane of planes) {\n\n        if (plane.distanceToPoint(vertex) < 0) {\n\n          return false\n        }\n      }\n    }\n\n    return true\n  }\n\n  /////////////////////////////////////////////////////////\n  // Returns true if at least one vertex is contained in\n  // closed volume defined by the the input planes\n  //\n  /////////////////////////////////////////////////////////\n  containsVertex(planes, vertices) {\n\n    for (let vertex of vertices) {\n\n      let isInside = true\n\n      for (let plane of planes) {\n\n        if (plane.distanceToPoint(vertex) < 0) {\n\n          isInside = false\n          break\n        }\n      }\n\n      if (isInside) {\n\n        return true\n      }\n    }\n\n    return false\n  }\n\n  /////////////////////////////////////////////////////////\n  // Returns the oriented camera plane\n  //\n  /////////////////////////////////////////////////////////\n  getCameraPlane() {\n\n    const camera = this.viewer.navigation.getCamera()\n\n    const normal = camera.target.clone().sub(\n      camera.position).normalize()\n\n    const pos = camera.position\n\n    const dist = -normal.x * pos.x -\n      normal.y * pos.y -\n      normal.z * pos.z\n\n    return new window.THREE.Plane(normal, dist)\n  }\n\n  /////////////////////////////////////////////////////////\n  // Creates pyramid geometry to perform tri-box\n  // intersection analysis\n  //\n  /////////////////////////////////////////////////////////\n  createPyramidGeometry(vertices) {\n\n    var geometry = new window.THREE.Geometry()\n\n    geometry.vertices = vertices\n\n    geometry.faces = [\n      new window.THREE.Face3(0, 1, 2),\n      new window.THREE.Face3(0, 2, 3),\n      new window.THREE.Face3(1, 0, 4),\n      new window.THREE.Face3(2, 1, 4),\n      new window.THREE.Face3(3, 2, 4),\n      new window.THREE.Face3(0, 3, 4)\n    ]\n\n    return geometry\n  }\n\n  /////////////////////////////////////////////////////////\n  // Determine if the bounding boxes are\n  // inside, outside or intersect with the selection window\n  //\n  /////////////////////////////////////////////////////////\n  filterBoundingBoxes(planes, vertices, partialSelect) {\n\n    const geometry = this.createPyramidGeometry(vertices)\n\n    const intersect = []\n    const outside = []\n    const inside = []\n\n    return this.boundingBoxInfo.map(res => {\n      for (let bboxInfo of res.ids) {\n\n        // if bounding box inside, then we can be sure\n        // the mesh is inside too\n\n        if (this.containsBox(planes, bboxInfo.bbox)) {\n\n          inside.push(bboxInfo)\n\n        } else if (partialSelect) {\n\n          // otherwise need a more precise tri-box\n          // analysis to determine if the bbox intersect\n          // the pyramid geometry\n\n          const intersects = geometryIntersectsBox3(\n            geometry, bboxInfo.bbox)\n\n          intersects.length ?\n            intersect.push(bboxInfo) :\n            outside.push(bboxInfo)\n\n        } else {\n\n          outside.push(bboxInfo)\n        }\n      }\n\n      return {\n        model: res.model,\n        intersect,\n        outside,\n        inside\n      }\n    })\n\n\n  }\n\n  /////////////////////////////////////////////////////////\n  // Runs the main logic of the select set:\n  // computes a pyramid shape from the selection window\n  // corners and determines enclosed meshes from the model\n  //\n  /////////////////////////////////////////////////////////\n\n  compute(pointer1, pointer2, partialSelect) {\n\n    // build 4 rays to project the 4 corners\n    // of the selection window\n\n    const xMin = Math.min(pointer1.clientX, pointer2.clientX)\n    const xMax = Math.max(pointer1.clientX, pointer2.clientX)\n\n    const yMin = Math.min(pointer1.clientY, pointer2.clientY)\n    const yMax = Math.max(pointer1.clientY, pointer2.clientY)\n\n    const ray1 = this.pointerToRay({\n      clientX: xMin,\n      clientY: yMin\n    })\n\n    const ray2 = this.pointerToRay({\n      clientX: xMax,\n      clientY: yMin\n    })\n\n    const ray3 = this.pointerToRay({\n      clientX: xMax,\n      clientY: yMax\n    })\n\n    const ray4 = this.pointerToRay({\n      clientX: xMin,\n      clientY: yMax\n    })\n\n    // first we compute the top of the pyramid\n    const top = new window.THREE.Vector3(0, 0, 0)\n\n    top.add(ray1.origin)\n    top.add(ray2.origin)\n    top.add(ray3.origin)\n    top.add(ray4.origin)\n\n    top.multiplyScalar(0.25)\n\n    // we use the bounding sphere to determine\n    // the height of the pyramid\n\n    return this.boundingSphere.map(res => {\n\n\n\n      const {\n        center,\n        radius\n      } = res.boundingSphere\n\n      // compute distance from pyramid top to center\n      // of bounding sphere\n\n      const dist = new window.THREE.Vector3(\n        top.x - center.x,\n        top.y - center.y,\n        top.z - center.z)\n\n      // compute height of the pyramid:\n      // to make sure we go far enough,\n      // we add the radius of the bounding sphere\n\n      const height = radius + dist.length()\n\n      // compute the length of the side edges\n\n      const angle = ray1.direction.angleTo(\n        ray2.direction)\n\n      const length = height / Math.cos(angle * 0.5)\n\n      // compute bottom vertices\n\n      const v1 = new window.THREE.Vector3(\n        ray1.origin.x + ray1.direction.x * length,\n        ray1.origin.y + ray1.direction.y * length,\n        ray1.origin.z + ray1.direction.z * length)\n\n      const v2 = new window.THREE.Vector3(\n        ray2.origin.x + ray2.direction.x * length,\n        ray2.origin.y + ray2.direction.y * length,\n        ray2.origin.z + ray2.direction.z * length)\n\n      const v3 = new window.THREE.Vector3(\n        ray3.origin.x + ray3.direction.x * length,\n        ray3.origin.y + ray3.direction.y * length,\n        ray3.origin.z + ray3.direction.z * length)\n\n      const v4 = new window.THREE.Vector3(\n        ray4.origin.x + ray4.direction.x * length,\n        ray4.origin.y + ray4.direction.y * length,\n        ray4.origin.z + ray4.direction.z * length)\n\n      // create planes\n\n      const plane1 = new window.THREE.Plane()\n      const plane2 = new window.THREE.Plane()\n      const plane3 = new window.THREE.Plane()\n      const plane4 = new window.THREE.Plane()\n      const plane5 = new window.THREE.Plane()\n\n      plane1.setFromCoplanarPoints(top, v1, v2)\n      plane2.setFromCoplanarPoints(top, v2, v3)\n      plane3.setFromCoplanarPoints(top, v3, v4)\n      plane4.setFromCoplanarPoints(top, v4, v1)\n      plane5.setFromCoplanarPoints(v3, v2, v1)\n\n      const planes = [\n        plane1, plane2,\n        plane3, plane4,\n        plane5\n      ]\n\n      const vertices = [\n        v1, v2, v3, v4, top\n      ]\n\n      // filter all bounding boxes to determine\n      // if inside, outside or intersect\n\n      const result = this.filterBoundingBoxes(\n        planes, vertices, partialSelect)\n\n\n      return result.map(res => {\n        let obj = {\n          model: res.model,\n          dbIds: []\n        }\n\n        const dbIdsInside = res.inside.map((bboxInfo) => {\n          return bboxInfo.dbId\n        })\n\n        // if partialSelect = true\n        // we need to return the intersect bboxes\n\n        if (partialSelect) {\n\n          const dbIdsIntersect = res.intersect.map((bboxInfo) => {\n            return bboxInfo.dbId\n          })\n\n          // At this point perform a finer analysis\n          // to determine if the any of the mesh vertices are inside\n          // or outside the selection window but it would\n          // be a much more expensive computation\n\n          //const dbIdsIntersectAccurate =\n          //  dbIdsIntersect.filter((dbId) => {\n          //\n          //    const geometry =\n          //      Toolkit.buildComponentGeometry(\n          //        this.viewer, this.viewer.model, dbId)\n          //\n          //    return this.containsVertex(\n          //      planes, geometry.vertices)\n          //  })\n\n          let ids = [...dbIdsInside, ...dbIdsIntersect];\n\n          obj.dbIds = ids;\n          return obj;\n        }\n\n        obj.dbIds = dbIdsInside;\n        return obj;\n\n      })\n\n    })\n  }\n}","let norm = new window.THREE.Vector3()\nlet t1 = new window.THREE.Vector3()\nlet t2 = new window.THREE.Vector3()\nlet depth = 0\n\nfunction checkBoxSeparation(\n  phase,\n  minX, minY, minZ,\n  maxX, maxY, maxZ,\n  norm, v1, v2, v3) {\n\n  const minQ =\n    norm.x * (norm.x > 0 ? minX : maxX) +\n    norm.y * (norm.y > 0 ? minY : maxY) +\n    norm.z * (norm.z > 0 ? minZ : maxZ)\n\n  const maxQ =\n    norm.x * (norm.x > 0 ? maxX : minX) +\n    norm.y * (norm.y > 0 ? maxY : minY) +\n    norm.z * (norm.z > 0 ? maxZ : minZ)\n\n  const q1 = norm.x * v1.x + norm.y * v1.y + norm.z * v1.z\n  const q2 = norm.x * v2.x + norm.y * v2.y + norm.z * v2.z\n  const q3 = norm.x * v3.x + norm.y * v3.y + norm.z * v3.z\n\n  const vMinQ = Math.min(q1, q2, q3)\n  const vMaxQ = Math.max(q1, q2, q3)\n\n  if (phase === 0) {\n\n    // just check the collision\n    return (minQ > vMaxQ) || (maxQ < vMinQ)\n\n  } else {\n\n    // compute penetration depth\n    const sq = 1 / norm.length()\n\n    if (!isFinite(sq)) {\n\n      return\n    }\n\n    depth = Math.min(\n      depth,\n      (vMaxQ - minQ) * sq,\n      (maxQ - vMinQ) * sq)\n  }\n}\n\nfunction geometryIntersectsBox3_PassThree(\n  phase,\n  minX, minY, minZ,\n  maxX, maxY, maxZ,\n  axis, v1, v2, v3, t1) {\n\n  t1.subVectors(v1, v2)\n\n  switch (axis) {\n\n    case 0:\n      t1.set(0, -t1.z, t1.y)\n      break\n\n    case 1:\n      t1.set(-t1.z, 0, t1.x)\n      break\n\n    case 2:\n      t1.set(-t1.y, t1.x, 0)\n      break;\n  }\n\n  return checkBoxSeparation(\n    phase,\n    minX, minY, minZ,\n    maxX, maxY, maxZ,\n    t1, v1, v2, v3)\n}\n\nfunction geometryIntersectsBox3(geometry, box) {\n\n  // Tomas Akenine-Möller. 2005.\n  // Fast 3D triangle-box overlap testing.\n  // http://fileadmin.cs.lth.se/cs/Personal/Tomas_Akenine-Moller/code/tribox_tam.pdf\n\n  const {\n    faces,\n    vertices\n  } = geometry\n\n  const minX = box.min.x\n  const minY = box.min.y\n  const minZ = box.min.z\n\n  const maxX = box.max.x\n  const maxY = box.max.y\n  const maxZ = box.max.z\n\n  const results = []\n\n  for (var fI = 0; fI < faces.length; ++fI) {\n\n    const face = faces[fI]\n\n    const v1 = vertices[face.a]\n    const v2 = vertices[face.b]\n    const v3 = vertices[face.c]\n\n    const vMinX = Math.min(v1.x, v2.x, v3.x)\n    const vMinY = Math.min(v1.y, v2.y, v3.y)\n    const vMinZ = Math.min(v1.z, v2.z, v3.z)\n\n    const vMaxX = Math.max(v1.x, v2.x, v3.x)\n    const vMaxY = Math.max(v1.y, v2.y, v3.y)\n    const vMaxZ = Math.max(v1.z, v2.z, v3.z)\n\n    // bounding AABB cull\n    if (\n      vMinX > maxX ||\n      vMinY > maxY ||\n      vMinZ > maxZ ||\n      vMaxX < minX ||\n      vMaxY < minY ||\n      vMaxZ < minZ\n    ) {\n      // never be intersecting\n      continue\n    }\n\n    t1.subVectors(v2, v1)\n    t2.subVectors(v3, v1)\n\n    norm.crossVectors(t1, t2)\n\n    if (\n      checkBoxSeparation(0, minX, minY, minZ, maxX, maxY, maxZ, norm, v1, v2,\n        v3) ||\n      geometryIntersectsBox3_PassThree(0, minX, minY, minZ, maxX, maxY, maxZ, 0,\n        v1, v2, v3, t1) ||\n      geometryIntersectsBox3_PassThree(0, minX, minY, minZ, maxX, maxY, maxZ, 0,\n        v1, v3, v2, t1) ||\n      geometryIntersectsBox3_PassThree(0, minX, minY, minZ, maxX, maxY, maxZ, 0,\n        v2, v3, v1, t1) ||\n      geometryIntersectsBox3_PassThree(0, minX, minY, minZ, maxX, maxY, maxZ, 1,\n        v1, v2, v3, t1) ||\n      geometryIntersectsBox3_PassThree(0, minX, minY, minZ, maxX, maxY, maxZ, 1,\n        v1, v3, v2, t1) ||\n      geometryIntersectsBox3_PassThree(0, minX, minY, minZ, maxX, maxY, maxZ, 1,\n        v2, v3, v1, t1) ||\n      geometryIntersectsBox3_PassThree(0, minX, minY, minZ, maxX, maxY, maxZ, 2,\n        v1, v2, v3, t1) ||\n      geometryIntersectsBox3_PassThree(0, minX, minY, minZ, maxX, maxY, maxZ, 2,\n        v1, v3, v2, t1) ||\n      geometryIntersectsBox3_PassThree(0, minX, minY, minZ, maxX, maxY, maxZ, 2,\n        v2, v3, v1, t1)\n    ) {\n\n      // never be intersecting\n      continue\n    }\n\n    // compute depth\n    depth = Infinity\n\n    checkBoxSeparation(1, minX, minY, minZ, maxX, maxY, maxZ, norm, v1, v2, v3)\n\n    geometryIntersectsBox3_PassThree(1, minX, minY, minZ, maxX, maxY, maxZ, 0,\n      v1, v2, v3, t1)\n    geometryIntersectsBox3_PassThree(1, minX, minY, minZ, maxX, maxY, maxZ, 0,\n      v1, v3, v2, t1)\n    geometryIntersectsBox3_PassThree(1, minX, minY, minZ, maxX, maxY, maxZ, 0,\n      v2, v3, v1, t1)\n    geometryIntersectsBox3_PassThree(1, minX, minY, minZ, maxX, maxY, maxZ, 1,\n      v1, v2, v3, t1)\n    geometryIntersectsBox3_PassThree(1, minX, minY, minZ, maxX, maxY, maxZ, 1,\n      v1, v3, v2, t1)\n    geometryIntersectsBox3_PassThree(1, minX, minY, minZ, maxX, maxY, maxZ, 1,\n      v2, v3, v1, t1)\n    geometryIntersectsBox3_PassThree(1, minX, minY, minZ, maxX, maxY, maxZ, 2,\n      v1, v2, v3, t1)\n    geometryIntersectsBox3_PassThree(1, minX, minY, minZ, maxX, maxY, maxZ, 2,\n      v1, v3, v2, t1)\n    geometryIntersectsBox3_PassThree(1, minX, minY, minZ, maxX, maxY, maxZ, 2,\n      v2, v3, v1, t1)\n\n    // triangle touches the box\n    results.push({\n      faceIndex: fI,\n      depth: depth\n    })\n  }\n\n  return results\n}\n\nexport default geometryIntersectsBox3","export default class ViewerToolkit {\n\n  ///////////////////////////////////////////////////////////////////\n  //\n  //\n  ///////////////////////////////////////////////////////////////////\n  static guid(format = 'xxxxxxxxxxxx') {\n\n    var d = new Date().getTime();\n\n    var guid = format.replace(\n      /[xy]/g,\n      function(c) {\n        var r = (d + Math.random() * 16) % 16 | 0;\n        d = Math.floor(d / 16);\n        return (c == 'x' ? r : (r & 0x7 | 0x8)).toString(16);\n      });\n\n    return guid;\n  }\n\n  /////////////////////////////////////////////\n  //mobile detection\n  //\n  /////////////////////////////////////////////\n  static get mobile() {\n\n    return {\n\n      getUserAgent: function() {\n        return navigator.userAgent;\n      },\n      isAndroid: function() {\n        return this.getUserAgent().match(/Android/i);\n      },\n      isBlackBerry: function() {\n        return this.getUserAgent().match(/BlackBerry/i);\n      },\n      isIOS: function() {\n        return this.getUserAgent().match(/iPhone|iPad|iPod/i);\n      },\n      isOpera: function() {\n        return this.getUserAgent().match(/Opera Mini/i);\n      },\n      isWindows: function() {\n        return this.isWindowsDesktop() || this.isWindowsMobile();\n      },\n      isWindowsMobile: function() {\n        return this.getUserAgent().match(/IEMobile/i);\n      },\n      isWindowsDesktop: function() {\n        return this.getUserAgent().match(/WPDesktop/i);\n      },\n      isAny: function() {\n\n        return this.isAndroid() ||\n          this.isBlackBerry() ||\n          this.isIOS() ||\n          this.isWindowsMobile();\n      }\n    }\n  }\n\n  //////////////////////////////////////////////////////////////////////////\n  // Return default viewable path: first 3d or 2d item\n  //\n  //////////////////////////////////////////////////////////////////////////\n  static getDefaultViewablePath(doc, roles = ['3d', '2d']) {\n\n    var rootItem = doc.getRootItem()\n\n    let roleArray = [...roles]\n\n    let items = []\n\n    roleArray.forEach((role) => {\n\n      items = [...items,\n        ...window.Autodesk.Viewing.Document.getSubItemsWithProperties(\n          rootItem, {\n            type: 'geometry',\n            role\n          }, true)\n      ]\n    })\n\n    return items.length ? doc.getViewablePath(items[0]) : null\n  }\n\n  /////////////////////////////////////////////////////////////////\n  // Toolbar button\n  //\n  /////////////////////////////////////////////////////////////////\n  static createButton(id, className, tooltip, handler) {\n\n    var button = new window.Autodesk.Viewing.UI.Button(id);\n\n    button.icon.style.fontSize = '24px';\n\n    button.icon.className = className;\n\n    button.setToolTip(tooltip);\n\n    button.onClick = handler;\n\n    return button;\n  }\n\n  /////////////////////////////////////////////////////////////////\n  // Control group\n  //\n  /////////////////////////////////////////////////////////////////\n  static createControlGroup(viewer, ctrlGroupName) {\n\n    var viewerToolbar = viewer.getToolbar(true);\n\n    if (viewerToolbar) {\n\n      var ctrlGroup = new window.Autodesk.Viewing.UI.ControlGroup(\n        ctrlGroupName);\n\n      viewerToolbar.addControl(ctrlGroup);\n\n      return ctrlGroup;\n    }\n  }\n\n  /////////////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////////////\n  static getLeafNodes(model, dbIds) {\n\n    return new Promise((resolve, reject) => {\n\n      try {\n\n        const instanceTree = model.getData().instanceTree\n\n        dbIds = dbIds || instanceTree.getRootId()\n\n        const dbIdArray = Array.isArray(dbIds) ? dbIds : [dbIds]\n\n        let leafIds = []\n\n        const getLeafNodesRec = (id) => {\n\n          var childCount = 0;\n\n          instanceTree.enumNodeChildren(id, (childId) => {\n\n            getLeafNodesRec(childId)\n\n              ++childCount\n          })\n\n          if (childCount == 0) {\n\n            leafIds.push(id)\n          }\n        }\n\n        for (var i = 0; i < dbIdArray.length; ++i) {\n\n          getLeafNodesRec(dbIdArray[i])\n        }\n\n        return resolve(leafIds)\n\n      } catch (ex) {\n\n        return reject(ex)\n      }\n    })\n  }\n\n  /////////////////////////////////////////////////////////////////\n  // get node fragIds\n  //\n  /////////////////////////////////////////////////////////////////\n  static getFragIds(model, dbIds) {\n\n    return new Promise(async (resolve, reject) => {\n\n      try {\n\n        const dbIdArray = Array.isArray(dbIds) ? dbIds : [dbIds]\n\n        const instanceTree = model.getData().instanceTree\n\n        const leafIds = await ViewerToolkit.getLeafNodes(\n          model, dbIdArray)\n\n        let fragIds = []\n\n        for (var i = 0; i < leafIds.length; ++i) {\n\n          instanceTree.enumNodeFragments(\n            leafIds[i], (fragId) => {\n              fragIds.push(fragId)\n            })\n        }\n\n        return resolve(fragIds)\n\n      } catch (ex) {\n\n        return reject(ex)\n      }\n    })\n  }\n\n\n  ////////////////////////////////////////////////////////////////\n  //\n  ////////////////////////////////////////////////////////////////\n  static getLeafFragIds(model, dbId) {\n    const instanceTree = model.getData().instanceTree;\n    const fragIds = [];\n\n    instanceTree.enumNodeFragments(dbId, function(fragId) {\n      fragIds.push(fragId);\n    });\n\n    return fragIds;\n  }\n\n\n  /////////////////////////////////////////////////////////////////\n  // Node bounding box\n  //\n  /////////////////////////////////////////////////////////////////\n  static getWorldBoundingBox(model, dbId) {\n\n    return new Promise(async (resolve, reject) => {\n\n      try {\n\n        var fragIds = await ViewerToolkit.getFragIds(\n          model, dbId);\n\n        if (!fragIds.length) {\n\n          return reject('No geometry, invalid dbId?');\n        }\n\n        var fragList = model.getFragmentList();\n\n        var fragbBox = new window.THREE.Box3();\n        var nodebBox = new window.THREE.Box3();\n\n        fragIds.forEach(function(fragId) {\n\n          fragList.getWorldBounds(fragId, fragbBox);\n          nodebBox.union(fragbBox);\n        });\n\n        return resolve(nodebBox);\n      } catch (ex) {\n\n        return reject(ex);\n      }\n    });\n  }\n\n  /////////////////////////////////////////////////////////////////\n  // Gets properties from component\n  //\n  /////////////////////////////////////////////////////////////////\n  static getProperties(model, dbId, requestedProps = null) {\n\n    return new Promise((resolve, reject) => {\n\n      try {\n\n        if (requestedProps) {\n\n          const propTasks = requestedProps.map((displayName) => {\n\n            return ViewerToolkit.getProperty(\n              model, dbId, displayName, 'Not Available')\n          })\n\n          Promise.all(propTasks).then((properties) => {\n\n            resolve(properties)\n          })\n\n        } else {\n\n          model.getProperties(dbId, function(result) {\n\n            if (result.properties) {\n\n              return resolve(\n                result.properties)\n            }\n\n            return reject('No Properties')\n          })\n        }\n\n      } catch (ex) {\n\n        // console.log(ex)\n        return reject(ex)\n      }\n    })\n  }\n\n  /////////////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////////////\n  static getProperty(model, dbId, displayName, defaultValue) {\n\n    return new Promise((resolve, reject) => {\n\n      try {\n\n        model.getProperties(dbId, function(result) {\n\n          if (result.properties) {\n\n            result.properties.forEach((prop) => {\n\n              if (typeof displayName === 'function') {\n\n                if (displayName(prop.displayName)) {\n\n                  resolve(prop)\n                }\n\n              } else if (displayName === prop.displayName) {\n\n                resolve(prop)\n              }\n            });\n\n            if (defaultValue) {\n\n              return resolve({\n                displayValue: defaultValue,\n                displayName\n              })\n            }\n\n            reject(new Error('Not Found'))\n\n          } else {\n\n            reject(new Error('Error getting properties'));\n          }\n        })\n      } catch (ex) {\n\n        return reject(ex);\n      }\n    });\n  }\n\n  /////////////////////////////////////////////////////////////////\n  // Gets all existing properties from component  dbIds\n  //\n  /////////////////////////////////////////////////////////////////\n  static getPropertyList(model, dbIds) {\n\n    return new Promise(async (resolve, reject) => {\n\n      try {\n\n        var propertyTasks = dbIds.map((dbId) => {\n\n          return ViewerToolkit.getProperties(model, dbId);\n        });\n\n        var propertyResults = await Promise.all(\n          propertyTasks\n        );\n\n        var properties = [];\n\n        propertyResults.forEach((propertyResult) => {\n\n          propertyResult.forEach((prop) => {\n\n            if (properties.indexOf(prop.displayName) < 0) {\n\n              properties.push(prop.displayName);\n            }\n          });\n        });\n\n        return resolve(properties.sort());\n      } catch (ex) {\n\n        return reject(ex);\n      }\n    });\n  }\n\n  /////////////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////////////\n  static getBulkPropertiesAsync(model, dbIds, propFilter) {\n\n    return new Promise((resolve, reject) => {\n\n      model.getBulkProperties(dbIds, propFilter, (result) => {\n\n        resolve(result)\n\n      }, (error) => {\n\n        reject(error)\n      })\n    })\n  }\n\n  /////////////////////////////////////////////////////////////////\n  // Maps components by property\n  //\n  /////////////////////////////////////////////////////////////////\n  static mapComponentsByProp(model, propName, components, defaultProp) {\n\n    return new Promise(async (resolve, reject) => {\n\n      try {\n\n        const results = await ViewerToolkit.getBulkPropertiesAsync(\n          model, components, [propName])\n\n        const propertyResults = results.map((result) => {\n\n          return Object.assign({}, result.properties[0], {\n            dbId: result.dbId\n          })\n        })\n\n        var componentsMap = {};\n\n        propertyResults.forEach((result) => {\n\n          var value = result.displayValue;\n\n          if (typeof value == 'string') {\n\n            value = value.split(':')[0]\n          }\n\n          if (!componentsMap[value]) {\n\n            componentsMap[value] = []\n          }\n\n          componentsMap[value].push(result.dbId)\n        })\n\n        return resolve(componentsMap)\n\n      } catch (ex) {\n\n        return reject(ex);\n      }\n    })\n  }\n\n  /////////////////////////////////////////////////////////////\n  // Runs recursively the argument task on each node\n  // of the data tree\n  //\n  /////////////////////////////////////////////////////////////\n  static runTaskOnDataTree(root, taskFunc) {\n\n    var tasks = [];\n\n    var runTaskOnDataTreeRec = (node, parent = null) => {\n\n      if (node.children) {\n\n        node.children.forEach((childNode) => {\n\n          runTaskOnDataTreeRec(childNode, node);\n        });\n      }\n\n      var task = taskFunc(node, parent);\n\n      tasks.push(task);\n    }\n\n    runTaskOnDataTreeRec(root);\n\n    return Promise.all(tasks);\n  }\n\n  /////////////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////////////\n  static drawBox(viewer, min, max, material = null) {\n\n    var _material = material;\n\n    if (!_material) {\n\n      _material = new window.THREE.LineBasicMaterial({\n        color: 0xffff00,\n        linewidth: 2\n      });\n\n      viewer.impl.matman().addMaterial(\n        'ADN-Material-Line',\n        _material,\n        true);\n    }\n\n    function drawLines(coordsArray, mat) {\n\n      var lines = [];\n\n      for (var i = 0; i < coordsArray.length; i += 2) {\n\n        var start = coordsArray[i];\n        var end = coordsArray[i + 1];\n\n        var geometry = new window.THREE.Geometry();\n\n        geometry.vertices.push(new window.THREE.Vector3(\n          start.x, start.y, start.z));\n\n        geometry.vertices.push(new window.THREE.Vector3(\n          end.x, end.y, end.z));\n\n        geometry.computeLineDistances();\n\n        var line = new window.THREE.Line(geometry, mat);\n\n        viewer.impl.scene.add(line);\n\n        lines.push(line);\n      }\n\n      return lines;\n    }\n\n    var lines = drawLines([\n\n        {\n          x: min.x,\n          y: min.y,\n          z: min.z\n        },\n        {\n          x: max.x,\n          y: min.y,\n          z: min.z\n        },\n\n        {\n          x: max.x,\n          y: min.y,\n          z: min.z\n        },\n        {\n          x: max.x,\n          y: min.y,\n          z: max.z\n        },\n\n        {\n          x: max.x,\n          y: min.y,\n          z: max.z\n        },\n        {\n          x: min.x,\n          y: min.y,\n          z: max.z\n        },\n\n        {\n          x: min.x,\n          y: min.y,\n          z: max.z\n        },\n        {\n          x: min.x,\n          y: min.y,\n          z: min.z\n        },\n\n        {\n          x: min.x,\n          y: max.y,\n          z: max.z\n        },\n        {\n          x: max.x,\n          y: max.y,\n          z: max.z\n        },\n\n        {\n          x: max.x,\n          y: max.y,\n          z: max.z\n        },\n        {\n          x: max.x,\n          y: max.y,\n          z: min.z\n        },\n\n        {\n          x: max.x,\n          y: max.y,\n          z: min.z\n        },\n        {\n          x: min.x,\n          y: max.y,\n          z: min.z\n        },\n\n        {\n          x: min.x,\n          y: max.y,\n          z: min.z\n        },\n        {\n          x: min.x,\n          y: max.y,\n          z: max.z\n        },\n\n        {\n          x: min.x,\n          y: min.y,\n          z: min.z\n        },\n        {\n          x: min.x,\n          y: max.y,\n          z: min.z\n        },\n\n        {\n          x: max.x,\n          y: min.y,\n          z: min.z\n        },\n        {\n          x: max.x,\n          y: max.y,\n          z: min.z\n        },\n\n        {\n          x: max.x,\n          y: min.y,\n          z: max.z\n        },\n        {\n          x: max.x,\n          y: max.y,\n          z: max.z\n        },\n\n        {\n          x: min.x,\n          y: min.y,\n          z: max.z\n        },\n        {\n          x: min.x,\n          y: max.y,\n          z: max.z\n        }\n      ],\n\n      _material);\n\n    viewer.impl.sceneUpdated(true);\n\n    return lines;\n  }\n\n  /////////////////////////////////////////////////////////////////\n  // Set component material\n  //\n  /////////////////////////////////////////////////////////////////\n  static async setMaterial(model, dbId, material) {\n\n    const fragIds = await ViewerToolkit.getFragIds(\n      model, dbId)\n\n    const fragList = model.getFragmentList()\n\n    fragIds.forEach((fragId) => {\n\n      fragList.setMaterial(fragId, material)\n    })\n  }\n\n  /////////////////////////////////////////////////////////////////\n  // Recursively builds the model tree\n  //\n  /////////////////////////////////////////////////////////////////\n  static buildModelTree(model, createNodeFunc = null) {\n\n    //builds model tree recursively\n    function _buildModelTreeRec(node) {\n\n      instanceTree.enumNodeChildren(node.dbId,\n        function(childId) {\n\n          var childNode = null;\n\n          if (createNodeFunc) {\n\n            childNode = createNodeFunc(childId);\n\n          } else {\n\n            node.children = node.children || [];\n\n            childNode = {\n              dbId: childId,\n              name: instanceTree.getNodeName(childId)\n            }\n\n            node.children.push(childNode);\n          }\n\n          _buildModelTreeRec(childNode);\n        });\n    }\n\n    //get model instance tree and root component\n    var instanceTree = model.getData().instanceTree;\n\n    var rootId = instanceTree.getRootId();\n\n    var rootNode = {\n      dbId: rootId,\n      name: instanceTree.getNodeName(rootId)\n    }\n\n    _buildModelTreeRec(rootNode);\n\n    return rootNode;\n  }\n\n  /////////////////////////////////////////////////////////////////\n  // Recursively execute task on model tree\n  //\n  /////////////////////////////////////////////////////////////////\n  static executeTaskOnModelTree(model, task) {\n\n    var taskResults = [];\n\n    function _executeTaskOnModelTreeRec(dbId) {\n\n      instanceTree.enumNodeChildren(dbId,\n        function(childId) {\n\n          taskResults.push(task(model, childId));\n\n          _executeTaskOnModelTreeRec(childId);\n        });\n    }\n\n    //get model instance tree and root component\n    var instanceTree = model.getData().instanceTree;\n\n    var rootId = instanceTree.getRootId();\n\n    _executeTaskOnModelTreeRec(rootId);\n\n    return taskResults;\n  }\n\n  /////////////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////////////\n  static isolateFull(viewer, model = null, dbIds = []) {\n\n    return new Promise(async (resolve, reject) => {\n\n      try {\n\n        model = model || viewer.model\n\n        viewer.isolate(dbIds)\n\n        const targetIds = Array.isArray(dbIds) ? dbIds : [dbIds]\n\n        const targetLeafIds = await ViewerToolkit.getLeafNodes(\n          model, targetIds)\n\n        const leafIds = await ViewerToolkit.getLeafNodes(model)\n\n        const leafTasks = leafIds.map((dbId) => {\n\n          return new Promise((resolveLeaf) => {\n\n            const show = !targetLeafIds.length ||\n              targetLeafIds.indexOf(dbId) > -1\n\n            viewer.impl.visibilityManager.setNodeOff(\n              dbId, !show)\n\n            resolveLeaf()\n          })\n        })\n\n        return Promise.all(leafTasks)\n\n      } catch (ex) {\n\n        return reject(ex)\n      }\n    })\n  }\n}","const EventsEmitter = class EventsEmitter {\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  constructor() {\n\n    this._events = {}\n  }\n\n  /////////////////////////////////////////////////////////\n  // Supports multiple events space-separated\n  //\n  /////////////////////////////////////////////////////////\n  on(events, fct) {\n\n    events.split(' ').forEach((event) => {\n\n      this._events[event] = this._events[event] || []\n      this._events[event].push(fct)\n    })\n\n    return this\n  }\n\n  /////////////////////////////////////////////////////////\n  // Supports multiple events space-separated\n  //\n  /////////////////////////////////////////////////////////\n  off(events, fct) {\n\n    if (events == undefined) {\n      this._events = {}\n      return\n    }\n\n    events.split(' ').forEach((event) => {\n\n      if (event in this._events === false)\n        return;\n\n      if (fct) {\n\n        this._events[event].splice(\n          this._events[event].indexOf(fct), 1)\n\n      } else {\n\n        this._events[event] = []\n      }\n    })\n\n    return this\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  emit(event /* , args... */ ) {\n\n    if (this._events[event] === undefined)\n      return null;\n\n    var tmpArray = this._events[event].slice()\n\n    for (var i = 0; i < tmpArray.length; ++i) {\n\n      var result = tmpArray[i].apply(this,\n        Array.prototype.slice.call(arguments, 1));\n\n      if (result !== undefined) {\n        return result\n      }\n    }\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  guid(format = 'xxxxxxxxxxxx') {\n\n    var d = new Date().getTime()\n\n    const guid = format.replace(\n      /[xy]/g,\n      function(c) {\n        var r = (d + Math.random() * 16) % 16 | 0\n        d = Math.floor(d / 16)\n        return (c == 'x' ? r : (r & 0x7 | 0x8)).toString(16)\n      })\n\n    return guid\n  }\n}\n\n\n/////////////////////////////////////////////////////////\n//\n//\n/////////////////////////////////////////////////////////\nexport const EventsEmitterComposer =\n  (BaseClass) => class extends BaseClass {\n\n    /////////////////////////////////////////////////////////\n    //\n    //\n    /////////////////////////////////////////////////////////\n    constructor(arg1, arg2, arg3, arg4, arg5) {\n\n      super(arg1, arg2, arg3, arg4, arg5)\n\n      this._events = {}\n    }\n\n    /////////////////////////////////////////////////////////\n    // Supports multiple events space-separated\n    //\n    /////////////////////////////////////////////////////////\n    on(events, fct) {\n\n      events.split(' ').forEach((event) => {\n\n        this._events[event] = this._events[event] || [];\n        this._events[event].push(fct);\n      })\n\n      return this\n    }\n\n    /////////////////////////////////////////////////////////\n    // Supports multiple events space-separated\n    //\n    /////////////////////////////////////////////////////////\n    off(events, fct) {\n\n      if (events == undefined) {\n        this._events = {};\n        return;\n      }\n\n      events.split(' ').forEach((event) => {\n\n        if (event in this._events === false)\n          return;\n\n        if (fct) {\n\n          this._events[event].splice(\n            this._events[event].indexOf(fct), 1)\n\n        } else {\n\n          this._events[event] = []\n        }\n      })\n\n      return this\n    }\n\n    /////////////////////////////////////////////////////////\n    //\n    //\n    /////////////////////////////////////////////////////////\n    emit(event /* , args... */ ) {\n\n      if (this._events[event] === undefined)\n        return null;\n\n      var tmpArray = this._events[event].slice()\n\n      for (var i = 0; i < tmpArray.length; ++i) {\n\n        var result = tmpArray[i].apply(this,\n          Array.prototype.slice.call(arguments, 1));\n\n        if (result !== undefined) {\n          return result\n        }\n      }\n    }\n\n    /////////////////////////////////////////////////////////\n    //\n    //\n    /////////////////////////////////////////////////////////\n    guid(format = 'xxxxxxxxxxxx') {\n\n      var d = new Date().getTime()\n\n      const guid = format.replace(\n        /[xy]/g,\n        function(c) {\n          var r = (d + Math.random() * 16) % 16 | 0\n          d = Math.floor(d / 16)\n          return (c == 'x' ? r : (r & 0x7 | 0x8)).toString(16)\n        })\n\n      return guid\n    }\n  }\n\n\nEventsEmitter.Composer = EventsEmitterComposer;\n\nexport default EventsEmitter;","export default {\n\n  window: \"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNui8sowAAADWSURBVEiJ1ZVNEsIwCEYfTg/UjTPuemcvojfCRRMlNKGdKguZyaLkK4/8EERVybQJQERCUU3C63p+n/Bk9QHDRtbIX2GqKh6woRfxLdL0/M1KzYRaA+7AXDW9wN5fvrXEWud6AOABLD7QwREDgCdw7WV6ZjSAsi0Lzn4JmEcHeHbYWxQXw3FTEWmvaWY1X9Iie4CIKHE1fwfIsnSAZD/X/79FGbdISyzA9QMDG3axTTTVwx3NaNbm5B2dRHY1DWCUyd4qIs0bUB8nuz32/11Cu+KPM7sOXlrOS4sOkzb1AAAAAElFTkSuQmCC), auto\",\n  dolly: \"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAMAAADXqc3KAAAAgVBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8mJiYAAADNzc2/v7+fn59paWlPT08MDAwICAj6+vqpqak7Ozv29vby8vLp6em2traAgIBkZGRZWVlAQEAaGhpISEgkS7tbAAAAFHRSTlMAOvhpZD8mkQWegMy9qY1YVE01EYiqlE0AAADZSURBVCjPbY9ZloMgEAAbEbfsmRZZXbJn7n/AAX2RQVN/VD26AXLOeZLDGo6IbfI9tHq8cdxuj1HwvgCoaiHqKoRk+M3hB9jueUW8PnfsE/bJ3vms7nCkq7NoE3s99AXxoh8vFoXCpknrn5faAuJCenT0xPkYqnxQFJaU0gdZrsKm8aHZrAIffBj40mc1jsTfIJRWegq6opTMvlfqLqYg7kr1ZB7jFgeaMC59N//8O4WZ1IiPF8b5wMHcJn8zB4g4mc77zpxgAbMSUVoGK4iV0hL4wrksz+H0Bw5+E+HrniDQAAAAAElFTkSuQmCC), auto\",\n  pan: \"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAMAAADXqc3KAAABHVBMVEUAAABPTk4AAAAAAAAJCQkRERE0MzQQEBAODg4QEBB4d3dbWlo9PDw/Pj4vLy8sLCwZGBgWFhYcHBwKCgoSEhIAAAAKCgoICAgKCgoQEBAODg4EBAQICAgPDw8REREMDAx2dnY0NDQvLy9QUFAaGhomJSYjIyM7OjokJCQNDA0mJiYNDQ0AAAAUFBQJCQkQEBAEBAQNDQ0PDw8VFRX///+amJkAAAD5+fnz8/PKycn9/f339vbi4eLR0dDNzMyAgIB8e3xycHH7+/vw7+/o6OjX1ta7urq4t7iwsLCnp6eioqKbmppva21OTk74+Pjl5eXc3Nzb29vLy8vDw8PDwsKrqqqdnZ2WlpaSkpKTkZKMiouEg4NkZGRISEgxLzBpgbsEAAAANHRSTlMA+fiQXgngKSYG/vX17uvBuqackpCNg3BpUkpAPBwTDvj18+vl0s/NwrOwoZZ+TDg4NBkBGrzX8QAAAP5JREFUKM99j9Vuw0AQRdeuKZyGkyZNmbnXDLHDVGb8/8/oy7paK1bO0+oc7WiGnGiaxq+QRTQAOh8f9Jv4H/Ge8PZPrCdlvkxfYluUT2WyyCq3mZ7unwlKVLcqOzA/Mf71j0TWJ/Ym6rPeca05Ni4iIevYc7yoUD2zQFhq71BdI9nvBeBabFDSPe8DswlUc1Riw3VxbH0NHBUPQ0jrbDnPYDjALQBMq9E7nkC5y7VDKTZlUg8Q0lmjvl74zlYErgvKa42GPKf3/a0kQmYCDY1SYMDosqMoiWrGwz/uAbNvc/fNon4kXRKGq+PUo2Mb96afV0iUxqGU2s4VBbKUP65NL/LKF+7ZAAAAAElFTkSuQmCC), auto\"\n}","export default function(params, callback) {\n\n  const ViewerToolbarButtonManager = class {\n\n    constructor(viewer, options) {\n      this.viewer = viewer;\n      window.Autodesk.Viewing.Extension.call(this, viewer, options);\n    }\n\n    load() {\n      if (this.viewer.toolbar) {\n        // Toolbar is already available, create the UI\n        this.createUI();\n      } else {\n        // Toolbar hasn't been created yet, wait until we get notification of its creation\n        this.onToolbarCreatedBinded = this.onToolbarCreated.bind(this);\n        this.viewer.addEventListener(window.Autodesk.Viewing\n          .TOOLBAR_CREATED_EVENT, this\n          .onToolbarCreatedBinded);\n      }\n\n      return true;\n    }\n\n\n    onToolbarCreated() {\n      this.viewer.removeEventListener(window.Autodesk.Viewing\n        .TOOLBAR_CREATED_EVENT, this\n        .onToolbarCreatedBinded);\n      this.onToolbarCreatedBinded = null;\n      this.createUI();\n    }\n\n    createUI() {\n      // var viewer = this.viewer;\n\n      // Button 1\n      var button = new window.Autodesk.Viewing.UI.Button(params.name);\n      button.onClick = () => {\n        callback();\n      };\n\n      var icon = button.container.firstChild;\n      icon.className =\n        \"adsk-button-icon md-icon md-icon-font md-theme-default\";\n\n      icon.innerHTML = params.icon;\n\n      if (typeof params.label !== \"undefined\")\n        button.setToolTip(params.label);\n\n      this.subToolbar = this.viewer.toolbar.getControl(\n        params.subToolbarName\n      );\n\n      if (!this.subToolbar) {\n        // console.log(\"params.subToolbarName\", params.subToolbarName);\n        this.subToolbar = new window.Autodesk.Viewing.UI.ControlGroup(\n          params.subToolbarName\n        );\n\n        this.subToolbar.addControl(button);\n\n        this.viewer.toolbar.addControl(this.subToolbar);\n      } else {\n        this.subToolbar.addControl(button);\n\n      }\n    }\n\n\n    unload() {\n      this.viewer.toolbar.removeControl(this.subToolbar);\n      return true;\n    }\n\n    // registerExtension(name, className) {\n    //   window.Autodesk.Viewing.theExtensionManager.registerExtension(\n    //     name,\n    //     className\n    //   );\n    // }\n\n  }\n  return ViewerToolbarButtonManager;\n}"],"names":[],"version":3,"file":"spinal-env-viewer-window-selection.558f3883.js.map"}