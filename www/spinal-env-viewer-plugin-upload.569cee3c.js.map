{"mappings":"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;YACA,4DAAA;YACA,mCAAA;YAEA,8CAAA;YAGA,8CAAA;YACA,yDAAA;YACA;Y,I,C,U,G;QAEA;QAEA,aAAA,WAAA;YACA,IAAA,OAAA,IAAA,CAAA,SAAA,KAAA,YACA,IAAA,CAAA,SAAA,CAAA;gBAAA;gBAAA,YAAA,IAAA,CAAA,UAAA;YAAA;QAEA;QAEA,kBAAA,SAAA;Y,O,mB,kB,C;Q;Q,Y,K;YAKA,IAAA,CAAA,IAAA,GAAA,KAAA,CAAA,EAAA;Q;I;AAGA;AAEA,IAAA,UAAA,OAAA,kBAAA,aAAA,cAAA,OAAA,GAAA;kB,S,wC;;;;;AC/EA,iDAAa;AAHb;AAGO,MAAM,oBAAoB,CAAA,GAAA,gCAAK,AAAD;IACjC,YAAY,IAAI,EAAE,IAAI,CAAC;QACnB,KAAK;QACL,IAAI,CAAC,QAAQ,CAAC;YAAC;YAAM,MAAM,IAAI,CAAA,GAAA,8BAAG,AAAD,EAAE,IAAI,CAAA,GAAA,8BAAG,AAAD,EAAE;QAAM;IACrD;AACJ;AAGA,CAAA,GAAA,qCAAU,AAAD,EAAE,eAAe,CAAC;IAAC;CAAY;;;A,I,S;I,I,M,I;I,I,K,I,c;I,I,K,I,K,C,E,I;I,O,G,O;Q,G,a;Y,O;gB,a,I,U;Y;Y,I;gB,mB,S,M;oB,I,U,G;gB;gB,oB,S,M;oB,I,U,G;gB;gB,a,S,M;oB,O,I,W,C;gB;Y;Q,G;Y,G,mB;gB,I,E,C;a;Y,I,E,C;Y,G,qB;gB,G,Y;oB,G,S;wB,I,E,C;qB;oB,I,E,C;oB,G,Y;wB,O;4B,O,I,U;4B,U,S,G;gC,I,U,G;4B;4B,Y;wB;oB;iB,E;gB,I,E,C;gB,G,Y;oB,G,S;wB,I,E,C;qB;oB,I,E,C;oB,G,W;wB,I;4B,a,I,U;wB;wB,O;4B,O,I,C;4B,U,S,G;gC,I,C,G;4B;4B,Y;wB;oB;iB,E;a,E;Y,I,E,C;Y,G,qB;gB,G,a;oB,a;oB,I;wB,S,S,M;4B,O,I,W,C;wB;oB;gB,G;oB,I,E,C;iB;gB,I,E,C;gB,G,a;oB,a;oB,I;wB,S,S,M;4B,O,I,W,C;wB;oB;gB,G;oB,I,E,C;iB;a,E;S,E;K,E;A;A,I,kB,E;A,Q,M,G;A,Q,e,G;;;;;ADVxC,IAAI,OAAO,KAAO;kBAEH,CAAA,UAEf;;;;;AEJA,IAAI;AACJ,IAAI,aAAa;IACf,SAAS,QAAQ;IACjB,IAAI,OAAO,UAAU,EAAE,SAAS,OAAO,OAAO;IAC9C,OAAO,MAAM,GAAG,QAAQ,oBAAgC,MAAM;IACpD,OAAO,eAAe,GAAG,QAAQ,oBAAgC,eAAe;IAChF,OAAO,QAAQ,GAAG;IAG5B,QAAQ,oBAA8B,OAAO,CAAC;IAC9C,OAAO,SAAS,GAAG;IACnB,OAAO,MAAM,GAAG;AAClB;AACA;kBAEe;;;;;A;A,I,E,kB,E,G,Q;A,I,gB;I,M;I,O;Q;K;I;Q,O;Y,Y;Y,a;Q;I;I,S;Q,Q,M;Y,Q,G,C,kB;Q;Q,M,S,M;Y,I,O,W,E,C,G,+C,A,E,U,C,I,C,W,E;Y,I,C,U,G;QAOf;Q,a,W;Y,I,O,I,C,S,K,YAIA,IAAA,CAAA,SAAA,CAAA;gBAAA;gBAAA,YAAA,IAAA,CAAA,UAAA;YAAA;QAEA;QAEA,kBAAA,SAAA;YACA,OAAA,mBAAA,kBAAA,CAAA;QACA;QAEA,YAAA,KAAA;YACA,IAAA,CAAA,IAAA,GAAA,KAAA,CAAA,EAAA;QACA;IACA;AACA;AAEA,IAAA,UAAA,OAAA,kBAAA,aAAA,cAAA,OAAA,GAAA;kBACA,SAAA,wCAAA;;;A,I,S;I,I,M,I;I,I,K,I,c;I,I,K,I,K,C,E,I;I,O,G,O;Q,G,a;Y,O;gB,a,I,U;Y;Y,I;gB,mB,S,M;oB,I,U,G;gB;gB,oB,S,M;oB,I,U,G;gB;gB,a,S,M;oB,O,I,W,C;gB;Y;Q,G;Y,G,mB;gB,I,E,C;a;Y,I,E,C;Y,G,qB;gB,G,Y;oB,G,S;wB,I,E,C;qB;oB,I,E,C;oB,G,Y;wB,O;4B,O,I,W;4B,U,S,G;gC,I,W,G;4B;4B,Y;wB;oB;iB,E;a,E;Y,I,E,C;Y,G,qB;gB,G,a;oB,a;oB,I;wB,S,S,M;4B,O,I,W,C;wB;oB;gB,G;oB,I,E,C;iB;gB,I,E,C;gB,G,a;oB,a;oB,I;wB,S,S,M;4B,O,I,W,C;wB;oB;gB,G;oB,I,E,C;iB;a,E;S,E;K,E;A;A,I,kB,E;A,Q,M,G;A,Q,e,G;;;;;AAzCA,IAAI,OAAO,KAAO;kBAEH,CAAA,UAEf;;;;;ACJA,IAAI;AACJ,IAAI,aAAa;IACf,SAAS,QAAQ;IACjB,IAAI,OAAO,UAAU,EAAE,SAAS,OAAO,OAAO;IAC9C,OAAO,MAAM,GAAG,QAAQ,oBAA6B,MAAM;IACjD,OAAO,eAAe,GAAG,QAAQ,oBAA6B,eAAe;IAC7E,OAAO,QAAQ,GAAG;IAE5B,OAAO,YAAY,GAAG,QAAQ,mBAA0B,OAAO;IAC/D,QAAQ,mBAA2B,OAAO,CAAC;IAC3C,OAAO,SAAS,GAAG;IACnB,OAAO,MAAM,GAAG;AAClB;AACA;kBAEe;;;;;A;A;;A,I,gB;I,M;I,O;Q;K;I,Y;Q,iB,C,G,sC,A;I;I;Q,I,C,gB;Q,O;Y,Y;Y,a;Y,gB;Y,iB;Y,S,E;Y,S,E;Q;I;I,S;Q,M,Q,E,M,E;Y,I,C,gB,G;Y,I,C,O,G,M,I,C,O;Q;Q,M,S,M;Y,I,O,W,E;gB,M,O,C,G,+C,A,E,W,C,I,C,gB;gB,I,K,W,C,qB,C,G,yD,A,I,M,K,c,C,qB,C,G,yD,A;gB,C,G,+C,A,E,Q,C,I,C,gB,E,I,C,c,E,qB,C,G,yD,A;Y;Y,I,C,U,G;Q;Q,a,W;Y,I,O,I,C,S,K,Y,I,C,S,C;gB;gB,Y,I,C,U;Y;Q;Q,e,O;Y,I,C,c,G;Y,I,C,O,G,E;Y,I,C,e,G;Y,I,Q,I,C,O,C,I,C,C,K,G,E,I;Y,I,O,I,C,O,G,M,O;Q;Q,c,O;YA4Cf,IAAA,CAAA,cAAA,GAAA;QACA;QACA;YACA,MAAA,c,C,G,+C,A,E,kB,C;YAEA,MAAA,UAAA,YAAA,GAAA,CAAA,CAAA,UAAA,QAAA,IAAA,CAAA,GAAA;Y,M,U,Q,G,C,O;gBAEA,IAAA,kBAAA,MAAA,CAAA,GAAA,+CAAA,AAAA,EAAA,oBAAA,CACA,GAAA,EAAA,EACA,GAAA,EAAA;gBAEA,GAAA,OAAA,GAAA,gBAAA,GAAA,CAAA,CAAA,UAAA,QAAA,GAAA;gBACA,OAAA;YACA;YACA,OAAA,QAAA,GAAA,CAAA;QACA;IACA;AACA;AAEA,IAAA,UAAA,OAAA,kBAAA,aAAA,cAAA,OAAA,GAAA;kBACA,SAAA,wCAAA;;;;;AC/EA,IAAI;AACJ,IAAI,aAAa;IACf,SAAS,QAAQ;IACjB,IAAI,OAAO,UAAU,EAAE,SAAS,OAAO,OAAO;IAC9C,OAAO,MAAM,GAAG,QAAQ,oBAAsC,MAAM;IAC1D,OAAO,eAAe,GAAG,QAAQ,oBAAsC,eAAe;IACtF,OAAO,QAAQ,GAAG;IAE5B,OAAO,YAAY,GAAG,QAAQ,oBAAmC,OAAO;IACxE,QAAQ,oBAAoC,OAAO,CAAC;IACpD,OAAO,SAAS,GAAG;IACnB,OAAO,MAAM,GAAG;AAClB;AACA;kBAEe;;;;;A,I,gB;I,M;I,O;Q;Q;Q;Q;K;I,S;Q;Y,I,C,K,C;Q;Q,Y,E;Y,I,C,K,C,U;Q;I;A;A,I,U,O,kB,a,c,O,G;kB,S,wC;;;A,I,S;I,I,M,I;I,I,K,I,c;I,I,K,I,K,C,E,I;I,O,G,O;Q,a;I,G;Q,G,O;Y,a;Q,G;Y,G,O;gB,I,E,C,I,E,C,I,K;a;S;Q,I,E,C;Q,G,c;Y,a;Q,G;Y,G,W,I,E,C,I,I,E,S,I,E,K;gB,O,G,gB;oB,Y;wB;4B,M;4B,S;4B,O,K,I;4B,Y;wB;qB;oB,K;oB,a;oB,O;wB,Y,K,E,K,I,Y;oB;oB,I;wB,S,S,M;4B,O,I,U,C,K,E;wB;oB;gB,G;oB,G,Q;wB,a;oB,G;wB,I,E,C,I,E,C,K,I;qB;iB;Y,I;S,E;K,E;A;A,I,kB,E;A,Q,M,G;A,Q,e,G;;;;;AAff,IAAI,OAAO,KAAO;kBAEH,CAAA,UAEf;;;A,I,S;I,I,M,I;I,I,K,I,c;I,I,K,I,K,C,E,I;I,O,G,O;Q,G,a;Y,a;Y,O;gB,a,I,U;Y;Y,I;gB,mB,S,M;oB,I,U,G;gB;gB,oB,S,M;oB,I,U,G;gB;gB,a,S,M;oB,O,I,W,C;gB;Y;Q,G;Y,G,mB;gB,I,E,C;a;Y,I,E,C;Y,G,qB;gB,a;Y,G;gB,G,O;oB,a;gB,G;oB,G,iB;wB,O;4B,S;4B,Q,I,O;4B,gB,I,e;4B,c;wB;wB,I;4B,U,I,a;wB;oB;iB,E;gB,I,E,C;gB,G,O;oB,a;gB,G;oB,G,iB;wB,O;4B,S;4B,Q,I,O;4B,gB,I,c;4B,c;wB;wB,I;4B,U,I,Y;wB;oB;iB,E;a;Y,I,E,C;Y,G,qB;gB,G,a;oB,a;oB,I;wB,S,S,M;4B,O,I,W,C;wB;oB;gB,G;oB,I,E,C;iB;gB,I,E,C;gB,G,a;oB,a;oB,O;wB,Y,C,I,c;oB;oB,I;wB,S,S,M;4B,O,I,W,C;wB;oB;gB,G;oB,I,E,C;iB;a,E;S,E;K,E;A;A,I,kB,E;A,Q,M,G;A,Q,e,G;;;;;ADJA,IAAI,OAAO,KAAO;kBAEH,CAAA,UAEf;;;;;AEJA,IAAI;AACJ,IAAI,aAAa;IACf,SAAS,QAAQ;IACjB,IAAI,OAAO,UAAU,EAAE,SAAS,OAAO,OAAO;IAC9C,OAAO,MAAM,GAAG,QAAQ,oBAA4B,MAAM;IAChD,OAAO,eAAe,GAAG,QAAQ,oBAA4B,eAAe;IAC5E,OAAO,QAAQ,GAAG;IAE5B,OAAO,YAAY,GAAG,QAAQ,oBAAyB,OAAO;IAC9D,QAAQ,oBAA0B,OAAO,CAAC;IAC1C,OAAO,SAAS,GAAG;IACnB,OAAO,MAAM,GAAG;AAClB;AACA;kBAEe;;;;;A;A;;A,I,E,kB,E,G,Q;A,I,gB;I,M;I,O;Q;K;I,Y;Q,iB,C,G,sC,A;I;I;Q,I,C,Y;Q,O;Y,Y;Y,a;Y,gB;Y,iB;Y,gB;Y,kB;Y,S,E;Y,S,E;Y,S,E;Y,W,E;Q;I;I,S;Q,M,Q,M;Y,Q,G,C,kB;Y,sD;Y,Q,G,C,yB,O,Y;Y,Q,G,C,8B,C,G,+C,A,E,kB,C;Y;;;;U,G,I,C,Y,G,O,Y;Y;;;;;;;;;c,G,I,C,O,G,M,I,C,O;Q;Q,M,S,M;Y,I,O,W,E;gB,M,c,I,C,Y;gB,M,sB,M,C,G,+C,A,E,W,C,Y,E,C,G,I;oB;oB;iB;gB,K,I,S,oB;oB,Q,G,C,iB;oB,Q,G,C,6B,I,C,gB;oB,8D;oB;6F,G,C,G,+C,A,E,Q,C,M,E,C,G,I,I,C,gB,E,e,C,G,yD,A;gB;Y;;;;;U,G;Y,I,C,U,G;Q;Q,a,W;YAwEf,IAAA,OAAA,IAAA,CAAA,SAAA,KAAA,YACA,IAAA,CAAA,SAAA,CAAA;gBAAA;gBAAA,YAAA,IAAA,CAAA,UAAA;YAAA;QAEA;QAEA,eAAA,OAAA;YACA,IAAA,CAAA,cAAA,GAAA;YACA,IAAA,CAAA,gBAAA,GAAA;Y,I,C,c,G;YAEA,IAAA,CAAA,SAAA,GAAA,EAAA;YACA,IAAA,CAAA,OAAA,GAAA,EAAA;YACA,IAAA,CAAA,OAAA,GAAA,EAAA;YACA,IAAA,CAAA,eAAA,GAAA;YACA,IAAA,QAAA,IAAA,CAAA,OAAA,CAAA,IAAA,CAAA,CAAA,KAAA,GAAA,EAAA,IAAA;YACA,IAAA,OACA,IAAA,CAAA,OAAA,GAAA,MAAA,OAAA;QAEA;QACA,MAAA,cAAA,OAAA;YACA,IAAA,CAAA,cAAA,GAAA;YACA,IAAA,UAAA,IAAA,CAAA,OAAA,CAAA,IAAA,CAAA,CAAA,KAAA,GAAA,EAAA,IAAA,IAAA,CAAA,eAAA;YACA,IAAA,SAAA;gBACA,QAAA,GAAA,CAAA,IAAA,CAAA,cAAA,EAAA;gBACA,IAAA,cAAA,MAAA,CAAA,GAAA,+CAAA,AAAA,EAAA,oBAAA,CACA,IAAA,CAAA,cAAA,EACA,QAAA,EAAA;gBAEA,IAAA,CAAA,OAAA,GAAA,YAAA,GAAA,CAAA,CAAA,UAAA,QAAA,GAAA;YACA;QACA;QACA,MAAA,cAAA,OAAA;YACA,IAAA,CAAA,cAAA,GAAA;YACA,IAAA,UAAA,IAAA,CAAA,OAAA,CAAA,IAAA,CAAA,CAAA,KAAA,GAAA,EAAA,IAAA,IAAA,CAAA,eAAA;YACA,IAAA,SAAA;gBACA,QAAA,GAAA,CAAA,IAAA,CAAA,cAAA,EAAA;gBACA,IAAA,gBAAA,MAAA,CAAA,GAAA,+CAAA,AAAA,EAAA,oBAAA,CACA,IAAA,CAAA,cAAA,EACA,QAAA,EAAA;gBAEA,IAAA,CAAA,SAAA,GAAA,cAAA,GAAA,CAAA,CAAA,UAAA,QAAA,GAAA;YACA;QACA;QACA,gBAAA,OAAA;YACA,QAAA,GAAA,CAAA;YACA,IAAA,CAAA,gBAAA,GAAA;QACA;QACA;YACA,MAAA,cAAA,CAAA,GAAA,+CAAA,AAAA,EAAA,kBAAA,CAAA;YACA,MAAA,UAAA,YAAA,GAAA,CAAA,CAAA,UAAA,QAAA,IAAA,CAAA,GAAA;YACA,MAAA,UAAA,QAAA,GAAA,CAAA,OAAA;gBACA,IAAA,kBAAA,MAAA,CAAA,GAAA,+CAAA,AAAA,EAAA,oBAAA,C,G,E,EAEA,GAAA,EAAA;gBAEA,GAAA,OAAA,GAAA,gBAAA,GAAA,CAAA,CAAA,UAAA,QAAA,GAAA;gBACA,OAAA;YACA;YACA,OAAA,QAAA,GAAA,CAAA;QACA;IACA;AACA;AAEA,IAAA,UAAA,OAAA,kBAAA,aAAA,cAAA,OAAA,GAAA;kBACA,SAAA,wCAAA;;;A,I,S;I,I,M,I;I,I,K,I,c;I,I,K,I,K,C,E,I;I,O,G,O;Q,G,a;Y,a;Y,O;gB,a,I,U;Y;Y,I;gB,mB,S,M;oB,I,U,G;gB;gB,oB,S,M;oB,I,U,G;gB;gB,a,S,M;oB,O,I,W,C;gB;Y;Q,G;Y,G,mB;gB,I,E,C;a;Y,I,E,C;Y,G,qB;gB,a;Y,G;gB,G,O;oB,a;gB,G;oB,G,iB;wB,O;4B,S;4B,Q,I,O;4B,gB,I,e;4B,c;wB;wB,I;4B,U,I,a;wB;oB;iB,E;gB,I,E,C;gB,G,O;oB,a;gB,G;oB,G,iB;wB,O;4B,S;4B,Q,I,O;4B,gB,I,c;4B,c;wB;wB,I;4B,U,I,Y;wB;oB;iB,E;gB,I,E,C;gB,G,O;oB,a;gB,G;oB,G,iB;wB,O;4B,S;4B,Q,I,O;4B,gB,I,c;4B,c;wB;wB,I;4B,U,I,Y;wB;oB;iB,E;gB,I,E,C;gB,G,O;oB,a;gB,G;oB,G,iB;wB,O;4B,S;4B,Q,I,S;4B,gB,I,gB;4B,c;wB;wB,I;4B,U,I,c;wB;oB;iB,E;a;Y,I,E,C;Y,G,qB;gB,G,a;oB,a;oB,I;wB,S,S,M;4B,O,I,W,C;wB;oB;gB,G;oB,I,E,C;iB;gB,I,E,C;gB,G,a;oB,a;oB,O;wB,Y,C,I,gB;oB;oB,I;wB,S,S,M;4B,O,I,W,C;wB;oB;gB,G;oB,I,E,C;iB;a,E;S,E;K,E;A;A,I,kB,E;A,Q,M,G;A,Q,e,G;;;;;AAtJA,IAAI,OAAO,KAAO;kBAEH,CAAA,UAEf;;;;;ACJA,IAAI;AACJ,IAAI,aAAa;IACf,SAAS,QAAQ;IACjB,IAAI,OAAO,UAAU,EAAE,SAAS,OAAO,OAAO;IAC9C,OAAO,MAAM,GAAG,QAAQ,oBAAwC,MAAM;IAC5D,OAAO,eAAe,GAAG,QAAQ,oBAAwC,eAAe;IACxF,OAAO,QAAQ,GAAG;IAG5B,QAAQ,oBAAsC,OAAO,CAAC;IACtD,OAAO,SAAS,GAAG;IACnB,OAAO,MAAM,GAAG;AAClB;AACA;kBAEe;;;;;A;A,M,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","sources":["node_modules/spinal-env-viewer-plugin-upload/index.js","node_modules/spinal-env-viewer-plugin-upload/registerDialog.js","node_modules/spinal-env-viewer-plugin-upload/src/vue/uploadFile.vue","node_modules/spinal-env-viewer-plugin-upload/src/model/profilModel.js","node_modules/spinal-env-viewer-plugin-upload/src/vue/createContext.vue","node_modules/spinal-env-viewer-plugin-upload/src/vue/linkProfil.vue","node_modules/spinal-env-viewer-plugin-upload/src/vue/linkTogroupTemplate.vue","node_modules/spinal-env-viewer-plugin-upload/src/vue/linkGroup.vue","node_modules/spinal-env-viewer-plugin-upload/src/vue/selectControlEndpoint.vue","node_modules/spinal-env-viewer-panel-manager-service/index.js","node_modules/spinal-env-viewer-panel-manager-service/SpinalPanelManagerService.js","node_modules/spinal-env-viewer-panel-manager-service/SpinalPanelApp.js","node_modules/spinal-env-viewer-panel-manager-service/SpinalMountExtention.js","node_modules/spinal-env-viewer-plugin-upload/src/button/uploadExcel.js","node_modules/spinal-env-viewer-plugin-upload/src/button/contextUpload.js","node_modules/spinal-env-viewer-plugin-upload/src/button/linkEndpointToProfil.js"],"sourcesContent":["import \"./registerDialog\";\nimport {spinalContextMenuService} from \"spinal-env-viewer-context-menu-service\";\nimport UploadExcelFile from \"./src/button/uploadExcel\"\nimport ContextUpload from \"./src/button/contextUpload\"\nimport LinkEndpointToProfil from \"./src/button/linkEndpointToProfil\";\n// import LinkGroupToEndpoint from \"./src/button/linkGroupToEndpoint\";\n\nconst sidebarName = \"GraphManagerSideBar\";\nconst topbarName = \"GraphManagerTopBar\"\n\n\nspinalContextMenuService.registerApp(sidebarName, new UploadExcelFile(), [3]);\nspinalContextMenuService.registerApp(topbarName, new ContextUpload(), [3]);\nspinalContextMenuService.registerApp(sidebarName, new LinkEndpointToProfil(), [3]);\n// spinalContextMenuService.registerApp(sidebarName, new LinkGroupToEndpoint(), [3]);\n\n\n","import vue from \"vue\";\nimport UploadVue from \"./src/vue/uploadFile.vue\";\nimport CreateContext from \"./src/vue/createContext.vue\";\nimport LinkProfil from \"./src/vue/linkProfil.vue\";\nimport LinkGroup from \"./src/vue/linkGroup.vue\";\nimport SelectControlEndpoint from \"./src/vue/selectControlEndpoint.vue\";\n\nconst {\n  SpinalMountExtention,\n} = require(\"spinal-env-viewer-panel-manager-service\");\n\nconst dialogs = [\n  {\n    name: \"UploadExcelDialog\",\n    vueMountComponent: vue.extend(UploadVue),\n    parentContainer: document.body,\n  },\n  {\n    name: \"ContextUploadDialog\",\n    vueMountComponent: vue.extend(CreateContext),\n    parentContainer: document.body,\n  },\n  {\n    name: \"LinkProfilDialog\",\n    vueMountComponent: vue.extend(LinkProfil),\n    parentContainer: document.body,\n  },\n  {\n    name: \"LinkGroupDialog\",\n    vueMountComponent: vue.extend(LinkGroup),\n    parentContainer: document.body,\n  },\n  {\n    name: \"selectControlEndpoint\",\n    vueMountComponent: vue.extend(SelectControlEndpoint),\n    parentContainer: document.body,\n  },\n];\n\nfor (let index = 0; index < dialogs.length; index++) {\n  SpinalMountExtention.mount(dialogs[index]);\n}\n","<template>\n  <div>\n    <md-dialog :md-active.sync=\"showDialog\"\n               @md-closed=\"closeDialog(false)\">\n      <md-dialog-title>Add a simulation file</md-dialog-title>\n      <md-dialog-content>\n<md-field>\n        <label>Profil name</label>\n        <md-input v-model=\"profilName\"></md-input>\n      </md-field>\n\n      <md-field>\n        <label>Upload</label>\n        <md-file v-model=\"f\" @md-change=\"changeFile\"/>\n      </md-field>\n      </md-dialog-content>\n\n      <md-dialog-actions>\n        <md-button class=\"md-primary\"\n                   @click=\"closeDialog(false)\">Close</md-button>\n        <md-button class=\"md-primary\"\n                   @click=\"closeDialog(true)\">Save</md-button>\n      </md-dialog-actions>\n    </md-dialog>\n  </div>\n</template>\n\n<script>\nimport { SpinalGraphService, SPINAL_RELATION_LST_PTR_TYPE } from 'spinal-env-viewer-graph-service';\nimport {ProfilModel} from \"../model/profilModel\"\nvar {SpinalExcelManager} = require('spinal-env-viewer-plugin-excel-manager-service');\n\nexport default {\n  name: \"uploadComponent\",\n  props: [\"onFinised\"],\n  data() {\n    this.contextId;\n    return {\n      showDialog: true, \n      f: undefined, \n      file: undefined,\n      profilName: \"\"\n    };\n  },\n  methods: {\n    opened(option) {\n      console.log(\"voici l'option\",option); \n      this.contextId = option.context.id.get()\n    },\n    async removed(option) {\n      if(option.closeResult){\n\n        const valueExcel = await this.getDataFromExcel(this.file);\n        console.log(\"conversion du fichier excel\",valueExcel);\n        const sheetNames = Object.keys(valueExcel);\n        const sheetValues = sheetNames.map(el => {\n          return valueExcel[el].map(element => {\n            const valueKey = Object.keys(element)[1];\n\n            return {\n              date : new Date(element[\"DATE / HEURE\"]).getTime(),\n              value : element[valueKey]\n            }\n            \n          })\n        })\n        const values = sheetValues.flat().filter(el => {\n          return (!isNaN(el.date) && typeof el.date == \"number\") && (!isNaN(el.value) && typeof el.value == \"number\") \n        })\n\n        const profilModel = new ProfilModel(this.profilName, values);\n        const nodeId = SpinalGraphService.createNode({name: this.profilName, type: \"uploadProfil\"}, profilModel);\n        SpinalGraphService.addChildInContext(this.contextId, nodeId, this.contextId, \"hasUploadProfil\", SPINAL_RELATION_LST_PTR_TYPE)\n        \n       \n       \n       \n       // const values = sheetValues.\n\n\n        // const valueKey = Object.keys(valueExcel)[1];\n        // const date = new Date(element[\"DATE / HEURE\"]).getTime();\n        // const value = element[valueKey];\n\n        // const value = Object.keys(valueExcel).map()\n\n        \n        // console.log(\"value\",value,this.profilName);\n        // sauvegarder le fichier excel et le convertir en object\n      }\n      this.showDialog = false \n    },\n\n    closeDialog(closeResult) {\n      if (typeof this.onFinised === \"function\") {\n        this.onFinised({ closeResult, inputValue: this.inputValue });\n      }\n    },\n\n  getDataFromExcel(excelLink){\n    return SpinalExcelManager.convertExcelToJson(excelLink);\n  },\n\n  changeFile(files){\n    this.file = files[0];\n  }\n  }\n};\n</script>","import { spinalCore, Model, Ptr, Lst, Choice } from 'spinal-core-connectorjs_type';\n\n\nexport class ProfilModel extends Model{\n    constructor(name, data){\n        super();\n        this.add_attr({name, data: new Ptr(new Lst(data))})\n    }\n}\n\n\nspinalCore.register_models([ProfilModel])","<template>\n  <div>\n    <md-dialog :md-active.sync=\"showDialog\"\n               @md-closed=\"closeDialog(false)\">\n      <md-dialog-title>Add a simulation context</md-dialog-title>\n      <md-dialog-content>\n      <md-field>\n        <label>Context name</label>\n        <md-input v-model=\"contextName\"></md-input>\n      </md-field>\n      </md-dialog-content>\n\n      <md-dialog-actions>\n        <md-button class=\"md-primary\"\n                   @click=\"closeDialog(false)\">Close</md-button>\n        <md-button class=\"md-primary\"\n                   @click=\"closeDialog(true)\">Save</md-button>\n      </md-dialog-actions>\n    </md-dialog>\n  </div>\n</template>\n\n<script>\nimport { SpinalGraphService } from \"spinal-env-viewer-graph-service\";\nvar {SpinalExcelManager} = require('spinal-env-viewer-plugin-excel-manager-service');\n\n\nexport default {\n  name: \"createContext\",\n  props: [\"onFinised\"],\n  data() {\n    return {\n      showDialog: true, \n      contextName: \"\"\n    };\n  },\n  methods: {\n    opened(option) {\n      console.log(\"voici l'option\",option)\n    },\n    async removed(option) {\n      if(option.closeResult){\n        SpinalGraphService.addContext(this.contextName, \"uploadFileContext\")\n      }\n      this.showDialog = false \n    },\n\n    closeDialog(closeResult) {\n      if (typeof this.onFinised === \"function\") {\n        this.onFinised({ closeResult, inputValue: this.inputValue });\n      }\n    },\n\n  getDataFromExcel(excelLink){\n    return SpinalExcelManager.convertExcelToJson(excelLink);\n  },\n\n  changeFile(files){\n    this.file = files[0];\n  }\n  }\n};\n</script>","<!--\nCopyright 2021 SpinalCom - www.spinalcom.com\n\nThis file is part of SpinalCore.\n\nPlease read all of the following terms and conditions\nof the Free Software license Agreement (\"Agreement\")\ncarefully.\n\nThis Agreement is a legally binding contract between\nthe Licensee (as defined below) and SpinalCom that\nsets forth the terms and conditions that govern your\nuse of the Program. By installing and/or using the\nProgram, you agree to abide by all the terms and\nconditions stated or referenced herein.\n\nIf you do not agree to abide by these terms and\nconditions, do not demonstrate your acceptance and do\nnot install or use the Program.\nYou should have received a copy of the license along\nwith this file. If not, see\n<http://resources.spinalcom.com/licenses.pdf>.\n-->\n\n<template>\n  <div>\n    <md-dialog class=\"dialogApp\"\n               :md-active.sync=\"showDialog\"\n               @md-closed=\"closeDialog(false)\">\n      <md-dialog-title>Link an endpoint to a profil</md-dialog-title>\n      <md-dialog-content class=\"content\">\n        <div class=\"section\">\n          <link-template :title=\"'Context'\"\n                         :data=\"context\"\n                         :itemSelected=\"contextSelected\"\n                         @select=\"selectContext\"\n                         :disableBtn=\"true\"></link-template>\n        </div>\n\n        <div class=\"section\">\n          <link-template :title=\"'Profil'\"\n                         :data=\"profils\"\n                         :itemSelected=\"profilSelected\"\n                         @select=\"selectProfil\"\n                         :disableBtn=\"true\"></link-template>\n        </div>\n      </md-dialog-content>\n\n      <md-dialog-actions>\n        <md-button class=\"md-primary\"\n                   @click=\"closeDialog(false)\">Close</md-button>\n        <md-button class=\"md-primary\"\n                   @click=\"closeDialog(true)\"\n                   :disabled=\"!profilSelected\">Save</md-button>\n      </md-dialog-actions>\n    </md-dialog>\n  </div>\n</template>\n\n<script>\nimport {\n  SpinalGraphService,\n  SPINAL_RELATION_PTR_LST_TYPE,\n} from \"spinal-env-viewer-graph-service\";\n\nimport linkTemplate from \"./linkTogroupTemplate.vue\";\n\nexport default {\n  name: \"createContext\",\n  props: [\"onFinised\"],\n  components: { \"link-template\": linkTemplate },\n  data() {\n    this.endpointSelected;\n    return {\n      showDialog: true,\n      contextName: \"\",\n      profilSelected: \"\",\n      contextSelected: \"\",\n      context: [],\n      profils: [],\n    };\n  },\n  methods: {\n    async opened({ nodeId }) {\n      this.endpointSelected = nodeId;\n      this.context = await this.getData();\n    },\n    async removed(option) {\n      if (option.closeResult) {\n        const node = SpinalGraphService.getRealNode(this.endpointSelected);\n        if (node.hasRelation(\"endpointHasProfil\", SPINAL_RELATION_PTR_LST_TYPE))\n          await node.removeRelation(\n            \"endpointHasProfil\",\n            SPINAL_RELATION_PTR_LST_TYPE\n          );\n        SpinalGraphService.addChild(\n          this.endpointSelected,\n          this.profilSelected,\n          \"endpointHasProfil\",\n          SPINAL_RELATION_PTR_LST_TYPE\n        );\n      }\n      this.showDialog = false;\n    },\n\n    closeDialog(closeResult) {\n      if (typeof this.onFinised === \"function\") {\n        this.onFinised({ closeResult, inputValue: this.inputValue });\n      }\n    },\n\n    selectContext(element) {\n      this.profilSelected = undefined;\n      this.profils = [];\n      this.contextSelected = element;\n      let found = this.context.find((el) => el.id == element);\n      if (found) this.profils = found.profils;\n    },\n    selectProfil(element) {\n      this.profilSelected = element;\n    },\n    getData() {\n      const contextNode =\n        SpinalGraphService.getContextWithType(\"uploadFileContext\");\n      const context = contextNode.map((element) => element.info.get());\n      const promise = context.map(async (el) => {\n        let contextChildren = await SpinalGraphService.getChildrenInContext(\n          el.id,\n          el.id\n        );\n        el.profils = contextChildren.map((element) => element.get());\n        return el;\n      });\n      return Promise.all(promise);\n    },\n  },\n};\n</script>\n\n<style scoped>\n.dialogApp {\n  width: 50%;\n  height: 100%;\n}\n.dialogApp .content {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  justify-content: space-between;\n  align-items: stretch;\n}\n.dialogApp .content .section {\n  width: 50%;\n  border: 1px solid grey;\n  border-radius: 4% 4% 0 0;\n  padding: 15px;\n}\n</style>","<!--\nCopyright 2020 SpinalCom - www.spinalcom.com\n\nThis file is part of SpinalCore.\n\nPlease read all of the following terms and conditions\nof the Free Software license Agreement (\"Agreement\")\ncarefully.\n\nThis Agreement is a legally binding contract between\nthe Licensee (as defined below) and SpinalCom that\nsets forth the terms and conditions that govern your\nuse of the Program. By installing and/or using the\nProgram, you agree to abide by all the terms and\nconditions stated or referenced herein.\n\nIf you do not agree to abide by these terms and\nconditions, do not demonstrate your acceptance and do\nnot install or use the Program.\nYou should have received a copy of the license along\nwith this file. If not, see\n<http://resources.spinalcom.com/licenses.pdf>.\n-->\n\n<template>\n   <div class=\"subContent\">\n      <div class=\"title\">\n         <div>{{title}}</div>\n         <!-- <div class=\"md-layout-item md-size-10 mdIcon\">\n        <md-button class=\"md-icon-button\"\n                   @click=\"createEvent\"\n                   :disabled=\"disableBtn\">\n          <md-icon>control_point</md-icon>\n        </md-button>\n      </div> -->\n      </div>\n\n      <md-content class=\"container md-scrollbar\">\n         <md-list>\n            <md-list-item\n               class=\"list-item\"\n               v-for=\"(item,index) in data\"\n               :key=\"index\"\n               @click=\"selectItem(item.id)\"\n               :class=\"{'selected' : item.id === itemSelected}\"\n               v-tooltip=\"item.name\"\n            >\n\n               <span class=\"md-list-item-text\">{{item.name}}</span>\n\n            </md-list-item>\n         </md-list>\n      </md-content>\n\n   </div>\n</template>\n\n<script>\nexport default {\n   name: \"linkToGroupTemplate\",\n   props: [\"data\", \"title\", \"itemSelected\", \"disableBtn\"],\n   methods: {\n      createEvent() {\n         this.$emit(\"create\");\n      },\n      selectItem(id) {\n         this.$emit(\"select\", id);\n      },\n   },\n};\n</script>\n\n<style scoped>\n.subContent {\n   width: 100%;\n   height: 100%;\n}\n\n.subContent .title {\n   width: 100%;\n   height: 10%;\n   /* text-align: center; */\n   display: flex;\n   justify-content: space-between;\n   align-items: center;\n   padding: 0 15px 0 15px;\n   border-bottom: 1px dashed grey;\n}\n\n.subContent .container {\n   width: 100%;\n   height: 90%;\n   padding: 0px !important;\n   /* border: 1px solid red; */\n   overflow: hidden;\n   overflow-y: auto;\n}\n\n.subContent .container .list-item {\n   border-bottom: 1px solid grey;\n}\n\n.subContent .container .list-item .md-list-item-text {\n   width: 100%;\n   display: block;\n   overflow: hidden;\n   white-space: nowrap;\n   text-overflow: ellipsis;\n}\n\n.subContent .container .list-item.selected {\n   background-color: #448aff;\n}\n</style>","<!--\nCopyright 2021 SpinalCom - www.spinalcom.com\n\nThis file is part of SpinalCore.\n\nPlease read all of the following terms and conditions\nof the Free Software license Agreement (\"Agreement\")\ncarefully.\n\nThis Agreement is a legally binding contract between\nthe Licensee (as defined below) and SpinalCom that\nsets forth the terms and conditions that govern your\nuse of the Program. By installing and/or using the\nProgram, you agree to abide by all the terms and\nconditions stated or referenced herein.\n\nIf you do not agree to abide by these terms and\nconditions, do not demonstrate your acceptance and do\nnot install or use the Program.\nYou should have received a copy of the license along\nwith this file. If not, see\n<http://resources.spinalcom.com/licenses.pdf>.\n-->\n\n<template>\n  <div>\n    <md-dialog\n      class=\"dialogApp\"\n      :md-active.sync=\"showDialog\"\n      @md-closed=\"closeDialog(false)\"\n    >\n      <md-dialog-title>Link an endpoint to a profil</md-dialog-title>\n      <md-dialog-content class=\"content\">\n        <div class=\"section\">\n          <link-template\n            :title=\"'Context'\"\n            :data=\"context\"\n            :itemSelected=\"contextSelected\"\n            @select=\"selectContext\"\n            :disableBtn=\"true\"\n          ></link-template>\n        </div>\n\n        <div class=\"section\">\n          <link-template\n            :title=\"'Profil'\"\n            :data=\"profils\"\n            :itemSelected=\"profilSelected\"\n            @select=\"selectProfil\"\n            :disableBtn=\"true\"\n          ></link-template>\n        </div>\n        <div class=\"section\">\n          <link-template\n            :title=\"'Device'\"\n            :data=\"devices\"\n            :itemSelected=\"deviceSelected\"\n            @select=\"selectDevice\"\n            :disableBtn=\"true\"\n          ></link-template>\n        </div>\n        <div class=\"section\">\n          <link-template\n            :title=\"'Endpoint'\"\n            :data=\"endpoints\"\n            :itemSelected=\"endpointSelected\"\n            @select=\"selectEndpoint\"\n            :disableBtn=\"true\"\n          ></link-template>\n        </div>\n      </md-dialog-content>\n\n      <md-dialog-actions>\n        <md-button class=\"md-primary\" @click=\"closeDialog(false)\"\n          >Close</md-button\n        >\n        <md-button\n          class=\"md-primary\"\n          @click=\"closeDialog(true)\"\n          :disabled=\"!endpointSelected\"\n          >Save</md-button\n        >\n      </md-dialog-actions>\n    </md-dialog>\n  </div>\n</template>\n\n<script>\nimport {\n  SpinalGraphService,\n  SPINAL_RELATION_PTR_LST_TYPE\n} from \"spinal-env-viewer-graph-service\";\nvar {\n  SpinalExcelManager\n} = require(\"spinal-env-viewer-plugin-excel-manager-service\");\nimport linkTemplate from \"./linkTogroupTemplate.vue\";\n\nexport default {\n  name: \"createContext\",\n  props: [\"onFinised\"],\n  components: { \"link-template\": linkTemplate },\n  data() {\n    this.selectedNode;\n    return {\n      showDialog: true,\n      contextName: \"\",\n      profilSelected: \"\",\n      contextSelected: \"\",\n      deviceSelected: \"\",\n      endpointSelected: \"\",\n      context: [],\n      profils: [],\n      devices: [],\n      endpoints: []\n    };\n  },\n  methods: {\n    async opened(option) {\n      console.log(\"voici l'option\", option);\n      //this.endpointSelected = option.selectedNode.id.get()\n      console.log(\"this is selctedNode: \", option.selectedNode);\n      console.log(\n        \"this is the context name: \",\n        SpinalGraphService.getContextWithType(\"BIMObjectGroupContext\")\n      );\n      /* const currentNode = option.selectedNode;\n      const currentNodeChildren = await SpinalGraphService.getChildren(currentNode.id.get(), \"groupHasBIMObject\");\n      for(let child of currentNodeChildren){\n          console.log(child.name.get());\n        } */\n      this.selectedNode = option.selectedNode;\n      /*    const currentNodeChildren = await SpinalGraphService.getChildren(currentNode.id.get(), \"groupHasBIMObject\");\n            for(let child of currentNodeChildren){\n                console.log(\"this is child\",child);\n                console.log(\"this thisEndpointSelected\", this.endpointSelected);\n                //const node = SpinalGraphService.getRealNode(child.id.get());\n                /* if(node.hasRelation(\"endpointHasProfil\", SPINAL_RELATION_PTR_LST_TYPE))\n                await node.removeRelation(\"endpointHasProfil\", SPINAL_RELATION_PTR_LST_TYPE) \n                //SpinalGraphService.addChild(child.id.get(), this.endpointSelected, \"hasEndPoint\", SPINAL_RELATION_PTR_LST_TYPE)\n\n            } */\n      this.context = await this.getData();\n    },\n    async removed(option) {\n      if (option.closeResult) {\n        const currentNode = this.selectedNode;\n        const currentNodeChildren = await SpinalGraphService.getChildren(\n          currentNode.id.get(),\n          [\"groupHasBIMObject\", \"groupHasgeographicRoom\"]\n        );\n        for (let child of currentNodeChildren) {\n          console.log(\"this is child\", child);\n          console.log(\"this thisEndpointSelected\", this.endpointSelected);\n          //const node = SpinalGraphService.getRealNode(child.id.get());\n          /* if(node.hasRelation(\"endpointHasProfil\", SPINAL_RELATION_PTR_LST_TYPE))\n                await node.removeRelation(\"endpointHasProfil\", SPINAL_RELATION_PTR_LST_TYPE) */\n\n          SpinalGraphService.addChild(\n            child.id.get(),\n            this.endpointSelected,\n            \"hasEndPoint\",\n            SPINAL_RELATION_PTR_LST_TYPE\n          );\n        }\n        /* if(option.closeResult){\n            const node = SpinalGraphService.getRealNode(this.endpointSelected);\n            if(node.hasRelation(\"endpointHasProfil\", SPINAL_RELATION_PTR_LST_TYPE))\n            await node.removeRelation(\"endpointHasProfil\", SPINAL_RELATION_PTR_LST_TYPE)\n            SpinalGraphService.addChild(this.endpointSelected, this.profilSelected, \"endpointHasProfil\", SPINAL_RELATION_PTR_LST_TYPE)\n        } */\n      }\n      this.showDialog = false;\n    },\n\n    closeDialog(closeResult) {\n      if (typeof this.onFinised === \"function\") {\n        this.onFinised({ closeResult, inputValue: this.inputValue });\n      }\n    },\n\n    selectContext(element) {\n      this.profilSelected = undefined;\n      this.endpointSelected = undefined;\n      this.deviceSelected = undefined;\n      this.endpoints = [];\n      this.profils = [];\n      this.devices = [];\n      this.contextSelected = element;\n      let found = this.context.find(el => el.id == element);\n      if (found) {\n        this.profils = found.profils;\n      }\n    },\n    async selectProfil(element) {\n      this.profilSelected = element;\n      let context = this.context.find(el => el.id == this.contextSelected);\n      if (context) {\n        console.log(this.profilSelected, context);\n        let deviceFound = await SpinalGraphService.getChildrenInContext(\n          this.profilSelected,\n          context.id\n        );\n        this.devices = deviceFound.map(element => element.get());\n      }\n    },\n    async selectDevice(element) {\n      this.deviceSelected = element;\n      let context = this.context.find(el => el.id == this.contextSelected);\n      if (context) {\n        console.log(this.deviceSelected, context);\n        let endpointFound = await SpinalGraphService.getChildrenInContext(\n          this.deviceSelected,\n          context.id\n        );\n        this.endpoints = endpointFound.map(element => element.get());\n      }\n    },\n    selectEndpoint(element) {\n      console.log(element);\n      this.endpointSelected = element;\n    },\n    getData() {\n      const contextNode = SpinalGraphService.getContextWithType(\"Network\");\n      const context = contextNode.map(element => element.info.get());\n      const promise = context.map(async el => {\n        let contextChildren = await SpinalGraphService.getChildrenInContext(\n          el.id,\n          el.id\n        );\n        el.profils = contextChildren.map(element => element.get());\n        return el;\n      });\n      return Promise.all(promise);\n    }\n  }\n};\n</script>\n\n<style scoped>\n.dialogApp {\n  width: 50%;\n  height: 100%;\n}\n.dialogApp .content {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  justify-content: space-between;\n  align-items: stretch;\n}\n.dialogApp .content .section {\n  width: 50%;\n  border: 1px solid grey;\n  border-radius: 4% 4% 0 0;\n  padding: 15px;\n}\n</style>","<!--\nCopyright 2021 SpinalCom - www.spinalcom.com\n\nThis file is part of SpinalCore.\n\nPlease read all of the following terms and conditions\nof the Free Software license Agreement (\"Agreement\")\ncarefully.\n\nThis Agreement is a legally binding contract between\nthe Licensee (as defined below) and SpinalCom that\nsets forth the terms and conditions that govern your\nuse of the Program. By installing and/or using the\nProgram, you agree to abide by all the terms and\nconditions stated or referenced herein.\n\nIf you do not agree to abide by these terms and\nconditions, do not demonstrate your acceptance and do\nnot install or use the Program.\nYou should have received a copy of the license along\nwith this file. If not, see\n<http://resources.spinalcom.com/licenses.pdf>.\n-->\n<template>\n  <md-dialog class=\"dialogApp\"\n             :md-active.sync=\"showDialog\"\n             @md-closed=\"closeDialog(false)\">\n    <md-dialog-title>Link an endpoint to a profil</md-dialog-title>\n\n    <md-dialog-content class=\"content\">\n      <md-field>\n        <label for=\"movie\">Select ControlPoints</label>\n        <md-select v-model=\"controlPointSelected\"\n                   name=\"controlPoints\"\n                   id=\"controlPoints\">\n          <md-option v-for=\"controlPoint in controlPoints\"\n                     :key=\"controlPoint.id\"\n                     :value=\"controlPoint.id\">{{controlPoint.name}}</md-option>\n        </md-select>\n      </md-field>\n    </md-dialog-content>\n\n    <md-dialog-actions>\n      <md-button class=\"md-primary\"\n                 @click=\"closeDialog(false)\">Close</md-button>\n      <md-button class=\"md-primary\"\n                 @click=\"closeDialog(true)\"\n                 :disabled=\"!controlPointSelected\">Save</md-button>\n    </md-dialog-actions>\n  </md-dialog>\n</template>\n\n<script>\nimport { spinalControlPointService } from \"spinal-env-viewer-plugin-control-endpoint-service\";\nconst {\n  spinalPanelManagerService,\n} = require(\"spinal-env-viewer-panel-manager-service\");\n\nexport default {\n  name: \"selectControlPoint\",\n  props: [\"onFinised\"],\n  data() {\n    return {\n      showDialog: true,\n      controlPoints: [],\n      controlPointSelected: undefined,\n    };\n  },\n  methods: {\n    async opened({ selectedNode, context, graph }) {\n      this.controlPoints = await this.getControlEndpoints(\n        selectedNode.id.get()\n      );\n    },\n\n    async getControlEndpoints(nodeId) {\n      const controlPoints =\n        await spinalControlPointService.getControlEndpointLinkedToGroupItem(\n          nodeId\n        );\n\n      return this.formatControlEndpoints(controlPoints);\n    },\n\n    formatControlEndpoints(controlPoints) {\n      const format = controlPoints.map((profil) => {\n        return profil.endpoints.map((endpoint) => {\n          endpoint.name = `${profil.name}/${endpoint.name}`;\n          return endpoint;\n        });\n      });\n\n      return format.flat();\n    },\n\n    async removed(option) {\n      if (option.closeResult) {\n        spinalPanelManagerService.openPanel(\"LinkProfilDialog\", {\n          nodeId: this.controlPointSelected,\n        });\n      }\n      this.showDialog = false;\n    },\n\n    closeDialog(closeResult) {\n      if (typeof this.onFinised === \"function\") {\n        this.onFinised({ closeResult, inputValue: this.inputValue });\n      }\n    },\n  },\n};\n</script>","/*\n * Copyright 2018 SpinalCom - www.spinalcom.com\n *\n * This file is part of SpinalCore.\n *\n * Please read all of the following terms and conditions\n * of the Free Software license Agreement (\"Agreement\")\n * carefully.\n *\n * This Agreement is a legally binding contract between\n * the Licensee (as defined below) and SpinalCom that\n * sets forth the terms and conditions that govern your\n * use of the Program. By installing and/or using the\n * Program, you agree to abide by all the terms and\n * conditions stated or referenced herein.\n *\n * If you do not agree to abide by these terms and\n * conditions, do not demonstrate your acceptance and do\n * not install or use the Program.\n * You should have received a copy of the license along\n * with this file. If not, see\n * <http://resources.spinalcom.com/licenses.pdf>.\n */\n\nconst G_root = typeof window == \"undefined\" ? global : window;\nconst SpinalPanelManagerService = require(\"./SpinalPanelManagerService\");\nconst SpinalPanelApp = require(\"./SpinalPanelApp\");\n\nif (typeof G_root.spinal === \"undefined\") G_root.spinal = {};\nif (typeof G_root.spinal.spinalPanelManagerService === \"undefined\")\n  G_root.spinal.spinalPanelManagerService = new SpinalPanelManagerService();\nconst SpinalMountExtention = require(\"./SpinalMountExtention.js\")(\n  G_root.spinal.spinalPanelManagerService,\n  SpinalPanelApp\n);\n\nmodule.exports = {\n  spinalPanelManagerService: G_root.spinal.spinalPanelManagerService,\n  SpinalPanelApp,\n  SpinalMountExtention,\n  install(Vue) {\n    Vue.prototype.$spinalPanelManagerService =\n      G_root.spinal.spinalPanelManagerService;\n  }\n};\n","/*\n * Copyright 2018 SpinalCom - www.spinalcom.com\n *\n * This file is part of SpinalCore.\n *\n * Please read all of the following terms and conditions\n * of the Free Software license Agreement (\"Agreement\")\n * carefully.\n *\n * This Agreement is a legally binding contract between\n * the Licensee (as defined below) and SpinalCom that\n * sets forth the terms and conditions that govern your\n * use of the Program. By installing and/or using the\n * Program, you agree to abide by all the terms and\n * conditions stated or referenced herein.\n *\n * If you do not agree to abide by these terms and\n * conditions, do not demonstrate your acceptance and do\n * not install or use the Program.\n * You should have received a copy of the license along\n * with this file. If not, see\n * <http://resources.spinalcom.com/licenses.pdf>.\n */\n\n/**\n *  Containter like service to register and get applications relative to a hookname\n *\n * @property {object} panels key = panelName, value = an instance of SpinalPanelApp\n * @class SpinalPanelManagerService\n */\nclass SpinalPanelManagerService {\n  /**\n   *Creates an instance of SpinalPanelManagerService.\n   * @memberof SpinalPanelManagerService\n   */\n  constructor() {\n    this.panels = {};\n  }\n\n  /**\n   * method to register an Panel Application\n   *\n   * @param {string} panelName the name of the panel\n   * @param {SpinalPanelApp} spinalPanelApp the application\n   * @memberof SpinalPanelManagerService\n   */\n  registerPanel(panelName, spinalPanelApp) {\n    this.panels[panelName] = spinalPanelApp;\n  }\n\n  /**\n   *\n   *\n   * @param {*} panelName\n   * @param {*} option\n   * @returns {bool}\n   * @memberof SpinalPanelManagerService\n   */\n  openPanel(panelName, option) {\n    if (typeof this.panels[panelName] !== \"undefined\")\n      return this.panels[panelName].openPanel(option);\n    return false;\n  }\n  /**\n   *\n   *\n   * @param {*} panelName\n   * @param {*} option\n   * @returns {bool}\n   * @memberof SpinalPanelManagerService\n   */\n  closePanel(panelName, option) {\n    if (typeof this.panels[panelName] !== \"undefined\")\n      return this.panels[panelName].closePanel(option);\n    return false;\n  }\n  /**\n   *\n   *\n   * @param {*} panelName\n   * @param {*} option\n   * @returns {bool}\n   * @memberof SpinalPanelManagerService\n   */\n  tooglePanel(panelName, option) {\n    if (typeof this.panels[panelName] !== \"undefined\")\n      return this.panels[panelName].tooglePanel(option);\n    return false;\n  }\n}\n\nmodule.exports = SpinalPanelManagerService;\n","/*\n * Copyright 2018 SpinalCom - www.spinalcom.com\n *\n * This file is part of SpinalCore.\n *\n * Please read all of the following terms and conditions\n * of the Free Software license Agreement (\"Agreement\")\n * carefully.\n *\n * This Agreement is a legally binding contract between\n * the Licensee (as defined below) and SpinalCom that\n * sets forth the terms and conditions that govern your\n * use of the Program. By installing and/or using the\n * Program, you agree to abide by all the terms and\n * conditions stated or referenced herein.\n *\n * If you do not agree to abide by these terms and\n * conditions, do not demonstrate your acceptance and do\n * not install or use the Program.\n * You should have received a copy of the license along\n * with this file. If not, see\n * <http://resources.spinalcom.com/licenses.pdf>.\n */\n\n/**\n * Base interface like class of a panel\n *\n * @class SpinalPanelApp\n */\nclass SpinalPanelApp {\n  constructor() {}\n\n  openPanel(option) {}\n  closePanel(option) {}\n  tooglePanel(option) {}\n}\n\nmodule.exports = SpinalPanelApp;\n","/*\n * Copyright 2018 SpinalCom - www.spinalcom.com\n *\n * This file is part of SpinalCore.\n *\n * Please read all of the following terms and conditions\n * of the Free Software license Agreement (\"Agreement\")\n * carefully.\n *\n * This Agreement is a legally binding contract between\n * the Licensee (as defined below) and SpinalCom that\n * sets forth the terms and conditions that govern your\n * use of the Program. By installing and/or using the\n * Program, you agree to abide by all the terms and\n * conditions stated or referenced herein.\n *\n * If you do not agree to abide by these terms and\n * conditions, do not demonstrate your acceptance and do\n * not install or use the Program.\n * You should have received a copy of the license along\n * with this file. If not, see\n * <http://resources.spinalcom.com/licenses.pdf>.\n */\n\nfunction configInit(option) {\n  const cfg = {};\n  if (!option.vueMountComponent) {\n    throw new Error(\"mount : missing option vueMountComponent\");\n  }\n\n  cfg.name = option.name || \"SpinalMount\";\n  cfg.vueMountComponent = option.vueMountComponent;\n  cfg.parentContainer = option.parentContainer || document.body;\n  return cfg;\n}\n\nfunction getDialog() {\n  if (!this.dialog) {\n    this.dialog = document.createElement(\"div\");\n    const _compo = document.createElement(\"div\");\n    this.dialog.className = \"spinal-modal-container\";\n    this.cfg.parentContainer.appendChild(this.dialog);\n    this.dialog.appendChild(_compo);\n    this.compoment = new this.cfg.vueMountComponent({\n      propsData: {\n        onFinised: this.onFinised.bind(this)\n      }\n    }).$mount(_compo);\n  }\n  return this.dialog;\n}\n\n/**\n *\n * @param {*} spinalPanelManagerService\n * @param {*} SpinalPanelApp\n * @returns {object} { mount }\n */\nmodule.exports = function(spinalPanelManagerService, SpinalPanelApp) {\n  return {\n    /**\n```js\n{\n  name: \"myCustomDialogName\",\n  vueMountComponent: Vue.extend(aVueCompomentDialog),\n  parentContainer: document.body\n}```\n     *\n     * @param {*} option\n     */\n    mount(option) {\n      let cfg = configInit(option);\n      const SpinalMount = class extends SpinalPanelApp {\n        constructor() {\n          super();\n          this.cfg = cfg;\n          this.dialog = null;\n          this.compoment = null;\n        }\n\n        openPanel(opt) {\n          getDialog.call(this);\n          this.compoment.opened(opt);\n        }\n        closePanel(opt) {\n          if (this.dialog !== null) {\n            this.compoment.removed(opt);\n            this.dialog.remove();\n            this.dialog = null;\n            this.compoment = null;\n          }\n        }\n\n        tooglePanel(opt) {\n          if (this.dialog !== null) {\n            this.closePanel(opt);\n          } else {\n            this.openPanel(opt);\n          }\n        }\n\n        /**\n         * called when dialog closed by the dialog itself\n         */\n        onFinised(closeResult) {\n          this.closePanel(closeResult);\n        }\n      };\n      let SpinalMountInstance = new SpinalMount();\n      spinalPanelManagerService.registerPanel(cfg.name, SpinalMountInstance);\n    }\n  };\n};\n","const {\n    SpinalContextApp\n  } = require(\"spinal-env-viewer-context-menu-service\");\n  const {\n    spinalPanelManagerService\n  } = require(\"spinal-env-viewer-panel-manager-service\");\nconst { SpinalBmsDevice } = require(\"spinal-model-bmsnetwork\");\n  \n  class UploadExcelFile extends SpinalContextApp {\n    constructor() {\n      super(\"Upload Excel file\",\n        \"This button upload an excel file\", {\n          icon: \"file_upload\",\n          icon_type: \"in\",\n          backgroundColor: \"#FF0000\",\n          fontColor: \"#FFFFFF\"\n        });\n    }\n  \n    isShown(option) {\n        const selectedNodeType = option.selectedNode.type.get();\n        if(selectedNodeType === \"uploadFileContext\") return Promise.resolve(true);\n        return Promise.resolve(-1);\n    }\n  \n    action(option) {\n      \n          spinalPanelManagerService.openPanel('UploadExcelDialog', option);\n      \n    }\n  }\n  \n  module.exports = UploadExcelFile;","const {\n    SpinalContextApp\n  } = require(\"spinal-env-viewer-context-menu-service\");\n  const {\n    spinalPanelManagerService\n  } = require(\"spinal-env-viewer-panel-manager-service\");\nconst { SpinalBmsDevice } = require(\"spinal-model-bmsnetwork\");\n  \nclass ContextUpload extends SpinalContextApp {\n    constructor() {\n      super(\"Create upload context\",\n        \"This button create a context to upload\", {\n          icon: \"navigation\",\n          icon_type: \"in\",\n          backgroundColor: \"#FF0000\",\n          fontColor: \"#FFFFFF\"\n        });\n    }\n  \n    isShown(option) {\n        /* const selectedNodeType = option.selectedNode.type.get();\n        if(selectedNodeType === SpinalBmsDevice.nodeTypeName) return Promise.resolve(true);\n        return Promise.resolve(-1);  */\n        return Promise.resolve(true);\n    }\n  \n    action(option) {\n      \n          spinalPanelManagerService.openPanel('ContextUploadDialog', option);\n      \n    }\n}\n  \n  module.exports = ContextUpload;","const { SpinalContextApp } = require(\"spinal-env-viewer-context-menu-service\");\n\nconst {\n  spinalPanelManagerService,\n} = require(\"spinal-env-viewer-panel-manager-service\");\n\nimport { groupManagerService } from \"spinal-env-viewer-plugin-group-manager-service\";\nimport { GEOGRAPHIC_TYPES_ORDER } from \"spinal-env-viewer-context-geographic-service/build/constants\";\n\nclass LinkEndpointToProfil extends SpinalContextApp {\n  constructor() {\n    super(\n      \"Link an endpoint to a profil\",\n      \"This button link an endpoint to a profil\",\n      {\n        icon: \"share\",\n        icon_type: \"in\",\n        backgroundColor: \"#FF0000\",\n        fontColor: \"#FFFFFF\",\n      }\n    );\n  }\n\n  isShown(option) {\n    const contextType = option.context.type.get();\n\n    const isGroupContext = groupManagerService.isContext(contextType);\n\n    if (!isGroupContext) return Promise.resolve(-1);\n\n    const type = option.selectedNode.type.get();\n\n    return Promise.resolve(GEOGRAPHIC_TYPES_ORDER.indexOf(type));\n    // if(GEOGRAPHIC_TYPES_ORDER.indexOf(type) !== -1) {\n    //   const isCategory = groupManagerService.isCategory(type);\n    // const isGroup = groupManagerService.isGroup(type);\n    // const isContext = type === contextType;\n\n    // }\n\n    // if (isCategory || isGroup || isContext) {\n    //   const type = getGroupType(contextType);\n    //   return Promise.resolve(GEOGRAPHIC_TYPES_ORDER.indexOf(type));\n    // }\n\n    // return Promise.resolve(-1);\n  }\n\n  action(option) {\n    spinalPanelManagerService.openPanel(\"selectControlEndpoint\", option);\n    // spinalPanelManagerService.openPanel(\"LinkProfilDialog\", option);\n  }\n}\n\nmodule.exports = LinkEndpointToProfil;\n"],"names":[],"version":3,"file":"spinal-env-viewer-plugin-upload.569cee3c.js.map"}