{"mappings":"A;;;;A;;;;;A;;;;;;;;;A;;;;;;;;A;;;;A;;;;;;A;;;;A;;;;;A;;;;;;;;A;;;;;;;A;;;;;A;;;;;;A;;;;;A;;;;A;;;;A;;;;;A;;;;;A;;;;;;A;;;;;;A;;;;;;;;;A;;;;;A;;;;A;;;;;;A;;;;A;;;;A;;;;A;;;;A;;;;;;;;A;;;;;;;;;;;;;;;;;A;;;;A;;;;;;;A;;;;;;A;;;;;;;;A;;;;A;;;;;A;;;;;A;;;;;;;;;;;A;;;;A;;;;A;;;;A;;;;;;;A;;;;;;;;A;;;;;A;;;;A;;;;A;;;;;A;;;;;A;;;;;A;;;;;;;;;;A;;;;;;;;;A;;;;;;;;;;;A;;;;A;;;;A;;;;;A;;;;;A;;;;;A;;;;A;;;;A;;;;A;;;;;;A;;;;;;;;A;;;;A;;;;A;;;;;;;;A;;;;A;;;;;A;;;;;;A;;;;A;;;;A;;;;A;;;;;;A;;;;;;;;A;;;;A;;;;;;;;A;;;;A;;;;;A;;;;;A;;;;;A;;;;A;;;;A;;;;A;;;;;;A;;;;;;;;A;;;;A;;;;;;;;A;;;;A;;;;;A;;;;;A;;;;;A;;;;A;;;;;A;;;;;A;;;;;;;A;;;;;A;;;;A;;;;;;A;;;;A;;;;A;;;;;;A;;;;;;;;;A;;;;;;;;A;;;;;;A;;;;;;A;;;;A;;;;;;A;;;;A;;;;A;;;;AQqmBA;;;;;;;;;AAWA;;;;AAGA;;;;A;;;;AAuBA;;;;;AAIA;;;;AAIA;;;;;AAIA;;;;AAGA;;;;;;;;;;;AAcA;;;;;;;;AAOA;;;;AAGA;;;;AAKA;;;;AAMA;;;;AAGA;;;;;;;AAaA;;;;AAIA;;;;AAQA;;;;AAKA;EACA;;;;EAGA;;;;EAKA;;;;EAQA;;;;EAKA;;;;;AASA;EACA;;;;EAKA;;;;EAQA;;;;EAIA;;;;;AAOA;;;;;AAIA;;;;;;;;AASA;;;;;;;;;;;;;AAcA;;;;;AAIA;;;;;;;;;;;AAgBA;;;;AAGA;;;;;AAMA;;;;;;AAKA;;;;AAIA;;;;;;;;;AAYA;;;;;;;AAMA;;;;;;;;;AAQA;;;;AAGA;;;;AAGA;;;;;;;;AAQA;;;;AAGA;;;;;AAMA;;;;AAKA;;;;;;;;;;AAeA;;;;;;;;AASA;;;;;;;;;;AAaA;;;;;;;;;;;AAsBA;EACA;;;;EAGA;;;;;;AAKA;EACA;;;;;AAIA;;;;;;;;;;;AAgBA;;;;AAGA;;;;AAGA;;;;;AAMA;;;;AAGA;;;;;;;;;;AASA;;;;;AAIA;;;;AAGA;;;;;;AAOA;;;;AAGA;;;;;AAKA;EACA;;;;;AAIA;;;;;;;;;;;;;AAcA;;;;;AAQA;;;;AAGA;;;;;;;;;;;;;;;;;;;AA6BA;;;;;AAMA;;;;;AAIA;;;;;;;;AAOA;;;;;AAKA;;;;;AAKA;;;;AAGA;;;;;;;;AAOA;;;;;AAMA;;;;;;;;;;;;;AAaA;;;;;;AAMA;;;;;;;;;;AAgBA;;;;AAIA;;;;AAKA;;;;AAGA;;;;AAKA;;;;AAGA;;;;AAGA;;;;AAMA;;;;;AASA;;;;;;;;AAUA;;;;AAGA;;;;;AAKA;;;;;AAIA;;;;AAGA;;;;AAGA;;;;;AAIA;;;;;AAMA;;;;;;;AAMA;;;;AAOA;;;;;;;;;AAgBA;;;;AAGA;;;;;;;;;;;;;;AAcA;;;;;AAMA;;;;;AAIA;;;;AAIA;;;;;;;AAMA;;;;AAGA;;;;;;;;;;;AAUA;;;;;;;;;AAQA;;;;;AAKA;;;;;AAOA;;;;AAGA;;;;AAGA;;;;AAIA;;;;;;AAKA;;;;;;;;;AAQA;;;;AAGA;;;;;AASA;;;;AAMA;;;;AAMA;;;;AAGA;;;;AAIA;;;;AAGA;;;;AAGA;;;;;AAIA;;;;AAIA;;;;;;;;;AAiBA;;;;AAKA;;;;;AAIA;;;;;;AAMA;;;;;;;;;;;;;;AAsBA;;;;;;AAKA;;;;AAGA;;;;;;;;;;AASA;;;;;;AASA;;;;;AAKA;;;;;;;AAWA;;;;;;;;AAUA;;;;AAGA;;;;;;AAMA;;;;;AAIA;;;;;AAKA;;;;AAIA;;;;AAIA;;;;;;;AAMA;;;;;;;;AAOA;;;;AAGA;;;;AAGA;;;;AAGA;;;;;AAMA;;;;AAOA;;;;;AAMA;;;;;AAMA;;;;;AAKA;;;;;;AAMA;;;;;AASA;;;;;AAKA;;;;AAGA;;;;AAIA;;;;AAGA;;;;AAGA;;;;AAIA;;;;AAKA;;;;;AAKA;;;;AAGA;;;;AAIA;;;;AAGA;;;;AAGA;;;;AAIA;;;;AAKA;;;;AAGA;;;;;AAKA;;;;AAGA;;;;;;;;;AAUA;;;;;AAIA;;;;AAGA;;;;AAGA;;;;AAGA;;;;AAGA;;;;AAIA;;;;;AAMA;;;;AAKA;;;;AAKA;;;;AAKA;;;;AAIA;;;;;AAMA;;;;AAKA;;;;AAKA;;;;AAKA;;;;AAGA;;;;;;AAKA;;;;AAGA;;;;AAGA;;;;;AAKA;;;;;;;;AAUA;;;;;;AAOA;;;;;AAMA;;;;AAGA;;;;AAGA;;;;;AAMA;;;;;;;;A;;;;;;;A;;;;;;;A;;;;;;;A;;;;;;;;A;;;;;A;;;;;;;;;A;;;;;;;A;;;;A;;;;;;;A;;;;;;;;A;;;;;;;A;;;;;;A","sources":["node_modules/spinal-env-viewer-plugin-task/src/vue/dialogs/createContext.vue","node_modules/spinal-env-viewer-plugin-task/src/vue/components/linkerTemplate.vue","node_modules/spinal-env-viewer-plugin-task/src/vue/components/selectTaskGroup.vue","node_modules/spinal-env-viewer-plugin-task/src/vue/components/taskForm.vue","node_modules/spinal-env-viewer-plugin-task/src/vue/dialogs/createTask.vue","node_modules/spinal-env-viewer-plugin-task/src/vue/dialogs/editTask.vue","node_modules/spinal-env-viewer-plugin-task/src/vue/dialogs/confirm-dialog.vue","node_modules/spinal-env-viewer-plugin-task/src/vue/dialogs/delete-all.vue","node_modules/spinal-env-viewer-plugin-task/src/vue/panels/taskPanel.vue","node_modules/spinal-env-viewer-plugin-task/src/vue/components/tasksCalendar.vue","node_modules/spinal-env-viewer-plugin-task/src/vue/panels/seeEventDetail.vue"],"sourcesContent":["<!--\nCopyright 2020 SpinalCom - www.spinalcom.com\n\nThis file is part of SpinalCore.\n\nPlease read all of the following terms and conditions\nof the Free Software license Agreement (\"Agreement\")\ncarefully.\n\nThis Agreement is a legally binding contract between\nthe Licensee (as defined below) and SpinalCom that\nsets forth the terms and conditions that govern your\nuse of the Program. By installing and/or using the\nProgram, you agree to abide by all the terms and\nconditions stated or referenced herein.\n\nIf you do not agree to abide by these terms and\nconditions, do not demonstrate your acceptance and do\nnot install or use the Program.\nYou should have received a copy of the license along\nwith this file. If not, see\n<http://resources.spinalcom.com/licenses.pdf>.\n-->\n\n\n<template>\n  <md-dialog :md-active.sync=\"showDialog\"\n             @md-closed=\"closeDialog(false)\">\n    <md-dialog-title class=\"_dialogTitle\">Create Event Context</md-dialog-title>\n\n    <md-dialog-content>\n      <md-field>\n        <label>Context name</label>\n        <md-input v-model=\"name\"></md-input>\n      </md-field>\n    </md-dialog-content>\n\n    <md-dialog-actions>\n      <md-button class=\"md-primary\"\n                 @click=\"closeDialog(false)\">Cancel</md-button>\n      <md-button class=\"md-primary\"\n                 @click=\"closeDialog(true)\"\n                 :disabled=\"disabled()\">OK</md-button>\n    </md-dialog-actions>\n  </md-dialog>\n</template>\n\n<script>\nimport { SpinalEventService } from \"spinal-env-viewer-task-service\";\n\nexport default {\n  name: \"createTaskContextDialog\",\n  props: [\"onFinised\"],\n  data() {\n    return {\n      name: \"\",\n      showDialog: true,\n      callback: undefined,\n    };\n  },\n  mounted() {},\n  methods: {\n    opened(option) {\n      if (option.callback) {\n        this.callback = option.callback;\n      }\n    },\n\n    async removed(option) {\n      if (option) {\n        SpinalEventService.createEventContext(this.name.trim(), []).then(\n          (el) => {\n            if (this.callback && typeof this.callback === \"function\") {\n              this.callback(el.get());\n            }\n          }\n        );\n      }\n\n      this.showDialog = false;\n    },\n\n    closeDialog(closeResult) {\n      if (typeof this.onFinised === \"function\") {\n        this.onFinised(closeResult);\n      }\n    },\n    disabled() {\n      return !(this.name && this.name.trim().length > 0);\n    },\n  },\n};\n</script>\n\n<style scoped>\n._dialogTitle {\n  text-align: center;\n}\n</style>","<!--\nCopyright 2020 SpinalCom - www.spinalcom.com\nThis file is part of SpinalCore.\nPlease read all of the following terms and conditions\nof the Free Software license Agreement (\"Agreement\")\ncarefully.\nThis Agreement is a legally binding contract between\nthe Licensee (as defined below) and SpinalCom that\nsets forth the terms and conditions that govern your\nuse of the Program. By installing and/or using the\nProgram, you agree to abide by all the terms and\nconditions stated or referenced herein.\nIf you do not agree to abide by these terms and\nconditions, do not demonstrate your acceptance and do\nnot install or use the Program.\nYou should have received a copy of the license along\nwith this file. If not, see\n<http://resources.spinalcom.com/licenses.pdf>.\n-->\n\n\n<template>\n   <div class=\"subContent\">\n      <md-list class=\"title\">\n\n         <md-list-item>\n            <span class=\"md-list-item-text\">{{title}}</span>\n            <md-button\n               class=\"md-icon-button\"\n               @click=\"createEvent\"\n               :disabled=\"!(showBtn)\"\n            >\n               <md-icon>control_point</md-icon>\n            </md-button>\n         </md-list-item>\n\n      </md-list>\n\n      <md-content class=\"container md-scrollbar\">\n         <md-list>\n            <md-list-item\n               class=\"list-item\"\n               v-for=\"(item,index) in data\"\n               :key=\"index\"\n               @click=\"selectItem(item.id)\"\n               :class=\"{'selected' : item.id === itemSelected}\"\n            >\n\n               <md-list-item-text class=\"text\">{{item.name}}</md-list-item-text>\n\n            </md-list-item>\n         </md-list>\n      </md-content>\n\n   </div>\n</template>\n\n<script>\nexport default {\n   name: \"linkToGroupTemplate\",\n   props: [\"data\", \"title\", \"itemSelected\", \"showBtn\", \"subTitle\"],\n   methods: {\n      createEvent() {\n         this.$emit(\"create\");\n      },\n      selectItem(id) {\n         this.$emit(\"select\", id);\n      },\n   },\n};\n</script>\n\n<style scoped>\n.subContent {\n   width: 100%;\n   height: 100%;\n}\n.subContent .title {\n   width: 100%;\n   /* height: 10%; */\n   /* text-align: center; */\n   display: flex;\n   justify-content: space-between;\n   align-items: center;\n   padding: 0 15px 0 15px;\n   border-bottom: 1px dashed grey;\n}\n.subContent .container {\n   width: 100%;\n   height: calc(100% - 50px);\n   padding: 0px !important;\n   /* border: 1px solid red; */\n   overflow: hidden;\n   overflow-y: auto;\n}\n.subContent .container .list-item {\n   border-bottom: 1px solid grey;\n}\n\n.subContent .container .list-item .text {\n   width: 100%;\n   overflow: hidden;\n   text-overflow: ellipsis;\n}\n\n.subContent .container .list-item.selected {\n   background-color: #448aff;\n}\n</style>","<!--\nCopyright 2020 SpinalCom - www.spinalcom.com\n\nThis file is part of SpinalCore.\n\nPlease read all of the following terms and conditions\nof the Free Software license Agreement (\"Agreement\")\ncarefully.\n\nThis Agreement is a legally binding contract between\nthe Licensee (as defined below) and SpinalCom that\nsets forth the terms and conditions that govern your\nuse of the Program. By installing and/or using the\nProgram, you agree to abide by all the terms and\nconditions stated or referenced herein.\n\nIf you do not agree to abide by these terms and\nconditions, do not demonstrate your acceptance and do\nnot install or use the Program.\nYou should have received a copy of the license along\nwith this file. If not, see\n<http://resources.spinalcom.com/licenses.pdf>.\n-->\n\n\n<template>\n   <div class=\"select_container\">\n      <!-- <div class=\"dialogTitle\">Select Ticket Process</div> -->\n      <div class=\"content\">\n         <div class=\"section\">\n            <link-template\n               :title=\"'Contexts'\"\n               :data=\"data\"\n               :itemSelected=\"contextId\"\n               @create=\"createContext\"\n               @select=\"selectContext\"\n               :showBtn=\"true\"\n            ></link-template>\n         </div>\n\n         <div class=\"section\">\n            <link-template\n               :title=\"'Categories'\"\n               :data=\"categories\"\n               :itemSelected=\"categoryId\"\n               @create=\"createCategory\"\n               @select=\"selectCategory\"\n               :showBtn=\"contextId && contextId.length > 0\"\n            >\n            </link-template>\n\n         </div>\n\n         <div class=\"section\">\n            <link-template\n               :title=\"'Groups'\"\n               :data=\"groups\"\n               :itemSelected=\"groupId\"\n               @select=\"selectGroup\"\n               @create=\"createGroup\"\n               :showBtn=\"showCreatBtn()\"\n            ></link-template>\n\n         </div>\n      </div>\n\n   </div>\n</template>\n\n<script>\nimport { SpinalEventService } from \"spinal-env-viewer-task-service\";\nimport linkerTemplateVue from \"./linkerTemplate.vue\";\nimport { spinalPanelManagerService } from \"spinal-env-viewer-panel-manager-service\";\nimport { SpinalGraphService } from \"spinal-env-viewer-graph-service\";\n\nexport default {\n   name: \"selectCategory\",\n   props: {\n      contextIdSelected: {},\n      categoryIdSelected: {},\n      groupIdSelected: {},\n   },\n   data() {\n      return {\n         data: [],\n         contextId: \"\",\n         categories: [],\n         categoryId: \"\",\n         groups: [],\n         groupId: \"\",\n      };\n   },\n   components: {\n      \"link-template\": linkerTemplateVue,\n   },\n   async mounted() {\n      this.data = await this.getAllData();\n      // if (this.contextIdSelected && this.contextIdSelected.trim().length > 0) {\n      //   this.selectContext(this.contextIdSelected);\n      // }\n      // if (this.categoryIdSelected && this.categoryIdSelected.trim().length > 0) {\n      //   this.selectCategory(this.categoryIdSelected);\n      // }\n      // if (this.groupIdSelected && this.groupIdSelected.trim().length > 0) {\n      //   this.selectGroup(this.groupIdSelected);\n      // }\n   },\n   methods: {\n      showCreatBtn() {\n         return (\n            this.contextId &&\n            this.contextId.length > 0 &&\n            this.categoryId &&\n            this.categoryId.length > 0\n         );\n      },\n\n      selectContext(id) {\n         this.contextId = id;\n         this.$emit(\"selectContext\", id);\n      },\n\n      selectCategory(id) {\n         this.categoryId = id;\n         this.$emit(\"selectCategory\", id);\n      },\n\n      selectGroup(id) {\n         this.groupId = id;\n         this.$emit(\"selectGroup\", id);\n      },\n\n      createContext() {\n         spinalPanelManagerService.openPanel(\"createTaskContextDialog\", {\n            callback: (info) => {\n               console.log(\"info\", info);\n               info.categories = [];\n               this.data = [...this.data, info];\n               this.selectContext(info.id);\n            },\n         });\n         // this.$emit(\"createContext\");\n      },\n\n      createCategory() {\n         spinalPanelManagerService.openPanel(\"createCategoryDialog\", {\n            title: \"add Category\",\n            contextId: this.contextId,\n            selectedNode: SpinalGraphService.getInfo(this.contextId),\n            callback: (id) => {\n               const info = SpinalGraphService.getInfo(id).get();\n               info.groups = [];\n               const contextFound = this.data.find(\n                  (el) => el.id == this.contextId\n               );\n\n               if (contextFound) {\n                  contextFound.categories.push(info);\n                  this.categories = contextFound.categories;\n                  this.selectCategory(id);\n               }\n            },\n         });\n         // this.$emit(\"createCategory\");\n      },\n\n      createGroup() {\n         spinalPanelManagerService.openPanel(\"createGroupDialog\", {\n            title: \"add Group\",\n            contextId: this.contextId,\n            selectedNode: SpinalGraphService.getInfo(this.categoryId),\n            callback: (id) => {\n               const info = SpinalGraphService.getInfo(id).get();\n\n               const contextFound = this.data.find(\n                  (el) => el.id == this.contextId\n               );\n\n               if (contextFound) {\n                  const categoryFound = contextFound.categories.find(\n                     (el) => el.id == this.categoryId\n                  );\n                  if (categoryFound) {\n                     categoryFound.groups.push(info);\n                     this.groups = categoryFound.groups;\n                     this.selectGroup(id);\n                  }\n                  // contextFound.categories.push(info);\n                  // this.categories = contextFound.categories;\n                  // this.selectCategory(id);\n               }\n            },\n         });\n         // this.$emit(\"createGroup\");\n      },\n\n      async getAllData() {\n         let contexts = await SpinalEventService.getEventContexts();\n\n         let promises = contexts.map(async (el) => {\n            const context = el.get();\n            context.categories = await this.getCategories(context.id);\n            return context;\n         });\n\n         return Promise.all(promises);\n      },\n\n      async getCategories(contextId) {\n         const categories = await SpinalEventService.getEventsCategories(\n            contextId\n         );\n         const groupsPromises = categories.map(async (el) => {\n            const category = el.get();\n            category.groups = await this.getGroups(category.id);\n            return category;\n         });\n         return Promise.all(groupsPromises);\n      },\n\n      getGroups(nodeId) {\n         return SpinalEventService.getEventsGroups(nodeId).then((groups) => {\n            return groups.map((el) => el.get());\n         });\n      },\n\n      updateCategories() {\n         // this.categorySelected = undefined;\n         this.categories = [];\n         if (this.contextId) {\n            let val = this.data.find((el) => el.id === this.contextId);\n            if (val) this.categories = val.categories;\n         }\n      },\n\n      updateGroups() {\n         this.groups = [];\n         if (this.contextId && this.categoryId) {\n            let context = this.data.find((el) => el.id === this.contextId);\n            if (context) {\n               let category = context.categories.find(\n                  (el) => el.id == this.categoryId\n               );\n               if (category) this.groups = category.groups;\n            }\n         }\n      },\n   },\n   watch: {\n      contextId() {\n         this.categoryId = undefined;\n         this.groupId = undefined;\n         this.updateCategories();\n         // this.updateProcesses();\n      },\n\n      categoryId() {\n         this.groupId = undefined;\n         this.updateGroups();\n      },\n   },\n};\n</script>\n\n<style scoped>\n.select_container {\n   width: 100%;\n   height: 100%;\n}\n/* .select_container .dialogTitle {\n  height: 50px;\n  text-align: center;\n} */\n.select_container .content {\n   width: 100%;\n   height: 100%;\n   display: flex;\n   justify-content: space-between;\n   align-items: stretch;\n}\n.select_container .content .section {\n   width: 33%;\n   border: 1px solid grey;\n   border-radius: 4% 4% 0 0;\n   padding: 15px;\n}\n</style>\n\n","<!--\nCopyright 2020 SpinalCom - www.spinalcom.com\n\nThis file is part of SpinalCore.\n\nPlease read all of the following terms and conditions\nof the Free Software license Agreement (\"Agreement\")\ncarefully.\n\nThis Agreement is a legally binding contract between\nthe Licensee (as defined below) and SpinalCom that\nsets forth the terms and conditions that govern your\nuse of the Program. By installing and/or using the\nProgram, you agree to abide by all the terms and\nconditions stated or referenced herein.\n\nIf you do not agree to abide by these terms and\nconditions, do not demonstrate your acceptance and do\nnot install or use the Program.\nYou should have received a copy of the license along\nwith this file. If not, see\n<http://resources.spinalcom.com/licenses.pdf>.\n-->\n\n<template>\n  <div class=\"taskForm\">\n    <md-toolbar md-elevation=\"0\"\n                class=\"toolbarHeader\">\n      <md-button class=\"md-dense md-primary\"\n                 @click=\"goBack\">\n        <md-icon>keyboard_backspace</md-icon>\n        BACK\n      </md-button>\n    </md-toolbar>\n\n    <div class=\"container\">\n      <md-field>\n        <label>Name</label>\n        <md-input @blur=\"setName\"></md-input>\n      </md-field>\n    </div>\n  </div>\n</template>\n\n\n<script>\nexport default {\n  name: \"taskForm\",\n  data() {\n    return {};\n  },\n  methods: {\n    goBack() {\n      this.$emit(\"back\");\n    },\n  },\n};\n</script>\n\n<style scoped>\n.taskForm {\n  width: 100%;\n  height: 100%;\n}\n\n.taskForm .toolbarHeader {\n  min-height: unset;\n  height: 50px;\n  background-color: transparent;\n}\n\n.taskForm .container {\n  width: 100%;\n  height: calc(100% - 50px);\n}\n</style>","<!--\nCopyright 2020 SpinalCom - www.spinalcom.com\n\nThis file is part of SpinalCore.\n\nPlease read all of the following terms and conditions\nof the Free Software license Agreement (\"Agreement\")\ncarefully.\n\nThis Agreement is a legally binding contract between\nthe Licensee (as defined below) and SpinalCom that\nsets forth the terms and conditions that govern your\nuse of the Program. By installing and/or using the\nProgram, you agree to abide by all the terms and\nconditions stated or referenced herein.\n\nIf you do not agree to abide by these terms and\nconditions, do not demonstrate your acceptance and do\nnot install or use the Program.\nYou should have received a copy of the license along\nwith this file. If not, see\n<http://resources.spinalcom.com/licenses.pdf>.\n-->\n\n\n<template>\n   <md-dialog\n      class=\"eventMdDialog\"\n      :md-active.sync=\"showDialog\"\n      @md-closed=\"closeDialog(false)\"\n   >\n      <md-dialog-title class=\"_dialogTitle\">Add Event</md-dialog-title>\n\n      <md-dialog-content\n         class=\"_dialogContainer\"\n         :class=\"{'created' : pageSelected === PAGES.creation}\"\n      >\n         <select-task-group\n            v-if=\"pageSelected === PAGES.selection\"\n            ref=\"select-task-group\"\n            @selectContext=\"selectContext\"\n            @selectCategory=\"selectCategory\"\n            @selectGroup=\"selectGroup\"\n         >\n         </select-task-group>\n\n         <!-- <task-form v-else-if=\"pageSelected === PAGES.creation\"\n                 @back=\"goToBack\"></task-form> -->\n         <div\n            class=\"taskForm\"\n            v-else-if=\"pageSelected === PAGES.creation\"\n         >\n            <md-toolbar\n               md-elevation=\"0\"\n               class=\"toolbarHeader\"\n            >\n               <md-button\n                  class=\"md-dense md-primary\"\n                  @click=\"goToBack\"\n               >\n                  <md-icon>keyboard_backspace</md-icon>\n                  BACK\n               </md-button>\n            </md-toolbar>\n\n            <md-content class=\"container md-scrollbar\">\n               <md-field>\n                  <label>Name</label>\n                  <md-input v-model=\"event.name\"></md-input>\n               </md-field>\n\n               <div class=\"dates\">\n                  <div class=\"begin\">\n                     <datetime\n                        :format=\"'dd/MM/yyyy HH:mm'\"\n                        v-model=\"event.startDate\"\n                        :min-datetime=\"startDateMin\"\n                        :title=\"'Start date'\"\n                        :type=\"'datetime'\"\n                        :input-id=\"'startDate'\"\n                        :input-style=\"beginInputStyle\"\n                        :use12-hour=\"false\"\n                     >\n                        <label\n                           for=\"startDate\"\n                           slot=\"before\"\n                        >Start date</label>\n                     </datetime>\n                  </div>\n\n                  <div class=\"end\">\n                     <datetime\n                        :format=\"'dd/MM/yyyy HH:mm'\"\n                        v-model=\"event.endDate\"\n                        :min-datetime=\"endDateMin\"\n                        :max-datetime=\"endDateMax\"\n                        :title=\"'End date'\"\n                        :type=\"'datetime'\"\n                        :input-id=\"'endDate'\"\n                        :input-style=\"beginInputStyle\"\n                     >\n                        <label\n                           for=\"endDate\"\n                           slot=\"before\"\n                        >End date</label>\n                     </datetime>\n                  </div>\n               </div>\n\n               <div class=\"md-layout md-gutter periodicity\">\n                  <div class=\"md-layout-item md-size-1000 radios\">\n                     <md-radio\n                        v-model=\"event.repeat\"\n                        class=\"md-primary\"\n                        :value=\"false\"\n                     >Repeat Once</md-radio>\n                     <md-radio\n                        v-model=\"event.repeat\"\n                        class=\"md-primary\"\n                        :value=\"true\"\n                     >Repeat every</md-radio>\n                  </div>\n                  <div\n                     class=\"md-layout-item md-size-50 number\"\n                     v-if=\"event.repeat\"\n                  >\n                     <md-field>\n                        <md-input\n                           v-model=\"event.periodicity.count\"\n                           type=\"number\"\n                           placeholder=\"A nice placeholder\"\n                        ></md-input>\n                     </md-field>\n                  </div>\n                  <div\n                     class=\"md-layout-item md-size-50 period\"\n                     v-if=\"event.repeat\"\n                  >\n                     <md-field>\n                        <label for=\"Period\">Period</label>\n                        <md-select\n                           v-model=\"event.periodicity.period\"\n                           name=\"Period\"\n                           id=\"Period\"\n                        >\n                           <!-- <md-option :value=\"undefined\"\n                             selected\n                             disabled>None</md-option> -->\n\n                           <md-option\n                              v-for=\"(period,index) of Object.keys(PERIODS)\"\n                              :key=\"index\"\n                              :value=\"PERIODS[period]\"\n                              selected\n                           >{{period}}</md-option>\n\n                        </md-select>\n                     </md-field>\n                  </div>\n\n                  <div\n                     class=\"repeatEnd md-layout-item md-size-100\"\n                     v-if=\"event.repeat\"\n                  >\n                     <datetime\n                        :format=\"'dd/MM/yyyy'\"\n                        v-model=\"event.repeatEnd\"\n                        :min-datetime=\"repeatEndMin\"\n                        :title=\"'repeat until'\"\n                        :type=\"'date'\"\n                        :input-id=\"'endDate'\"\n                        :input-style=\"beginInputStyle\"\n                     >\n                        <label\n                           for=\"endDate\"\n                           slot=\"before\"\n                        >repeat until</label>\n                     </datetime>\n                  </div>\n\n               </div>\n\n               <div class=\"description\">\n                  <md-field>\n                     <label>Description</label>\n                     <md-textarea v-model=\"event.description\"></md-textarea>\n                  </md-field>\n               </div>\n\n            </md-content>\n         </div>\n      </md-dialog-content>\n\n      <md-dialog-actions>\n         <md-button\n            class=\"md-primary\"\n            @click=\"closeDialog(false)\"\n         >Cancel</md-button>\n\n         <md-button\n            class=\"md-primary\"\n            v-if=\"pageSelected === PAGES.selection\"\n            :disabled=\"disableNextBtn()\"\n            @click=\"goToNext\"\n         >NEXT</md-button>\n\n         <md-button\n            class=\"md-primary\"\n            v-else-if=\"pageSelected === PAGES.creation\"\n            @click=\"closeDialog(true)\"\n            :disabled=\"disableOkBtn()\"\n         >OK</md-button>\n      </md-dialog-actions>\n   </md-dialog>\n</template>\n\n<script>\nimport { SpinalEventService, Period } from \"spinal-env-viewer-task-service\";\nimport { Datetime } from \"vue-datetime\";\nimport SelectTaskGroup from \"../components/selectTaskGroup.vue\";\nimport TaskForm from \"../components/taskForm.vue\";\nimport moment from \"moment\";\n\nimport EventBus, { EVENT_TYPES } from \"../../js/event\";\n\n// import { SpinalForgeViewer } from \"spinal-env-viewer-plugin-forge\";\n// import \"vue-datetime/dist/vue-datetime.css\";\n\nexport default {\n   name: \"createTaskDialog\",\n   components: {\n      \"select-task-group\": SelectTaskGroup,\n      datetime: Datetime,\n      \"task-form\": TaskForm,\n   },\n   props: [\"onFinised\"],\n   data() {\n      this.PERIODS = Object.freeze(Period);\n\n      this.PAGES = {\n         selection: 0,\n         creation: 1,\n      };\n\n      this.beginInputStyle = {\n         \"border-bottom\": \"1px solid white\",\n         width: \"100%\",\n      };\n\n      return {\n         pageSelected: this.PAGES.selection,\n         // periodicity: { count: 1, period: 86400000 },\n         nodeInfo: undefined,\n         // repeatOnce: true,\n         startDateMin: moment().toISOString(),\n         endDateMin: moment().add(1, \"h\").toISOString(),\n         endDateMax: moment(new Date().setHours(23, 59, 59, 999)).toISOString(),\n         repeatEndMin: null,\n         repeatEndMax: null,\n         event: {\n            contextId: \"\",\n            groupId: \"\",\n            categoryId: \"\",\n            assignedTo: \"\",\n            startDate: moment().toISOString(),\n            endDate: moment().add(1, \"h\").toISOString(),\n            repeatEnd: null,\n            periodicity: { count: 1, period: 86400000 },\n            name: \"\",\n            description: \"\",\n            repeat: false,\n         },\n         showDialog: true,\n      };\n   },\n   mounted() {},\n   methods: {\n      opened(option) {\n         this.nodeInfo = option;\n      },\n\n      async removed(option) {\n         if (option) {\n            const event = Object.assign({}, this.event);\n            if (typeof this.nodeInfo.selectedNode === \"undefined\") {\n               this.nodeInfo.selectedNode = await this.createBIMObject(\n                  this.nodeInfo.dbid,\n                  this.nodeInfo.model3d\n               );\n            }\n\n            const userInfo = window.spinal.spinalSystem.getUser();\n            let nodeId = this.nodeInfo.selectedNode.id.get();\n\n            event.nodeId = nodeId;\n            event.startDate = moment(event.startDate).valueOf();\n            event.endDate = moment(event.endDate).valueOf();\n            // event.periodicity = !this.repeatOnce\n            //   ? this.periodicity.count * this.periodicity.period\n            //   : undefined;\n\n            // if (this.repeatOnce) {\n            await SpinalEventService.createEvent(\n               event.contextId,\n               event.groupId,\n               nodeId,\n               event,\n               userInfo\n            );\n\n            EventBus.$emit(EVENT_TYPES.CREATED);\n\n            // } else {\n            //   const periodicity =\n            //     event.periodicity.count * event.periodicity.period;\n            //   await SpinalEventService.createTaskBetween(\n            //     event.startDate,\n            //     event.endDate,\n            //     periodicity,\n            //     event.contextId,\n            //     event.groupId,\n            //     nodeId,\n            //     event,\n            //     userInfo\n            //   );\n            // }\n         }\n\n         this.showDialog = false;\n      },\n\n      createBIMObject(dbId, model) {\n         return new Promise((resolve, reject) => {\n            model.getBulkProperties(\n               [dbId],\n               { propFilter: [\"name\"] },\n               async (el) => {\n                  const name = el[0].name;\n                  // const node = await SpinalForgeViewer.bimObjectService.createBIMObject(\n                  const node = await window.spinal.BimObjectService.createBIMObject(\n                     dbId,\n                     name,\n                     model\n                  );\n                  resolve(node);\n               }\n            );\n         });\n      },\n\n      selectContext(id) {\n         this.event.contextId = id;\n         this.event.groupId = undefined;\n         this.event.categoryId = undefined;\n      },\n\n      selectCategory(id) {\n         this.event.groupId = undefined;\n         this.event.categoryId = id;\n      },\n\n      selectGroup(id) {\n         this.event.groupId = id;\n      },\n\n      goToNext() {\n         this.pageSelected = this.PAGES.creation;\n      },\n\n      async goToBack() {\n         let reference;\n         this.pageSelected = this.PAGES.selection;\n\n         // while (typeof reference === \"undefined\") {\n         //   reference = this.$refs[\"select-task-group\"];\n         //   console.log(\"reference\", reference);\n         // }\n\n         // await reference.selectContext(this.contextId);\n         // await reference.selectCategory(this.categoryId);\n         // await reference.selectGroup(this.groupId);\n      },\n\n      closeDialog(closeResult) {\n         if (typeof this.onFinised === \"function\") {\n            this.onFinised(closeResult);\n         }\n      },\n\n      disableNextBtn() {\n         return !(\n            this.event.contextId &&\n            this.event.contextId.trim().length > 0 &&\n            this.event.groupId &&\n            this.event.groupId.trim().length > 0 &&\n            this.event.categoryId &&\n            this.event.categoryId.trim().length > 0\n         );\n      },\n\n      disableOkBtn() {\n         const condition =\n            this.event.startDate &&\n            this.event.startDate.toString().trim().length > 0 &&\n            this.event.endDate &&\n            this.event.endDate.toString().trim().length > 0 &&\n            this.event.periodicity &&\n            this.event.periodicity.toString().trim().length > 0 &&\n            this.event.name &&\n            this.event.name.toString().trim().length > 0;\n\n         if (!this.event.repeat) return !condition;\n\n         return !(condition && this.event.periodicity.count >= 1);\n\n         // return !(\n         //   this.event.startDate &&\n         //   this.event.startDate.toString().trim().length > 0 &&\n         //   this.event.endDate &&\n         //   this.event.endDate.toString().trim().length > 0 &&\n         //   this.event.periodicity &&\n         //   this.event.periodicity.toString().trim().length > 0 &&\n         //   this.event.name &&\n         //   this.event.name.toString().trim().length > 0 &&\n         //   this.event.periodicity.count >= 1\n         // );\n      },\n   },\n   watch: {\n      \"event.startDate\": function () {\n         this.endDateMin = this.event.startDate;\n         this.endDateMax = moment(\n            new Date(this.event.startDate).setHours(23, 59, 59, 999)\n         ).toISOString();\n\n         this.event.endDate = moment(this.event.startDate)\n            .add(1, \"h\")\n            .toISOString();\n      },\n      \"event.repeat\": function () {\n         if (this.event.repeat) {\n            this.event.repeatEnd = moment(this.event.endDate)\n               .add(31, \"d\")\n               .toISOString();\n         }\n      },\n   },\n};\n</script>\n\n<style scoped>\n._dialogTitle {\n   text-align: center;\n}\n\n.eventMdDialog {\n   width: 1000px;\n}\n\n._dialogContainer {\n   width: 100%;\n   height: 450px;\n}\n\n._dialogContainer.created {\n   width: 400px;\n   height: 450px;\n}\n\n._dialogContainer .taskForm {\n   width: 100%;\n   height: 100%;\n   overflow: hidden;\n}\n\n._dialogContainer .taskForm .toolbarHeader {\n   min-height: unset;\n   height: 50px;\n   background-color: transparent;\n}\n\n._dialogContainer .taskForm .container {\n   width: 100%;\n   height: calc(100% - 50px);\n   display: flex;\n   flex-direction: column;\n   justify-content: space-between;\n   overflow: auto;\n}\n\n._dialogContainer .taskForm .container .dates {\n   display: flex;\n   justify-content: space-between;\n}\n\n._dialogContainer .taskForm .container .dates .begin,\n._dialogContainer .taskForm .container .dates .end {\n   width: 49%;\n}\n\n._dialogContainer .taskForm .container .periodicity .radios {\n   display: flex;\n   justify-content: space-around;\n   align-items: center;\n}\n\n.description {\n   margin-top: 10px;\n}\n/* \n._dialogContainer .taskForm .container .periodicity .number {\n}\n._dialogContainer .taskForm .container .periodicity .period {\n} */\n</style>\n\n<style>\n.eventMdDialog .md-dialog-container {\n   max-width: 100%;\n}\n\n.vdatetime-fade-enter-active,\n.vdatetime-fade-leave-active {\n   transition: opacity 0.4s;\n}\n.vdatetime-fade-enter,\n.vdatetime-fade-leave-to {\n   opacity: 0;\n}\n.vdatetime-overlay {\n   z-index: 999;\n   position: fixed;\n   top: 0;\n   right: 0;\n   bottom: 0;\n   left: 0;\n   background: rgba(0, 0, 0, 0.5);\n   transition: opacity 0.5s;\n}\n.vdatetime-popup {\n   box-sizing: border-box;\n   z-index: 1000;\n   position: fixed;\n   top: 50%;\n   left: 50%;\n   -webkit-transform: translate(-50%, -50%);\n   transform: translate(-50%, -50%);\n   width: 340px;\n   max-width: calc(100% - 30px);\n   box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.3);\n   color: #444;\n   font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Oxygen,\n      Ubuntu, Cantarell, \"Fira Sans\", \"Droid Sans\", \"Helvetica Neue\", sans-serif;\n   line-height: 1.18;\n   background: #fff;\n   -webkit-tap-highlight-color: transparent;\n}\n.vdatetime-popup * {\n   box-sizing: border-box;\n}\n.vdatetime-popup__header {\n   padding: 18px 30px;\n   background: #3f51b5;\n   color: #fff;\n   font-size: 32px;\n}\n.vdatetime-popup__title {\n   margin-bottom: 8px;\n   font-size: 21px;\n   font-weight: 300;\n}\n.vdatetime-popup__year {\n   font-weight: 300;\n   font-size: 14px;\n   opacity: 0.7;\n   cursor: pointer;\n   transition: opacity 0.3s;\n}\n.vdatetime-popup__year:hover {\n   opacity: 1;\n}\n.vdatetime-popup__date {\n   line-height: 1;\n   cursor: pointer;\n}\n.vdatetime-popup__actions {\n   padding: 0 20px 10px 30px;\n   text-align: right;\n}\n.vdatetime-popup__actions__button {\n   display: inline-block;\n   border: none;\n   padding: 10px 20px;\n   background: 0 0;\n   font-size: 16px;\n   color: #3f51b5;\n   cursor: pointer;\n   transition: color 0.3s;\n}\n.vdatetime-popup__actions__button:hover {\n   color: #444;\n}\n.vdatetime-calendar__navigation--next:hover svg path,\n.vdatetime-calendar__navigation--previous:hover svg path {\n   stroke: #888;\n}\n.vdatetime-calendar__navigation,\n.vdatetime-calendar__navigation * {\n   box-sizing: border-box;\n}\n.vdatetime-calendar__navigation {\n   position: relative;\n   margin: 15px 0;\n   padding: 0 30px;\n   width: 100%;\n}\n.vdatetime-calendar__navigation--next,\n.vdatetime-calendar__navigation--previous {\n   position: absolute;\n   top: 0;\n   padding: 0 5px;\n   width: 18px;\n   cursor: pointer;\n}\n.vdatetime-calendar__navigation--next svg,\n.vdatetime-calendar__navigation--previous svg {\n   width: 8px;\n   height: 13px;\n}\n.vdatetime-calendar__navigation--next svg path,\n.vdatetime-calendar__navigation--previous svg path {\n   transition: stroke 0.3s;\n}\n.vdatetime-calendar__navigation--previous {\n   left: 25px;\n}\n.vdatetime-calendar__navigation--next {\n   right: 25px;\n   -webkit-transform: scaleX(-1);\n   transform: scaleX(-1);\n}\n.vdatetime-calendar__current--month {\n   text-align: center;\n   text-transform: capitalize;\n}\n.vdatetime-calendar__month {\n   padding: 0 20px;\n   transition: height 0.2s;\n}\n.vdatetime-calendar__month__day,\n.vdatetime-calendar__month__weekday {\n   display: inline-block;\n   width: 14.28571%;\n   line-height: 36px;\n   text-align: center;\n   font-size: 15px;\n   font-weight: 300;\n   cursor: pointer;\n}\n.vdatetime-calendar__month__day > span,\n.vdatetime-calendar__month__weekday > span {\n   display: block;\n   width: 100%;\n   position: relative;\n   height: 0;\n   padding: 0 0 100%;\n   overflow: hidden;\n}\n.vdatetime-calendar__month__day > span > span,\n.vdatetime-calendar__month__weekday > span > span {\n   display: -webkit-box;\n   display: -ms-flexbox;\n   display: flex;\n   -webkit-box-pack: center;\n   -ms-flex-pack: center;\n   justify-content: center;\n   -webkit-box-align: center;\n   -ms-flex-align: center;\n   align-items: center;\n   position: absolute;\n   top: 0;\n   right: 0;\n   bottom: 0;\n   left: 0;\n   border: 0;\n   border-radius: 50%;\n   transition: background-color 0.3s, color 0.3s;\n}\n.vdatetime-calendar__month__weekday {\n   font-weight: 700;\n}\n.vdatetime-calendar__month__day:hover > span > span {\n   background: #eee;\n}\n.vdatetime-calendar__month__day--selected:hover > span > span,\n.vdatetime-calendar__month__day--selected > span > span {\n   color: #fff;\n   background: #3f51b5;\n}\n.vdatetime-calendar__month__day--disabled {\n   opacity: 0.4;\n   cursor: default;\n}\n.vdatetime-calendar__month__day--disabled:hover > span > span {\n   color: inherit;\n   background: 0 0;\n}\n.vdatetime-time-picker__list::-webkit-scrollbar-thumb {\n   background: #ccc;\n}\n.vdatetime-time-picker__list::-webkit-scrollbar-track {\n   background: #efefef;\n}\n.vdatetime-time-picker * {\n   box-sizing: border-box;\n}\n.vdatetime-time-picker {\n   box-sizing: border-box;\n}\n.vdatetime-time-picker::after {\n   content: \"\";\n   display: table;\n   clear: both;\n}\n.vdatetime-time-picker__list {\n   float: left;\n   width: 50%;\n   height: 305px;\n   overflow-y: scroll;\n   -webkit-overflow-scrolling: touch;\n}\n.vdatetime-time-picker__list::-webkit-scrollbar {\n   width: 3px;\n}\n.vdatetime-time-picker__with-suffix .vdatetime-time-picker__list {\n   width: 33.3%;\n}\n.vdatetime-time-picker__item {\n   padding: 10px 0;\n   font-size: 20px;\n   text-align: center;\n   cursor: pointer;\n   transition: font-size 0.3s;\n}\n.vdatetime-time-picker__item:hover {\n   font-size: 32px;\n}\n.vdatetime-time-picker__item--selected {\n   color: #3f51b5;\n   font-size: 32px;\n}\n.vdatetime-time-picker__item--disabled {\n   opacity: 0.4;\n   cursor: default;\n   font-size: 20px !important;\n}\n.vdatetime-year-picker__list::-webkit-scrollbar-thumb {\n   background: #ccc;\n}\n.vdatetime-year-picker__list::-webkit-scrollbar-track {\n   background: #efefef;\n}\n.vdatetime-year-picker * {\n   box-sizing: border-box;\n}\n.vdatetime-year-picker {\n   box-sizing: border-box;\n}\n.vdatetime-year-picker::after {\n   content: \"\";\n   display: table;\n   clear: both;\n}\n.vdatetime-year-picker__list {\n   float: left;\n   width: 100%;\n   height: 305px;\n   overflow-y: scroll;\n   -webkit-overflow-scrolling: touch;\n}\n.vdatetime-year-picker__list::-webkit-scrollbar {\n   width: 3px;\n}\n.vdatetime-year-picker__item {\n   padding: 10px 0;\n   font-size: 20px;\n   text-align: center;\n   cursor: pointer;\n   transition: font-size 0.3s;\n}\n.vdatetime-year-picker__item:hover {\n   font-size: 32px;\n}\n.vdatetime-year-picker__item--selected {\n   color: #3f51b5;\n   font-size: 32px;\n}\n.vdatetime-year-picker__item--disabled {\n   opacity: 0.4;\n   cursor: default;\n}\n.vdatetime-year-picker__item--disabled:hover {\n   color: inherit;\n   background: 0 0;\n}\n.vdatetime-month-picker__list::-webkit-scrollbar-thumb {\n   background: #ccc;\n}\n.vdatetime-month-picker__list::-webkit-scrollbar-track {\n   background: #efefef;\n}\n.vdatetime-month-picker * {\n   box-sizing: border-box;\n}\n.vdatetime-month-picker {\n   box-sizing: border-box;\n}\n.vdatetime-month-picker::after {\n   content: \"\";\n   display: table;\n   clear: both;\n}\n.vdatetime-month-picker__list {\n   float: left;\n   width: 100%;\n   height: 305px;\n   overflow-y: scroll;\n   -webkit-overflow-scrolling: touch;\n}\n.vdatetime-month-picker__list::-webkit-scrollbar {\n   width: 3px;\n}\n.vdatetime-month-picker__item {\n   padding: 10px 0;\n   font-size: 20px;\n   text-align: center;\n   cursor: pointer;\n   transition: font-size 0.3s;\n}\n.vdatetime-month-picker__item:hover {\n   font-size: 32px;\n}\n.vdatetime-month-picker__item--selected {\n   color: #3f51b5;\n   font-size: 32px;\n}\n.vdatetime-month-picker__item--disabled {\n   opacity: 0.4;\n   cursor: default;\n}\n.vdatetime-month-picker__item--disabled:hover {\n   color: inherit;\n   background: 0 0;\n}\n</style>","<!--\nCopyright 2020 SpinalCom - www.spinalcom.com\n\nThis file is part of SpinalCore.\n\nPlease read all of the following terms and conditions\nof the Free Software license Agreement (\"Agreement\")\ncarefully.\n\nThis Agreement is a legally binding contract between\nthe Licensee (as defined below) and SpinalCom that\nsets forth the terms and conditions that govern your\nuse of the Program. By installing and/or using the\nProgram, you agree to abide by all the terms and\nconditions stated or referenced herein.\n\nIf you do not agree to abide by these terms and\nconditions, do not demonstrate your acceptance and do\nnot install or use the Program.\nYou should have received a copy of the license along\nwith this file. If not, see\n<http://resources.spinalcom.com/licenses.pdf>.\n-->\n\n\n<template>\n  <md-dialog :md-active.sync=\"showDialog\"\n             @md-closed=\"closeDialog(false)\">\n    <md-dialog-title class=\"_dialogTitle\">Edit Event</md-dialog-title>\n\n    <md-dialog-content class=\"_dialogContainer\">\n\n      <div class=\"taskForm\">\n\n        <div class=\"container\">\n          <md-field>\n            <label>Name</label>\n            <md-input v-model=\"event.name\"></md-input>\n          </md-field>\n\n          <div class=\"dates\">\n            <div class=\"begin\">\n              <datetime :format=\"'dd/MM/yyyy HH:mm'\"\n                        v-model=\"event.startDate\"\n                        :min-datetime=\"startDateMin\"\n                        :title=\"'Start date'\"\n                        :type=\"'datetime'\"\n                        :input-id=\"'startDate'\"\n                        :input-style=\"beginInputStyle\">\n                <label for=\"startDate\"\n                       slot=\"before\">Start date</label>\n              </datetime>\n            </div>\n\n            <div class=\"end\">\n              <datetime :format=\"'dd/MM/yyyy HH:mm'\"\n                        v-model=\"event.endDate\"\n                        :min-datetime=\"endDateMin\"\n                        :max-datetime=\"endDateMax\"\n                        :title=\"'End date'\"\n                        :type=\"'datetime'\"\n                        :input-id=\"'endDate'\"\n                        :input-style=\"beginInputStyle\">\n                <label for=\"endDate\"\n                       slot=\"before\">End date</label>\n              </datetime>\n            </div>\n          </div>\n\n          <!-- <div class=\"md-layout md-gutter periodicity\">\n            <div class=\"md-layout-item md-size-100 radios\">\n              <md-radio v-model=\"event.repeat\"\n                        class=\"md-primary\"\n                        :value=\"true\">Repeat Once</md-radio>\n              <md-radio v-model=\"event.repeat\"\n                        class=\"md-primary\"\n                        :value=\"false\">Repeat every</md-radio>\n            </div>\n\n            <div class=\"md-layout-item md-size-50 number\"\n                 v-if=\"event.repeat\">\n              <md-field>\n                <md-input v-model=\"event.periodicity.count\"\n                          type=\"number\"\n                          placeholder=\"A nice placeholder\"></md-input>\n              </md-field>\n            </div>\n            <div class=\"md-layout-item md-size-50 period\"\n                 v-if=\"event.repeat\">\n              <md-field>\n                <label for=\"Period\">Period</label>\n                <md-select v-model=\"event.periodicity.period\"\n                           name=\"Period\"\n                           id=\"Period\">\n\n                  <md-option v-for=\"(period,index) of Object.keys(PERIODS)\"\n                             :key=\"index\"\n                             :value=\"PERIODS[period]\"\n                             selected>{{period}}</md-option>\n\n                </md-select>\n              </md-field>\n            </div>\n          </div> -->\n\n          <!-- <div class=\"description\">\n            <md-field>\n              <label>Description</label>\n              <md-textarea v-model=\"event.description\"></md-textarea>\n            </md-field>\n          </div> -->\n\n        </div>\n      </div>\n    </md-dialog-content>\n\n    <md-dialog-actions>\n      <md-button class=\"md-primary\"\n                 @click=\"closeDialog(false)\">Cancel</md-button>\n\n      <md-button class=\"md-primary\"\n                 @click=\"closeDialog(true)\"\n                 :disabled=\"disableOkBtn()\">OK</md-button>\n    </md-dialog-actions>\n  </md-dialog>\n</template>\n\n<script>\nimport { SpinalEventService, Period } from \"spinal-env-viewer-task-service\";\nimport { Datetime } from \"vue-datetime\";\nimport SelectTaskGroup from \"../components/selectTaskGroup.vue\";\nimport TaskForm from \"../components/taskForm.vue\";\nimport moment from \"moment\";\nimport { SpinalForgeViewer } from \"spinal-env-viewer-plugin-forge\";\nimport EventBus, { EVENT_TYPES } from \"../../js/event\";\n\nexport default {\n  name: \"editTaskDialog\",\n  components: {\n    datetime: Datetime,\n  },\n  props: [\"onFinised\"],\n  data() {\n    this.PERIODS = Object.freeze(Period);\n\n    // this.PAGES = {\n    //   selection: 0,\n    //   creation: 1,\n    // };\n\n    this.beginInputStyle = {\n      \"border-bottom\": \"1px solid white\",\n      width: \"100%\",\n    };\n\n    return {\n      //   periodicity: { count: 1, period: 86400000 },\n      // event.repeat: true,\n      endDateMin: null,\n      endDateMax: null,\n      startDateMin: null,\n      event: {\n        contextId: \"\",\n        groupId: \"\",\n        categoryId: \"\",\n        assignedTo: \"\",\n        startDate: \"\",\n        endDate: \"\",\n        // periodicity: { count: 1, period: 86400000 },\n        name: \"\",\n        // description: \"\",\n        // repeat: false,\n      },\n      showDialog: true,\n    };\n  },\n  mounted() {},\n  methods: {\n    opened(option) {\n      this.startDateMin = moment().toISOString();\n\n      option.startDate = moment(option.startDate).toISOString();\n      option.endDate = moment(option.endDate).toISOString();\n\n      this.event = option;\n      // delete this.event.repeat;\n    },\n\n    async removed(option) {\n      if (option) {\n        SpinalEventService.updateEvent(this.event.id, this.event).then(\n          (result) => {\n            EventBus.$emit(EVENT_TYPES.UPDATED, this.event);\n          }\n        );\n      }\n\n      this.showDialog = false;\n    },\n\n    closeDialog(closeResult) {\n      if (typeof this.onFinised === \"function\") {\n        this.onFinised(closeResult);\n      }\n    },\n\n    disableOkBtn() {\n      const condition =\n        this.event.startDate &&\n        this.event.startDate.toString().trim().length > 0 &&\n        this.event.endDate &&\n        this.event.endDate.toString().trim().length > 0 &&\n        // this.event.periodicity &&\n        // this.event.periodicity.toString().trim().length > 0 &&\n        this.event.name &&\n        this.event.name.toString().trim().length > 0;\n\n      return !condition;\n      // if (!this.event.repeat) return !condition;\n\n      // return !(condition && this.event.periodicity.count >= 1);\n    },\n  },\n\n  watch: {\n    \"event.startDate\": function () {\n      this.endDateMin = this.event.startDate;\n      this.endDateMax = moment(\n        new Date(this.event.startDate).setHours(23, 59, 59, 999)\n      ).toISOString();\n\n      this.event.endDate = moment(this.event.startDate)\n        .add(1, \"h\")\n        .toISOString();\n    },\n  },\n};\n</script>\n\n<style scoped>\n._dialogTitle {\n  text-align: center;\n}\n\n._dialogContainer {\n  width: 400px;\n  height: 450px;\n}\n\n._dialogContainer .taskForm {\n  width: 100%;\n  height: 100%;\n}\n\n/* ._dialogContainer .taskForm .toolbarHeader {\n  min-height: unset;\n  height: 50px;\n  background-color: transparent;\n} */\n\n._dialogContainer .taskForm .container {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  /* justify-content: space-around; */\n}\n\n._dialogContainer .taskForm .container .dates {\n  display: flex;\n  justify-content: space-between;\n}\n\n._dialogContainer .taskForm .container .dates .begin,\n._dialogContainer .taskForm .container .dates .end {\n  width: 49%;\n}\n\n._dialogContainer .taskForm .container .periodicity .radios {\n  display: flex;\n  justify-content: space-around;\n  align-items: center;\n}\n</style>\n\n","<!--\nCopyright 2020 SpinalCom - www.spinalcom.com\n\nThis file is part of SpinalCore.\n\nPlease read all of the following terms and conditions\nof the Free Software license Agreement (\"Agreement\")\ncarefully.\n\nThis Agreement is a legally binding contract between\nthe Licensee (as defined below) and SpinalCom that\nsets forth the terms and conditions that govern your\nuse of the Program. By installing and/or using the\nProgram, you agree to abide by all the terms and\nconditions stated or referenced herein.\n\nIf you do not agree to abide by these terms and\nconditions, do not demonstrate your acceptance and do\nnot install or use the Program.\nYou should have received a copy of the license along\nwith this file. If not, see\n<http://resources.spinalcom.com/licenses.pdf>.\n-->\n\n\n<template>\n   <md-dialog\n      :md-active.sync=\"showDialog\"\n      @md-closed=\"closeDialog(false)\"\n   >\n      <md-dialog-title class=\"_dialogTitle\">Delete event(s)</md-dialog-title>\n\n      <md-dialog-content>\n         <div v-if=\"event && event.reference\">\n            <div\n               v-for=\"choice of choices\"\n               :key=\"choice.value\"\n            >\n               <md-radio\n                  v-model=\"userChoice\"\n                  :value=\"choice.value\"\n                  class=\"md-primary\"\n               >{{choice.message}}</md-radio>\n            </div>\n\n         </div>\n         <div v-else>\n            Do you want to remove this event ?\n         </div>\n      </md-dialog-content>\n\n      <md-dialog-actions>\n         <md-button\n            class=\"md-primary\"\n            @click=\"closeDialog(false)\"\n         >Cancel</md-button>\n\n         <md-button\n            class=\"md-primary\"\n            @click=\"closeDialog(true)\"\n         >YES</md-button>\n      </md-dialog-actions>\n   </md-dialog>\n</template>\n\n<script>\nimport { SpinalEventService } from \"spinal-env-viewer-task-service\";\nimport EventBus, { EVENT_TYPES } from \"../../js/event\";\nexport default {\n   name: \"confirmDialog\",\n   props: [\"onFinised\"],\n   data() {\n      this.choices = [\n         {\n            message: \"Remove only this event\",\n            value: 1,\n         },\n         {\n            message:\n               \"Remove this event and all previous events of the same type\",\n            value: 2,\n         },\n         {\n            message: \"Remove this event and all next events of the same type\",\n            value: 3,\n         },\n         {\n            message: \"Remove this event and all events of the same type\",\n            value: 4,\n         },\n      ];\n\n      this.events = [];\n\n      return {\n         // title: \"\",\n         // message: \"\",\n         event: undefined,\n         userChoice: 1,\n         callback: undefined,\n         showDialog: true,\n      };\n   },\n   mounted() {},\n   methods: {\n      async opened(option) {\n         this.event = option.event;\n         this.callback = option.callback;\n\n         // this.message = option.message;\n         // this.title = option.title;\n         if (this.event.reference) {\n            this.events = await this.getEvents(\n               this.event.nodeId,\n               this.event.reference\n            );\n         } else {\n            this.events = [this.event];\n         }\n      },\n\n      async removed(option) {\n         if (option) {\n            const eventTodelete = this.getEventToDelete(\n               this.events,\n               this.event\n            );\n\n            const promises = eventTodelete.map(async (el) => {\n               const id = el.id;\n               await SpinalEventService.removeEvent(id);\n               EventBus.$emit(EVENT_TYPES.DELETED, id);\n            });\n\n            await Promise.all(promises);\n         }\n\n         typeof this.callback === \"function\" && this.callback(option);\n\n         this.showDialog = false;\n      },\n\n      closeDialog(closeResult) {\n         if (typeof this.onFinised === \"function\") {\n            this.onFinised(closeResult);\n         }\n      },\n\n      getEvents(nodeId, reference) {\n         if (!nodeId) return [];\n         return SpinalEventService.getEvents(nodeId).then((result) => {\n            const events = result.filter((el) => {\n               return el.reference && el.reference.get() == reference;\n            });\n\n            return events.map((el) => el.get());\n         });\n      },\n\n      getEventToDelete(events, event) {\n         switch (this.userChoice) {\n            case 1:\n               //only event\n               return events.filter((el) => el.id === event.id);\n            case 2:\n               //event && previous\n               return events.filter((el) => el.startDate <= event.startDate);\n            case 3:\n               //event && next\n               return events.filter((el) => el.startDate >= event.startDate);\n            case 4:\n               //all events\n\n               return events;\n         }\n      },\n   },\n};\n</script>\n\n<style scoped>\n._dialogTitle {\n   text-align: center;\n}\n</style>\n\n","<!--\nCopyright 2020 SpinalCom - www.spinalcom.com\n\nThis file is part of SpinalCore.\n\nPlease read all of the following terms and conditions\nof the Free Software license Agreement (\"Agreement\")\ncarefully.\n\nThis Agreement is a legally binding contract between\nthe Licensee (as defined below) and SpinalCom that\nsets forth the terms and conditions that govern your\nuse of the Program. By installing and/or using the\nProgram, you agree to abide by all the terms and\nconditions stated or referenced herein.\n\nIf you do not agree to abide by these terms and\nconditions, do not demonstrate your acceptance and do\nnot install or use the Program.\nYou should have received a copy of the license along\nwith this file. If not, see\n<http://resources.spinalcom.com/licenses.pdf>.\n-->\n\n\n<template>\n  <md-dialog :md-active.sync=\"showDialog\"\n             @md-closed=\"closeDialog(false)\">\n    <md-dialog-title class=\"_dialogTitle\">Delete</md-dialog-title>\n\n    <md-dialog-content>\n      <!-- <md-list>\n        <md-subheader>Select to remove</md-subheader>\n        <md-list-item v-for=\"event of events\"\n                      :key=\"event.id\">\n          <md-checkbox class=\"md-primary\"\n                       v-model=\"event.selected\" />\n          <span class=\"md-list-item-text\">{{event.title}}</span>\n        </md-list-item>\n      </md-list> -->\n      Do you want delete all events ?\n    </md-dialog-content>\n\n    <md-dialog-actions>\n      <md-button class=\"md-primary\"\n                 @click=\"closeDialog(false)\">Cancel</md-button>\n\n      <md-button class=\"md-accent\"\n                 @click=\"closeDialog(true)\">DELETE</md-button>\n    </md-dialog-actions>\n  </md-dialog>\n</template>\n\n<script>\nimport { SpinalEventService } from \"spinal-env-viewer-task-service\";\nimport EventBus, { EVENT_TYPES } from \"../../js/event\";\n\nexport default {\n  name: \"deleteAllDialog\",\n  props: [\"onFinised\"],\n  data() {\n    return {\n      callback: undefined,\n      events: [],\n      showDialog: true,\n    };\n  },\n  mounted() {},\n  methods: {\n    opened(option) {\n      this.callback = option.callback;\n      this.events = option.events;\n      // this.events = option.events.map((el) => {\n      //   return el;\n      // });\n    },\n\n    async removed(option) {\n      if (option) {\n        const promises = this.events.map(async (el) => {\n          await SpinalEventService.removeEvent(el.id);\n          EventBus.$emit(EVENT_TYPES.DELETED, el.id);\n          return;\n        });\n        await Promise.all(promises);\n        // typeof this.callback === \"function\" && this.callback(option);\n      }\n\n      this.showDialog = false;\n    },\n\n    closeDialog(closeResult) {\n      if (typeof this.onFinised === \"function\") {\n        this.onFinised(closeResult);\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\n._dialogTitle {\n  text-align: center;\n}\n</style>","<!--\nCopyright 2020 SpinalCom - www.spinalcom.com\n\nThis file is part of SpinalCore.\n\nPlease read all of the following terms and conditions\nof the Free Software license Agreement (\"Agreement\")\ncarefully.\n\nThis Agreement is a legally binding contract between\nthe Licensee (as defined below) and SpinalCom that\nsets forth the terms and conditions that govern your\nuse of the Program. By installing and/or using the\nProgram, you agree to abide by all the terms and\nconditions stated or referenced herein.\n\nIf you do not agree to abide by these terms and\nconditions, do not demonstrate your acceptance and do\nnot install or use the Program.\nYou should have received a copy of the license along\nwith this file. If not, see\n<http://resources.spinalcom.com/licenses.pdf>.\n-->\n\n<template>\n   <md-content class=\"event_container\">\n      <!-- <task-calendar :time=\"false\"\n                   :disable-views=\"['years']\"\n                   events-count-on-year-view\n                   events-on-month-view=\"short\"\n                   default-view=\"month\"\n                   :events=\"events\"\n                   :on-event-click=\"onEventClick\"\n                   sticky-split-labels> -->\n\n      <!-- <template v-slot:split-label=\"{ split, view }\">\n        <i class=\"icon material-icons\">person</i>\n\n      </template> -->\n\n      <!-- <template v-slot:event=\"{ event, view }\">\n        <div class=\"event-content\"\n             :style=\"{backgroundColor : event.color}\">hello world</div>\n      </template> -->\n\n      <!-- </task-calendar> -->\n\n      <div class=\"header\">\n         <div class=\"display\">\n            <md-checkbox\n               v-model=\"displayEventsShared\"\n               class=\"md-primary\"\n            />\n            <span class=\"md-list-item-text\">Display Events Shared</span>\n         </div>\n\n         <div class=\"display\">\n            <md-checkbox\n               v-model=\"displayonlyEventsShared\"\n               class=\"md-primary\"\n            />\n            <span class=\"md-list-item-text\">Display only Events Shared</span>\n         </div>\n\n      </div>\n\n      <vue-cal\n         class=\"calendar_container vuecal--full-height-delete\"\n         ref=\"vuecal\"\n         :time=\"true\"\n         :dblclick-to-navigate=\"false\"\n         events-count-on-year-view\n         events-on-month-view=\"short\"\n         default-view=\"month\"\n         active-view=\"month\"\n         :disable-views=\"['years']\"\n         :events=\"events\"\n         :on-event-dblclick=\"onEventClick\"\n         :editable-events=\"{ title: false, drag: false, resize: false, delete: true, create: false }\"\n         @event-delete=\"deleteEvent\"\n         @cell-dblclick=\"cellDblClick\"\n      >\n\n      </vue-cal>\n\n      <!-- <full-calendar class=\"calendar_container\"\n                   ref=\"calendar\"\n                   :events=\"events\"\n                   :allDaySlot=\"false\"\n                   :day-headers=\"false\"\n                   :config=\"config\"></full-calendar> -->\n\n      <!-- <div class=\"fabs\"> -->\n      <md-speed-dial\n         class=\"md-bottom-right\"\n         md-direction=\"top\"\n      >\n         <md-speed-dial-target class=\"md-primary md-fab md-mini\">\n            <md-icon class=\"md-morph-initial\">menu</md-icon>\n            <md-icon class=\"md-morph-final\">close</md-icon>\n         </md-speed-dial-target>\n\n         <md-speed-dial-content>\n\n            <md-button\n               class=\"addIconFab md-fab md-mini md-accent\"\n               @click=\"removeAllEvents\"\n               title=\"remove all event\"\n            >\n               <md-icon class=\"md-primary\">delete</md-icon>\n            </md-button>\n\n            <md-button\n               class=\"addIconFab md-fab md-mini md-primary\"\n               @click=\"seeEvents\"\n               title=\"select all event\"\n            >\n               <md-icon class=\"md-primary\">visibility</md-icon>\n            </md-button>\n\n            <md-button\n               v-if=\"!isEventContext\"\n               class=\"addIconFab md-fab md-mini md-primary\"\n               @click=\"addEvent\"\n               title=\"add event\"\n            >\n               <md-icon class=\"md-primary\">add</md-icon>\n            </md-button>\n\n         </md-speed-dial-content>\n\n      </md-speed-dial>\n      <!-- </div> -->\n\n   </md-content>\n</template>\n\n<script>\nimport { spinalPanelManagerService } from \"spinal-env-viewer-panel-manager-service\";\nimport {\n   SpinalEvent,\n   SpinalEventService,\n} from \"spinal-env-viewer-task-service\";\nimport { SpinalGraphService } from \"spinal-env-viewer-graph-service\";\nimport { groupManagerService } from \"spinal-env-viewer-plugin-group-manager-service\";\nimport selectElementOnMaquette from \"../../buttons/standard_buttons/select\";\n\nimport VueCal from \"vue-cal\";\nimport moment from \"moment\";\nimport EventBus, { EVENT_TYPES } from \"../../js/event\";\n\nimport Standard_buttons_service from \"spinal-env-viewer-plugin-note-standard-buttons-service\";\n\nexport default {\n   name: \"taskPanelContainer\",\n   components: {\n      // \"task-calendar\": TasksCalendar,\n      \"vue-cal\": VueCal,\n      // \"full-calendar\": FullCalendar,\n   },\n   data() {\n      this.standard_buttons = [\n         {\n            icon: \"visibility\",\n            label: \"select on 3D model\",\n            action: (view) => {},\n         },\n         {\n            icon: \"settings_overscan\",\n            label: \"isolate on 3D model\",\n            action: (view) => {},\n         },\n         // {\n         //   icon: \"\",\n         //   label: \"z\",\n         // },\n      ];\n\n      this.eventShared = [];\n      this.node_events = [];\n\n      return {\n         isEventContext: false,\n         nodeInfo: undefined,\n         events: [],\n         colormaps: new Map(),\n         config: {},\n         styleTag: document.createElement(\"style\"),\n         displayEventsShared: true,\n         displayonlyEventsShared: false,\n      };\n   },\n   mounted() {\n      EventBus.$on(EVENT_TYPES.CREATED, async () => {\n         const contextId =\n            this.nodeInfo.context && this.nodeInfo.context.id.get();\n         const nodeId =\n            this.nodeInfo.selectedNode && this.nodeInfo.selectedNode.id.get();\n\n         await this.reloadData(contextId, nodeId);\n         this.events = await this.setEvents();\n      });\n\n      EventBus.$on(EVENT_TYPES.UPDATED, async () => {\n         const contextId =\n            this.nodeInfo.context && this.nodeInfo.context.id.get();\n         const nodeId =\n            this.nodeInfo.selectedNode && this.nodeInfo.selectedNode.id.get();\n\n         await this.reloadData(contextId, nodeId);\n         this.events = await this.setEvents();\n      });\n\n      EventBus.$on(EVENT_TYPES.DELETED, (id) => {\n         this.events = this.events.filter((el) => el.id !== id);\n      });\n   },\n   methods: {\n      async opened(option) {\n         this.nodeInfo = option;\n\n         const nodeId = option.selectedNode && option.selectedNode.id.get();\n         const contextId = option.context && option.context.id.get();\n         const name = await this.getName();\n         this.isEventContext = option.isEventContext;\n         await this.reloadData(contextId, nodeId);\n\n         this.events = await this.setEvents();\n\n         document.head.appendChild(this.styleTag);\n         this.setTitle(name);\n      },\n\n      reloadData(contextId, nodeId) {\n         return Promise.all([\n            this.getNodeEvents(contextId, nodeId),\n            this.getEventShared(nodeId),\n         ]).then((result) => {\n            this.node_events = result[0];\n            this.eventShared = result[1];\n         });\n      },\n\n      closed() {},\n\n      setEvents() {\n         if (this.displayonlyEventsShared) {\n            return this.eventShared;\n         } else if (!this.displayEventsShared) {\n            return this.node_events;\n         } else {\n            return [...this.eventShared, ...this.node_events];\n         }\n      },\n\n      getNodeEvents(contextId, nodeId) {\n         if (this.isEventContext) {\n            return this.getEventsInEventContext(contextId, nodeId);\n         } else if (!this.isEventContext && nodeId) {\n            return this._getAndFormatEvents(nodeId);\n         } else {\n            return [];\n         }\n      },\n\n      addEvent() {\n         spinalPanelManagerService.openPanel(\"createTaskDialog\", this.nodeInfo);\n      },\n\n      async getEventsInEventContext(contextId, nodeId) {\n         if (!contextId || !nodeId) return [];\n\n         const events = await SpinalGraphService.findInContext(\n            nodeId,\n            contextId,\n            (node) => {\n               SpinalGraphService._addNode(node);\n               return node.getType().get() === SpinalEvent.EVENT_TYPE;\n            }\n         );\n\n         const promises = events.map((el) => this._formatEvent(el.get()));\n\n         return Promise.all(promises);\n      },\n\n      onEventClick(event) {\n         spinalPanelManagerService.openPanel(\"seeEventDetail\", event);\n      },\n\n      async _getAndFormatEvents(nodeId, isSharedEvent = false) {\n         const events = await SpinalEventService.getEvents(nodeId);\n         const promises = events.map((el) =>\n            this._formatEvent(el.get(), isSharedEvent)\n         );\n         return Promise.all(promises);\n      },\n\n      async _formatEvent(event, isSharedEvent) {\n         const group = await this._getEventColor(\n            event.groupId,\n            event.contextId\n         );\n\n         event.title = event.name;\n         event.start = this._formatDate(event.startDate);\n         event.end = this._formatDate(event.endDate);\n         event.class = event.groupId;\n         event.backgroundColor = group && group.color;\n\n         if (isSharedEvent) {\n            event.content = '<i class=\"v-icon material-icons\">link</i>';\n         }\n\n         // event.deletable = true;\n         // event.titleEditable = false;\n         // event.textColor = \"#ffffff\";\n\n         this.addStyle(event.groupId, group && group.color);\n\n         delete event.startDate;\n         delete event.endDate;\n\n         return event;\n      },\n\n      _getEventColor(groupId, contextId) {\n         let info = SpinalGraphService.getInfo(groupId);\n         if (info) {\n            // this.styles[`.${info.id.get()}`] = {\n            //   backgroundColor: info.color.get(),\n            // };\n            return Promise.resolve(info.get());\n         }\n\n         return groupManagerService.getGroups(contextId).then((result) => {\n            const found = result.find((el) => el.id.get() === groupId);\n            if (found) {\n               // this.styles[`.${found.id.get()}`] = {\n               //   backgroundColor: found.color.get(),\n               // };\n               return found.get();\n            }\n         });\n      },\n\n      _formatDate(argDate) {\n         let date = new Date(argDate);\n\n         return `${date.getFullYear()}-${\n            date.getMonth() + 1\n         }-${date.getDate()} ${date.getHours()}:${date.getMinutes()}`;\n      },\n\n      setTitle(title) {\n         spinalPanelManagerService.panels.taskPanel.panel.setTitle(\n            `Events Panel : ${title}`\n         );\n      },\n\n      getName() {\n         if (this.nodeInfo.selectedNode)\n            return this.nodeInfo.selectedNode.name.get();\n\n         return new Promise((resolve, reject) => {\n            this.nodeInfo.model3d.getBulkProperties(\n               [this.nodeInfo.dbid],\n               { propFilter: [\"name\"] },\n               async (el) => {\n                  const name = el[0].name;\n                  resolve(name);\n               }\n            );\n         });\n      },\n\n      addStyle(className, color) {\n         const css = `.${className} {\n          background-color : ${color}\n        }`;\n         this.styleTag.appendChild(document.createTextNode(css));\n      },\n\n      timeConvertor(time) {\n         var PM = time.match(\"PM\") ? true : false;\n\n         time = time.split(\":\");\n         var min = time[1];\n\n         if (PM) {\n            var hour = 12 + parseInt(time[0], 10);\n            var sec = time[2].replace(\"PM\", \"\");\n         } else {\n            var hour = time[0];\n            var sec = time[2].replace(\"AM\", \"\");\n         }\n\n         return `${hour}:${min}`;\n      },\n      // next() {\n      //   this.$refs.calendar.fireMethod(\"next\");\n      // },\n\n      // changeView(view) {\n      //   this.$refs.calendar.fireMethod(\"changeView\", view);\n      // },\n\n      deleteEvent(event) {\n         spinalPanelManagerService.openPanel(\"confirmDialog\", {\n            event: event,\n            // title: \"Delete\",\n            // message: \"Do you want to remove this event ?\",\n            callback: (res) => {\n               if (!res) {\n                  this.events = [...this.events];\n               }\n            },\n         });\n      },\n\n      cellDblClick(date) {\n         const events = this.events.filter((el) => {\n            const isSameYear = moment(el.start).isSame(date, \"year\");\n            if (!isSameYear) return false;\n\n            const isSameMonth = moment(el.start).isSame(date, \"month\");\n            if (!isSameMonth) return false;\n\n            const isSameDay = moment(el.start).isSame(date, \"day\");\n            if (!isSameDay) return false;\n\n            return true;\n         });\n\n         this.selectEventsOnMaquete(events);\n      },\n\n      getBimObjects(events) {\n         const proms = events.map((el) => {\n            return Standard_buttons_service.getGeographicElement(el.id);\n         });\n\n         return Promise.all(proms).then(async (el) => {\n            const res = el.flat();\n            const promises = res.map((v) =>\n               Standard_buttons_service._getItemsBim(v)\n            );\n\n            let bims = await Promise.all(promises);\n            bims = bims.flat();\n\n            const bimMap = new Map();\n\n            for (const bimObject of bims) {\n               const bimFileId = bimObject.bimFileId;\n               const dbid = bimObject.dbid;\n\n               if (typeof bimMap.get(bimFileId) === \"undefined\") {\n                  bimMap.set(bimFileId, new Set());\n               }\n\n               bimMap.get(bimFileId).add(dbid);\n            }\n            const formated = [];\n\n            for (const [key, value] of bimMap.entries()) {\n               formated.push({\n                  model: window.spinal.BimObjectService.getModelByBimfile(key),\n                  ids: Array.from(value),\n               });\n            }\n\n            return formated;\n         });\n      },\n\n      async selectEventsOnMaquete(events) {\n         // events.forEach((element) => {\n         //   const params = {\n         //     selectedNode: new Model(element),\n         //     context: SpinalGraphService.getInfo(element.contextId),\n         //   };\n         //   selectElementOnMaquette.action(params);\n         // });\n         if (events.length === 0) return;\n\n         const bims = await this.getBimObjects(events);\n         bims.forEach((el) => {\n            el.model.selector.setSelection(el.ids, el.model, \"selectOnly\");\n         });\n      },\n\n      removeAllEvents() {\n         const events = this.$refs.vuecal.view.events;\n         if (events.length === 0) return;\n\n         spinalPanelManagerService.openPanel(\"deleteAllDialog\", {\n            events: events.filter((event) => {\n               const found = this.eventShared.find((el) => el.id === event.id);\n               return found ? false : true;\n            }),\n         });\n      },\n\n      seeEvents() {\n         const events = this.$refs.vuecal.view.events;\n         this.selectEventsOnMaquete(events);\n      },\n\n      async getEventShared(nodeId) {\n         if (this.isEventContext || !nodeId) return [];\n         const realNode = SpinalGraphService.getRealNode(nodeId);\n\n         const parents = await realNode.getParents();\n         const promises = parents.map((el) => {\n            SpinalGraphService._addNode(el);\n            return this._getAndFormatEvents(el.getId().get(), true);\n         });\n\n         return Promise.all(promises).then((result) => {\n            let res = [];\n            for (const eventList of result) {\n               res.push(...eventList);\n            }\n            return res;\n         });\n      },\n   },\n   watch: {\n      displayEventsShared() {\n         if (this.displayEventsShared === false) {\n            this.displayonlyEventsShared = false;\n         }\n         this.events = this.setEvents();\n      },\n\n      displayonlyEventsShared() {\n         if (this.displayonlyEventsShared) {\n            this.displayEventsShared = true;\n         }\n         this.events = this.setEvents();\n      },\n   },\n   destroyed() {\n      this.styleTag.remove();\n   },\n};\n</script>\n\n<style scoped>\n.event_container {\n   width: 100%;\n   height: calc(100% - 15px);\n   background-color: transparent;\n}\n\n.event_container .fabs {\n   width: 150px;\n   position: absolute;\n   bottom: 20px;\n   right: 0px;\n   display: flex;\n   justify-content: flex-end;\n}\n\n.event_container .header {\n   width: 100%;\n   height: 50px;\n   display: flex;\n   background: transparent;\n   padding: 0 5px 0 5px;\n}\n\n.event_container .header .display {\n   display: flex;\n   align-items: center;\n   margin-right: 10px;\n}\n\n.calendar_container {\n   width: 99%;\n   height: calc(100% - 74px);\n   margin: auto;\n}\n\n.vuecal--month-view .vuecal__cell {\n   height: 80px;\n}\n\n.vuecal--month-view .vuecal__cell-content {\n   justify-content: flex-start;\n   height: 100%;\n   align-items: flex-end;\n}\n\n.vuecal--month-view .vuecal__cell-date {\n   padding: 4px;\n}\n.vuecal--month-view .vuecal__no-event {\n   display: none;\n}\n</style>\n\n<style>\n/** \n///////////////////////////////////////\n//              CSS ADDED            //\n///////////////////////////////////////\n*/\n\n.event_container .addIconFab .md-ripple,\n.event_container .headerButtons .md-ripple {\n   padding: 0px;\n}\n\n.vuecal__event {\n   width: 90%;\n   height: auto;\n   margin: auto;\n   cursor: pointer;\n   margin-top: 5px;\n   color: #fff;\n   padding: 3px;\n   /*padding: 5px;\n  text-align: center; */\n}\n\n.vuecal__flex.vuecal__weekdays-headings {\n   padding-bottom: 10px;\n}\n\n.vuecal__flex.vuecal__menu {\n   background-color: #448aff !important;\n}\n\n.vuecal__title-bar {\n   background-color: #0830718c !important;\n}\n\n/* .vuecal__cell--today,\n.vuecal__cell--current {\n  background-color: rgba(240, 240, 255, 0.4);\n}\n.vuecal:not(.vuecal--day-view) .vuecal__cell--selected {\n  background-color: rgba(235, 255, 245, 0.4);\n}\n.vuecal__cell--selected:before {\n  border-color: rgba(66, 185, 131, 0.5);\n} */\n\n/** \n///////////////////////////////////////\n//              CSS ADDED            //\n///////////////////////////////////////\n*/\n.vuecal__weekdays-headings {\n   border-bottom: 1px solid #ddd;\n   margin-bottom: -1px;\n}\n.vuecal--view-with-time .vuecal__weekdays-headings,\n.vuecal--week-numbers .vuecal__weekdays-headings {\n   padding-left: 3em;\n}\n.vuecal--view-with-time.vuecal--twelve-hour .vuecal__weekdays-headings {\n   font-size: 0.9em;\n   padding-left: 4em;\n}\n.vuecal--overflow-x.vuecal--view-with-time .vuecal__weekdays-headings {\n   padding-left: 0;\n}\n.vuecal__heading {\n   width: 100%;\n   height: 2.8em;\n   font-weight: 400;\n   -webkit-box-pack: center;\n   -ms-flex-pack: center;\n   justify-content: center;\n   text-align: center;\n   -webkit-box-align: center;\n   -ms-flex-align: center;\n   align-items: center;\n   position: relative;\n   overflow: hidden;\n}\n.vuecal__heading > .vuecal__flex {\n   width: 100%;\n   height: 100%;\n   -webkit-box-align: initial !important;\n   -ms-flex-align: initial !important;\n   align-items: normal !important;\n}\n.vuecal--sticky-split-labels .vuecal__heading {\n   height: 3.4em;\n}\n.vuecal--day-view .vuecal__heading,\n.vuecal--month-view .vuecal__heading,\n.vuecal--week-view .vuecal__heading {\n   width: 14.2857%;\n}\n.vuecal--hide-weekends.vuecal--day-view .vuecal__heading,\n.vuecal--hide-weekends.vuecal--month-view .vuecal__heading,\n.vuecal--hide-weekends.vuecal--week-view .vuecal__heading,\n.vuecal--years-view .vuecal__heading {\n   width: 20%;\n}\n.vuecal--year-view .vuecal__heading {\n   width: 33.33%;\n}\n.vuecal__heading .weekday-label {\n   -ms-flex-negative: 0;\n   flex-shrink: 0;\n   display: -webkit-box;\n   display: -ms-flexbox;\n   display: flex;\n   -webkit-box-pack: center;\n   -ms-flex-pack: center;\n   justify-content: center;\n   -webkit-box-align: center;\n   -ms-flex-align: center;\n   align-items: center;\n}\n.vuecal--small .vuecal__heading .small,\n.vuecal--xsmall .vuecal__heading .xsmall {\n   display: block;\n}\n.vuecal--small .vuecal__heading .full,\n.vuecal--small .vuecal__heading .xsmall,\n.vuecal--xsmall .vuecal__heading .full,\n.vuecal--xsmall .vuecal__heading .small,\n.vuecal__heading .small,\n.vuecal__heading .xsmall {\n   display: none;\n}\n.vuecal .vuecal__split-days-headers {\n   -webkit-box-align: center;\n   -ms-flex-align: center;\n   align-items: center;\n}\n@media screen and (max-width: 550px) {\n   .vuecal__heading {\n      line-height: 1.2;\n   }\n   .vuecal--small .vuecal__heading .small,\n   .vuecal--xsmall .vuecal__heading .xsmall,\n   .vuecal__heading .small {\n      display: block;\n   }\n   .vuecal--small .vuecal__heading .full,\n   .vuecal--small .vuecal__heading .xsmall,\n   .vuecal--xsmall .vuecal__heading .full,\n   .vuecal--xsmall .vuecal__heading .small,\n   .vuecal__heading .full,\n   .vuecal__heading .xsmall {\n      display: none;\n   }\n   .vuecal--overflow-x .vuecal__heading .full,\n   .vuecal--small.vuecal--overflow-x .vuecal__heading .small,\n   .vuecal--xsmall.vuecal--overflow-x .vuecal__heading .xsmall {\n      display: block;\n   }\n   .vuecal--overflow-x .vuecal__heading .small,\n   .vuecal--overflow-x .vuecal__heading .xsmall,\n   .vuecal--small.vuecal--overflow-x .vuecal__heading .full,\n   .vuecal--small.vuecal--overflow-x .vuecal__heading .xsmall,\n   .vuecal--xsmall.vuecal--overflow-x .vuecal__heading .full,\n   .vuecal--xsmall.vuecal--overflow-x .vuecal__heading .small {\n      display: none;\n   }\n}\n@media screen and (max-width: 450px) {\n   .vuecal--small .vuecal__heading .xsmall,\n   .vuecal--xsmall .vuecal__heading .xsmall,\n   .vuecal__heading .xsmall {\n      display: block;\n   }\n   .vuecal--small .vuecal__heading .full,\n   .vuecal--small .vuecal__heading .small,\n   .vuecal--xsmall .vuecal__heading .full,\n   .vuecal--xsmall .vuecal__heading .small,\n   .vuecal__heading .full,\n   .vuecal__heading .small {\n      display: none;\n   }\n   .vuecal--small.vuecal--overflow-x .vuecal__heading .small,\n   .vuecal--xsmall.vuecal--overflow-x .vuecal__heading .xsmall {\n      display: block;\n   }\n   .vuecal--small.vuecal--overflow-x .vuecal__heading .full,\n   .vuecal--small.vuecal--overflow-x .vuecal__heading .xsmall,\n   .vuecal--xsmall.vuecal--overflow-x .vuecal__heading .full,\n   .vuecal--xsmall.vuecal--overflow-x .vuecal__heading .small {\n      display: none;\n   }\n}\n.vuecal__header button {\n   outline: none;\n   font-family: inherit;\n}\n.vuecal__menu {\n   padding: 0;\n   margin: 0;\n   list-style-type: none;\n   -webkit-box-pack: center;\n   -ms-flex-pack: center;\n   justify-content: center;\n   background-color: rgba(0, 0, 0, 0.02);\n}\n.vuecal__view-btn {\n   background: none;\n   border: none;\n   padding: 0.3em 1em;\n   height: 2.2em;\n   font-size: 1.3em;\n   border-bottom: 0 solid currentColor;\n   cursor: pointer;\n   color: inherit;\n   -webkit-box-sizing: border-box;\n   box-sizing: border-box;\n   -webkit-transition: 0.2s;\n   transition: 0.2s;\n}\n.vuecal__view-btn--active {\n   border-bottom-width: 2px;\n   background: hsla(0, 0%, 100%, 0.15);\n}\n.vuecal__title-bar {\n   background-color: rgba(0, 0, 0, 0.1);\n   display: -webkit-box;\n   display: -ms-flexbox;\n   display: flex;\n   -webkit-box-align: center;\n   -ms-flex-align: center;\n   align-items: center;\n   text-align: center;\n   -webkit-box-pack: justify;\n   -ms-flex-pack: justify;\n   justify-content: space-between;\n   font-size: 1.4em;\n   line-height: 1.3;\n   min-height: 2em;\n}\n.vuecal--xsmall .vuecal__title-bar {\n   font-size: 1.3em;\n}\n.vuecal__title {\n   position: relative;\n   -webkit-box-pack: center;\n   -ms-flex-pack: center;\n   justify-content: center;\n}\n.vuecal__title button {\n   cursor: pointer;\n   background: none;\n   border: none;\n}\n.vuecal__title button.slide-fade--left-leave-active,\n.vuecal__title button.slide-fade--right-leave-active {\n   width: 100%;\n}\n.vuecal__today-btn {\n   position: relative;\n   -webkit-box-align: center;\n   -ms-flex-align: center;\n   align-items: center;\n   display: -webkit-box;\n   display: -ms-flexbox;\n   display: flex;\n   font-size: 0.8em;\n   background: none;\n   border: none;\n}\n.vuecal__today-btn span.default {\n   font-size: 0.8em;\n   padding: 3px 6px;\n   text-transform: uppercase;\n   cursor: pointer;\n}\n.vuecal__arrow {\n   cursor: pointer;\n   position: relative;\n   z-index: 1;\n   background: none;\n   border: none;\n   white-space: nowrap;\n}\n.vuecal__arrow--prev {\n   margin-left: 0.6em;\n}\n.vuecal__arrow--next {\n   margin-right: 0.6em;\n}\n.vuecal__arrow i.angle {\n   display: inline-block;\n   border: solid currentColor;\n   border-width: 0 2px 2px 0;\n   padding: 0.25em;\n   -webkit-transform: rotate(-45deg);\n   transform: rotate(-45deg);\n}\n.vuecal__arrow--prev i.angle {\n   border-width: 2px 0 0 2px;\n}\n.vuecal__arrow--highlighted,\n.vuecal__today-btn--highlighted,\n.vuecal__view-btn--highlighted {\n   position: relative;\n   background-color: rgba(0, 0, 0, 0.04);\n}\n.vuecal__arrow--highlighted *,\n.vuecal__today-btn--highlighted *,\n.vuecal__view-btn--highlighted * {\n   pointer-events: none;\n}\n.vuecal__arrow--highlighted:after,\n.vuecal__arrow--highlighted:before,\n.vuecal__today-btn--highlighted:after,\n.vuecal__today-btn--highlighted:before,\n.vuecal__view-btn--highlighted:after,\n.vuecal__view-btn--highlighted:before {\n   content: \"\";\n   background-color: inherit;\n   -webkit-animation: sonar 0.8s ease-out infinite;\n   animation: sonar 0.8s ease-out infinite;\n   position: absolute;\n   top: 50%;\n   left: 50%;\n   pointer-events: none;\n}\n.vuecal__arrow--highlighted:before,\n.vuecal__today-btn--highlighted:before,\n.vuecal__view-btn--highlighted:before {\n   width: 3em;\n   height: 3em;\n   border-radius: 3em;\n   margin-top: -1.5em;\n   margin-left: -1.5em;\n}\n.vuecal__arrow--highlighted:after,\n.vuecal__today-btn--highlighted:after,\n.vuecal__view-btn--highlighted:after {\n   -webkit-animation-duration: 1.5s;\n   animation-duration: 1.5s;\n   -webkit-animation-delay: 0.1s;\n   animation-delay: 0.1s;\n   width: 2.6em;\n   height: 2.6em;\n   border-radius: 2.6em;\n   margin-top: -1.3em;\n   margin-left: -1.3em;\n}\n@-webkit-keyframes sonar {\n   0%,\n   20% {\n      opacity: 1;\n   }\n   to {\n      -webkit-transform: scale(2.5);\n      transform: scale(2.5);\n      opacity: 0;\n   }\n}\n@keyframes sonar {\n   0%,\n   20% {\n      opacity: 1;\n   }\n   to {\n      -webkit-transform: scale(2.5);\n      transform: scale(2.5);\n      opacity: 0;\n   }\n}\n@media screen and (max-width: 450px) {\n   .vuecal__title {\n      font-size: 0.9em;\n   }\n   .vuecal__view-btn {\n      padding-left: 0.6em;\n      padding-right: 0.6em;\n   }\n}\n@media screen and (max-width: 350px) {\n   .vuecal__view-btn {\n      font-size: 1.1em;\n   }\n}\n.vuecal__event {\n   /* color: #666; */\n   font-weight: bold;\n   background-color: hsla(0, 0%, 97.3%, 0.8);\n   position: relative;\n   -webkit-box-sizing: border-box;\n   box-sizing: border-box;\n   left: 0;\n   /* width: 100%; */\n   z-index: 1;\n   -webkit-transition: left 0.3s, width 0.3s, -webkit-box-shadow 0.3s;\n   transition: left 0.3s, width 0.3s, -webkit-box-shadow 0.3s;\n   transition: box-shadow 0.3s, left 0.3s, width 0.3s;\n   transition: box-shadow 0.3s, left 0.3s, width 0.3s, -webkit-box-shadow 0.3s;\n   overflow: hidden;\n}\n.vuecal--no-time .vuecal__event {\n   min-height: 8px;\n}\n.vuecal:not(.vuecal--dragging-event) .vuecal__event:hover {\n   z-index: 2;\n}\n.vuecal__cell .vuecal__event * {\n   -webkit-user-select: text;\n   -moz-user-select: text;\n   -ms-user-select: text;\n   user-select: text;\n}\n.vuecal--view-with-time .vuecal__event:not(.vuecal__event--all-day) {\n   position: absolute;\n}\n.vuecal--view-with-time .vuecal__bg .vuecal__event--all-day {\n   position: absolute;\n   top: 0;\n   bottom: 0;\n   z-index: 0;\n   opacity: 0.6;\n   width: auto;\n   right: 0;\n}\n.vuecal--view-with-time .vuecal__all-day .vuecal__event--all-day {\n   position: relative;\n   left: 0;\n}\n.vuecal__event--background {\n   z-index: 0;\n}\n.vuecal__event--focus,\n.vuecal__event:focus {\n   -webkit-box-shadow: 1px 1px 6px rgba(0, 0, 0, 0.2);\n   box-shadow: 1px 1px 6px rgba(0, 0, 0, 0.2);\n   z-index: 3;\n   outline: none;\n}\n.vuecal__event.vuecal__event--dragging {\n   opacity: 0.7;\n}\n.vuecal__event.vuecal__event--static {\n   opacity: 0;\n   -webkit-transition: opacity 0.1s;\n   transition: opacity 0.1s;\n}\n@-moz-document url-prefix() {\n   .vuecal__event.vuecal__event--dragging {\n      opacity: 1;\n   }\n}\n.vuecal__event-resize-handle {\n   position: absolute;\n   bottom: 0;\n   left: 0;\n   right: 0;\n   height: 1em;\n   background-color: hsla(0, 0%, 100%, 0.3);\n   opacity: 0;\n   -webkit-transform: translateY(110%);\n   transform: translateY(110%);\n   -webkit-transition: 0.3s;\n   transition: 0.3s;\n   cursor: ns-resize;\n}\n.vuecal__event--focus .vuecal__event-resize-handle,\n.vuecal__event--resizing .vuecal__event-resize-handle,\n.vuecal__event:focus .vuecal__event-resize-handle,\n.vuecal__event:hover .vuecal__event-resize-handle {\n   opacity: 1;\n   -webkit-transform: translateY(0);\n   transform: translateY(0);\n}\n.vuecal__event--dragging .vuecal__event-resize-handle {\n   display: none;\n}\n.vuecal__event-delete {\n   position: absolute;\n   top: 0;\n   left: 0;\n   right: 0;\n   display: -webkit-box;\n   display: -ms-flexbox;\n   display: flex;\n   -webkit-box-orient: vertical;\n   -webkit-box-direction: normal;\n   -ms-flex-direction: column;\n   flex-direction: column;\n   -webkit-box-align: center;\n   -ms-flex-align: center;\n   align-items: center;\n   -webkit-box-pack: center;\n   -ms-flex-pack: center;\n   justify-content: center;\n   height: 1.4em;\n   line-height: 1.4em;\n   background-color: rgba(221, 51, 51, 0.85);\n   color: #fff;\n   z-index: 0;\n   cursor: pointer;\n   -webkit-transform: translateY(-110%);\n   transform: translateY(-110%);\n   -webkit-transition: 0.3s;\n   transition: 0.3s;\n}\n.vuecal__event .vuecal__event-delete {\n   -webkit-user-select: none;\n   -moz-user-select: none;\n   -ms-user-select: none;\n   user-select: none;\n}\n.vuecal--full-height-delete .vuecal__event-delete {\n   height: auto;\n   bottom: 0;\n}\n.vuecal--full-height-delete .vuecal__event-delete:before {\n   content: \"\";\n   width: 1.7em;\n   height: 1.8em;\n   display: block;\n   background-image: url('data:image/svg+xml;utf8,<svg width=\"512\" height=\"512\" viewBox=\"0 0 512 512\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M12 1.5a10.5 10.5 0 100 21 10.5 10.5 0 000-21zm5 14.1c.2 0 .2.2.2.2l-.1.3-1 1-.3.1h-.2L12 13.5l-3.5 3.6h-.3-.3l-1-1v-.4-.2l3.6-3.6-3.6-3.5A.4.4 0 017 8l1-1 .3-.2c.1 0 .2 0 .2.2l3.6 3.5L15.6 7l.2-.2c.1 0 .2 0 .3.2l1 1v.5L13.5 12z\" fill=\"%23fff\" opacity=\".9\"/></svg>');\n}\n.vuecal__event--deletable .vuecal__event-delete {\n   -webkit-transform: translateY(0);\n   transform: translateY(0);\n   z-index: 1;\n}\n.vuecal__event--deletable.vuecal__event--dragging .vuecal__event-delete {\n   opacity: 0;\n   -webkit-transition: none;\n   transition: none;\n}\n.vuecal--month-view .vuecal__event-title {\n   font-size: 0.85em;\n}\n.vuecal--short-events .vuecal__event-title {\n   text-align: left;\n   overflow: hidden;\n   white-space: nowrap;\n   text-overflow: ellipsis;\n   padding: 0 3px;\n}\n.vuecal__event-content,\n.vuecal__event-title {\n   -webkit-hyphens: auto;\n   -ms-hyphens: auto;\n   hyphens: auto;\n}\n.vuecal__event-title--edit {\n   border-bottom: 1px solid transparent;\n   text-align: center;\n   -webkit-transition: 0.3s;\n   transition: 0.3s;\n   color: inherit;\n   background-image: url('data:image/svg+xml;utf8,<svg viewBox=\"0 0 512 512\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M442 150l-39 39-80-80 39-39q6-6 15-6t15 6l50 50q6 6 6 15t-6 15zM64 368l236-236 80 80-236 236H64v-80z\" fill=\"%23000\" opacity=\".4\"/></svg>');\n   background-repeat: no-repeat;\n   background-position: 120% 0.15em;\n   background-size: 0.4em;\n   outline: none;\n   width: 100%;\n}\n.vuecal__event-title--edit:focus,\n.vuecal__event-title--edit:hover {\n   border-color: rgba(0, 0, 0, 0.4);\n   background-position: 99% 0.15em;\n   background-size: 1.2em;\n}\n.vuecal__cell {\n   position: relative;\n   width: 100%;\n   display: -webkit-box;\n   display: -ms-flexbox;\n   display: flex;\n   -webkit-box-pack: center;\n   -ms-flex-pack: center;\n   justify-content: center;\n   -webkit-box-align: center;\n   -ms-flex-align: center;\n   align-items: center;\n   text-align: center;\n   -webkit-transition: background-color 0.15s ease-in-out;\n   transition: background-color 0.15s ease-in-out;\n}\n.vuecal__cells.month-view .vuecal__cell,\n.vuecal__cells.week-view .vuecal__cell {\n   width: 14.2857%;\n}\n.vuecal--hide-weekends .vuecal__cells.month-view .vuecal__cell,\n.vuecal--hide-weekends .vuecal__cells.week-view .vuecal__cell,\n.vuecal__cells.years-view .vuecal__cell {\n   width: 20%;\n}\n.vuecal__cells.year-view .vuecal__cell {\n   width: 33.33%;\n}\n.vuecal__cells.day-view .vuecal__cell {\n   -webkit-box-flex: 1;\n   -ms-flex: 1;\n   flex: 1;\n}\n.vuecal--overflow-x.vuecal--day-view .vuecal__cell {\n   width: auto;\n}\n.vuecal--click-to-navigate .vuecal__cell:not(.vuecal__cell--disabled) {\n   cursor: pointer;\n}\n.vuecal--day-view.vuecal--no-time .vuecal__cell:not(.vuecal__cell--has-splits),\n.vuecal--view-with-time .vuecal__cell,\n.vuecal--week-view.vuecal--no-time\n   .vuecal__cell:not(.vuecal__cell--has-splits) {\n   display: block;\n}\n.vuecal__cell.vuecal__cell--has-splits {\n   -webkit-box-orient: horizontal;\n   -webkit-box-direction: normal;\n   -ms-flex-direction: row;\n   flex-direction: row;\n   display: -webkit-box;\n   display: -ms-flexbox;\n   display: flex;\n}\n.vuecal__cell:before {\n   content: \"\";\n   position: absolute;\n   z-index: 0;\n   top: 0;\n   left: 0;\n   right: -1px;\n   bottom: -1px;\n   border: 1px solid hsla(0, 0%, 76.9%, 0.25);\n}\n.vuecal--overflow-x.vuecal--day-view .vuecal__cell:before {\n   bottom: 0;\n}\n.vuecal__cell--current,\n.vuecal__cell--today {\n   background-color: rgba(240, 240, 255, 0.4);\n   z-index: 1;\n}\n.vuecal__cell--selected {\n   background-color: rgba(235, 255, 245, 0.4);\n   z-index: 2;\n}\n.vuecal--day-view .vuecal__cell--selected {\n   background: none;\n}\n.vuecal__cell--out-of-scope {\n   color: rgba(0, 0, 0, 0.25);\n}\n.vuecal__cell--disabled {\n   color: rgba(0, 0, 0, 0.25);\n   cursor: not-allowed;\n}\n.vuecal__cell--highlighted:not(.vuecal__cell--has-splits),\n.vuecal__cell-split.vuecal__cell-split--highlighted {\n   background-color: rgba(0, 0, 0, 0.04);\n   -webkit-transition-duration: 5ms;\n   transition-duration: 5ms;\n}\n.vuecal__cell-content {\n   position: relative;\n   width: 100%;\n   height: 100%;\n   outline: none;\n}\n.vuecal--month-view .vuecal__cell-content,\n.vuecal--year-view .vuecal__cell-content,\n.vuecal--years-view .vuecal__cell-content {\n   -webkit-box-pack: center;\n   -ms-flex-pack: center;\n   justify-content: center;\n}\n.vuecal__cell-split {\n   display: -webkit-box;\n   display: -ms-flexbox;\n   display: flex;\n   -webkit-box-flex: 1;\n   -ms-flex-positive: 1;\n   flex-grow: 1;\n   -webkit-box-orient: vertical;\n   -webkit-box-direction: normal;\n   -ms-flex-direction: column;\n   flex-direction: column;\n   height: 100%;\n   position: relative;\n   -webkit-transition: background-color 0.15s ease-in-out;\n   transition: background-color 0.15s ease-in-out;\n}\n.vuecal__cell-events {\n   width: 100%;\n}\n.vuecal__cell-events-count {\n   left: 50%;\n   top: 65%;\n   -webkit-transform: translateX(-50%);\n   transform: translateX(-50%);\n   min-width: 12px;\n   height: 12px;\n   line-height: 12px;\n   padding: 0 3px;\n   background: #999;\n   color: #fff;\n   border-radius: 12px;\n   font-size: 10px;\n}\n.vuecal__cell-events-count,\n.vuecal__cell .vuecal__special-hours {\n   position: absolute;\n   -webkit-box-sizing: border-box;\n   box-sizing: border-box;\n}\n.vuecal__cell .vuecal__special-hours {\n   left: 0;\n   right: 0;\n}\n.vuecal--overflow-x.vuecal--week-view .vuecal__cell,\n.vuecal__cell-split {\n   overflow: hidden;\n}\n.vuecal__no-event {\n   padding-top: 1em;\n   color: #aaa;\n   justify-self: flex-start;\n   margin-bottom: auto;\n}\n.vuecal__all-day .vuecal__no-event {\n   display: none;\n}\n.vuecal__now-line {\n   position: absolute;\n   left: 0;\n   width: 100%;\n   height: 0;\n   color: red;\n   border-top: 1px solid currentColor;\n   opacity: 0.6;\n   z-index: 1;\n}\n.vuecal__now-line:before {\n   content: \"\";\n   position: absolute;\n   top: -6px;\n   left: 0;\n   border: 5px solid transparent;\n   border-left-color: currentColor;\n}\n.vuecal {\n   height: 100%;\n   -webkit-box-shadow: 0 0 0 1px inset rgba(0, 0, 0, 0.08);\n   box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.08);\n}\n.vuecal *,\n.vuecal--has-touch :not(.vuecal__event-title--edit) {\n   -webkit-user-select: none;\n   -moz-user-select: none;\n   -ms-user-select: none;\n   user-select: none;\n}\n.vuecal--has-touch :not(.vuecal__event-title--edit) {\n   -webkit-touch-callout: none;\n}\n.vuecal .clickable {\n   cursor: pointer;\n}\n.vuecal--drag-creating-event,\n.vuecal--resizing-event {\n   cursor: ns-resize;\n}\n.vuecal--dragging-event {\n   cursor: move;\n   cursor: -webkit-grabbing;\n   cursor: grabbing;\n}\n.vuecal .dragging-helper {\n   position: absolute;\n   width: 60px;\n   height: 40px;\n   background: rgba(138, 190, 230, 0.8);\n   border: 1px solid #61a9e0;\n   z-index: 10;\n}\n.vuecal--xsmall {\n   font-size: 0.9em;\n}\n.vuecal__flex {\n   display: -webkit-box;\n   display: -ms-flexbox;\n   display: flex;\n   -webkit-box-orient: horizontal;\n   -webkit-box-direction: normal;\n   -ms-flex-direction: row;\n   flex-direction: row;\n}\n.vuecal__flex[column] {\n   -webkit-box-orient: vertical;\n   -webkit-box-direction: normal;\n   -ms-flex-direction: column;\n   flex-direction: column;\n}\n.vuecal__flex[column],\n.vuecal__flex[grow] {\n   -webkit-box-flex: 1;\n   -ms-flex: 1 1 auto;\n   flex: 1 1 auto;\n}\n.vuecal__flex[grow] {\n   width: 100%;\n}\n.vuecal__flex[wrap] {\n   -ms-flex-wrap: wrap;\n   flex-wrap: wrap;\n}\n.vuecal__split-days-headers.slide-fade--right-leave-active {\n   display: none;\n}\n.vuecal--week-numbers.vuecal--month-view .vuecal__split-days-headers {\n   margin-left: 3em;\n}\n.vuecal--day-view:not(.vuecal--overflow-x) .vuecal__split-days-headers {\n   margin-left: 3em;\n   height: 2.2em;\n}\n.vuecal--day-view.vuecal--twelve-hour:not(.vuecal--overflow-x)\n   .vuecal__split-days-headers {\n   margin-left: 4em;\n}\n.vuecal__split-days-headers .day-split-header {\n   display: -webkit-box;\n   display: -ms-flexbox;\n   display: flex;\n   -webkit-box-flex: 1;\n   -ms-flex-positive: 1;\n   flex-grow: 1;\n   -ms-flex-preferred-size: 0;\n   flex-basis: 0;\n   -webkit-box-pack: center;\n   -ms-flex-pack: center;\n   justify-content: center;\n   -webkit-box-align: center;\n   -ms-flex-align: center;\n   align-items: center;\n   height: 100%;\n}\n.vuecal__split-days-headers\n   .vuecal--day-view.vuecal--overflow-x.vuecal--sticky-split-labels\n   .day-split-header {\n   height: 1.5em;\n}\n.vuecal__body {\n   position: relative;\n   overflow: hidden;\n}\n.vuecal__all-day {\n   min-height: 1.7em;\n   margin-bottom: -1px;\n   -ms-flex-negative: 0;\n   flex-shrink: 0;\n}\n.vuecal__all-day-text {\n   width: 3em;\n   -webkit-box-sizing: border-box;\n   box-sizing: border-box;\n   color: #999;\n   padding-right: 2px;\n   display: -webkit-box;\n   display: -ms-flexbox;\n   display: flex;\n   -ms-flex-negative: 0;\n   flex-shrink: 0;\n   -webkit-box-align: center;\n   -ms-flex-align: center;\n   align-items: center;\n   -webkit-box-pack: end;\n   -ms-flex-pack: end;\n   justify-content: flex-end;\n   border-bottom: 1px solid #ddd;\n   -webkit-hyphens: auto;\n   -ms-hyphens: auto;\n   hyphens: auto;\n}\n.vuecal__all-day-text span {\n   font-size: 0.85em;\n   text-align: right;\n   line-height: 1.1;\n}\n.vuecal--twelve-hour .vuecal__all-day > span {\n   width: 4em;\n}\n.vuecal__bg {\n   overflow: auto;\n   overflow-x: hidden;\n   -webkit-overflow-scrolling: touch;\n   min-height: 60px;\n   position: relative;\n   width: 100%;\n   margin-bottom: 1px;\n}\n.vuecal--no-time .vuecal__bg {\n   display: -webkit-box;\n   display: -ms-flexbox;\n   display: flex;\n   -webkit-box-flex: 1;\n   -ms-flex: 1 1 auto;\n   flex: 1 1 auto;\n   overflow: auto;\n}\n.vuecal__week-numbers {\n   width: 3em;\n   -ms-flex-negative: 0 !important;\n   flex-shrink: 0 !important;\n}\n.vuecal__week-numbers .vuecal__week-number-cell {\n   opacity: 0.4;\n   font-size: 0.9em;\n   -webkit-box-align: center;\n   -ms-flex-align: center;\n   align-items: center;\n   justify-items: center;\n   -webkit-box-pack: center;\n   -ms-flex-pack: center;\n   justify-content: center;\n}\n.vuecal__scrollbar-check {\n   position: absolute;\n   top: 0;\n   left: 0;\n   right: 0;\n   bottom: 0;\n   overflow: scroll;\n   visibility: hidden;\n   z-index: -1;\n}\n.vuecal__scrollbar-check div {\n   height: 120%;\n}\n.vuecal__time-column {\n   width: 3em;\n   height: 100%;\n   -ms-flex-negative: 0;\n   flex-shrink: 0;\n}\n.vuecal--twelve-hour .vuecal__time-column {\n   width: 4em;\n   font-size: 0.9em;\n}\n.vuecal--overflow-x.vuecal--week-view .vuecal__time-column {\n   margin-top: 2.8em;\n   -webkit-box-shadow: 0 1px 1px rgba(0, 0, 0, 0.3);\n   box-shadow: 0 1px 1px rgba(0, 0, 0, 0.3);\n}\n.vuecal--overflow-x.vuecal--week-view.vuecal--sticky-split-labels\n   .vuecal__time-column {\n   margin-top: 3.4em;\n}\n.vuecal--overflow-x.vuecal--day-view.vuecal--sticky-split-labels\n   .vuecal__time-column {\n   margin-top: 1.5em;\n}\n.vuecal__time-column .vuecal__time-cell {\n   color: #999;\n   text-align: right;\n   padding-right: 2px;\n   font-size: 0.9em;\n}\n.vuecal__time-column .vuecal__time-cell-line:before {\n   content: \"\";\n   position: absolute;\n   left: 0;\n   right: 0;\n   border-top: 1px solid hsla(0, 0%, 76.9%, 0.3);\n}\n.vuecal__cells {\n   margin: 0 1px 1px 0;\n}\n.vuecal--overflow-x.vuecal--day-view .vuecal__cells {\n   margin: 0;\n}\n.vuecal--events-on-month-view.vuecal--short-events .vuecal__cells {\n   width: 99.9%;\n}\n.vuecal--overflow-x.vuecal--day-view .vuecal__cells,\n.vuecal--overflow-x.vuecal--week-view .vuecal__cells {\n   -ms-flex-wrap: nowrap;\n   flex-wrap: nowrap;\n   overflow: auto;\n}\n.slide-fade--left-enter-active,\n.slide-fade--left-leave-active,\n.slide-fade--right-enter-active,\n.slide-fade--right-leave-active {\n   -webkit-transition: 0.25s ease-out;\n   transition: 0.25s ease-out;\n}\n.slide-fade--left-enter,\n.slide-fade--right-leave-to {\n   -webkit-transform: translateX(-15px);\n   transform: translateX(-15px);\n   opacity: 0;\n}\n.slide-fade--left-leave-to,\n.slide-fade--right-enter {\n   -webkit-transform: translateX(15px);\n   transform: translateX(15px);\n   opacity: 0;\n}\n.slide-fade--left-leave-active,\n.slide-fade--right-leave-active {\n   position: absolute !important;\n   height: 100%;\n}\n.vuecal__title-bar .slide-fade--left-leave-active,\n.vuecal__title-bar .slide-fade--right-leave-active {\n   left: 0;\n   right: 0;\n   height: auto;\n}\n.vuecal__heading .slide-fade--left-leave-active,\n.vuecal__heading .slide-fade--right-leave-active {\n   display: -webkit-box;\n   display: -ms-flexbox;\n   display: flex;\n   -webkit-box-align: center;\n   -ms-flex-align: center;\n   align-items: center;\n}\n.vuecal--green-theme .vuecal__cell-events-count,\n.vuecal--green-theme .vuecal__menu {\n   background-color: #42b983;\n   color: #fff;\n}\n.vuecal--green-theme .vuecal__title-bar {\n   background-color: #e4f5ef;\n}\n.vuecal--green-theme .vuecal__cell--current,\n.vuecal--green-theme .vuecal__cell--today {\n   background-color: rgba(240, 240, 255, 0.4);\n}\n.vuecal--green-theme:not(.vuecal--day-view) .vuecal__cell--selected {\n   background-color: rgba(235, 255, 245, 0.4);\n}\n.vuecal--green-theme .vuecal__cell--selected:before {\n   border-color: rgba(66, 185, 131, 0.5);\n}\n.vuecal--green-theme .vuecal__cell--highlighted:not(.vuecal__cell--has-splits),\n.vuecal--green-theme .vuecal__cell-split--highlighted {\n   background-color: rgba(195, 255, 225, 0.5);\n}\n.vuecal--green-theme .vuecal__arrow--highlighted,\n.vuecal--green-theme .vuecal__today-btn--highlighted,\n.vuecal--green-theme .vuecal__view-btn--highlighted {\n   background-color: rgba(136, 236, 191, 0.25);\n}\n.vuecal--blue-theme .vuecal__cell-events-count,\n.vuecal--blue-theme .vuecal__menu {\n   background-color: rgba(66, 163, 185, 0.8);\n   color: #fff;\n}\n.vuecal--blue-theme .vuecal__title-bar {\n   background-color: rgba(0, 165, 188, 0.3);\n}\n.vuecal--blue-theme .vuecal__cell--current,\n.vuecal--blue-theme .vuecal__cell--today {\n   background-color: rgba(240, 240, 255, 0.4);\n}\n.vuecal--blue-theme:not(.vuecal--day-view) .vuecal__cell--selected {\n   background-color: rgba(235, 253, 255, 0.4);\n}\n.vuecal--blue-theme .vuecal__cell--selected:before {\n   border-color: rgba(115, 191, 204, 0.5);\n}\n.vuecal--blue-theme .vuecal__cell--highlighted:not(.vuecal__cell--has-splits),\n.vuecal--blue-theme .vuecal__cell-split--highlighted {\n   background-color: rgba(0, 165, 188, 0.06);\n}\n.vuecal--blue-theme .vuecal__arrow--highlighted,\n.vuecal--blue-theme .vuecal__today-btn--highlighted,\n.vuecal--blue-theme .vuecal__view-btn--highlighted {\n   background-color: rgba(66, 163, 185, 0.2);\n}\n.vuecal--rounded-theme .vuecal__weekdays-headings {\n   border: none;\n}\n.vuecal--rounded-theme .vuecal__cell,\n.vuecal--rounded-theme .vuecal__cell:before {\n   background: none;\n   border: none;\n}\n.vuecal--rounded-theme .vuecal__cell--out-of-scope {\n   opacity: 0.4;\n}\n.vuecal--rounded-theme .vuecal__cell-content {\n   width: 30px;\n   height: 30px;\n   -webkit-box-flex: 0;\n   -ms-flex-positive: 0;\n   flex-grow: 0;\n   border: 1px solid transparent;\n   border-radius: 30px;\n   color: #333;\n}\n.vuecal--rounded-theme.vuecal--day-view .vuecal__cell-content {\n   width: auto;\n   background: none;\n}\n.vuecal--rounded-theme.vuecal--year-view .vuecal__cell {\n   width: 33.33%;\n}\n.vuecal--rounded-theme.vuecal--year-view .vuecal__cell-content {\n   width: 85px;\n}\n.vuecal--rounded-theme.vuecal--years-view .vuecal__cell-content {\n   width: 52px;\n}\n.vuecal--rounded-theme .vuecal__cell {\n   background-color: transparent !important;\n}\n.vuecal--rounded-theme.vuecal--green-theme:not(.vuecal--day-view)\n   .vuecal__cell-content {\n   background-color: #f1faf7;\n}\n.vuecal--rounded-theme.vuecal--green-theme:not(.vuecal--day-view)\n   .vuecal__cell--today\n   .vuecal__cell-content {\n   background-color: #42b983;\n   color: #fff;\n}\n.vuecal--rounded-theme.vuecal--green-theme\n   .vuecal--day-view\n   .vuecal__cell--today:before {\n   background-color: rgba(66, 185, 131, 0.05);\n}\n.vuecal--rounded-theme.vuecal--green-theme:not(.vuecal--day-view)\n   .vuecal__cell--selected\n   .vuecal__cell-content {\n   border-color: #42b983;\n}\n.vuecal--rounded-theme.vuecal--green-theme\n   .vuecal__cell--highlighted:not(.vuecal__cell--has-splits),\n.vuecal--rounded-theme.vuecal--green-theme .vuecal__cell-split--highlighted {\n   background-color: rgba(195, 255, 225, 0.5);\n}\n.vuecal--rounded-theme.vuecal--blue-theme:not(.vuecal--day-view)\n   .vuecal__cell-content {\n   background-color: rgba(100, 182, 255, 0.2);\n}\n.vuecal--rounded-theme.vuecal--blue-theme:not(.vuecal--day-view)\n   .vuecal__cell--today\n   .vuecal__cell-content {\n   background-color: #8fb7e4;\n   color: #fff;\n}\n.vuecal--rounded-theme.vuecal--blue-theme\n   .vuecal--day-view\n   .vuecal__cell--today:before {\n   background-color: rgba(143, 183, 228, 0.1);\n}\n.vuecal--rounded-theme.vuecal--blue-theme:not(.vuecal--day-view)\n   .vuecal__cell--selected\n   .vuecal__cell-content {\n   border-color: #61a9e0;\n}\n.vuecal--rounded-theme.vuecal--blue-theme\n   .vuecal__cell--highlighted:not(.vuecal__cell--has-splits),\n.vuecal--rounded-theme.vuecal--blue-theme .vuecal__cell-split--highlighted {\n   background-color: rgba(0, 165, 188, 0.06);\n}\n.vuecal--date-picker .vuecal__title-bar {\n   font-size: 1.2em;\n}\n.vuecal--date-picker .vuecal__heading {\n   height: 2.2em;\n   font-weight: 500;\n   opacity: 0.4;\n}\n.vuecal--date-picker .vuecal__weekdays-headings {\n   border: none;\n}\n.vuecal--date-picker .vuecal__body {\n   margin-left: 1px;\n}\n.vuecal--date-picker .vuecal__cell,\n.vuecal--date-picker .vuecal__cell:before {\n   background: none;\n   border: none;\n}\n.vuecal--date-picker .vuecal__cell-content {\n   height: 26px;\n   -webkit-box-flex: 0;\n   -ms-flex-positive: 0;\n   flex-grow: 0;\n   border: 1px solid transparent;\n   border-radius: 25px;\n   -webkit-transition: background-color 0.2s cubic-bezier(0.39, 0.58, 0.57, 1);\n   transition: background-color 0.2s cubic-bezier(0.39, 0.58, 0.57, 1);\n}\n.vuecal--date-picker.vuecal--years-view .vuecal__cell-content {\n   -webkit-box-flex: 0;\n   -ms-flex: 0;\n   flex: 0;\n   padding: 0 4px;\n   height: 24px;\n}\n.vuecal--date-picker.vuecal--year-view .vuecal__cell-content {\n   -webkit-box-flex: 0;\n   -ms-flex: 0;\n   flex: 0;\n   padding: 0 15px;\n}\n.vuecal--date-picker.vuecal--month-view .vuecal__cell-content {\n   width: 26px;\n}\n.vuecal--date-picker:not(.vuecal--day-view) .vuecal__cell-content:hover {\n   background-color: rgba(0, 0, 0, 0.1);\n}\n.vuecal--date-picker:not(.vuecal--day-view)\n   .vuecal__cell--selected\n   .vuecal__cell-content {\n   background-color: #42b982;\n   color: #fff;\n}\n.vuecal--date-picker:not(.vuecal--day-view)\n   .vuecal__cell--current\n   .vuecal__cell-content,\n.vuecal--date-picker:not(.vuecal--day-view)\n   .vuecal__cell--today\n   .vuecal__cell-content {\n   border-color: #42b982;\n}\n</style>\n","<!--\nCopyright 2020 SpinalCom - www.spinalcom.com\n\nThis file is part of SpinalCore.\n\nPlease read all of the following terms and conditions\nof the Free Software license Agreement (\"Agreement\")\ncarefully.\n\nThis Agreement is a legally binding contract between\nthe Licensee (as defined below) and SpinalCom that\nsets forth the terms and conditions that govern your\nuse of the Program. By installing and/or using the\nProgram, you agree to abide by all the terms and\nconditions stated or referenced herein.\n\nIf you do not agree to abide by these terms and\nconditions, do not demonstrate your acceptance and do\nnot install or use the Program.\nYou should have received a copy of the license along\nwith this file. If not, see\n<http://resources.spinalcom.com/licenses.pdf>.\n-->\n\n<template>\n  <div class=\"calendar_container\">\n    <vue-cal ref=\"calendarVue\"\n             v-bind=\"allProps\">\n\n      <!-- <template v-slot:event=\"{ event, view }\">\n        <div class=\"event-content\"\n             :style=\"{backgroundColor : event.color}\">hello world</div>\n      </template> -->\n\n      <template v-slot:event=\"{ event, view }\">\n        <v-icon>{{ event.icon }}</v-icon>\n\n        <div class=\"vuecal__event-title\"\n             v-html=\"event.title\" />\n\n        <div class=\"vuecal__event-title vuecal__event-title--edit\"\n             contenteditable\n             @blur=\"event.title = $event.target.innerHTML\"\n             v-html=\"event.title\" />\n\n        <small class=\"vuecal__event-time\">\n\n          <strong>Event start:</strong>\n          <span>{{ event.start.formatTime(\"h O'clock\") }}</span><br />\n          <strong>Event end:</strong>\n          <span>{{ event.end.formatTime(\"h O'clock\") }}</span>\n        </small>\n      </template>\n    </vue-cal>\n  </div>\n\n</template>\n\n<script>\nimport VueCal from \"vue-cal\";\n\nexport default {\n  name: \"event-calendar\",\n  props: Object.assign({}, VueCal.props),\n  components: { \"vue-cal\": VueCal },\n  data() {\n    return {\n      allProps: {},\n    };\n  },\n  mounted() {\n    // this.allProps = this.$options.propsData;\n    // console.log(\"props\", this);\n    this.allProps = this.$props;\n  },\n\n  watch: {\n    events() {\n      // this.allProps = this.$props;\n    },\n  },\n};\n</script>\n\n<style scoped>\n/* .calendar_container {\n  width: 99%;\n  height: 99%;\n  margin: auto;\n} */\n</style>\n\n\n<style>\n/*\n.vuecal__weekdays-headings {\n  border-bottom: 1px solid #ddd;\n  margin-bottom: -1px;\n}\n.vuecal--view-with-time .vuecal__weekdays-headings {\n  padding-left: 3em;\n}\n.vuecal--view-with-time.vuecal--twelve-hour .vuecal__weekdays-headings {\n  font-size: 0.9em;\n  padding-left: 4em;\n}\n.vuecal--overflow-x.vuecal--view-with-time .vuecal__weekdays-headings {\n  padding-left: 0;\n}\n.vuecal__heading {\n  width: 100%;\n  height: 2.8em;\n  font-weight: 400;\n  -webkit-box-pack: center;\n  -ms-flex-pack: center;\n  justify-content: center;\n  text-align: center;\n  -webkit-box-align: center;\n  -ms-flex-align: center;\n  align-items: center;\n  position: relative;\n  overflow: hidden;\n}\n.vuecal__heading > .vuecal__flex {\n  width: 100%;\n  height: 100%;\n  -webkit-box-align: initial !important;\n  -ms-flex-align: initial !important;\n  align-items: normal !important;\n}\n.vuecal--sticky-split-labels .vuecal__heading {\n  height: 3.4em;\n}\n.vuecal--day-view .vuecal__heading,\n.vuecal--month-view .vuecal__heading,\n.vuecal--week-view .vuecal__heading {\n  width: 14.2857%;\n}\n.vuecal--hide-weekends.vuecal--day-view .vuecal__heading,\n.vuecal--hide-weekends.vuecal--month-view .vuecal__heading,\n.vuecal--hide-weekends.vuecal--week-view .vuecal__heading,\n.vuecal--years-view .vuecal__heading {\n  width: 20%;\n}\n.vuecal--year-view .vuecal__heading {\n  width: 33.33%;\n}\n.vuecal__heading .weekday-label {\n  -ms-flex-negative: 0;\n  flex-shrink: 0;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: center;\n  -ms-flex-pack: center;\n  justify-content: center;\n  -webkit-box-align: center;\n  -ms-flex-align: center;\n  align-items: center;\n}\n.vuecal--small .vuecal__heading .small,\n.vuecal--xsmall .vuecal__heading .xsmall {\n  display: block;\n}\n.vuecal--small .vuecal__heading .full,\n.vuecal--small .vuecal__heading .xsmall,\n.vuecal--xsmall .vuecal__heading .full,\n.vuecal--xsmall .vuecal__heading .small,\n.vuecal__heading .small,\n.vuecal__heading .xsmall {\n  display: none;\n}\n.vuecal .vuecal__split-days-headers {\n  -webkit-box-align: center;\n  -ms-flex-align: center;\n  align-items: center;\n}\n@media screen and (max-width: 550px) {\n  .vuecal__heading {\n    line-height: 1.2;\n  }\n  .vuecal--small .vuecal__heading .small,\n  .vuecal--xsmall .vuecal__heading .xsmall,\n  .vuecal__heading .small {\n    display: block;\n  }\n  .vuecal--small .vuecal__heading .full,\n  .vuecal--small .vuecal__heading .xsmall,\n  .vuecal--xsmall .vuecal__heading .full,\n  .vuecal--xsmall .vuecal__heading .small,\n  .vuecal__heading .full,\n  .vuecal__heading .xsmall {\n    display: none;\n  }\n  .vuecal--overflow-x .vuecal__heading .full,\n  .vuecal--small.vuecal--overflow-x .vuecal__heading .small,\n  .vuecal--xsmall.vuecal--overflow-x .vuecal__heading .xsmall {\n    display: block;\n  }\n  .vuecal--overflow-x .vuecal__heading .small,\n  .vuecal--overflow-x .vuecal__heading .xsmall,\n  .vuecal--small.vuecal--overflow-x .vuecal__heading .full,\n  .vuecal--small.vuecal--overflow-x .vuecal__heading .xsmall,\n  .vuecal--xsmall.vuecal--overflow-x .vuecal__heading .full,\n  .vuecal--xsmall.vuecal--overflow-x .vuecal__heading .small {\n    display: none;\n  }\n}\n@media screen and (max-width: 450px) {\n  .vuecal--small .vuecal__heading .xsmall,\n  .vuecal--xsmall .vuecal__heading .xsmall,\n  .vuecal__heading .xsmall {\n    display: block;\n  }\n  .vuecal--small .vuecal__heading .full,\n  .vuecal--small .vuecal__heading .small,\n  .vuecal--xsmall .vuecal__heading .full,\n  .vuecal--xsmall .vuecal__heading .small,\n  .vuecal__heading .full,\n  .vuecal__heading .small {\n    display: none;\n  }\n  .vuecal--small.vuecal--overflow-x .vuecal__heading .small,\n  .vuecal--xsmall.vuecal--overflow-x .vuecal__heading .xsmall {\n    display: block;\n  }\n  .vuecal--small.vuecal--overflow-x .vuecal__heading .full,\n  .vuecal--small.vuecal--overflow-x .vuecal__heading .xsmall,\n  .vuecal--xsmall.vuecal--overflow-x .vuecal__heading .full,\n  .vuecal--xsmall.vuecal--overflow-x .vuecal__heading .small {\n    display: none;\n  }\n}\n.vuecal__header button {\n  background: none;\n  border: none;\n  outline: none;\n  font: inherit;\n}\n.vuecal__menu {\n  padding: 0;\n  margin: 0;\n  list-style-type: none;\n  -webkit-box-pack: center;\n  -ms-flex-pack: center;\n  justify-content: center;\n  background-color: rgba(0, 0, 0, 0.02);\n}\n.vuecal__menu button {\n  padding: 0.3em 1em;\n  height: 2.2em;\n  font-size: 1.3em;\n  border-bottom: 0 solid currentColor;\n  cursor: pointer;\n  color: inherit;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  -webkit-transition: 0.2s;\n  transition: 0.2s;\n}\n.vuecal__menu button.active {\n  border-bottom-width: 2px;\n  background: hsla(0, 0%, 100%, 0.15);\n}\n.vuecal__title-bar {\n  background-color: rgba(0, 0, 0, 0.1);\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n  -ms-flex-align: center;\n  align-items: center;\n  text-align: center;\n  -webkit-box-pack: justify;\n  -ms-flex-pack: justify;\n  justify-content: space-between;\n  font-size: 1.4em;\n  line-height: 1.3;\n  min-height: 2em;\n}\n.vuecal--xsmall .vuecal__title-bar {\n  font-size: 1.3em;\n}\n.vuecal__title {\n  position: relative;\n  -webkit-box-pack: center;\n  -ms-flex-pack: center;\n  justify-content: center;\n}\n.vuecal__title button {\n  cursor: pointer;\n}\n.vuecal__title button.slide-fade--left-leave-active,\n.vuecal__title button.slide-fade--right-leave-active {\n  width: 100%;\n}\n.vuecal__today-btn {\n  position: relative;\n  -webkit-box-align: center;\n  -ms-flex-align: center;\n  align-items: center;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  font-size: 0.8em;\n}\n.vuecal__today-btn span.default {\n  font-size: 0.8em;\n  padding: 3px 6px;\n  text-transform: uppercase;\n  cursor: pointer;\n}\n.vuecal__arrow {\n  cursor: pointer;\n  position: relative;\n  z-index: 1;\n}\n.vuecal__arrow--prev {\n  padding-left: 0.6em;\n}\n.vuecal__arrow--next {\n  padding-right: 0.6em;\n}\n.vuecal__arrow i.angle {\n  display: inline-block;\n  border: solid currentColor;\n  border-width: 0 2px 2px 0;\n  padding: 0.25em;\n  -webkit-transform: rotate(-45deg);\n  transform: rotate(-45deg);\n}\n.vuecal__arrow--prev i.angle {\n  border-width: 2px 0 0 2px;\n}\n@media screen and (max-width: 450px) {\n  .vuecal__menu li {\n    padding-left: 0.3em;\n    padding-right: 0.3em;\n  }\n}\n@media screen and (max-width: 350px) {\n  .vuecal__menu li {\n    font-size: 1.1em;\n  }\n}\n.vuecal__event {\n  color: #fff;\n  font-weight: bold;\n  background-color: #448aff; \n  position: relative;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  left: 0;\n  width: 100%;\n  z-index: 1;\n  -webkit-transition: left 0.3s, width 0.3s, -webkit-box-shadow 0.3s;\n  transition: left 0.3s, width 0.3s, -webkit-box-shadow 0.3s;\n  transition: box-shadow 0.3s, left 0.3s, width 0.3s;\n  transition: box-shadow 0.3s, left 0.3s, width 0.3s, -webkit-box-shadow 0.3s;\n  overflow: hidden;\n}\n.vuecal:not(.vuecal--dragging-event) .vuecal__event:hover {\n  z-index: 2;\n}\n.vuecal__cell .vuecal__event * {\n  -webkit-user-select: auto;\n  -moz-user-select: auto;\n  -ms-user-select: auto;\n  user-select: auto;\n}\n.vuecal--view-with-time .vuecal__event:not(.vuecal__event--all-day) {\n  position: absolute;\n}\n.vuecal--view-with-time .vuecal__bg .vuecal__event--all-day {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  z-index: 0;\n  opacity: 0.6;\n  width: auto;\n  right: 0;\n}\n.vuecal--view-with-time .vuecal__all-day .vuecal__event--all-day {\n  position: relative;\n  left: 0;\n}\n.vuecal__event--background {\n  z-index: 0;\n}\n.vuecal__event--focus,\n.vuecal__event:focus {\n  -webkit-box-shadow: 1px 1px 6px rgba(0, 0, 0, 0.2);\n  box-shadow: 1px 1px 6px rgba(0, 0, 0, 0.2);\n  z-index: 3;\n  outline: none;\n}\n.vuecal__event-resize-handle {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  height: 1em;\n  background-color: hsla(0, 0%, 100%, 0.3);\n  opacity: 0;\n  -webkit-transform: translateY(110%);\n  transform: translateY(110%);\n  -webkit-transition: 0.3s;\n  transition: 0.3s;\n  cursor: ns-resize;\n}\n.vuecal__event--focus .vuecal__event-resize-handle,\n.vuecal__event:focus .vuecal__event-resize-handle,\n.vuecal__event:hover .vuecal__event-resize-handle {\n  opacity: 1;\n  -webkit-transform: translateY(0);\n  transform: translateY(0);\n}\n.vuecal__event-delete {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n  -ms-flex-direction: column;\n  flex-direction: column;\n  -webkit-box-align: center;\n  -ms-flex-align: center;\n  align-items: center;\n  -webkit-box-pack: center;\n  -ms-flex-pack: center;\n  justify-content: center;\n  height: 1.4em;\n  line-height: 1.4em;\n  background-color: rgba(221, 51, 51, 0.85);\n  color: #fff;\n  z-index: 0;\n  cursor: pointer;\n  -webkit-transform: translateY(-110%);\n  transform: translateY(-110%);\n  -webkit-transition: 0.3s;\n  transition: 0.3s;\n}\n.vuecal--full-height-delete .vuecal__event-delete {\n  height: auto;\n  bottom: 0;\n}\n.vuecal--full-height-delete .vuecal__event-delete:before {\n  content: \"\";\n  width: 1.7em;\n  height: 1.8em;\n  display: block;\n  background-image: url('data:image/svg+xml;utf8,<svg width=\"512\" height=\"512\" viewBox=\"0 0 512 512\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"><path d=\"m256 33c-124 0-224 100-224 224 0 124 100 224 224 224 124 0 224-100 224-224 0-124-100-224-224-224z m108 300c2 1 3 3 3 5 0 2-1 4-3 6l-21 21c-2 2-4 3-6 3-2 0-4-1-5-3l-76-75-75 76c-2 1-4 2-6 2-2 0-4-1-6-2l-21-22c-2-2-2-4-2-6 0-2 0-4 2-5l76-76-76-75c-3-3-3-9 0-12l21-21c2-2 4-3 6-3 2 0 4 1 5 3l76 74 76-74c1-2 3-3 5-3 3 0 5 1 6 3l22 21c3 3 3 9 0 12l-76 75z\" transform=\"scale(0.046875 0.046875)\" fill=\"%23fff\" opacity=\"0.9\"/></svg>');\n}\n.vuecal__event--deletable .vuecal__event-delete {\n  -webkit-transform: translateY(0);\n  transform: translateY(0);\n  z-index: 1;\n}\n.vuecal--month-view .vuecal__event-title {\n  font-size: 0.85em;\n}\n.vuecal--short-events .vuecal__event-title {\n  text-align: left;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  padding: 0 3px;\n}\n.vuecal__event-content,\n.vuecal__event-title {\n  -webkit-hyphens: auto;\n  -ms-hyphens: auto;\n  hyphens: auto;\n}\n.vuecal__event-title--edit {\n  border-bottom: 1px solid transparent;\n  text-align: center;\n  -webkit-transition: 0.3s;\n  transition: 0.3s;\n  color: inherit;\n  background-image: url('data:image/svg+xml;utf8,<svg width=\"512\" height=\"512\" viewBox=\"0 0 512 512\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"><path d=\"m163 440l-91-91 251-250 90 90z m309-352l-48-48c-12-11-32-11-45 2l-45 45 91 91 45-45c13-13 13-33 2-45z m-408 275l-32 117 117-32z\" fill=\"%23000\" opacity=\"0.4\"/></svg>');\n  background-repeat: no-repeat;\n  background-position: 120% 0.15em;\n  background-size: 0.4em;\n  outline: none;\n  width: 100%;\n}\n.vuecal__event-title--edit:focus,\n.vuecal__event-title--edit:hover {\n  border-color: rgba(0, 0, 0, 0.4);\n  background-position: 99% 0.15em;\n  background-size: 1.2em;\n}\n.vuecal__cell {\n  position: relative;\n  width: 100%;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: center;\n  -ms-flex-pack: center;\n  justify-content: center;\n  -webkit-box-align: center;\n  -ms-flex-align: center;\n  align-items: center;\n  text-align: center;\n}\n.vuecal__cells.day-view .vuecal__cell,\n.vuecal__cells.month-view .vuecal__cell,\n.vuecal__cells.week-view .vuecal__cell {\n  width: 14.2857%;\n}\n.vuecal--hide-weekends .vuecal__cells.day-view .vuecal__cell,\n.vuecal--hide-weekends .vuecal__cells.month-view .vuecal__cell,\n.vuecal--hide-weekends .vuecal__cells.week-view .vuecal__cell,\n.vuecal__cells.years-view .vuecal__cell {\n  width: 20%;\n}\n.vuecal__cells.year-view .vuecal__cell {\n  width: 33.33%;\n}\n.vuecal__cells.day-view .vuecal__cell {\n  -webkit-box-flex: 1;\n  -ms-flex: 1;\n  flex: 1;\n}\n.vuecal--click-to-navigate .vuecal__cell {\n  cursor: pointer;\n}\n.vuecal--day-view.vuecal--no-time .vuecal__cell,\n.vuecal--view-with-time .vuecal__cell,\n.vuecal--week-view.vuecal--no-time .vuecal__cell {\n  display: block;\n}\n.vuecal__cell.vuecal__cell--has-splits {\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: normal;\n  -ms-flex-direction: row;\n  flex-direction: row;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n}\n.vuecal__cell-content {\n  position: relative;\n  height: 100%;\n  outline: none;\n}\n.vuecal__cell-split {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-flex: 1;\n  -ms-flex-positive: 1;\n  flex-grow: 1;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n  -ms-flex-direction: column;\n  flex-direction: column;\n  height: 100%;\n  position: relative;\n}\n.vuecal__cell:before {\n  content: \"\";\n  position: absolute;\n  z-index: 0;\n  top: 0;\n  left: 0;\n  right: -1px;\n  bottom: -1px;\n  border: 1px solid #ddd;\n}\n.vuecal__cell.current,\n.vuecal__cell.today {\n  background-color: rgba(240, 240, 255, 0.4);\n  z-index: 1;\n}\n.vuecal__cell.selected {\n  background-color: rgba(235, 255, 245, 0.4);\n  z-index: 2;\n}\n.vuecal--day-view .vuecal__cell.selected {\n  background: none;\n}\n.vuecal__cell.out-of-scope {\n  color: #ccc;\n}\n.vuecal__cell.disabled {\n  color: #ccc;\n  cursor: not-allowed;\n}\n.vuecal__cell-events-count {\n  position: absolute;\n  left: 50%;\n  top: 65%;\n  -webkit-transform: translateX(-50%);\n  transform: translateX(-50%);\n  min-width: 12px;\n  height: 30px;\n  width: 30px;\n  line-height: 12px;\n  padding: 0 3px;\n  background: #448aff;\n  color: #fff;\n  border-radius: 12px;\n  font-size: 10px;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-size: 16px;\n  font-weight: bold;\n}\n\n.vuecal__cell-content {\n  width: 100%;\n}\n.vuecal--month-view .vuecal__cell-content,\n.vuecal--year-view .vuecal__cell-content,\n.vuecal--years-view .vuecal__cell-content {\n  -webkit-box-pack: center;\n  -ms-flex-pack: center;\n  justify-content: center;\n}\n.vuecal__cell-events {\n  width: 100%;\n}\n.vuecal--overflow-x.vuecal--week-view .vuecal__cell,\n.vuecal__cell-split {\n  overflow: hidden;\n}\n.vuecal__no-event {\n  padding-top: 1em;\n  color: #aaa;\n  justify-self: flex-start;\n  margin-bottom: auto;\n}\n.vuecal__all-day .vuecal__no-event {\n  display: none;\n}\n.vuecal__now-line {\n  position: absolute;\n  left: 0;\n  width: 100%;\n  height: 0;\n  color: red;\n  border-top: 1px solid currentColor;\n  opacity: 0.6;\n}\n.vuecal__now-line:before {\n  content: \"\";\n  position: absolute;\n  top: -6px;\n  left: 0;\n  border: 5px solid transparent;\n  border-left-color: currentColor;\n}\n.vuecal {\n  height: 100%;\n  overflow: hidden;\n  -webkit-box-shadow: 0 0 0 1px inset rgba(0, 0, 0, 0.08);\n  box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.08);\n}\n.vuecal * {\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n.vuecal .clickable {\n  cursor: pointer;\n}\n.vuecal--dragging-event {\n  cursor: ns-resize;\n}\n.vuecal--xsmall {\n  font-size: 0.9em;\n}\n.vuecal__flex {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: normal;\n  -ms-flex-direction: row;\n  flex-direction: row;\n}\n.vuecal__flex[column] {\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n  -ms-flex-direction: column;\n  flex-direction: column;\n}\n.vuecal__flex[column],\n.vuecal__flex[grow] {\n  -webkit-box-flex: 1;\n  -ms-flex: 1 1 auto;\n  flex: 1 1 auto;\n}\n.vuecal__flex[grow] {\n  width: 100%;\n}\n.vuecal__flex[wrap] {\n  -ms-flex-wrap: wrap;\n  flex-wrap: wrap;\n}\n.vuecal__split-days-headers.slide-fade--right-leave-active {\n  display: none;\n}\n.vuecal--day-view .vuecal__split-days-headers {\n  margin-left: 3em;\n  height: 2.2em;\n}\n.vuecal--day-view.vuecal--twelve-hour .vuecal__split-days-headers {\n  margin-left: 4em;\n}\n.vuecal__split-days-headers .day-split-header {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-flex: 1;\n  -ms-flex-positive: 1;\n  flex-grow: 1;\n  -webkit-box-pack: center;\n  -ms-flex-pack: center;\n  justify-content: center;\n}\n.vuecal__body {\n  position: relative;\n  overflow: hidden;\n}\n.vuecal__all-day {\n  min-height: 1.7em;\n  margin-bottom: -1px;\n  -ms-flex-negative: 0;\n  flex-shrink: 0;\n}\n.vuecal__all-day > span {\n  width: 3em;\n  min-width: 3em;\n  color: #999;\n  padding-right: 2px;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n  -ms-flex-align: center;\n  align-items: center;\n  -webkit-box-pack: end;\n  -ms-flex-pack: end;\n  justify-content: flex-end;\n  border-bottom: 1px solid #ddd;\n  -webkit-hyphens: auto;\n  -ms-hyphens: auto;\n  hyphens: auto;\n}\n.vuecal__all-day > span span {\n  font-size: 0.85em;\n  text-align: right;\n  line-height: 1.1;\n}\n.vuecal--twelve-hour .vuecal__all-day > span {\n  width: 4em;\n  min-width: 4em;\n}\n.vuecal__bg {\n  overflow: auto;\n  overflow-x: hidden;\n  -webkit-overflow-scrolling: touch;\n  min-height: 60px;\n  position: relative;\n  width: 100%;\n  margin-bottom: 1px;\n}\n.vuecal--no-time .vuecal__bg {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-flex: 1;\n  -ms-flex: 1 1 auto;\n  flex: 1 1 auto;\n  overflow: visible;\n}\n.vuecal__time-column {\n  width: 3em;\n  height: 100%;\n  -ms-flex-negative: 0;\n  flex-shrink: 0;\n}\n.vuecal--twelve-hour .vuecal__time-column {\n  width: 4em;\n  font-size: 0.9em;\n}\n.vuecal--overflow-x.vuecal--week-view .vuecal__time-column {\n  margin-top: 2.8em;\n  -webkit-box-shadow: 0 1px 1px rgba(0, 0, 0, 0.3);\n  box-shadow: 0 1px 1px rgba(0, 0, 0, 0.3);\n}\n.vuecal--overflow-x.vuecal--week-view.vuecal--sticky-split-labels\n  .vuecal__time-column {\n  margin-top: 3.4em;\n}\n.vuecal__time-column .vuecal__time-cell {\n  color: #999;\n  text-align: right;\n  padding-right: 2px;\n  font-size: 0.9em;\n}\n.vuecal__time-column .vuecal__time-cell .line:before {\n  content: \"\";\n  position: absolute;\n  left: 0;\n  right: 0;\n  border-top: 1px solid #eee;\n}\n.vuecal__cells {\n  margin: 0 1px 1px 0;\n}\n.vuecal--events-on-month-view.vuecal--short-events .vuecal__cells {\n  width: 99.9%;\n}\n.vuecal--overflow-x.vuecal--week-view .vuecal__cells {\n  -ms-flex-wrap: nowrap;\n  flex-wrap: nowrap;\n  overflow: auto;\n}\n.slide-fade--left-enter-active,\n.slide-fade--left-leave-active,\n.slide-fade--right-enter-active,\n.slide-fade--right-leave-active {\n  -webkit-transition: 0.25s ease-out;\n  transition: 0.25s ease-out;\n}\n.slide-fade--left-enter,\n.slide-fade--right-leave-to {\n  -webkit-transform: translateX(-15px);\n  transform: translateX(-15px);\n  opacity: 0;\n}\n.slide-fade--left-leave-to,\n.slide-fade--right-enter {\n  -webkit-transform: translateX(15px);\n  transform: translateX(15px);\n  opacity: 0;\n}\n.slide-fade--left-leave-active,\n.slide-fade--right-leave-active {\n  position: absolute !important;\n  height: 100%;\n}\n.vuecal__title-bar .slide-fade--left-leave-active,\n.vuecal__title-bar .slide-fade--right-leave-active {\n  left: 0;\n  right: 0;\n  height: auto;\n}\n.vuecal__heading .slide-fade--left-leave-active,\n.vuecal__heading .slide-fade--right-leave-active {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n  -ms-flex-align: center;\n  align-items: center;\n}\n.vuecal--green-theme .vuecal__cell-events-count,\n.vuecal--green-theme .vuecal__menu {\n  background-color: #42b983;\n  color: #fff;\n}\n.vuecal--green-theme .vuecal__menu li {\n  border-bottom-color: #fff;\n}\n.vuecal--green-theme .vuecal__menu li.active {\n  background-color: hsla(0, 0%, 100%, 0.15);\n}\n.vuecal--green-theme .vuecal__title-bar {\n  background-color: #e4f5ef;\n}\n.vuecal--green-theme .vuecal__cell.current,\n.vuecal--green-theme .vuecal__cell.today {\n  background-color: rgba(240, 240, 255, 0.4);\n}\n.vuecal--green-theme:not(.vuecal--day-view) .vuecal__cell.selected {\n  background-color: rgba(235, 255, 245, 0.4);\n}\n.vuecal--green-theme .vuecal__cell.selected:before {\n  border-color: rgba(66, 185, 131, 0.5);\n}\n.vuecal--blue-theme .vuecal__cell-events-count,\n.vuecal--blue-theme .vuecal__menu {\n  background-color: rgba(66, 163, 185, 0.8);\n  color: #fff;\n}\n.vuecal--blue-theme .vuecal__menu li {\n  border-bottom-color: #fff;\n}\n.vuecal--blue-theme .vuecal__menu li.active {\n  background-color: hsla(0, 0%, 100%, 0.15);\n}\n.vuecal--blue-theme .vuecal__title-bar {\n  background-color: rgba(0, 165, 188, 0.3);\n}\n.vuecal--blue-theme .vuecal__cell.current,\n.vuecal--blue-theme .vuecal__cell.today {\n  background-color: rgba(240, 240, 255, 0.4);\n}\n.vuecal--blue-theme:not(.vuecal--day-view) .vuecal__cell.selected {\n  background-color: rgba(235, 253, 255, 0.4);\n}\n.vuecal--blue-theme .vuecal__cell.selected:before {\n  border-color: rgba(115, 191, 204, 0.5);\n}\n.vuecal--rounded-theme .vuecal__weekdays-headings {\n  border: none;\n}\n.vuecal--rounded-theme .vuecal__cell,\n.vuecal--rounded-theme:not(.vuecal--day-view) .vuecal__cell:before {\n  background: none;\n  border: none;\n}\n.vuecal--rounded-theme .vuecal__cell.out-of-scope {\n  opacity: 0.4;\n}\n.vuecal--rounded-theme .vuecal__cell-content {\n  width: 30px;\n  height: 30px;\n  -webkit-box-flex: 0;\n  -ms-flex-positive: 0;\n  flex-grow: 0;\n  border: 1px solid transparent;\n  border-radius: 30px;\n  color: #333;\n}\n.vuecal--rounded-theme.vuecal--day-view .vuecal__cell-content {\n  width: auto;\n  background: none;\n}\n.vuecal--rounded-theme.vuecal--year-view .vuecal__cell {\n  width: 33.33%;\n}\n.vuecal--rounded-theme.vuecal--year-view .vuecal__cell-content {\n  width: 85px;\n}\n.vuecal--rounded-theme.vuecal--years-view .vuecal__cell-content {\n  width: 52px;\n}\n.vuecal--rounded-theme .vuecal__cell {\n  background-color: transparent !important;\n}\n.vuecal--rounded-theme.vuecal--green-theme:not(.vuecal--day-view)\n  .vuecal__cell-content {\n  background-color: #f1faf7;\n}\n.vuecal--rounded-theme.vuecal--green-theme:not(.vuecal--day-view)\n  .vuecal__cell.today\n  .vuecal__cell-content {\n  background-color: #42b983;\n  color: #fff;\n}\n.vuecal--rounded-theme.vuecal--green-theme\n  .vuecal--day-view\n  .vuecal__cell.today:before {\n  background-color: rgba(66, 185, 131, 0.05);\n}\n.vuecal--rounded-theme.vuecal--green-theme:not(.vuecal--day-view)\n  .selected\n  .vuecal__cell-content {\n  border-color: #42b983;\n}\n.vuecal--rounded-theme.vuecal--blue-theme:not(.vuecal--day-view)\n  .vuecal__cell-content {\n  background-color: rgba(100, 182, 255, 0.2);\n}\n.vuecal--rounded-theme.vuecal--blue-theme:not(.vuecal--day-view)\n  .vuecal__cell.today\n  .vuecal__cell-content {\n  background-color: #8fb7e4;\n  color: #fff;\n}\n.vuecal--rounded-theme.vuecal--blue-theme\n  .vuecal--day-view\n  .vuecal__cell.today:before {\n  background-color: rgba(143, 183, 228, 0.1);\n}\n.vuecal--rounded-theme.vuecal--blue-theme:not(.vuecal--day-view)\n  .selected\n  .vuecal__cell-content {\n  border-color: #448aff;\n}\n\n.vuecal__event {\n  width: 90%;\n  margin: auto;\n  cursor: pointer;\n  margin-top: 5px;\n  padding: 5px;\n  text-align: center;\n}\n\n.vuecal__event.declared {\n  background-color: rgba(81, 97, 247, 0.9);\n  color: #fff;\n}\n.vuecal__event.done {\n  background-color: rgba(18, 228, 35, 0.9);\n  color: #fff;\n}\n.vuecal__event.processing {\n  background-color: rgba(240, 180, 16, 0.973);\n  color: #fff;\n} */\n</style>","<!--\nCopyright 2020 SpinalCom - www.spinalcom.com\n\nThis file is part of SpinalCore.\n\nPlease read all of the following terms and conditions\nof the Free Software license Agreement (\"Agreement\")\ncarefully.\n\nThis Agreement is a legally binding contract between\nthe Licensee (as defined below) and SpinalCom that\nsets forth the terms and conditions that govern your\nuse of the Program. By installing and/or using the\nProgram, you agree to abide by all the terms and\nconditions stated or referenced herein.\n\nIf you do not agree to abide by these terms and\nconditions, do not demonstrate your acceptance and do\nnot install or use the Program.\nYou should have received a copy of the license along\nwith this file. If not, see\n<http://resources.spinalcom.com/licenses.pdf>.\n-->\n\n<template>\n   <md-content\n      class=\"event_container\"\n      v-if=\"event\"\n   >\n      <div class=\"details_container\">\n\n         <md-content class=\"details md-scrollbar\">\n            <div class=\"detail\">\n               <div class=\"label\">Name</div>\n               <div class=\"value\">{{event.name}}</div>\n            </div>\n\n            <div\n               class=\"detail\"\n               v-if=\"event.user\"\n            >\n               <div class=\"label\">Created By</div>\n               <div class=\"value\">{{event.user.username}}</div>\n            </div>\n\n            <div class=\"detail\">\n               <div class=\"label\">Sart Date</div>\n               <div class=\"value\">{{event.startDate | formatDate}}</div>\n            </div>\n\n            <div class=\"detail\">\n               <div class=\"label\">End Date</div>\n               <div class=\"value\">{{event.endDate | formatDate}}</div>\n            </div>\n\n            <!-- <div class=\"detail\">\n          <div class=\"label\">Periodicty</div>\n          <div class=\"value\">{{event.periodicity | periodicityFilter}}</div>\n        </div> -->\n\n         </md-content>\n\n         <div class=\"actions\">\n\n            <div class=\"standard_buttons action\">\n               <md-button\n                  class=\"md-icon-button md-primary\"\n                  title=\"select on 3D model\"\n                  @click=\"selectOnMaquette\"\n               >\n                  <md-icon>find_in_page</md-icon>\n               </md-button>\n\n               <md-button\n                  class=\"md-icon-button md-primary\"\n                  title=\"isolate on 3D model\"\n                  @click=\"isolateOnMaquette\"\n               >\n                  <md-icon>settings_overscan</md-icon>\n               </md-button>\n\n               <md-button\n                  class=\"md-icon-button md-primary\"\n                  title=\"zoom on 3D model\"\n                  @click=\"zoomOnMaquette\"\n               >\n                  <md-icon>zoom_in</md-icon>\n               </md-button>\n            </div>\n\n            <md-button\n               class=\"md-dense md-primary action\"\n               @click=\"editEvent\"\n            >\n               <md-icon>edit</md-icon>\n               Edit Event\n            </md-button>\n\n            <md-button\n               class=\"md-dense md-accent cancel-action\"\n               @click=\"cancelEvent\"\n            >\n               <md-icon>event_busy</md-icon>\n               Cancel Event\n            </md-button>\n\n         </div>\n\n      </div>\n\n      <div class=\"notes_logs\">\n         <md-content class=\"notes md-scrollbar\">\n            <message-component :nodeInfo=\"nodeInfo\"></message-component>\n         </md-content>\n         <!-- <div class=\"logs\"></div> -->\n      </div>\n\n   </md-content>\n   <md-content\n      class=\"event_container\"\n      v-else\n   >\n      Event not found\n   </md-content>\n</template>\n\n<script>\nimport { spinalPanelManagerService } from \"spinal-env-viewer-panel-manager-service\";\nimport { SpinalEventService, Period } from \"spinal-env-viewer-task-service\";\nimport { SpinalGraphService } from \"spinal-env-viewer-graph-service\";\n\nimport TasksCalendar from \"../components/tasksCalendar.vue\";\nimport moment from \"moment\";\nimport messageComponentVue from \"spinal-env-viewer-plugin-documentation/view/notes/components/messageComponent.vue\";\n\nimport isolateBtn from \"../../buttons/standard_buttons/isolate\";\nimport selectBtn from \"../../buttons/standard_buttons/select\";\nimport zoomBtn from \"../../buttons/standard_buttons/zoom\";\nimport EventBus, { EVENT_TYPES } from \"../../js/event\";\n\nexport default {\n   name: \"seeEventDetail\",\n   components: {\n      \"message-component\": messageComponentVue,\n   },\n   data() {\n      this.DETAILS = [\"name\"];\n      return {\n         event: {},\n         nodeInfo: {},\n      };\n   },\n   mounted() {\n      EventBus.$on(EVENT_TYPES.UPDATED, (event) => {\n         if (this.event && this.event.id === event.id) {\n            this.event = event;\n         }\n      });\n\n      EventBus.$on(EVENT_TYPES.DELETED, (id) => {\n         if (this.event && this.event.id === id) {\n            this.event = undefined;\n         }\n      });\n   },\n   methods: {\n      async opened(event) {\n         const realNode = SpinalGraphService.getRealNode(event.id);\n         this.event = realNode.info.get();\n         this.nodeInfo = { selectedNode: realNode };\n\n         const name = event.name;\n         this.setTitle(name);\n      },\n      closed() {},\n\n      editEvent() {\n         spinalPanelManagerService.openPanel(\n            \"editTaskDialog\",\n            Object.assign({}, this.event)\n         );\n      },\n\n      setTitle(title) {\n         spinalPanelManagerService.panels.seeEventDetail.panel.setTitle(\n            `Event Detail Panel : ${title}`\n         );\n      },\n\n      selectOnMaquette() {\n         const params = {\n            selectedNode: this.nodeInfo.selectedNode.info,\n            context: SpinalGraphService.getInfo(this.event.contextId),\n         };\n         selectBtn.action(params);\n      },\n\n      isolateOnMaquette() {\n         const params = {\n            selectedNode: this.nodeInfo.selectedNode.info,\n            context: SpinalGraphService.getInfo(this.event.contextId),\n         };\n         isolateBtn.action(params);\n      },\n\n      zoomOnMaquette() {\n         const params = {\n            selectedNode: this.nodeInfo.selectedNode.info,\n            context: SpinalGraphService.getInfo(this.event.contextId),\n         };\n         zoomBtn.action(params);\n      },\n\n      cancelEvent() {\n         spinalPanelManagerService.openPanel(\"confirmDialog\", {\n            event: this.event,\n            // title: \"Delete\",\n            // message: \"Do you want to remove this event ?\",\n            // callback: (res) => {\n            //   if (res) {\n            //     SpinalEventService.removeEvent(this.event.id).then((result) => {\n            //       EventBus.$emit(EVENT_TYPES.DELETED, this.event.id);\n            //       this.event = undefined;\n            //     });\n            //   }\n            // },\n         });\n      },\n   },\n   filters: {\n      formatDate: (date) => {\n         return moment(date, \"x\").format(\"MMMM Do YYYY, HH:mm\");\n      },\n      // periodicityFilter: (periodicity) => {\n      //   if (periodicity >= Period.day && periodicity < Period.week) {\n      //     return `${periodicity / Period.day} day(s)`;\n\n      //   } else if(periodicity >= Period.week && periodicity < Period.month) {\n      //     return `${periodicity / Period.week} week(s)`;\n      //   }\n      //   else {\n      //     return \"once\";\n      //   }\n      // },\n   },\n};\n</script>\n\n<style scoped>\n.event_container {\n   width: 98%;\n   height: calc(100% - 15px);\n   background-color: transparent;\n   margin: auto;\n}\n\n.event_container .details_container {\n   width: 100%;\n   height: 49%;\n   display: flex;\n   justify-content: space-between;\n}\n\n.event_container .details_container .details {\n   width: 49%;\n   height: 100%;\n   background-color: transparent;\n   overflow: auto;\n}\n\n.event_container .details_container .details .detail {\n   width: 98%;\n   height: 49px;\n   margin: auto;\n   display: flex;\n   justify-content: space-between;\n}\n\n.event_container .details_container .details .detail div {\n   display: flex;\n   align-items: center;\n}\n\n.event_container .details_container .actions {\n   width: 49%;\n   height: 100%;\n   background-color: transparent;\n   display: flex;\n   flex-direction: column;\n   /* justify-content: space-around; */\n   align-items: center;\n   /* justify-content: center; */\n   /* flex-wrap: wrap; */\n}\n\n.event_container .details_container .actions .action {\n   /* width: 90%; */\n   /* min-width: 195px; */\n   /* height: 60px; */\n   width: 50%;\n   border: 1px solid #448aff;\n   margin-bottom: 5px;\n   display: flex;\n}\n\n.event_container .details_container .actions .action .standard_buttons {\n   justify-content: space-between;\n}\n\n.event_container .details_container .actions .cancel-action {\n   border: 1px solid #ff5252;\n   width: 50%;\n   margin-bottom: 5px;\n   display: flex;\n}\n\n.event_container .notes_logs {\n   width: 100%;\n   height: 50%;\n   display: flex;\n   justify-content: center;\n   border: 1px solid grey;\n}\n\n.event_container .notes_logs .notes {\n   width: 90%;\n   height: 99%;\n   overflow: auto;\n   background-color: transparent;\n   /* padding: 5px; */\n   /* border: 1px solid gray; */\n}\n\n.event_container .notes_logs .logs {\n   width: 49%;\n   height: 100%;\n   border: 1px solid gray;\n}\n</style>\n\n<style>\n.event_container .details_container .actions .action .md-ripple {\n   padding: 0px;\n}\n</style>"],"names":[],"version":3,"file":"spinal-env-viewer-plugin-task.2ca69b9f.css.map"}