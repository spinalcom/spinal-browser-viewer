{"mappings":"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,OAAO,SAAS;AAClB;AACA;kBAEe;;;;;A;A;;A;;A,I,gB;I,M;I,O;Q;K;I,Y;Q,iB,C,G,+B;I;I;Q,I,C,gB;Y,S;Y,O;Q;Q,O;Y,Y;Y,Y;Y,O,E;Y,S;gB,Q,I,C,c;gB,O;gB,Q;Y;Q;I;I,S;Q,Q,M;Y,I,C;Q;Q,M,S,G;Y,M,Q,I,W;Y,I,I,e,M,S,G;gB,M,U,M,C,G,8C,E,c,O,I;gB,C,G,qB,E,M,wB,Q,Q;Y;Y,I,C,a;Q;Q,a,W;Y,I,O,I,C,c,Y;gB,M,Q,I,C;gB,I,C,U;oB;oB,Y,I,C;oB;gB;Y;Q;Q;Y,I,I,C,M,oB;gB,M,Q,I,C,M,mB;gB,O,M,I,C,I;oB,G,Q;oB,O;gB;Y;Q;Q;Y,M,mB,I,C,W,O,W;Y,M,iB,I,C,M,W;Y,O,oB;Q;Q;Y,W;gB,I,C,K,C,gB,C,I;Y,G;Q;Q,Y,M;Y,I,W,I,C,c,S;gB,I,C,Q,S;gB,I,C,Q,Q;Y;Q;Q;Y,I,C,Q,Q;Y,I,C,Q,S,I,C,c;Q;Q,S,G;Y,I,C,Q;mB,I,C;gB;a;Q;Q,Y,K;Y,I,C,Q,I,C,M,O,C,K,G,U;Q;I;A;AAqFf,IAAA,UAAA,OAAA,kBAAA,aAAA,cAAA,UAAA;kB,S,wC;;;;;ACpGA,IAAI;AACJ,IAAI,aAAa;IACf,SAAS,QAAQ;IACjB,IAAI,OAAO,YAAY,SAAS,OAAO;IACvC,OAAO,SAAS,QAAQ,oBAAgC;IAC9C,OAAO,kBAAkB,QAAQ,oBAAgC;IACjE,OAAO,WAAW;IAE5B,OAAO,eAAe,QAAQ,oBAA6B;IAC3D,QAAQ,oBAA8B,QAAQ;IAC9C,OAAO,YAAY;IACnB,OAAO,SAAS;AAClB;AACA;kBAEe;;;;;A;;A;;A,I,gB;I,M;I,Y;iB,C,G,0B;mB,C,G,4B;I;I,O;Q,O;Y,S,E;Q;I;I;Q,O;Y,a,E;Q;I;I;Q,I,C,c,I,C;I;I,S;Q,S,G;Y,G,C,Q,G,I,C,M;Y,I,C,M,W;Q;Q,Y,K;Y,I,C,M,U;Q;I;I,O;Q;Y,I,C,c,I,C;Q;I;A;A,I,U,O,kB,a,c,U;kB,S,wC;;;;;ACff,IAAI;AACJ,IAAI,aAAa;IACf,SAAS,QAAQ;IACjB,IAAI,OAAO,YAAY,SAAS,OAAO;IACvC,OAAO,SAAS,QAAQ,oBAA0B;IACxC,OAAO,kBAAkB,QAAQ,oBAA0B;IAC3D,OAAO,WAAW;IAE5B,OAAO,eAAe,QAAQ,oBAAuB;IACrD,QAAQ,oBAAwB,QAAQ;IACxC,OAAO,YAAY;IACnB,OAAO,SAAS;AAClB;AACA;kBAEe;;;;;A;A,I,gB;I,M;I,Y;Q,iB,C,G,gB;I;I;Q,O;Y,M;Y,O;Y,M;Q;I;I,S;Q;Y,I,C,O,C,I,C;Q;Q;Y,M,Q,O,I,C,U,W,I,C,Q,I,C,M;Y,I,C,M,W;gB,M,I,C;gB;Y;Y,I,C,O;Y,I,C,Q;Q;Q;Y,O,I,C,K,O,W,K,C,I,C;Q;I;A;A,I,U,O,kB,a,c,U;kB,S,wC;;;A,I,S;I,I,M,I;I,I,K,I;I,I,K,I,M,M;I,O,G,a;Q,O;Y,U;Y,a;Y,Q,I;Q;I,G;Q,G,a;Y,a;Q,G;Y,G,W;gB,I,G;a;S,E;Q,I,G;Q,G,Y;Y,M;Q,G;Y,G,O;gB,a;Y,G;gB,G,O;oB,a;gB,G;oB,G,Y;wB,G,S;4B,I,G;yB;wB,I,G;wB,G,Y;4B,O;gC,O,I;gC,U,S,G;oC,I,O;gC;gC,Y;4B;wB;qB,E;oB,I,G;oB,G,O;wB,G,iB;4B,a;4B,O;gC,O,I;gC,U,S,G;oC,I,Q;gC;gC,Y;4B;wB;qB,E;iB,E;gB,I,G;gB,G,O;oB,a;gB,G;oB,G,a;wB,Y;4B;gC,M;gC,S;4B;yB;wB,a;oB,G;wB,I,G;qB;oB,I,G;oB,G,a;wB,Y;4B;gC,M;gC,S;4B;yB;wB,a;wB,O;4B,Y,I;wB;wB,I;4B,S,I;wB;oB,G;wB,I,G;qB;iB,E;a;S;K,E;A;A,I,kB,E;A,Q,S;A,Q,kB;;;;;AAff,IAAI,OAAO,KAAO;kBAEH,CAAA,UAEf;;;A,I,S;I,I,M,I;I,I,K,I;I,I,K,I,M,M;I,O,G,c;Q,a;I,G;Q,I,Y,S,I,G,a;Y,O;gB,S;Y;Y,I;gB,S,S,M;oB,I,O;gB;gB,O,S,M;oB,I,O;gB;Y;Y,O;gB,O,I;gB,U,S,G;oB,I,c;gB;gB,Y;Y;Q,G,I,G,I,a,S,O;Y,O,G,O;gB,K,Q;gB,a;Y,G;gB,G,O;oB,a;gB,G;oB,G,O;wB,a;wB,O;4B,oB,Q;wB;oB;oB,I,G;oB,G,O;wB,a;oB,G;wB,I,G,iB,I,G,Q,Q;qB;iB;gB,I,G;gB,G,O;oB,a;gB,G;oB,G,a;wB,a;wB,I;4B,S,S,M;gC,O,I,W,Q;4B;wB;oB,G;wB,G,W;4B,I,G;yB;qB,E;iB,E;a;Q,I,K,G,O;Y,a;Q,G;Y,I,G;S;Q,I,G;Q,G,O;Y,a;Q,G;Y,G,W;gB,I;oB,W,I;gB;Y;S,E;K,E;A;A,I,kB,E;A,Q,S;A,Q,kB;;;;;ADJA,IAAI,OAAO,KAAO;kBAEH,CAAA,UAEf;;;A,I,S;I,I,M,I;I,I,K,I;I,I,K,I,M,M;I,O,G,a;Q,a;Q,O;Y,a,I;Q;Q,I;Y,mB,S,M;gB,I,a;Y;Y,oB,S,M;gB,I,a;Y;Y,a,S,M;gB,O,I,Y;Y;Q;I,G;Q,G,mB;Y,a;Q,G;Y,I,G;S;Q,I,G;Q,G,qB;Y,a;Q,G;Y,G,e;gB,a;gB,O;oB,kB,I,Q;oB,a;gB;gB,I;oB,uB,S,M;wB,O,I,K,I,S,U;oB;oB,yB,S,M;wB,O,I,K,I,S,U;oB;oB,c,I;gB;Y,G;gB,G,W;oB,a;oB,O;wB,M,I,c;wB,Y;wB,W,I,Q;oB;oB,I;wB,iB,S,M;4B,O,I,K,I,S,S;wB;wB,kB,S,M;4B,O,I,K,I,S,S;wB;oB;gB,G;oB,G,c;wB,a;oB,G;wB,G,Y;4B,G,S;gC,I,G;6B;4B,I,G;4B,G,Y;gC,K;gC,O;oC,O,I;oC,U,S,G;wC,I,a;oC;oC,Y;gC;4B;yB,E;qB,E;iB,E;gB,I,G;gB,G,W;oB,a;oB,O;wB,M,I,c;wB,Y;wB,W,I,Q;oB;oB,I;wB,iB,S,M;4B,O,I,K,I,S,U;wB;wB,kB,S,M;4B,O,I,K,I,S,U;wB;oB;gB,G;oB,G,iB;wB,K;wB,O;4B,S,I;wB;wB,I;4B,W,I;4B,U,I;wB;oB;iB,E;a,E;S,E;Q,I,G;Q,G,qB;Y,G,a;gB,a;gB,I;oB,S,S,M;wB,O,I,Y;oB;gB;Y,G;gB,I,G;a;Y,I,G;Y,I,Q,W,I,C,c,U,G,a;gB,a;gB,O;oB,Y,C,C,I,W,O,S,C;gB;gB,I;oB,S,I;gB;Y,G;gB,I,G;a,I,I;Y,I,G;Y,I,Q,W,I,C,c,Q,G,a;gB,a;gB,O;oB,Y,I;gB;gB,I;oB,S,S,M;wB,O,I,Y;oB;gB;Y,G;gB,I,G;a,I,I;S,E;K,E;A;A,I,kB,E;A,Q,S;A,Q,kB;;;;;ADJA,IAAI,OAAO,KAAO;kBAEH,CAAA,UAEf;;;;;AGJA,IAAI;AACJ,IAAI,aAAa;IACf,SAAS,QAAQ;IACjB,IAAI,OAAO,YAAY,SAAS,OAAO;IACvC,OAAO,SAAS,QAAQ,oBAAsC;IACpD,OAAO,kBAAkB,QAAQ,oBAAsC;IACvE,OAAO,WAAW;IAE5B,OAAO,eAAe,QAAQ,oBAAmC;IACjE,QAAQ,oBAAoC,QAAQ;IACpD,OAAO,YAAY;IACnB,OAAO,SAAS;AAClB;AACA;kBAEe;;;;;A;A;;A,I,gB;I,M;I,O;Q;K;I;Q,O;Y,Y;Y,W;Y,S;gB,M;Y;Q;I;I,S;Q,Q,M;Y,I,C;Y,I,C,Y,O;Q;Q,M,S,G;Y,I,I,e,I,Q,K,S,K,I,C,W;gB,M,U,M,C,G,8C,E,c,I,S,I,C;gB,C,G,qB,E,M,wB;Y;Y,I,C,a;Q;Q,a,W;Y,I,O,I,C,c,Y,I,C,U;gB;gB,S,I,C;Y;Q;Q;Y,W;gB,I,C,K,C,gB,C,I;Y,G;Q;I;A;A,I,U,O,kB,a,c,U;kB,S,wC;;;A,I,S;I,I,M,I;I,I,K,I;I,I,K,I,M,M;I,O,G,a;Q,O;Y,a,I;Q;Q,I;Y,mB,S,M;gB,I,a;Y;Y,oB,S,M;gB,I,a;Y;Y,a,S,M;gB,O,I,Y;Y;Q;I,G;Q,G,Q;Y,a;Y,I;gB,U,S,M;oB,O;oB,O,I,Y;gB;Y;Q,G;Y,G,mB;gB,I,G;a;Y,I,G;Y,G,qB;gB,G,Y;oB,G,S;wB,I,G;qB;oB,I,G;oB,G,Y;wB,K;wB,O;4B,O,I,Q;4B,U,S,G;gC,I,K,I,S,Q;4B;4B,Y;wB;oB;iB,E;a,E;Y,I,G;Y,G,qB;gB,G,a;oB,a;oB,I;wB,S,S,M;4B,O,I,Y;wB;oB;gB,G;oB,I,G;iB;gB,I,G;gB,G,a;oB,a;oB,O;wB,Q;wB,Y,C,C,I,Q,K,O,S,C;oB;gB,G;oB,I,G;iB;a,E;S,E;K;A;A,I,kB,E;A,Q,S;A,Q,kB;;;;;AAff,IAAI,OAAO,KAAO;kBAEH,CAAA,UAEf;;;;;ACJA,IAAI;AACJ,IAAI,aAAa;IACf,SAAS,QAAQ;IACjB,IAAI,OAAO,YAAY,SAAS,OAAO;IACvC,OAAO,SAAS,QAAQ,oBAAmC;IACjD,OAAO,kBAAkB,QAAQ,oBAAmC;IACpE,OAAO,WAAW;IAE5B,OAAO,eAAe,QAAQ,mBAAgC;IAC9D,QAAQ,oBAAiC,QAAQ;IACjD,OAAO,YAAY;IACnB,OAAO,SAAS;AAClB;AACA;kBAEe;;;;;A;A;A,I,gB;I,M;I,O;Q;K;I,Y;Q,iB,C,G,gB;I;I;Q,I,C,Y;Y,Q;Y,O;Q;Q,O;Y,Y;Y,W;Y,W;Y,O;Y,e;Y,O,E;Y,M;gB,M;gB,O;gB,O;Y;Q;I;I,S;Q,M,Q,M;Y,I,C;Y,I,C,Y,O;Y,I,C,Y,O;Y,I,C,Q,M,I,C,S,I,C,W,I,C;Q;Q,M,S,G;Y,I,I,e,I,K,K,S,K,I,C,a,I,C,W,C,G,8C,E,W,I,C,W,I,C,W,I;Y,I,C,a;Q;Q,a,W;Y,I,O,I,C,c,Y;gB,I,C,K,Q,O,I,C,K,U,W,I,C,K,Q,I,C,K,M;gB,I,C,K,Q,I,C,gB,I,C;gB,I,C,U;oB;oB,M,I,C;gB;Y;Q;Q;Y,W;gB,I,C,K,C,gB,C,I;Y,G;Q;Q;Y,O,C,C,I,C,K,K,O,S,K,O,I,C,U,e,O,I,C,kB,W;Q;Q,U,S,E,S;Y,O,C,G,8C,E,oB,W,W,K,C;gB,O,O,I,C,K,G,O,O,C,K,G,U;Y;Q;I;A;A,I,U,O,kB,a,c,U;kB,S,wC;;;A,I,S;I,I,M,I;I,I,K,I;I,I,K,I,M,M;I,O,G,a;Q,a;Q,O;Y,a,I;Q;Q,I;Y,mB,S,M;gB,I,a;Y;Y,oB,S,M;gB,I,a;Y;Y,a,S,M;gB,O,I,Y;Y;Q;I,G;Q,G,Q;Y,a;Y,I;gB,U,S,M;oB,O;oB,O,I,Y;gB;Y;Q,G;Y,G,mB;gB,I,G;a;Y,I,G;Y,G,qB;gB,G,Y;oB,G,S;wB,I,G;qB;oB,I,G;oB,G,Y;wB,K;wB,O;4B,O,I,K;4B,U,S,G;gC,I,K,I,M,Q;4B;4B,Y;wB;oB;iB,E;gB,I,G;gB,G,O;oB,a;gB,G;oB,G,Q;wB,a;oB,G;wB,I,G;qB;oB,I,G;oB,G,O;wB,a;oB,G;wB,G,Y;4B,G,a;gC,O;oC,Q;oC,M;oC,e;gC;gC,O;oC,O,I;oC,U,S,G;wC,I,Q;oC;oC,Y;gC;4B,G;gC,G,a;oC,O;wC,S,I,U;oC;gC,G;oC,I,G;iC;gC,I,G;gC,G,a;oC,O;wC,S,I,U;oC;gC,G;oC,I,G;iC;6B,E;yB,E;qB,E;oB,I,G;oB,G,O;wB,a;oB,G;wB,G,Y;4B,G,a;gC,O;oC,Q;oC,M;oC,e;gC;gC,O;oC,O,I;oC,U,S,G;wC,I,gB;oC;oC,Y;gC;4B,G,I,G,I,O,S,C;gC,O,G,a;oC,K,E;oC,O;wC,S,E;oC;gC,G;oC,I,G,I,G,E;iC;4B,I;yB,E;qB,E;iB;gB,I,G;gB,G,iB;oB,a;oB,O;wB,O,I,K;wB,U,S,G;4B,I,K,I,M,S;wB;wB,Y;oB;gB;a,E;Y,I,G;Y,G,qB;gB,G,a;oB,a;oB,I;wB,S,S,M;4B,O,I,Y;wB;oB;gB,G;oB,I,G;iB;gB,I,G;gB,G,a;oB,a;oB,O;wB,Q;wB,Y,I;oB;gB,G;oB,I,G;iB;a,E;S,E;K;A;A,I,kB,E;A,Q,S;A,Q,kB;;;;;AAff,IAAI,OAAO,KAAO;kBAEH,CAAA,UAEf;;;;;ACJA,IAAI;AACJ,IAAI,aAAa;IACf,SAAS,QAAQ;IACjB,IAAI,OAAO,YAAY,SAAS,OAAO;IACvC,OAAO,SAAS,QAAQ,oBAA+B;IAC7C,OAAO,kBAAkB,QAAQ,oBAA+B;IAChE,OAAO,WAAW;IAE5B,OAAO,eAAe,QAAQ,oBAA4B;IAC1D,QAAQ,oBAA6B,QAAQ;IAC7C,OAAO,YAAY;IACnB,OAAO,SAAS;AAClB;AACA;kBAEe;;;;;A;A;A;;A;A;A;A;;A,I,gB;I,M;I,O;Q;K;I,Y;Q,wB,C,G,6B;I;I;Q,I,C,gB,C,G,4B;Q,I,C,Q;Y,Q;Y,S;Y,S;Y,O;Q;Q,O;Y,c,I,C,M;Y,Y;Y,W;Y,W;Y,c;Y,U;Y,kB;Y,Q;gB,M;gB,yB;gB,a;gB,I,E;gB,U,I,C,c;gB,M,C;Y;Y,U;gB,M;gB,I,E;Y;Q;I;I,S;Q,M,Q,M;Y,6B;Y,I,C,Y,O;Y,I,C,Y,O;Y,I,C,W,O,a,K;Y,I,O,Y,I,C,mB,C,G,+C,E,Q,O,Y;Y,8D;Y,M,O,M,C,G,kB,E;Y,6B;Y,I,C,O,K,W,K;Y,I,C,O,S,K;Q;Q,a,W;Y,I,O,I,C,c,Y,I,C,U;gB;gB,Y,I,C;Y;Q;Q,M,S,G;Y,I;Y,I,C,a;Q;Q;Y,4B;Y,I,C,e,I,C,M;Y,C,G,8C,E,U,I,C,Q,I,C,W,I,C,W,I,C,S,I,K,C;gB,M,O,C,G,+C,E,Y;gB,I,M;oB,C,G,qB,E,M,C,G,4B,E,S,K,K;oB,I,C,e,I,C,M;gB,uB;gB;Y,G,M,I,I,C,e,I,C,M;Q;Q;Y,W;gB,I,C,K,C,gB,C,I;Y,G;Q;Q;Y,M,U;Y,M,Q,S,c;Y,M,O;Y,M,W;Y,M;Y,M,iB,U,C;gB,M,Q,M,O;gB,I,W,E;gB,K,M,Q,M,S,K;gB,S,Q,I,C,O;gB,M,Q,S,I,C,K,G;gB,M,Y,M,O,C,G,I,I;gB,I,Y,S;oB,M;oB;gB;gB,I,C,O,K;Y,G;Q;Q,U,I;Y,I,C,O,K,I,C,O,G,O,C,K,G,S,K;Q;I;I,U;Q;Y,O,I,C;gB,K,I,C,M;oB,O;gB,K,I,C,M;oB,O;Y;Q;I;I,O;Q;Y,I,I,C,oB,I,C,iB,M,I,C,O,O,I,C,iB;QA0If;IACA;AACA;AAEA,IAAA,UAAA,OAAA,kBAAA,aAAA,cAAA,UAAA;kBACA,SAAA,wCAAA;;;;;AC9JA,IAAI;AACJ,IAAI,aAAa;IACf,SAAS,QAAQ;IACjB,IAAI,OAAO,YAAY,SAAS,OAAO;IACvC,OAAO,SAAS,QAAQ,mBAA6B;IAC3C,OAAO,kBAAkB,QAAQ,mBAA6B;IAC9D,OAAO,WAAW;IAE5B,OAAO,eAAe,QAAQ,oBAA0B;IACxD,QAAQ,oBAA2B,QAAQ;IAC3C,OAAO,YAAY;IACnB,OAAO,SAAS;AAClB;AACA;kBAEe;;;;;A,I,gB;I,M;I,O;Q;K;I;Q,O,C;I;I,S;Q;Y,I,C,M,U,I,C;Q;I;A;A,I,U,O,kB,a,c,U;kB,S,wC;;;A,I,S;I,I,M,I;I,I,K,I;I,I,K,I,M,M;I,O,G,O;Q,a;I,G;Q,G,O;Y,Y;gB;oB,M;oB,S;oB,O,I,K;oB,Y;gB;a;Y,a;Q,G;Y,I,G,I,G,I,K;S;Q,I,G;Q,G,O;Y,a;Y,I;gB,S,I;Y;Q,G;Y,I,G;S;K;A;A,I,kB,E;A,Q,S;A,Q,kB;;;;;AAff,IAAI,OAAO,KAAO;kBAEH,CAAA,UAEf;;;A,I,S;I,I,M,I;I,I,K,I;I,I,K,I,M,M;I,O,G,a;Q,a;Q,O;Y,a,I;Q;Q,I;Y,mB,S,M;gB,I,a;Y;Y,oB,S,M;gB,I,a;Y;Y,a,S,M;gB,O,I,Y;Y;Q;I,G;Q,G,mB;Y,a;Q,G;Y,I,G;S;Q,I,G;Q,G,qB;Y,a;Q,G;Y,I,iB,I,M,S,G,O;gB,a;Y,G;gB,G,O;oB,a;gB,G;oB,G,O;wB,G,M;4B,a;4B,O;gC,gB;4B;wB;qB;oB,I,G;oB,G,O;wB,a;oB,G;wB,I,mB,G,O;4B,a;wB,G;4B,G,O;gC,a;4B,G;gC,I,G;6B;4B,I,G;4B,G,O;gC,Y;oC;wC,M;wC,S;wC,O,I,iB;wC,Y;oC;iC;gC,a;4B,G;gC,I,G,I,G,I,iB,Q;6B;yB,I,A,C,I,mB,G,O;4B,a;wB,G;4B,G,Y;gC,G,S;oC,I,G;iC;gC,I,G;gC,G,Y;oC,O;wC,O,I,O;wC,U,S,G;4C,I,K,I,Q,Q;wC;wC,Y;oC;gC;6B,E;yB,E,K,I;wB,I,G;wB,I,W,G,O;4B,a;wB,G;4B,G,O;gC,a;4B,G;gC,I,G;6B;4B,I,G;4B,G,O;gC,Y;oC;wC,M;wC,S;wC,O,I,S;wC,Y;oC;iC;gC,a;4B,G;gC,I,G,I,G,I,S;6B;yB,I,I;qB;iB;gB,I,G;gB,G,O;oB,a;gB,G;oB,G,O;wB,G,M;4B,a;4B,O;gC,gB;4B;wB;qB;oB,I,G;oB,G,O;wB,a;oB,G;wB,G,Y;4B,a;4B,O;gC,S,I,c;4B;4B,O;gC,O,I,O;gC,U,S,G;oC,I,K,I,Q,Y;gC;gC,Y;4B;wB,G;4B,I,G;yB;wB,I,G;wB,G,Y;4B,a;4B,O;gC,S,I,c;4B;4B,O;gC,O,I,O;gC,U,S,G;oC,I,K,I,Q,Y;gC;gC,Y;4B;wB,G;4B,I,G;yB;wB,I,G;wB,G,Y;4B,a;4B,O;gC,S,I,c;4B;4B,O;gC,O,I,O;gC,U,S,G;oC,I,K,I,Q,Y;gC;gC,Y;4B;wB,G;4B,I,G;yB;qB,E;iB;gB,I,G;gB,G,O;oB,a;gB,G;oB,G,M;wB,a;wB,O;4B,gB;wB;oB;oB,I,G;oB,G,O;wB,a;oB,G;wB,G,a;4B,a;4B,I;gC,S,I;4B;wB,G;4B,G,W;gC,I,G;6B;4B,I,G;yB,E;wB,I,G;wB,I,O,G,S,I,G,c;4B,a;wB,G,I,G,I,O,I,S,I,E,K;4B,O,G,wB;gC,K;gC,O;oC,Q;gC;gC,I;oC,U,I;gC;4B,G;gC,I,G,I,G,K,Q;6B;wB,I,K,G,c;4B,a;wB,G;4B,I,G;yB;qB,E;oB,I,G;oB,G,Y;wB,G,S;4B,I,G;yB;wB,I,G;wB,G,e;4B,O;gC,O,I,O;gC,U,S,G;oC,I,K,I,Q,e;gC;gC,Y;4B;wB;qB,E;iB,E;a,I,G,O;gB,a;Y,G;gB,I,iB,I,M,U,G,uB;oB,O;wB,W;oB;gB,K,G,W;oB,a;gB,G;oB,I,G,I,G,I;iB;a,E;S;Q,I,G;Q,G,qB;Y,G,a;gB,a;gB,I;oB,S,S,M;wB,O,I,Y;oB;gB;Y,G;gB,I,G;a;Y,I,G;Y,G,a;gB,a;gB,O;oB,Y,C,C,I,O,K,O,S,C;gB;gB,I;oB,S,I;gB;Y,G;gB,I,G;a;S,E;K,E;A;A,I,kB,E;A,Q,S;A,Q,kB;;;;;ADJA,IAAI,OAAO,KAAO;kBAEH,CAAA,UAEf;;;;;AEJA,IAAI;AACJ,IAAI,aAAa;IACf,SAAS,QAAQ;IACjB,IAAI,OAAO,YAAY,SAAS,OAAO;IACvC,OAAO,SAAS,QAAQ,oBAAsC;IACpD,OAAO,kBAAkB,QAAQ,oBAAsC;IACvE,OAAO,WAAW;IAE5B,OAAO,eAAe,QAAQ,oBAAmC;IACjE,QAAQ,oBAAoC,QAAQ;IACpD,OAAO,YAAY;IACnB,OAAO,SAAS;AAClB;AACA;kBAEe;;;;;A;A;A;A,mE;A;;A;;A;;A,I,gB;I,M;I,O;Q;K;I,Y;Q,sC;Q,kB,C,G,gC;I;I;Q,I,C,c;Y,S;Y,S;Q;Q,I,C,O;Y,Q;Y,Q;Q;Q,O;Y,Y;Y,W;Y,W;Y,Y;Y,c;Y,M,E;Y,W,E;Y,W,E;Y,e;Y,a,I,C,K;Y,S,I,C,Y;Q;I;I;Q,C,G,qB,E,I,yB,O;Y,I,C,O,M,I,C;Y,I,C;Y,I,C,a;Q;Q,C,G,qB,E,I,wB,O;Y,I,C,O,M,I,C;Y,I,C,Y;Q;Q,C,G,qB,E,I,wB,O;Y,I,C,O,M,I,C;Y,I,C;Y,I,C,Y;Q;I;I,S;Q,M,Q,M;Y,I,C,U,I,C,Y;Y,I,C,e,O;Y,M,S,O,a,Q;Y,I,C,O,M,I,C;Y,oD;Y,I,C,U,I,C,Y;Q;Q,M,S,G;Y,I,I,e,I,C,a,I,C,W,C,G,6D,E,U,sB;gB,W,I,C;gB,W,I,C;gB,Y,I,C;gB,c,I,C;Y;Y,I,C,a;Q;Q,a,W;Y,I,O,I,C,c,Y,I,C,U;gB;gB,S,I,C;Y;Q;Q,e,E;Y,I,C,Y;Q;Q,e,E;Y,I,C,Y;Q;Q,gB,E;Y,I,C,a;QAsFf;QAEA;YACA,MAAA,WAAA,CAAA,GAAA,8CAAA,EAAA;Y,I,W,S,I,O;gBAEA,MAAA,YAAA,MAAA,CAAA,GAAA,8CAAA,EAAA,c,Q;gB,M,W,U,I,O;oBAIA,MAAA,UAAA,WAAA;oB,O,CAEA,iBACA,GAAA,MAAA,CAAA,GAAA,8CAAA,EAAA,kBACA,QAAA;oBAEA,OAAA;gBACA;gBAEA,OAAA,CAAA,YAAA,GAAA,MAAA,QAAA,IAAA;gBACA,OAAA;YACA;YACA,OAAA,QAAA,IAAA;QACA;QAEA,kBAAA;QACA,iCAAA;QAEA,4CAAA;QACA,sEAAA;QACA,qBAAA;QACA,+EAAA;QACA,qDAAA;QACA,QAAA;QACA,MAAA;QACA,eAAA;QACA,KAAA;QAEA;YACA,qCAAA;YACA,IAAA,CAAA,YAAA,EAAA;YACA,IAAA,IAAA,CAAA,WAAA;gBACA,IAAA,MAAA,IAAA,CAAA,KAAA,KAAA,CAAA,KAAA,GAAA,OAAA,IAAA,CAAA;gBACA,IAAA,KAAA,IAAA,CAAA,YAAA,IAAA;YACA;QACA;QAEA;YACA,IAAA,CAAA,YAAA,EAAA;Y,I,I,C,a,I,C,W;gBAEA,IAAA,UAAA,IAAA,CAAA,KAAA,KAAA,CAAA,KAAA,GAAA,OAAA,IAAA,CAAA;gBACA,IAAA,SAAA;oBACA,IAAA,UAAA,QAAA,UAAA,KACA,CAAA,KAAA,GAAA,MAAA,IAAA,CAAA;oBAEA,IAAA,SAAA,IAAA,CAAA,YAAA,QAAA;gBACA;YACA;QACA;QAEA;YACA,IAAA,SAAA,IAAA,CAAA,UAAA,KAAA,CAAA,KAAA,GAAA,MAAA,IAAA,CAAA;YACA,uDAAA;YAEA,CAAA,GAAA,6DAAA,EAAA,UACA,8B;QAGA;QAEA;YACA,CAAA,GAAA,6DAAA,EAAA,UAAA;Q;QAGA;YACA,MAAA,SAAA;gBAAA,WAAA,IAAA,CAAA;YAAA;YACA,CAAA,GAAA,6DAAA,EAAA,UAAA,uBAAA;QACA;QAEA,2BAAA;QACA,qCAAA;QACA,kCAAA;Q,2B;QAEA,yDAAA;QACA,8DAAA;Q,yB;QAEA,YAAA;QAEA,sCAAA;QACA,UAAA;QACA,KAAA;QAEA,gBAAA;QACA,iDAAA;QACA,kDAAA;QAEA,kEAAA;QACA,2BAAA;QACA,QAAA;Q,K;QAGA,MAAA;YACA,MAAA,KAAA,IAAA,CAAA,aAAA,QAAA;Y,I,C,U,M,I,C,e;QAEA;QAEA,iBAAA,KAAA;YACA,IAAA,CAAA,cAAA;QACA;IACA;IACA,OAAA;QACA;YACA,IAAA,CAAA,YAAA;YACA,IAAA,CAAA,aAAA;YAEA,IAAA,CAAA;QACA,0BAAA;QACA;QACA;Y,I,C,a;YAEA,IAAA,CAAA;QACA;IACA;AACA;A,I,U,O,kB,a,c,U;kBAGA,SAAA,wCAAA;;;;;AClOA,IAAI;AACJ,IAAI,aAAa;IACf,SAAS,QAAQ;IACjB,IAAI,OAAO,YAAY,SAAS,OAAO;IACvC,OAAO,SAAS,QAAQ,oBAAgC;IAC9C,OAAO,kBAAkB,QAAQ,oBAAgC;IACjE,OAAO,WAAW;IAE5B,OAAO,eAAe,QAAQ,oBAA6B;IAC3D,QAAQ,oBAA8B,QAAQ;IAC9C,OAAO,YAAY;IACnB,OAAO,SAAS;AAClB;AACA;kBAEe;;;;;A;;A,I,gB;I,M;I,O;Q,M,C;Q,W,C;Q,W,C;Q,W,C;Q,W,C;Q,Y,C;I;I,Y;Q,iB,C,G,iC;I;I,S;Q;Y,O,I,C,a,I,C,U,S,K,I,C,a,I,C,U,S;Q;Q,e,E;Y,I,C,M,iB;Q;Q,e,E;Y,I,C,M,iB;Q;Q,gB,E;Y,I,C,M,kB;Q;Q;Y,I,C,M;Q;Q;Y,I,C,M;Q;Q;Y,I,C,M;Q;I;A;A,I,U,O,kB,a,c,U;kB,S,wC;;;;;ACff,IAAI;AACJ,IAAI,aAAa;IACf,SAAS,QAAQ;IACjB,IAAI,OAAO,YAAY,SAAS,OAAO;IACvC,OAAO,SAAS,QAAQ,oBAAiC;IAC/C,OAAO,kBAAkB,QAAQ,oBAAiC;IAClE,OAAO,WAAW;IAE5B,OAAO,eAAe,QAAQ,oBAA8B;IAC5D,QAAQ,oBAA+B,QAAQ;IAC/C,OAAO,YAAY;IACnB,OAAO,SAAS;AAClB;AACA;kBAEe;;;;;A,I,gB;I,M;I,O;Q;Q;Q;Q;Q;K;I,S;Q;Y,I,C,M;Q;Q,Y,E;Y,I,C,M,U;Q;I;A;A,I,U,O,kB,a,c,U;kB,S,wC;;;A,I,S;I,I,M,I;I,I,K,I;I,I,K,I,M,M;I,O,G,O;Q,a;I,G;Q,G,W;Y,a;Q,G;Y,G,gB;gB,G,Q;oB,a;gB,G;oB,I,G,I,G,I;iB;gB,I,G;gB,I,U,G,a;oB,a;oB,I;wB,S,I;oB;gB,G;oB,G,W;wB,I,G;qB;iB,E,K,I;a,E;S,E;Q,I,G;Q,G,c;Y,a;Q,G;Y,G,W,I,G,I,M,S,I,E,K;gB,O,G,gB;oB,Y;wB;4B,M;4B,S;4B,O,K;4B,Y;wB;qB;oB,K;oB,a;oB,O;wB,Y,K,O,I;oB;oB,I;wB,S,S,M;4B,O,I,W,K;wB;oB;gB,G;oB,G,Q;wB,a;oB,G;wB,I,G,I,G,K;qB;iB;Y,I;S,E;K,E;A;A,I,kB,E;A,Q,S;A,Q,kB;;;;;AAff,IAAI,OAAO,KAAO;kBAEH,CAAA,UAEf;;;A,I,S;I,I,M,I;I,I,K,I;I,I,K,I,M,M;I,O,G,O;Q,a;I,G;Q,G,O;Y,a;Q,G;Y,G,O;gB,a;Y,G;gB,G,iB;oB,O;wB,S;wB,Q,I;wB,gB,I;wB,W;oB;oB,I;wB,U,I;wB,U,I;oB;gB;a,E;Y,I,G;Y,G,O;gB,a;Y,G;gB,G,iB;oB,O;wB,S;wB,Q,I;wB,gB,I;wB,W,I,a,I,U,S;oB;oB,I;wB,U,I;wB,U,I;oB;gB;a,E;Y,I,G;Y,G,O;gB,a;Y,G;gB,G,iB;oB,O;wB,S;wB,Y;wB,Q,I;wB,gB,I;wB,W,I;oB;oB,I;wB,U,I;wB,U,I;oB;gB;a,E;S;K;A;A,I,kB,E;A,Q,S;A,Q,kB;;;;;ADJA,IAAI,OAAO,KAAO;kBAEH,CAAA,UAEf;;;;;AEJA,IAAI;AACJ,IAAI,aAAa;IACf,SAAS,QAAQ;IACjB,IAAI,OAAO,YAAY,SAAS,OAAO;IACvC,OAAO,SAAS,QAAQ,oBAA0B;IACxC,OAAO,kBAAkB,QAAQ,oBAA0B;IAC3D,OAAO,WAAW;IAE5B,OAAO,eAAe,QAAQ,oBAAuB;IACrD,QAAQ,mBAAwB,QAAQ;IACxC,OAAO,YAAY;IACnB,OAAO,SAAS;AAClB;AACA;kBAEe;;;;;A;A;A;;A;A;A;A;;A;A;A,M,E,yB,E,G,Q;A,M,Y,I,C,G,sC;A,M,a,I,C,G,iC;A,I,gB;I,M;I,O;Q,M,C;I;I;Q,O;Y,U,E;Y,e;Y,U,E;Y,c;Q;I;I;Q,C,G,qB,E,I,C,G,4B,E,S,C,O,I,C,M,U;Q,C,G,qB,E,I,C,G,4B,E,Y,C,O,I,C,M,U;Q,I,C,W,I,C;I;I,S;Q,U,K;Y,I,C,W;Q;Q;Y,I,C,W,I,C,K,O,C,K,G,K,c,S,I,C,a;Q,uD;Q;Q,M,gB,I;Y,M,O,M,C,G,kB,E;Y,M,Y,K,Y,K,Y,I,C,e,K,I,G;Y,M,Y,K,K;Y,M,W,K;Y,C,G,8C,E,qB,W,W,U,M,K,C;gB,M,O,C,G,+C,E,Q,U;gB,C,G,qB,E,M,C,G,4B,E,Y;oB,Q;oB,M;gB;Y;Q;Q,M,oB,I;Y,M,O,M,C,G,kB,E;Y,M,Y,K,Y,K,Y,I,C,e,K,I,G;Y,M,Y,K,K;Y,M,W,K;Y,C,G,8C,E,yB,W,W,U,M,K,C;gB,M,O,C,G,+C,E,Q,U;gB,C,G,qB,E,M,C,G,4B,E,Y;oB,Q;oB,M;gB;Y;Q;Q,a,I;Y,I,M;gB,c,C,G,+C,E,Y,K;Y;Y,0B,U,e;Q;Q,Y,I;Y,M,U,C,G,+C,E,Q,K;Y,M,S;gB,c,C,G,+C,E,Q,K,I;gB,S,U,Q,Q,I,C,e,K,I;Y;Y,0B,U,sB;Q;Q,gB,E;Y,M,W,C,G,+C,E,Y;Y,M,Y,S,W,gB,C,E;Y,O,C,G,+C,E,Q;Q;Q,S,I,G;Q,kB,I;Y,M,S;gB,c,C,G,+C,E,Q,K;gB,S,K,Y,C,G,+C,E,Q,K,a,I,C,e,K;Y;Y,U,O;Q;Q,mB,I;Y,M,S;gB,c,C,G,+C,E,Q,K;gB,S,K,Y,C,G,+C,E,Q,K,a,I,C,e,K;Y;Y,W,O;Q;Q;Y,O,O,Y,O;Q;Q,M,e,I;Y,M,Y,K,Y,K,Y,I,C,e,K,I,G;Y,M,O,M,C,G,kB,E;Y,C,G,8C,E,e,W,K,K,W,K,I,M,K,C;gB,M,O,C,G,+C,E,Q,K,I;gB,C,G,qB,E,M,C,G,4B,E,Y;oB,Q;oB,M;gB;Y;Q;Q,M,iB,I;Y,M,Y,K,Y,K,Y,I,C,e,K,I,G;Y,M,O,M,C,G,kB,E;Y,C,G,8C,E,gB,W,K,K,W,K,I,M,K,C;gB,M,O,C,G,+C,E,Q,K,I;gB,C,G,qB,E,M,C,G,4B,E,Y;oB,Q;oB,M;gB;Y;Q;Q,Y,I;Y,O,K,K,U,C,G,wB,E;Q;I;I,S;Q,oB,S,I;Y,O,C,G,sB,E,M;Q;QAmLf,iBAAA,SAAA,QAAA;Y,I,M,O,G,6BAEA,IAAA,CAAA,GAAA,4BAAA,EAAA,eAAA,MAAA;gBACA,MAAA,QAAA,CAAA,GAAA,4BAAA,CAAA,CAAA,IAAA;gBACA,IAAA,UAAA,UAAA,OAAA;Y;Q;QAKA,UAAA,SAAA,IAAA;YACA,IAAA,QAAA,KAAA,M,O,K;iBAEA,IAAA,QAAA,KAAA,UACA,OAAA,KAAA;YAEA,OAAA;QACA;I;IAEA,OAAA;QACA;Y,8B;YAEA,IAAA,IAAA,CAAA,MACA,IAAA,CAAA,WAAA,IAAA,CAAA;QAEA;IACA;AACA;AAEA,IAAA,UAAA,OAAA,kBAAA,aAAA,cAAA,UAAA;kBACA,SAAA,wCAAA;;;A,I,S;I,I,M,I;I,I,K,I;I,I,K,I,M,M;I,O,G,c;Q,a;I,G;Q,G,Y;Y,a;Y,O;gB,W;Y;Y,a,I,G;gB;oB,K;oB,I,S,G;wB,I,O,I;wB,O,G,gB;4B,I;gC,Y,S,M;oC,O,I,kB;gC;gC,c,I;4B;wB,G;4B,G,iB;gC,a;gC,O;oC,Y;oC,c;gC;4B,G;gC,I,G,mB,I,G,K,Q;6B;4B,I,G;4B,G,iB;gC,a;gC,O;oC,Y;gC;4B,G;gC,G,O;oC,a;oC,O;wC,oB,K,K;oC;gC;gC,I,G;gC,G,O;oC,a;gC,G;oC,I,G,I,G,K,K;iC;6B;4B,I,G;4B,G,iB;gC,O;oC,Y;oC,c;gC;4B,G;gC,I,G,mB,I,G,I,G,sB,K,iB;6B;4B,I,G;4B,G,iB;gC,O;oC,Y;oC,c;gC;4B,G;gC,I,G,mB,I,G,I,G,mB,K;6B;4B,I,G;4B,G,iB;gC,O;oC,Y;gC;4B,G;gC,I,G,mB,I,G,I,G,Y,K,S;6B;4B,I,G;4B,G,iB;gC,O;oC,Y;gC;4B,G;gC,G,W;oC,a;oC,O;wC,W;oC;gC,G;oC,G,a;wC,a;wC,O;4C,mB;wC;oC,G;wC,G,W;4C,I,G;yC;qC,E;oC,I,G;oC,G,mB;wC,a;oC,G;wC,K,K,S,I,G,gB;4C,I;gD,S,S,M;oD,O,I,e;gD;4C;wC,G;4C,G,W;gD,I,G;6C;4C,I,G;4C,G,Q;gD,I,G;6C;yC,E,K,I;wC,I,G;wC,K,K,Q,I,G,gB;4C,I;gD,S,S,M;oD,O,I,mB;gD;4C;wC,G;4C,G,W;gD,I,G;6C;4C,I,G;4C,G,Q;gD,I,G;6C;yC,E,K,I;wC,I,G;wC,G,gB;4C,I;gD,S,S,M;oD,O,I,Y;gD;4C;wC,G;4C,G,W;gD,I,G;6C;4C,I,G;4C,G,Q;gD,I,G;6C;yC,E;wC,I,G;wC,C,I,W,Q,G,gB;4C,I;gD,S,S,M;oD,O,I,c;gD;4C;wC,G;4C,G,W;gD,I,G;6C;4C,I,G;4C,G,Q;gD,I,G;6C;yC,E,K,I;wC,I,G;wC,I,W,Q,G,gB;4C,I;gD,S,S,M;oD,O,I,gB;gD;4C;wC,G;4C,G,W;gD,I,G;6C;4C,I,G;4C,G,Q;gD,I,G;6C;yC,E,K,I;wC,I,G;wC,G,gB;4C,I;gD,S,S,M;oD,O,I,W;gD;4C;wC,G;4C,G,W;gD,I,G;6C;4C,I,G;4C,G,Q;gD,I,G;6C;yC,E;qC,E;iC,E;6B,E;yB,E;oB;gB;a;Y,O;gB,O,I;gB,U,S,G;oB,I,W;gB;gB,Y;Y;Q,G;Y,G,oB;gB,a;gB,O;oB,gB;gB;Y,G;gB,G,O;oB,a;gB,G;oB,G,M;wB,a;oB,G;wB,I,G;qB;iB;gB,I,G;gB,G,O;oB,a;gB,G;oB,G,O;wB,a;oB,G;wB,G,Y;4B,O;gC,gB;4B;wB,G;4B,G,Y;gC,O;oC,e;gC;gC,I;oC,S,I;gC;gC,O;oC,O,I;oC,U,S,G;wC,I,e;oC;oC,Y;gC;4B;yB,E;qB,E;iB;a;Y,I,G;Y,G,wB;gB,O;oB,Y;oB,kB;gB;Y;S,E;K,E;A;A,I,kB,E;A,Q,S;A,Q,kB;;;;;AA/NA,IAAI,OAAO,KAAO;kBAEH,CAAA,UAEf;;;A,I,S;I,I,M,I;I,I,K,I;I,I,K,I,M,M;I,O,G,a;Q,a;Q,O;Y,a,I;Q;Q,I;Y,mB,S,M;gB,I,a;Y;Y,oB,S,M;gB,I,a;Y;Y,a,S,M;gB,O,I,Y;Y;Q;I,G;Q,G,mB;Y,a;Q,G;Y,I,G;S;Q,I,G;Q,G,qB;Y,a;Q,G;Y,I,Y,I,Y,U,G,O;gB,a;Y,G;gB,G,kB;oB,O;wB,Q,I;wB,a,I;wB,a,I;wB,a,I;wB,a,I;wB,c,I;oB;oB,I;wB,iB,I;wB,iB,I;wB,kB,I;wB,wB,I;wB,iB,I;wB,iB,I;oB;gB;a,E,K,A,I,Y,I,Y,U,G,O;gB,a;Y,G;gB,I,G;a,I,I;S;Q,I,G;Q,G,qB;Y,G,a;gB,a;gB,I;oB,S,S,M;wB,O,I,Y;oB;gB;Y,G;gB,I,G;a;Y,I,G;Y,G,a;gB,a;gB,O;oB,Y,C,C,I,a,I,S;gB;gB,I;oB,S,S,M;wB,O,I,Y;oB;gB;Y,G;gB,I,G;a;S,E;K,E;A;A,I,kB,E;A,Q,S;A,Q,kB;;;;;AHJA,IAAI,OAAO,KAAO;kBAEH,CAAA,UAEf;;;;;AIJA,IAAI;AACJ,IAAI,aAAa;IACf,SAAS,QAAQ;IACjB,IAAI,OAAO,YAAY,SAAS,OAAO;IACvC,OAAO,SAAS,QAAQ,oBAA6C;IAC3D,OAAO,kBAAkB,QAAQ,oBAA6C;IAC9E,OAAO,WAAW;IAG5B,QAAQ,oBAA2C,QAAQ;IAC3D,OAAO,YAAY;IACnB,OAAO,SAAS;AAClB;AACA;kBAEe;;;;;A;A;;A;;A,I,gB;I,M;I,O;Q;K;I,Y;Q,iB,C,G,+B;I;I;Q,O;Y,Y;Y,Y;Y,W;Y,U;Q;I;I,S;Q,Q,M;Y,I,C,Y,O;Y,I,C,W,O;Y,I,C;Q;Q,M,S,G;Y,M,Q,I,W;Y,I,I,e,M,S,G;gB,M,K,M,C,G,8C,E,kB,I,C,W;gB,C,G,qB,E,M,yB;Y,uB;Y,uB;Y,I;Y;Y,I,C,a;Q;Q,a,W;Y,I,O,I,C,c,Y,I,C,U;gB;gB,Y,I,C;Y;Q;Q;Y,W;gB,I,C,K,C,gB,C,I;Y,G;Q;I;A;A,I,U,O,kB,a,c,U;kB,S,wC;;;A,I,S;I,I,M,I;I,I,K,I;I,I,K,I,M,M;I,O,G,a;Q,a;Q,O;Y,a,I;Q;Q,I;Y,mB,S,M;gB,I,a;Y;Y,oB,S,M;gB,I,a;Y;Y,a,S,M;gB,O,I,Y;Y;Q;I,G;Q,G,mB;Y,a;Q,G;Y,I,G;S;Q,I,G;Q,G,qB;Y,G,Y;gB,G,S;oB,I,G;iB;gB,I,G;gB,G,Y;oB,K;oB,O;wB,O,I;wB,U,S,G;4B,I,a;wB;wB,Y;oB;gB;a,E;S,E;Q,I,G;Q,G,qB;Y,G,a;gB,a;gB,I;oB,S,S,M;wB,O,I,Y;oB;gB;Y,G;gB,I,G;a;Y,I,G;Y,G,a;gB,a;gB,O;oB,Y,I,W,O,W;gB;gB,I;oB,S,S,M;wB,O,I,Y;oB;gB;Y,G;gB,I,G;a;S,E;K,E;A;A,I,kB,E;A,Q,S;A,Q,kB;;;;;AAff,IAAI,OAAO,KAAO;kBAEH,CAAA,UAEf;;;;;ACJA,IAAI;AACJ,IAAI,aAAa;IACf,SAAS,QAAQ;IACjB,IAAI,OAAO,YAAY,SAAS,OAAO;IACvC,OAAO,SAAS,QAAQ,oBAAgC;IAC9C,OAAO,kBAAkB,QAAQ,oBAAgC;IACjE,OAAO,WAAW;IAG5B,QAAQ,oBAA8B,QAAQ;IAC9C,OAAO,YAAY;IACnB,OAAO,SAAS;AAClB;AACA;kBAEe;;;;;A,I,gB;I,M;I,O;Q;K;I;Q,O;Y,Y;Y,S;Y,U;Q;I;I,S;Q,Q,M;Y,I,C,U,O;Y,I,C,W,O;Q;Q,M,S,G;Y,I,I,e,I,C,U,I,C;Y,I,C,a;Q;Q,a,W;Y,I,O,I,C,c,Y,I,C,U;gB;Y;Q;I;A;A,I,U,O,kB,a,c,U;kB,S,wC;;;A,I,S;I,I,M,I;I,I,K,I;I,I,K,I,M,M;I,O,G,a;Q,a;Q,O;Y,a,I;Q;Q,I;Y,mB,S,M;gB,I,a;Y;Y,oB,S,M;gB,I,a;Y;Y,a,S,M;gB,O,I,Y;Y;Q;I,G;Q,G,mB;Y,a;Q,G;Y,I,G;S;Q,I,G;Q,G,qB;Y,I,G,W,I,G,I,W;S;Q,I,G;Q,G,qB;Y,G,a;gB,a;gB,I;oB,S,S,M;wB,O,I,Y;oB;gB;Y,G;gB,I,G;a;Y,I,G;Y,G,a;gB,a;gB,I;oB,S,S,M;wB,O,I,Y;oB;gB;Y,G;gB,I,G;a;S,E;K,E;A;A,I,kB,E;A,Q,S;A,Q,kB;;;;;AAff,IAAI,OAAO,KAAO;kBAEH,CAAA,UAEf;;;;ACLA;;AACA;;AACA;;AACA;;AAEA,MAAM,EACJ,oBAAoB,EACrB,GAAG,QAAQ;AAGZ,MAAM,SAAS;IAAC;QACZ,MAAM;QACN,mBAAmB,CAAA,GAAA,mBAAE,EAAE,OAAO,CAAA,GAAA,gCAAiB;QAC/C,OAAO;YACL,OAAO;YACP,gBAAgB;QAClB;QACA,OAAO;YACL,QAAQ;YACR,MAAM;QACR;IACF;IACA;QACE,MAAM;QACN,mBAAmB,CAAA,GAAA,mBAAE,EAAE,OAAO,CAAA,GAAA,oCAAiB;QAC/C,OAAO;YACL,OAAO;YACP,gBAAgB;QAClB;QACA,OAAO;YACL,UAAU;YACV,QAAQ;YACR,MAAM;QACR;IACF;IACA;QACE,MAAM;QACN,mBAAmB,CAAA,GAAA,mBAAE,EAAE,OAAO,CAAA,GAAA,oCAAgB;QAC9C,OAAO;YACL,OAAO;YACP,gBAAgB;QAClB;QACA,OAAO;YACL,QAAQ;YACR,MAAM;QACR;IACF;CACD;AAED,IAAK,IAAI,QAAQ,GAAG,QAAQ,OAAO,QAAQ,QAAS;IAClD,MAAM,UAAU,MAAM,CAAC,MAAM;IAC7B,MAAM,iBAAiB,qBAAqB,gBAAgB;IAC5D,qBAAqB,kBAAkB,QAAQ,MAAM;AACvD;;;;;ACpDA,IAAI;AACJ,IAAI,aAAa;IACf,SAAS,QAAQ;IACjB,IAAI,OAAO,YAAY,SAAS,OAAO;IACvC,OAAO,SAAS,QAAQ,oBAAgC;IAC9C,OAAO,kBAAkB,QAAQ,oBAAgC;IACjE,OAAO,WAAW;IAE5B,OAAO,eAAe,QAAQ,oBAA6B;IAC3D,QAAQ,oBAA8B,QAAQ;IAC9C,OAAO,YAAY;IACnB,OAAO,SAAS;AAClB;AACA;kBAEe;;;;;A;A;;A,yD;A,iD;A;;A,I,gB;I,M;I,Y;Q,a,C,G,2B;Q,+B;Q,iC;Q,yB;Q,e,C,G,0B;I;I;Q,I,C,Q;Y,U;Y,W;Y,O;Y,S;Q;Q,O;Y,M,E;Y,e,I,C,M;Y,iB;Y,iB;Y,c;Y,W,E;Y,O,E;Y,S,E;Q;I;I,M;Q,M,I,C;I;I,S;Q,M,Q,M;Y,M,I,C;Y,I,C,a;Y,I,C,a;Y,I,C,U;Q;Q,e,S;Y,I,C,kB;Y,I,C,gB,I,C,M;Q;Q,e,S;Y,I,C,kB;Y,I,C,gB,I,C,M;Q;Q,Y,M;Y,I,C,e;Y,I,C,gB,I,C,M;Q;Q;Y,I,C,gB,I,C,M;Y,I,C;Q;Q;Y,M,M,E;Y,K,M,Q,I,C,M,I,Q,I,C,e;Y,I,C,U;Q;Q,M;Y,I,C,O,M,C,G,oB,E;Q;Q;Y,M,O,I,C,K,K,C,K,G,O,I,C;Y,I,M,I,C,Y,K;QA2Df;QACA;YACA,MAAA,OAAA,IAAA,CAAA,UAAA,KAAA,CAAA,KAAA,GAAA,OAAA,IAAA,CAAA;YACA,IAAA,MACA,IAAA,CAAA,QAAA,KAAA;QAEA;QACA;YACA,IAAA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AAO;IACvC,OAAO,SAAS,QAAQ,oBAA2B;IACzC,OAAO,kBAAkB,QAAQ,oBAA2B;IAC5D,OAAO,WAAW;IAE5B,OAAO,eAAe,QAAQ,oBAAwB;IACtD,QAAQ,oBAAyB,QAAQ;IACzC,OAAO,YAAY;IACnB,OAAO,SAAS;AAClB;AACA;kBAEe;;;;;A,I,gB;I,M;I,O;Q,M,C;I;I;Q,O,C;I;I,S;Q,Q,E;Y,I,C,M,U;Q;I;A;A,I,U,O,kB,a,c,U;kB,S,wC;;;A,I,S;I,I,M,I;I,I,K,I;I,I,K,I,M,M;I,O,G,c;Q,a;I,G;Q,G,W;Y,a;Q,G;Y,I,G;Y,I,G;Y,I,G,I,M,S,I;gB,O,G,gB;oB,K,K;oB,I;wB,S,S,M;4B,O,I,O,K;wB;oB;gB,G;oB,K,Q,G,O;wB,a;wB,O;4B,oB,K;wB;oB,K,I;oB,I,G;oB,G,Q;wB,a;oB,G;wB,I,G,I,G,K;qB;oB,I,G;oB,G,W;wB,I,G;qB;iB,E;Y;S,E;K,E;A;A,I,kB,E;A,Q,S;A,Q,kB;;;;;AAff,IAAI,OAAO,KAAO;kBAEH,CAAA,UAEf;;;A,I,S;I,I,M,I;I,I,K,I;I,I,K,I,M,M;I,O,G,c;Q,a;I,G;Q,I,kB,G,O;Y,a;Q,G;Y,G,a;gB,I;oB,S,I;gB;Y,G;gB,G,W;oB,I,G;iB;gB,I,G;a,E;S,E,K,I;Q,I,G;Q,G,O;Y,a;Q,G;Y,I,kB,I,M,W,G,a;gB,O;oB,Q,I;gB;gB,I;oB,U,I;gB;Y,K,A,I,kB,I,M,Y,G,a;gB,O;oB,Q,I;gB;gB,I;oB,U,I;gB;Y,K,A,I,kB,I,M,Q,G,a;gB,O;oB,Q,I;gB;gB,I;oB,U,I;gB;Y,G;gB,G,gB;oB,I;wB,S,I;oB;gB,G;oB,G,O;wB,a;oB;oB,I,G;oB,G,Q;wB,a;oB,G;wB,I,G;qB;oB,I,G;oB,G,W;wB,I,G;qB;iB,E;a,E,K,A,I,kB,I,M,U,G,e;gB,O;oB,Q,I;gB;gB,I;oB,U,I;gB;Y,K,I;S,E;K;A;A,I,kB,E;A,Q,S;A,Q,kB;;;;;AFJA,IAAI,OAAO,KAAO;kBAEH,CAAA,UAEf;;;;;AGJA,IAAI;AACJ,IAAI,aAAa;IACf,SAAS,QAAQ;IACjB,IAAI,OAAO,YAAY,SAAS,OAAO;IACvC,OAAO,SAAS,QAAQ,oBAAoC;IAClD,OAAO,kBAAkB,QAAQ,oBAAoC;IACrE,OAAO,WAAW;IAE5B,OAAO,eAAe,QAAQ,oBAAiC;IAC/D,QAAQ,oBAAkC,QAAQ;IAClD,OAAO,YAAY;IACnB,OAAO,SAAS;AAClB;AACA;kBAEe;;;;;A;A;A;A;A;;A,2D;A;;A,qG;A;;A;A;;A;A;A;A,I,gB;I,M;I,wB;I,Y;Q,iB,C,G,+B;Q,qB,C,G,mC;I;I;Q,I,C,S;Q,O;Y,Y;Y,U;Y,Q,C;Y,M,C;Y,M,E;Y,W;Y,U,E;Y,c;Y,M;gB,a;gB,I,E;Y;Q;I;I;Q,C,G,qB,E,I,C,G,4B,E,Y,O;Y,I,K,O,O,I,C,O,M,K,M;gB,I,C,O,K;gB,I,C,O,M,I,C,Q,I,C,O;Y;Q;I;I,S;Q,M,Q,M;Y,I,C,Y;Y,I,C,S,O;Y,I,C,W;gB,c,C,G,+C,E,Y,O,a;Y;Y,M,Q,I;gB,I,C,Q,O,a;gB,I,C,Q,O,a;a,E,K,C;gB,M,Y,I,C,O,Y,I,C,O,Y,I,C,e,I,C,O,I;gB,I,C,O,M,C,E;gB,I,C,O,M,C,E;gB,I,C,S;oB,c,C,G,+C,E,Q,I,C,O;oB,S,C,G,+C,E,Q;gB;gB,I,C,Y;Y,6B;Y;Q;Q,M,S,G;Q,yB;Q,I;Q,2B;Q;Q,W;Q,S,E;Y,M,O,C,G,+C,E,Q;Y,I,M,O,Q,Q,K;Y,O,C,G,+C,E,a,I,K,C;gB,O,O;Y;Q;Q,S,E;Y,O,C,G,8C,E,Q;Q;Q,M;Y,M,O,M,C,G,kB,E;Y,M,Y,I,C,O,Y,I,C,O,Y,I,C,e,I,C,O,I;Y,M,Y,I,C,K;Y,M,W,I,C,O;Y,C,G,8C,E,qB,W,W,U,M,K,O;gB,I,C,S,C,G,+C,E,Q,U;gB,wB;gB,C,G,qB,E,M,C,G,4B,E,Y;oB,Q,I,C;oB,M;gB;Y;Q;Q,M;Y,M,O,M,C,G,kB,E;Y,M,Y,I,C,O,Y,I,C,O,Y,I,C,e,I,C,O,I;Y,M,Y,I,C,K;Y,M,W,I,C,O;Y,C,G,8C,EA4Hf,yBAAA,WAAA,WAAA,UAAA,MACA,KAAA,CAAA;gBACA,IAAA,CAAA,SAAA,CAAA,GAAA,+CAAA,EAAA,QAAA,UAAA;gBACA,4BAAA;gBACA,CAAA,GAAA,qBAAA,EAAA,MAAA,CAAA,GAAA,4BAAA,EAAA,YAAA;oB,Q,I,C;oBAEA,MAAA;gBACA;YACA;QACA;QAEA,gBAAA,EAAA;YACA,MAAA,WAAA,CAAA,GAAA,+CAAA,EAAA,YAAA;Y,M,Y,S,W,gB,C,E;YAEA,OAAA,CAAA,GAAA,+CAAA,EAAA,QAAA,WAAA;QACA;Q;YAGA,MAAA,SAAA,IAAA,CAAA,GAAA,sCAAA;YACA,OAAA,OAAA,IAAA,CAAA;QACA;QAEA;YACA,MAAA,SAAA,IAAA,CAAA,GAAA,2BAAA;YACA,OAAA,OAAA,IAAA,CAAA;QACA;QAEA;Y,M,S,I,C,G,iC;YAEA,OAAA,OAAA,IAAA,CAAA;QACA;IACA;IACA,OAAA;QACA;YACA,IAAA,CAAA,eAAA,IAAA,CAAA,QAAA,IAAA,CAAA,KAAA,OAAA,IAAA,CAAA,KAAA,OAAA;QACA;IACA;IACA,UAAA;IAIA;IACA,SAAA;QACA,YAAA,IAAA;Y,O,C,G,sB,E,S,O,O;QAEA;QAEA,gBAAA,QAAA;YACA,KAAA,MAAA,OAAA,OAAA,KAAA,CAAA,GAAA,4BAAA,GAAA;gBACA,IAAA,CAAA,GAAA,4BAAA,CAAA,CAAA,IAAA,IAAA,UAAA,OAAA;YACA;QACA;IACA;A;AAGA,IAAA,UAAA,OAAA,kBAAA,aAAA,cAAA,UAAA;kBACA,SAAA,wCAAA;;;;;ACnMA,IAAI;AACJ,IAAI,aAAa;IACf,SAAS,QAAQ;IACjB,IAAI,OAAO,YAAY,SAAS,OAAO;IACvC,OAAO,SAAS,QAAQ,oBAA+B;IAC7C,OAAO,kBAAkB,QAAQ,oBAA+B;IAChE,OAAO,WAAW;IAE5B,OAAO,eAAe,QAAQ,oBAA4B;IAC1D,QAAQ,oBAA6B,QAAQ;IAC7C,OAAO,YAAY;IACnB,OAAO,SAAS;AAClB;AACA;kBAEe;;;;;A;;A,I,gB;I,M;I,O;Q,M,C;I;I,Y;Q,W,C,G,sB;I;I;Q,O,C;I;I,S,C;A;A,I,U,O,kB,a,c,U;kB,S,wC;;;;;ACff,IAAI;AACJ,IAAI,aAAa;IACf,SAAS,QAAQ;IACjB,IAAI,OAAO,YAAY,SAAS,OAAO;IACvC,OAAO,SAAS,QAAQ,oBAAsB;IACpC,OAAO,kBAAkB,QAAQ,oBAAsB;IACvD,OAAO,WAAW;IAE5B,OAAO,eAAe,QAAQ,oBAAmB;IACjD,QAAQ,oBAAoB,QAAQ;IACpC,OAAO,YAAY;IACnB,OAAO,SAAS;AAClB;AACA;kBAEe;;;;;A;A;;A;A,I,gB;I,M;I,O;Q;K;I;Q,O;Y,O;Y,U;Q;I;I;Q,I,C;I;I,S;Q,M;Y,kB;Y,oE;Y,I,I,C,I,Q,I,C,I,K,M,I,C,W,I,C,I,K;iB,I,I,C,I,Q,I,C,I,K,U,I,C,W,I,C,I,K;iB,I,C,W;Y,I,I,C,I,S,C,G,sB,E,U,I,C,Q;iB,I,I,C,I,S,C,G,sB,E,U,I,C,Q;iB,I,I,C,I,S,C,G,sB,E,W,I,C,Q;iB;gB,M,W,I,C,I,M,I,C,K,C,G,+C,E,a;gBAyBf,QAAA,IAAA,UAAA,KAAA,CAAA;oBACA,MAAA,QAAA,MAAA,CAAA,EAAA,CAAA,KAAA;oB,M,Q,M,C,E,C,K;oBAEA,uEAAA;oBACA,8CAAA;oBACA,0BAAA;oBACA,sBAAA;oBAEA,mBAAA;oBACA,yCAAA;oBACA,4CAAA;oBAEA,IAAA,CAAA,QAAA,CAAA,WAAA,EAAA,MAAA,IAAA,EAAA,MAAA,CAAA;gBACA;YACA;QACA;IACA;IACA,SAAA;QACA,YAAA,IAAA;Y,uD;YAEA,OAAA,CAAA,GAAA,sBAAA,EAAA,MAAA;QACA;IACA;AACA;AAEA,IAAA,UAAA,OAAA,kBAAA,aAAA,cAAA,UAAA;kBACA,SAAA,wCAAA;;;A,I,S;I,I,M,I;I,I,K,I;I,I,K,I,M,M;I,O,G,gB;Q,G,iB;Y,I,G,I,G,I,G,c,I,I;S;Q,I,G;Q,G,iB;Y,I,G,I,G,I,S,S,I,I,W,a;S;Q,I,G;Q,G,iB;Y,I,G,I,G,I;S;K,E;A;A,I,kB,E;A,Q,S;A,Q,kB;;;;;AAlEA,IAAI,OAAO,KAAO;kBAEH,CAAA,UAEf;;;A,I,S;I,I,M,I;I,I,K,I;I,I,K,I,M,M;I,O,G,c;Q,a;I,G;Q,G,Y;Y,a;Q,G;Y,G,gB;gB,G,iB;oB,I,G;iB;gB,I,G;gB,G,iB;oB,I,G;iB;gB,I,G;gB,G,iB;oB,I,G;iB;a,E;Y,I,G;Y,I,G,I,M,S,G,E,K;gB,O,G,W;oB,K;oB,O;wB,O;oB;gB;Y;S,E;K,E;A;A,I,kB,E;A,Q,S;A,Q,kB;;;;;ADJA,IAAI,OAAO,KAAO;kBAEH,CAAA,UAEf;;;A,I,S;I,I,M,I;I,I,K,I;I,I,K,I,M,M;I,O,G,O;Q,a;I,G;Q,I,U,C,I,Y,G,O;Y,a;Q,G;Y,G,O;gB,a;Y,G;gB,G,c;oB,a;gB,G;oB,G,O;wB,a;oB,G;wB,G,O;4B,a;wB,G;4B,I,G;yB;wB,I,G;wB,G,O;4B,a;wB,G;4B,I,G,I,G,I,O;yB;qB;oB,I,G;oB,G,O;wB,a;oB,G;wB,G,O;4B,a;wB,G;4B,I,G;yB;wB,I,G;wB,G,O;4B,a;wB,G;4B,I,G,I,G,I;yB;qB;oB,I,G;oB,G,O;wB,a;oB,G;wB,G,O;4B,a;wB,G;4B,I,G;yB;wB,I,G;wB,G,O;4B,a;wB,G;4B,I,G,I,G,I,G,kB,I,O;yB;qB;oB,I,G;oB,I,O,O,G,O;wB,a;oB,G;wB,G,O;4B,a;wB,G;4B,I,G;yB;wB,I,G;wB,G,O;4B,a;wB,G;4B,I,G,I,G,I,O,K;yB;qB,I,I;oB,I,G;oB,G,O;wB,a;oB,G;wB,G,O;4B,a;wB,G;4B,I,G;yB;wB,I,G;wB,G,O;4B,a;wB,G;4B,I,G,I,G,I,G,c,I,O;yB;qB;iB;gB,I,G;gB,G,O;oB,a;gB,G;oB,G,W;wB,a;oB,G;wB,G,gB;4B,a;wB,G;4B,G,O;gC,a;4B,G;gC,G,a;oC,a;oC,O;wC,S;oC;oC,I;wC,S,I;oC;gC,G;oC,G,W;wC,I,G;qC;iC,E;gC,I,G;gC,G,a;oC,a;oC,O;wC,S;oC;oC,I;wC,S,I;oC;gC,G;oC,G,W;wC,I,G;qC;iC,E;gC,I,G;gC,G,a;oC,a;oC,O;wC,S;oC;oC,I;wC,S,I;oC;gC,G;oC,G,W;wC,I,G;qC;iC,E;6B,E;yB;wB,I,G;wB,G,gB;4B,a;4B,I;gC,S,I;4B;wB,G;4B,G,W;gC,I,G;6B;4B,I,G;4B,G,Q;gC,a;4B,G;gC,I,G;6B;yB,E;wB,I,G;wB,G,gB;4B,a;4B,I;gC,S,I;4B;wB,G;4B,G,W;gC,I,G;6B;4B,I,G;4B,G,Q;gC,a;4B,G;gC,I,G;6B;yB,E;qB,E;iB,E;a,E;Y,I,G;Y,G,O;gB,a;Y,G;gB,G,O;oB,a;gB,G;oB,G,O;wB,a;oB,G;wB,I,G;qB;oB,I,G;oB,G,c;wB,a;oB,G;wB,G,qB;4B,O;gC,Y,I;4B;wB;qB,E;iB,E;gB,I,G;gB,G,O;oB,a;gB,G;oB,G,O;wB,a;oB,G;wB,I,G;qB;oB,I,G;oB,G,c;wB,a;oB,G;wB,G,iB;4B,O;gC,Q,I;4B;wB;qB,E;iB,E;a;S,I,A,I,Y,G,O;Y,a;Q,G;Y,G,uB;gB,O;oB,W;gB;Y;S,E,K,I;K;A;A,I,kB,E;A,Q,S;A,Q,kB;;;;;ADJA,IAAI,OAAO,KAAO;kBAEH,CAAA,UAEf;;;;;AGJA,IAAI;AACJ,IAAI,aAAa;IACf,SAAS,QAAQ;IACjB,IAAI,OAAO,YAAY,SAAS,OAAO;IACvC,OAAO,SAAS,QAAQ,oBAAoC;IAClD,OAAO,kBAAkB,QAAQ,oBAAoC;IACrE,OAAO,WAAW;IAE5B,OAAO,eAAe,QAAQ,oBAAiC;IAC/D,QAAQ,mBAAkC,QAAQ;IAClD,OAAO,YAAY;IACnB,OAAO,SAAS;AAClB;AACA;kBAEe;;;;;A;A;A;A;;A;;A,I,gB;I,M;I,Y;Q,e,C,G,0B;I;I;Q,O;Y,S,E;Y,c;Y,W;Q;I;I,S;Q,M,Q,M;Y,iC;Y,I,C,Y;Y,I,C,e,O;Y,C,G,+C,E,S,O;Y,M,S,O,a,Q;Y,I,C,U,M,I,C,e;Y,I,C,Y;Q;Q,W;Q,gB,M;Y,O,C,G,8C,E,mB,Q,K,C;gB,wB;gB,M,W,Q,I,O;oB,O,O,M,I,C,Q;oB,O;gB;gB,O,Q,I,U,K,C;oBA6Bf,OAAA,OAAA,OAAA,CAAA,KAAA,GAAA;gBACA;YACA;Q;QAGA,MAAA,SAAA,UAAA;Y,M,S,W;YAGA,MAAA,OAAA,CAAA,GAAA,+CAAA,EAAA,QAAA;YACA,IAAA,MAAA,OAAA,KAAA;YAEA,MAAA,UAAA,MAAA,CAAA,GAAA,+CAAA,EAAA,WAAA,WAAA,IAAA,EAAA;YACA,wBAAA;YAEA,MAAA,QAAA,QAAA,KAAA,CAAA,KAAA,GAAA,GAAA,UAAA;YACA,IAAA,OAAA,OAAA,MAAA;QAEA,oEAAA;QACA,8BAAA;QACA,UAAA;QACA;QAEA,MAAA;YACA,MAAA,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","sources":["node_modules/spinal-env-viewer-plugin-ticket/index.js","node_modules/spinal-env-viewer-plugin-ticket/src/buttons/index.js","node_modules/spinal-env-viewer-plugin-ticket/src/buttons/createContext.js","node_modules/spinal-env-viewer-panel-manager-service/index.js","node_modules/spinal-env-viewer-panel-manager-service/SpinalPanelManagerService.js","node_modules/spinal-env-viewer-panel-manager-service/SpinalPanelApp.js","node_modules/spinal-env-viewer-panel-manager-service/SpinalMountExtention.js","node_modules/spinal-env-viewer-plugin-ticket/src/buttons/createProcess.js","node_modules/spinal-service-ticket/dist/Constants.js","node_modules/spinal-service-ticket/src/Constants.ts","node_modules/spinal-service-ticket/dist/old_constants.js","node_modules/spinal-service-ticket/src/old_constants.ts","node_modules/spinal-env-viewer-plugin-ticket/src/buttons/createStep.js","node_modules/spinal-env-viewer-plugin-ticket/src/buttons/createTicket.js","node_modules/spinal-env-viewer-plugin-ticket/src/buttons/manageTicket.js","node_modules/spinal-env-viewer-plugin-ticket/src/buttons/createCommonIncident.js","node_modules/spinal-env-viewer-plugin-ticket/src/buttons/seeTicketDetail.js","node_modules/spinal-env-viewer-plugin-ticket/src/buttons/passToNextStep.js","node_modules/spinal-env-viewer-plugin-ticket/src/extensions/spinalIO.js","node_modules/spinal-env-viewer-plugin-ticket/src/extensions/crypt.js","node_modules/spinal-env-viewer-plugin-ticket/src/extensions/Event.js","node_modules/spinal-env-viewer-plugin-ticket/src/extensions/ticketsEvents.js","node_modules/spinal-env-viewer-plugin-ticket/src/buttons/backToPreviousStep.js","node_modules/spinal-env-viewer-plugin-ticket/src/buttons/standard_buttons/selectElement.js","node_modules/spinal-env-viewer-plugin-standard_button/js/selectBIMObjectButton.js","node_modules/spinal-env-viewer-plugin-standard_button/js/utilities.js","node_modules/spinal-env-viewer-plugin-standard_button/js/fitToViewerButton.js","node_modules/spinal-env-viewer-plugin-ticket/src/extensions/colorElementExtension.js","node_modules/spinal-env-viewer-plugin-ticket/src/buttons/standard_buttons/isolate.js","node_modules/spinal-env-viewer-plugin-ticket/src/buttons/standard_buttons/zoom.js","node_modules/spinal-env-viewer-plugin-ticket/src/buttons/colorElement.js","node_modules/spinal-env-viewer-plugin-ticket/src/vue/dialogs/index.js","node_modules/spinal-env-viewer-plugin-ticket/src/vue/dialogs/createContextDialog.vue","node_modules/spinal-env-viewer-plugin-ticket/src/vue/dialogs/components/sortable-list.vue","node_modules/spinal-env-viewer-plugin-ticket/src/vue/dialogs/components/popover.vue","node_modules/spinal-env-viewer-plugin-ticket/src/vue/dialogs/createProcessDialog.vue","node_modules/spinal-env-viewer-plugin-ticket/src/vue/dialogs/createStepDialog.vue","node_modules/spinal-env-viewer-plugin-ticket/src/vue/dialogs/createTicket.vue","node_modules/spinal-env-viewer-plugin-ticket/src/vue/dialogs/components/attachment.vue","node_modules/spinal-env-viewer-plugin-ticket/src/vue/dialogs/selectProcessDialog.vue","node_modules/spinal-env-viewer-plugin-ticket/src/vue/dialogs/components/selectProcess.vue","node_modules/spinal-env-viewer-plugin-ticket/src/vue/dialogs/components/linkerTemplate.vue","node_modules/spinal-env-viewer-plugin-ticket/src/vue/panels/components/tickets.vue","node_modules/spinal-env-viewer-plugin-ticket/src/vue/dialogs/createCommonIncidentDialog.vue","node_modules/spinal-env-viewer-plugin-ticket/src/vue/dialogs/confirmDialog.vue","node_modules/spinal-env-viewer-plugin-ticket/src/vue/panels/index.js","node_modules/spinal-env-viewer-plugin-ticket/src/vue/panels/ticketManager.vue","node_modules/spinal-env-viewer-plugin-ticket/src/vue/panels/service/utilities.js","node_modules/spinal-env-viewer-plugin-ticket/src/vue/panels/components/listItem.vue","node_modules/spinal-env-viewer-plugin-ticket/src/vue/panels/ticketDetailPanel.vue","node_modules/spinal-env-viewer-plugin-ticket/src/vue/panels/components/logsTemplate.vue","node_modules/spinal-env-viewer-plugin-ticket/src/vue/panels/components/log.vue","node_modules/spinal-env-viewer-plugin-ticket/src/vue/panels/manageTicketPanel.vue","node_modules/spinal-env-viewer-panel-manager-service_spinalforgeextention/index.js","node_modules/spinal-env-viewer-panel-manager-service_spinalforgeextention/SpinalForgeExtention.js","node_modules/spinal-env-viewer-plugin-ticket/src/extensions/forgeExtension.js","node_modules/spinal-env-viewer-bim-manager-service/dist/index.js","node_modules/spinal-env-viewer-bim-manager-service/src/index.ts","node_modules/spinal-env-viewer-bim-manager-service/dist/bimObjects/bimService.js","node_modules/spinal-env-viewer-bim-manager-service/src/bimObjects/bimService.ts","node_modules/@parcel/node-resolver-core/lib/_empty.js"],"sourcesContent":["import \"./src/buttons\";\nimport \"./src/vue/dialogs\";\nimport \"./src/vue/panels\";\nimport \"./src/extensions/forgeExtension\";","import {\n  CreateContextButton\n} from \"./createContext\";\n\nimport {\n  CreateProcess\n} from \"./createProcess\";\n\nimport {\n  CreateStep\n} from \"./createStep\";\n\nimport {\n  CreateTicket\n} from \"./createTicket\";\n\nimport {\n  ManageTicketButton\n} from \"./manageTicket\";\n\nimport {\n  CreateCommonIncident\n} from \"./createCommonIncident\";\n\nimport {\n  spinalContextMenuService\n} from \"spinal-env-viewer-context-menu-service\";\n\nimport {\n  SeeTicketDetailButton\n} from \"./seeTicketDetail\";\n\nimport {\n  PassToNextStepButton\n} from \"./passToNextStep\";\n\nimport {\n  BackToPreviousStepButton\n} from \"./backToPreviousStep\";\n\nimport {\n  SelectElementOnMaquette\n} from \"./standard_buttons/selectElement\";\n\nimport {\n  IsolateElementOnMaquette\n} from \"./standard_buttons/isolate\";\n\nimport {\n  ZoomElementOnMaquette\n} from \"./standard_buttons/zoom\";\n\nimport {\n  ColorElementButton\n} from \"./colorElement\";\n\n/* Constants */\nconst HEADER_HOOK_NAME = \"GraphManagerTopBar\";\nconst SIDEBAR_HOOK_NAME = \"GraphManagerSideBar\";\nconst CIRCULAR_MENU_HOOK = \"circularMenu\";\n\n/* Headerbar Buttons*/\nspinalContextMenuService.registerApp(\n  HEADER_HOOK_NAME,\n  new CreateContextButton(),\n  [3]\n);\n\n/* Sidebar Buttons*/\nspinalContextMenuService.registerApp(\n  SIDEBAR_HOOK_NAME,\n  new ManageTicketButton(),\n  [3]\n);\n\nspinalContextMenuService.registerApp(\n  SIDEBAR_HOOK_NAME,\n  new CreateCommonIncident(),\n  [3]\n);\n\nspinalContextMenuService.registerApp(SIDEBAR_HOOK_NAME, new CreateProcess(), [\n  3,\n]);\n\nspinalContextMenuService.registerApp(SIDEBAR_HOOK_NAME, new CreateStep(), [3]);\n\nspinalContextMenuService.registerApp(SIDEBAR_HOOK_NAME, new CreateTicket(), [\n  3,\n]);\n\nspinalContextMenuService.registerApp(\n  SIDEBAR_HOOK_NAME,\n  new PassToNextStepButton(),\n  [3]\n);\n\nspinalContextMenuService.registerApp(\n  SIDEBAR_HOOK_NAME,\n  new BackToPreviousStepButton(),\n  [3]\n);\n\nspinalContextMenuService.registerApp(\n  SIDEBAR_HOOK_NAME,\n  new SeeTicketDetailButton(),\n  [3]\n);\n\nspinalContextMenuService.registerApp(\n  SIDEBAR_HOOK_NAME,\n  new SelectElementOnMaquette(),\n  [3]\n);\n\nspinalContextMenuService.registerApp(\n  SIDEBAR_HOOK_NAME,\n  new IsolateElementOnMaquette(),\n  [3]\n);\n\nspinalContextMenuService.registerApp(\n  SIDEBAR_HOOK_NAME,\n  new ZoomElementOnMaquette(),\n  [3]\n);\n\nspinalContextMenuService.registerApp(\n  SIDEBAR_HOOK_NAME,\n  new ColorElementButton(),\n  [3]\n);\n\n/* CircularMenu Buttons*/\nspinalContextMenuService.registerApp(CIRCULAR_MENU_HOOK, new CreateTicket(), [\n  3,\n]);","import {\n  SpinalContextApp\n} from 'spinal-env-viewer-context-menu-service'\n\nimport {\n  spinalPanelManagerService\n} from 'spinal-env-viewer-panel-manager-service';\n\n\nexport class CreateContextButton extends SpinalContextApp {\n\n  constructor() {\n    super('Create Ticket context',\n      'This button allows you to create ticket context', {\n        icon: \"receipt\",\n        icon_type: 'in',\n        backgroundColor: \"#356BAB\",\n        fontColor: '#ffffff'\n      })\n  }\n\n\n  isShown(option) {\n    return Promise.resolve(true);\n  }\n\n  action(option) {\n    spinalPanelManagerService.openPanel(\"createTicketContextDialog\")\n  }\n\n}","/*\n * Copyright 2018 SpinalCom - www.spinalcom.com\n *\n * This file is part of SpinalCore.\n *\n * Please read all of the following terms and conditions\n * of the Free Software license Agreement (\"Agreement\")\n * carefully.\n *\n * This Agreement is a legally binding contract between\n * the Licensee (as defined below) and SpinalCom that\n * sets forth the terms and conditions that govern your\n * use of the Program. By installing and/or using the\n * Program, you agree to abide by all the terms and\n * conditions stated or referenced herein.\n *\n * If you do not agree to abide by these terms and\n * conditions, do not demonstrate your acceptance and do\n * not install or use the Program.\n * You should have received a copy of the license along\n * with this file. If not, see\n * <http://resources.spinalcom.com/licenses.pdf>.\n */\n\nconst G_root = typeof window == \"undefined\" ? global : window;\nconst SpinalPanelManagerService = require(\"./SpinalPanelManagerService\");\nconst SpinalPanelApp = require(\"./SpinalPanelApp\");\n\nif (typeof G_root.spinal === \"undefined\") G_root.spinal = {};\nif (typeof G_root.spinal.spinalPanelManagerService === \"undefined\")\n  G_root.spinal.spinalPanelManagerService = new SpinalPanelManagerService();\nconst SpinalMountExtention = require(\"./SpinalMountExtention.js\")(\n  G_root.spinal.spinalPanelManagerService,\n  SpinalPanelApp\n);\n\nmodule.exports = {\n  spinalPanelManagerService: G_root.spinal.spinalPanelManagerService,\n  SpinalPanelApp,\n  SpinalMountExtention,\n  install(Vue) {\n    Vue.prototype.$spinalPanelManagerService =\n      G_root.spinal.spinalPanelManagerService;\n  }\n};\n","/*\n * Copyright 2018 SpinalCom - www.spinalcom.com\n *\n * This file is part of SpinalCore.\n *\n * Please read all of the following terms and conditions\n * of the Free Software license Agreement (\"Agreement\")\n * carefully.\n *\n * This Agreement is a legally binding contract between\n * the Licensee (as defined below) and SpinalCom that\n * sets forth the terms and conditions that govern your\n * use of the Program. By installing and/or using the\n * Program, you agree to abide by all the terms and\n * conditions stated or referenced herein.\n *\n * If you do not agree to abide by these terms and\n * conditions, do not demonstrate your acceptance and do\n * not install or use the Program.\n * You should have received a copy of the license along\n * with this file. If not, see\n * <http://resources.spinalcom.com/licenses.pdf>.\n */\n\n/**\n *  Containter like service to register and get applications relative to a hookname\n *\n * @property {object} panels key = panelName, value = an instance of SpinalPanelApp\n * @class SpinalPanelManagerService\n */\nclass SpinalPanelManagerService {\n  /**\n   *Creates an instance of SpinalPanelManagerService.\n   * @memberof SpinalPanelManagerService\n   */\n  constructor() {\n    this.panels = {};\n  }\n\n  /**\n   * method to register an Panel Application\n   *\n   * @param {string} panelName the name of the panel\n   * @param {SpinalPanelApp} spinalPanelApp the application\n   * @memberof SpinalPanelManagerService\n   */\n  registerPanel(panelName, spinalPanelApp) {\n    this.panels[panelName] = spinalPanelApp;\n  }\n\n  /**\n   *\n   *\n   * @param {*} panelName\n   * @param {*} option\n   * @returns {bool}\n   * @memberof SpinalPanelManagerService\n   */\n  openPanel(panelName, option) {\n    if (typeof this.panels[panelName] !== \"undefined\")\n      return this.panels[panelName].openPanel(option);\n    return false;\n  }\n  /**\n   *\n   *\n   * @param {*} panelName\n   * @param {*} option\n   * @returns {bool}\n   * @memberof SpinalPanelManagerService\n   */\n  closePanel(panelName, option) {\n    if (typeof this.panels[panelName] !== \"undefined\")\n      return this.panels[panelName].closePanel(option);\n    return false;\n  }\n  /**\n   *\n   *\n   * @param {*} panelName\n   * @param {*} option\n   * @returns {bool}\n   * @memberof SpinalPanelManagerService\n   */\n  tooglePanel(panelName, option) {\n    if (typeof this.panels[panelName] !== \"undefined\")\n      return this.panels[panelName].tooglePanel(option);\n    return false;\n  }\n}\n\nmodule.exports = SpinalPanelManagerService;\n","/*\n * Copyright 2018 SpinalCom - www.spinalcom.com\n *\n * This file is part of SpinalCore.\n *\n * Please read all of the following terms and conditions\n * of the Free Software license Agreement (\"Agreement\")\n * carefully.\n *\n * This Agreement is a legally binding contract between\n * the Licensee (as defined below) and SpinalCom that\n * sets forth the terms and conditions that govern your\n * use of the Program. By installing and/or using the\n * Program, you agree to abide by all the terms and\n * conditions stated or referenced herein.\n *\n * If you do not agree to abide by these terms and\n * conditions, do not demonstrate your acceptance and do\n * not install or use the Program.\n * You should have received a copy of the license along\n * with this file. If not, see\n * <http://resources.spinalcom.com/licenses.pdf>.\n */\n\n/**\n * Base interface like class of a panel\n *\n * @class SpinalPanelApp\n */\nclass SpinalPanelApp {\n  constructor() {}\n\n  openPanel(option) {}\n  closePanel(option) {}\n  tooglePanel(option) {}\n}\n\nmodule.exports = SpinalPanelApp;\n","/*\n * Copyright 2018 SpinalCom - www.spinalcom.com\n *\n * This file is part of SpinalCore.\n *\n * Please read all of the following terms and conditions\n * of the Free Software license Agreement (\"Agreement\")\n * carefully.\n *\n * This Agreement is a legally binding contract between\n * the Licensee (as defined below) and SpinalCom that\n * sets forth the terms and conditions that govern your\n * use of the Program. By installing and/or using the\n * Program, you agree to abide by all the terms and\n * conditions stated or referenced herein.\n *\n * If you do not agree to abide by these terms and\n * conditions, do not demonstrate your acceptance and do\n * not install or use the Program.\n * You should have received a copy of the license along\n * with this file. If not, see\n * <http://resources.spinalcom.com/licenses.pdf>.\n */\n\nfunction configInit(option) {\n  const cfg = {};\n  if (!option.vueMountComponent) {\n    throw new Error(\"mount : missing option vueMountComponent\");\n  }\n\n  cfg.name = option.name || \"SpinalMount\";\n  cfg.vueMountComponent = option.vueMountComponent;\n  cfg.parentContainer = option.parentContainer || document.body;\n  return cfg;\n}\n\nfunction getDialog() {\n  if (!this.dialog) {\n    this.dialog = document.createElement(\"div\");\n    const _compo = document.createElement(\"div\");\n    this.dialog.className = \"spinal-modal-container\";\n    this.cfg.parentContainer.appendChild(this.dialog);\n    this.dialog.appendChild(_compo);\n    this.compoment = new this.cfg.vueMountComponent({\n      propsData: {\n        onFinised: this.onFinised.bind(this)\n      }\n    }).$mount(_compo);\n  }\n  return this.dialog;\n}\n\n/**\n *\n * @param {*} spinalPanelManagerService\n * @param {*} SpinalPanelApp\n * @returns {object} { mount }\n */\nmodule.exports = function(spinalPanelManagerService, SpinalPanelApp) {\n  return {\n    /**\n```js\n{\n  name: \"myCustomDialogName\",\n  vueMountComponent: Vue.extend(aVueCompomentDialog),\n  parentContainer: document.body\n}```\n     *\n     * @param {*} option\n     */\n    mount(option) {\n      let cfg = configInit(option);\n      const SpinalMount = class extends SpinalPanelApp {\n        constructor() {\n          super();\n          this.cfg = cfg;\n          this.dialog = null;\n          this.compoment = null;\n        }\n\n        openPanel(opt) {\n          getDialog.call(this);\n          this.compoment.opened(opt);\n        }\n        closePanel(opt) {\n          if (this.dialog !== null) {\n            this.compoment.removed(opt);\n            this.dialog.remove();\n            this.dialog = null;\n            this.compoment = null;\n          }\n        }\n\n        tooglePanel(opt) {\n          if (this.dialog !== null) {\n            this.closePanel(opt);\n          } else {\n            this.openPanel(opt);\n          }\n        }\n\n        /**\n         * called when dialog closed by the dialog itself\n         */\n        onFinised(closeResult) {\n          this.closePanel(closeResult);\n        }\n      };\n      let SpinalMountInstance = new SpinalMount();\n      spinalPanelManagerService.registerPanel(cfg.name, SpinalMountInstance);\n    }\n  };\n};\n","import {\n  SpinalContextApp\n} from 'spinal-env-viewer-context-menu-service'\n\nimport {\n  spinalPanelManagerService\n} from 'spinal-env-viewer-panel-manager-service';\n\nimport {\n  SERVICE_TYPE\n} from \"spinal-service-ticket/dist/Constants\";\n\nexport class CreateProcess extends SpinalContextApp {\n\n  constructor() {\n    super('Create ticket Process',\n      'This button allows you to create ticket processes', {\n        icon: \"category\",\n        icon_type: 'in',\n        backgroundColor: \"#356BAB\",\n        fontColor: '#ffffff'\n      })\n  }\n\n\n  isShown(option) {\n    const type = option.selectedNode.type.get();\n\n    return Promise.resolve(type === SERVICE_TYPE ? true : -1);\n\n  }\n\n  action(option) {\n    const contextId = option.context.id.get();\n\n    spinalPanelManagerService.openPanel(\"createProcessDialog\", {\n      contextId\n    })\n  }\n\n}","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ARCHIVE_TICKET_RELATIONS = exports.ARCHIVE_TICKET_TIMESTAMP_ATTR_SPATIAL = exports.ARCHIVE_TICKET_TIMESTAMP_ATTR_PROCESS = exports.ARCHIVE_TICKET_RELATION_TYPE = exports.ARCHIVE_TICKET_PART_TICKET_RELATION = exports.ARCHIVE_TICKET_PART_TYPE = exports.ARCHIVE_TICKET_PART_RELATION = exports.SPATIAL_ARCHIVE_TICKET_TYPE = exports.SPATIAL_ARCHIVE_TICKET_RELATION = exports.PROCESS_ARCHIVE_TICKET_TYPE = exports.PROCESS_ARCHIVE_TICKET_RELATION = exports._TICKET_PRIORITIES = exports.LOGS_EVENTS_STEPS = exports.LOG_TYPE = exports.LOG_RELATION_NAME = exports.LOG_RELATION_TYPE = exports._DEFAULT_INCIDENTS_NAME = exports.INCIDENT_TYPE = exports.INCIDENT_RELATION_NAME = exports.INCIDENT_RELATION_TYPE = exports.INCIDENT_SECTION_RELATION_NAME = exports.INCIDENT_SECTION_TYPE = exports.INCIDENT_SECTION_RELATION_TYPE = exports._DEFAULT_STEPS = exports._ARCHIVED_STEP = exports.DEFAULT_STEPS = exports.ARCHIVED_STEP = exports.STEP_TYPE = exports.STEP_RELATION_NAME = exports.STEP_RELATION_TYPE = exports._PROCESS_TYPE = exports.PROCESS_RELATION_NAME = exports.PROCESS_RELATION_TYPE = exports.ALARM_RELATION_NAME = exports.TICKET_ATTRIBUTE_OCCURENCE_NAME = exports.TIKET_TYPE = exports.TICKET_RELATION_NAME = exports.TICKET_RELATION_TYPE = exports.TICKET_CONTEXT_SUBTYPE_LIST = exports.TICKET_CONTEXT_TYPE = exports.GEO_TYPES = void 0;\n/*\n * Copyright 2019 SpinalCom - www.spinalcom.com\n *\n *  This file is part of SpinalCore.\n *\n *  Please read all of the following terms and conditions\n *  of the Free Software license Agreement (\"Agreement\")\n *  carefully.\n *\n *  This Agreement is a legally binding contract between\n *  the Licensee (as defined below) and SpinalCom that\n *  sets forth the terms and conditions that govern your\n *  use of the Program. By installing and/or using the\n *  Program, you agree to abide by all the terms and\n *  conditions stated or referenced herein.\n *\n *  If you do not agree to abide by these terms and\n *  conditions, do not demonstrate your acceptance and do\n *  not install or use the Program.\n *  You should have received a copy of the license along\n *  with this file. If not, see\n *  <http://resources.spinalcom.com/licenses.pdf>.\n */\nconst OLD_CONSTANTS = require(\"./old_constants\");\n__exportStar(require(\"./old_constants\"), exports);\nconst spinal_model_graph_1 = require(\"spinal-model-graph\");\nvar spinal_env_viewer_context_geographic_service_1 = require(\"spinal-env-viewer-context-geographic-service\");\nObject.defineProperty(exports, \"GEO_TYPES\", { enumerable: true, get: function () { return spinal_env_viewer_context_geographic_service_1.GEOGRAPHIC_TYPES_ORDER; } });\nexports.TICKET_CONTEXT_TYPE = OLD_CONSTANTS.SERVICE_TYPE;\nexports.TICKET_CONTEXT_SUBTYPE_LIST = ['Ticket', 'Alarm'];\n/////////////////////////////////////////\n/////////////// TICKET ///////////////////\nexports.TICKET_RELATION_TYPE = OLD_CONSTANTS.SPINAL_TICKET_SERVICE_TICKET_RELATION_TYPE; // STEP_TO_TICKET_RELATION_TYPE\nexports.TICKET_RELATION_NAME = OLD_CONSTANTS.SPINAL_TICKET_SERVICE_TICKET_RELATION_NAME; // STEP_TO_TICKET_RELATION_NAME\nexports.TIKET_TYPE = OLD_CONSTANTS.SPINAL_TICKET_SERVICE_TICKET_TYPE;\nexports.TICKET_ATTRIBUTE_OCCURENCE_NAME = 'Occurrence number';\nexports.ALARM_RELATION_NAME = 'hasAlarm';\n/////////////////////////////////////////\n/////////////// PROCESS /////////////////\nexports.PROCESS_RELATION_TYPE = OLD_CONSTANTS.SPINAL_TICKET_SERVICE_PROCESS_RELATION_TYPE; // CONTEXT_TO_PROCESS_RELATION_TYPE\nexports.PROCESS_RELATION_NAME = OLD_CONSTANTS.SPINAL_TICKET_SERVICE_PROCESS_RELATION_NAME; //CONTEXT_TO_PROCESS_RELATION_NAME\nexports._PROCESS_TYPE = OLD_CONSTANTS.PROCESS_TYPE;\n//////////////////////////////////////\n/////////////// STEP /////////////////\nexports.STEP_RELATION_TYPE = OLD_CONSTANTS.SPINAL_TICKET_SERVICE_STEP_RELATION_TYPE; // PROCESS_TO_STEP_RELATION_TYPE\nexports.STEP_RELATION_NAME = OLD_CONSTANTS.SPINAL_TICKET_SERVICE_STEP_RELATION_NAME; // PROCESS_TO_STEP_RELATION_NAME\nexports.STEP_TYPE = OLD_CONSTANTS.SPINAL_TICKET_SERVICE_STEP_TYPE;\nexports.ARCHIVED_STEP = OLD_CONSTANTS.ARCHIVED_STEP;\nexports.DEFAULT_STEPS = OLD_CONSTANTS.DEFAULT_STEPS;\nexports._ARCHIVED_STEP = OLD_CONSTANTS.ARCHIVED_STEP;\nexports._DEFAULT_STEPS = OLD_CONSTANTS.DEFAULT_STEPS;\n/////////////////////////////////////////\n/////////////// CATEGORY ////////////////\nexports.INCIDENT_SECTION_RELATION_TYPE = OLD_CONSTANTS.SPINAL_TICKET_SERVICE_INCIDENT_SECTION_RELATION_TYPE;\nexports.INCIDENT_SECTION_TYPE = OLD_CONSTANTS.SPINAL_TICKET_SERVICE_INCIDENT_SECTION_TYPE;\nexports.INCIDENT_SECTION_RELATION_NAME = OLD_CONSTANTS.SPINAL_TICKET_SERVICE_INCIDENT_SECTION_RELATION_NAME;\nexports.INCIDENT_RELATION_TYPE = OLD_CONSTANTS.SPINAL_TICKET_SERVICE_INCIDENT_RELATION_TYPE;\nexports.INCIDENT_RELATION_NAME = OLD_CONSTANTS.SPINAL_TICKET_SERVICE_INCIDENT_RELATION_NAME;\nexports.INCIDENT_TYPE = OLD_CONSTANTS.SPINAL_TICKET_SERVICE_INCIDENT_TYPE;\nexports._DEFAULT_INCIDENTS_NAME = OLD_CONSTANTS.DEFAULT_INCIDENTS_NAME;\nexports.LOG_RELATION_TYPE = OLD_CONSTANTS.SPINAL_TICKET_SERVICE_LOG_RELATION_TYPE;\nexports.LOG_RELATION_NAME = OLD_CONSTANTS.SPINAL_TICKET_SERVICE_LOG_RELATION_NAME;\nexports.LOG_TYPE = OLD_CONSTANTS.SERVICE_LOG_TYPE;\nexports.LOGS_EVENTS_STEPS = OLD_CONSTANTS.LOGS_EVENTS;\nexports._TICKET_PRIORITIES = OLD_CONSTANTS.TICKET_PRIORITIES;\n/////////////////////////////////////////\n/////////////// ARCHIVE ////////////////\nexports.PROCESS_ARCHIVE_TICKET_RELATION = 'ProcessHasArchiveTicket';\nexports.PROCESS_ARCHIVE_TICKET_TYPE = 'ProcessArchiveTicket';\nexports.SPATIAL_ARCHIVE_TICKET_RELATION = 'SpatialHasArchiveTicket';\nexports.SPATIAL_ARCHIVE_TICKET_TYPE = 'SpatialArchiveTicket';\nexports.ARCHIVE_TICKET_PART_RELATION = 'ArchiveTicketHasPart';\nexports.ARCHIVE_TICKET_PART_TYPE = 'ArchiveTicketPart';\nexports.ARCHIVE_TICKET_PART_TICKET_RELATION = 'ArchiveTicketPartHasTicket';\nexports.ARCHIVE_TICKET_RELATION_TYPE = spinal_model_graph_1.SPINAL_RELATION_PTR_LST_TYPE;\nexports.ARCHIVE_TICKET_TIMESTAMP_ATTR_PROCESS = 'ProcessArchiveTimestamp';\nexports.ARCHIVE_TICKET_TIMESTAMP_ATTR_SPATIAL = 'SpatialArchiveTimestamp';\nexports.ARCHIVE_TICKET_RELATIONS = [\n    exports.SPATIAL_ARCHIVE_TICKET_RELATION,\n    exports.ARCHIVE_TICKET_PART_RELATION,\n];\n//# sourceMappingURL=Constants.js.map","/*\n * Copyright 2019 SpinalCom - www.spinalcom.com\n *\n *  This file is part of SpinalCore.\n *\n *  Please read all of the following terms and conditions\n *  of the Free Software license Agreement (\"Agreement\")\n *  carefully.\n *\n *  This Agreement is a legally binding contract between\n *  the Licensee (as defined below) and SpinalCom that\n *  sets forth the terms and conditions that govern your\n *  use of the Program. By installing and/or using the\n *  Program, you agree to abide by all the terms and\n *  conditions stated or referenced herein.\n *\n *  If you do not agree to abide by these terms and\n *  conditions, do not demonstrate your acceptance and do\n *  not install or use the Program.\n *  You should have received a copy of the license along\n *  with this file. If not, see\n *  <http://resources.spinalcom.com/licenses.pdf>.\n */\nimport * as OLD_CONSTANTS from './old_constants';\nexport * from './old_constants';\nimport { SPINAL_RELATION_PTR_LST_TYPE } from 'spinal-model-graph';\nexport { GEOGRAPHIC_TYPES_ORDER as GEO_TYPES } from 'spinal-env-viewer-context-geographic-service';\nimport { GEOGRAPHIC_TYPES_ORDER as GEO_TYPES } from 'spinal-env-viewer-context-geographic-service';\n\nexport const TICKET_CONTEXT_TYPE: string = OLD_CONSTANTS.SERVICE_TYPE;\nexport const TICKET_CONTEXT_SUBTYPE_LIST: Array<string> = ['Ticket', 'Alarm'];\n/////////////////////////////////////////\n/////////////// TICKET ///////////////////\nexport const TICKET_RELATION_TYPE: string =\n  OLD_CONSTANTS.SPINAL_TICKET_SERVICE_TICKET_RELATION_TYPE; // STEP_TO_TICKET_RELATION_TYPE\nexport const TICKET_RELATION_NAME: string =\n  OLD_CONSTANTS.SPINAL_TICKET_SERVICE_TICKET_RELATION_NAME; // STEP_TO_TICKET_RELATION_NAME\nexport const TIKET_TYPE: string =\n  OLD_CONSTANTS.SPINAL_TICKET_SERVICE_TICKET_TYPE;\nexport const TICKET_ATTRIBUTE_OCCURENCE_NAME = 'Occurrence number';\nexport const ALARM_RELATION_NAME = 'hasAlarm';\n/////////////////////////////////////////\n/////////////// PROCESS /////////////////\nexport const PROCESS_RELATION_TYPE: string =\n  OLD_CONSTANTS.SPINAL_TICKET_SERVICE_PROCESS_RELATION_TYPE; // CONTEXT_TO_PROCESS_RELATION_TYPE\nexport const PROCESS_RELATION_NAME: string =\n  OLD_CONSTANTS.SPINAL_TICKET_SERVICE_PROCESS_RELATION_NAME; //CONTEXT_TO_PROCESS_RELATION_NAME\nexport const _PROCESS_TYPE: string = OLD_CONSTANTS.PROCESS_TYPE;\n//////////////////////////////////////\n/////////////// STEP /////////////////\nexport const STEP_RELATION_TYPE: string =\n  OLD_CONSTANTS.SPINAL_TICKET_SERVICE_STEP_RELATION_TYPE; // PROCESS_TO_STEP_RELATION_TYPE\nexport const STEP_RELATION_NAME: string =\n  OLD_CONSTANTS.SPINAL_TICKET_SERVICE_STEP_RELATION_NAME; // PROCESS_TO_STEP_RELATION_NAME\nexport const STEP_TYPE: string = OLD_CONSTANTS.SPINAL_TICKET_SERVICE_STEP_TYPE;\n\nexport const ARCHIVED_STEP = OLD_CONSTANTS.ARCHIVED_STEP;\nexport const DEFAULT_STEPS = OLD_CONSTANTS.DEFAULT_STEPS;\nexport const _ARCHIVED_STEP = OLD_CONSTANTS.ARCHIVED_STEP;\nexport const _DEFAULT_STEPS = OLD_CONSTANTS.DEFAULT_STEPS;\n\n/////////////////////////////////////////\n/////////////// CATEGORY ////////////////\nexport const INCIDENT_SECTION_RELATION_TYPE: string =\n  OLD_CONSTANTS.SPINAL_TICKET_SERVICE_INCIDENT_SECTION_RELATION_TYPE;\nexport const INCIDENT_SECTION_TYPE: string =\n  OLD_CONSTANTS.SPINAL_TICKET_SERVICE_INCIDENT_SECTION_TYPE;\nexport const INCIDENT_SECTION_RELATION_NAME: string =\n  OLD_CONSTANTS.SPINAL_TICKET_SERVICE_INCIDENT_SECTION_RELATION_NAME;\nexport const INCIDENT_RELATION_TYPE: string =\n  OLD_CONSTANTS.SPINAL_TICKET_SERVICE_INCIDENT_RELATION_TYPE;\nexport const INCIDENT_RELATION_NAME: string =\n  OLD_CONSTANTS.SPINAL_TICKET_SERVICE_INCIDENT_RELATION_NAME;\nexport const INCIDENT_TYPE: string =\n  OLD_CONSTANTS.SPINAL_TICKET_SERVICE_INCIDENT_TYPE;\nexport const _DEFAULT_INCIDENTS_NAME: string =\n  OLD_CONSTANTS.DEFAULT_INCIDENTS_NAME;\nexport const LOG_RELATION_TYPE: string =\n  OLD_CONSTANTS.SPINAL_TICKET_SERVICE_LOG_RELATION_TYPE;\nexport const LOG_RELATION_NAME: string =\n  OLD_CONSTANTS.SPINAL_TICKET_SERVICE_LOG_RELATION_NAME;\nexport const LOG_TYPE: string = OLD_CONSTANTS.SERVICE_LOG_TYPE;\nexport const LOGS_EVENTS_STEPS = OLD_CONSTANTS.LOGS_EVENTS;\nexport const _TICKET_PRIORITIES = OLD_CONSTANTS.TICKET_PRIORITIES;\n\n/////////////////////////////////////////\n/////////////// ARCHIVE ////////////////\nexport const PROCESS_ARCHIVE_TICKET_RELATION = 'ProcessHasArchiveTicket';\nexport const PROCESS_ARCHIVE_TICKET_TYPE = 'ProcessArchiveTicket';\nexport const SPATIAL_ARCHIVE_TICKET_RELATION = 'SpatialHasArchiveTicket';\nexport const SPATIAL_ARCHIVE_TICKET_TYPE = 'SpatialArchiveTicket';\nexport const ARCHIVE_TICKET_PART_RELATION = 'ArchiveTicketHasPart';\nexport const ARCHIVE_TICKET_PART_TYPE = 'ArchiveTicketPart';\nexport const ARCHIVE_TICKET_PART_TICKET_RELATION = 'ArchiveTicketPartHasTicket';\nexport const ARCHIVE_TICKET_RELATION_TYPE = SPINAL_RELATION_PTR_LST_TYPE;\nexport const ARCHIVE_TICKET_TIMESTAMP_ATTR_PROCESS = 'ProcessArchiveTimestamp';\nexport const ARCHIVE_TICKET_TIMESTAMP_ATTR_SPATIAL = 'SpatialArchiveTimestamp';\nexport const ARCHIVE_TICKET_RELATIONS = [\n  SPATIAL_ARCHIVE_TICKET_RELATION,\n  ARCHIVE_TICKET_PART_RELATION,\n];\n","\"use strict\";\n/*\n * Copyright 2019 SpinalCom - www.spinalcom.com\n *\n *  This file is part of SpinalCore.\n *\n *  Please read all of the following terms and conditions\n *  of the Free Software license Agreement (\"Agreement\")\n *  carefully.\n *\n *  This Agreement is a legally binding contract between\n *  the Licensee (as defined below) and SpinalCom that\n *  sets forth the terms and conditions that govern your\n *  use of the Program. By installing and/or using the\n *  Program, you agree to abide by all the terms and\n *  conditions stated or referenced herein.\n *\n *  If you do not agree to abide by these terms and\n *  conditions, do not demonstrate your acceptance and do\n *  not install or use the Program.\n *  You should have received a copy of the license along\n *  with this file. If not, see\n *  <http://resources.spinalcom.com/licenses.pdf>.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TICKET_PRIORITIES = exports.LOGS_EVENTS_STRING = exports.LOGS_EVENTS_STEPS = exports.LOG_TYPE = exports.LOG_RELATION_NAME = exports.LOG_RELATION_TYPE = exports.EVENTS_TO_LOG = exports.LOGS_EVENTS = exports.SERVICE_LOG_TYPE = exports.SPINAL_TICKET_SERVICE_LOG_RELATION_NAME = exports.SPINAL_TICKET_SERVICE_LOG_RELATION_TYPE = exports.DEFAULT_INCIDENTS_NAME = exports.SPINAL_TICKET_SERVICE_INCIDENT_TYPE = exports.SPINAL_TICKET_SERVICE_INCIDENT_SECTION_RELATION_NAME = exports.SPINAL_TICKET_SERVICE_INCIDENT_RELATION_NAME = exports.SPINAL_TICKET_SERVICE_INCIDENT_SECTION_TYPE = exports.SPINAL_TICKET_SERVICE_INCIDENT_RELATION_TYPE = exports.SPINAL_TICKET_SERVICE_INCIDENT_SECTION_RELATION_TYPE = exports.DEFAULT_STEPS = exports.ARCHIVED_STEP = exports.SPINAL_TICKET_SERVICE_STEP_RELATION_NAME = exports.SPINAL_TICKET_SERVICE_STEP_TYPE = exports.SPINAL_TICKET_SERVICE_STEP_RELATION_TYPE = exports.PROCESS_TYPE = exports.SPINAL_TICKET_SERVICE_PROCESS_RELATION_NAME = exports.SPINAL_TICKET_SERVICE_PROCESS_RELATION_TYPE = exports.SPINAL_TICKET_SERVICE_TICKET_TYPE = exports.SPINAL_TICKET_SERVICE_TICKET_RELATION_NAME = exports.SPINAL_TICKET_SERVICE_TICKET_RELATION_TYPE = exports.SERVICE_TYPE = exports.SERVICE_NAME = void 0;\nconst spinal_env_viewer_graph_service_1 = require(\"spinal-env-viewer-graph-service\");\nexports.SERVICE_NAME = 'Ticket Service';\nexports.SERVICE_TYPE = 'SpinalSystemServiceTicket';\n/////////////////////////////////////////\n/////////////// TICKET ///////////////////\n// export const SPINAL_TICKET_SERVICE_TICKET_SECTION_RELATION_TYPE: string = SPINAL_RELATION_PTR_LST_TYPE;\nexports.SPINAL_TICKET_SERVICE_TICKET_RELATION_TYPE = spinal_env_viewer_graph_service_1.SPINAL_RELATION_PTR_LST_TYPE;\nexports.SPINAL_TICKET_SERVICE_TICKET_RELATION_NAME = 'SpinalSystemServiceTicketHasTicket';\nexports.SPINAL_TICKET_SERVICE_TICKET_TYPE = 'SpinalSystemServiceTicketTypeTicket';\n// export const SPINAL_TICKET_SERVICE_TICKET_ARCHIVE_RELATION_TYPE: string = SPINAL_RELATION_PTR_LST_TYPE;\n// export const SPINAL_TICKET_SERVICE_TICKET_SECTION: string = 'SpinalSystemServiceHasTicket';\n// export const SPINAL_TICKET_SERVICE_TICKET_SECTION_NAME: string = 'Tickets';\n// export const SPINAL_TICKET_SERVICE_TICKET_SECTION_RELATION_NAME: string = 'SpinalSystemServiceHasTicket';\n// export const SPINAL_TICKET_SERVICE_TICKET_ARCHIVE_RELATION_NAME: string = 'SpinalSystemServiceArchiveHasTicket';\n// export const SECTION_RELATION_TYPE = SPINAL_TICKET_SERVICE_TICKET_SECTION_RELATION_TYPE;\n/**\n * New values\n */\n// export const TICKET_RELATION_TYPE: string = SPINAL_TICKET_SERVICE_TICKET_RELATION_TYPE; // STEP_TO_TICKET_RELATION_TYPE\n// export const TICKET_RELATION_NAME: string = SPINAL_TICKET_SERVICE_TICKET_RELATION_NAME; // STEP_TO_TICKET_RELATION_NAME\n// export const TIKET_TYPE: string = SPINAL_TICKET_SERVICE_TICKET_TYPE;\n/////////////////////////////////////////\n/////////////// PROCESS /////////////////\nexports.SPINAL_TICKET_SERVICE_PROCESS_RELATION_TYPE = spinal_env_viewer_graph_service_1.SPINAL_RELATION_PTR_LST_TYPE;\nexports.SPINAL_TICKET_SERVICE_PROCESS_RELATION_NAME = 'SpinalSystemServiceTicketHasProcess';\nexports.PROCESS_TYPE = 'SpinalServiceTicketProcess';\n// export const SPINAL_TICKET_SERVICE_PROCESS_ARCHIVE_RELATION_TYPE: string = SPINAL_RELATION_PTR_LST_TYPE;\n// export const SPINAL_TICKET_SERVICE_PROCESS_ARCHIVE_NAME: string = 'Spinal_Service_Ticket_Archive_Archive_Process';\n// export const SPINAL_TICKET_SERVICE_PROCESS_ARCHIVE_RELATION_NAME: string = 'SpinalSystemServiceArchiveHasProcess';\n// export const SPINAL_TICKET_SERVICE_PROCESS_TYPE: string = 'SpinalSystemServiceTicketTypeProcess';\n// export const PROCESS_HAS_TICKET_RELATION_NAME: string = 'SpinalSystemService_ProcessHasTicket';\n// export const PROCESS_HAS_TICKET_RELATION_TYPE: string = SPINAL_RELATION_PTR_LST_TYPE;\n/**\n * New values\n */\n// export const PROCESS_RELATION_TYPE: string = SPINAL_TICKET_SERVICE_PROCESS_RELATION_TYPE; // CONTEXT_TO_PROCESS_RELATION_TYPE\n// export const PROCESS_RELATION_NAME: string = SPINAL_TICKET_SERVICE_PROCESS_RELATION_NAME; //CONTEXT_TO_PROCESS_RELATION_NAME\n// export const PROCESS_TYPE: string = 'SpinalServiceTicketProcess';\n//////////////////////////////////////\n/////////////// STEP /////////////////\nexports.SPINAL_TICKET_SERVICE_STEP_RELATION_TYPE = spinal_env_viewer_graph_service_1.SPINAL_RELATION_PTR_LST_TYPE;\nexports.SPINAL_TICKET_SERVICE_STEP_TYPE = 'SpinalSystemServiceTicketTypeStep';\nexports.SPINAL_TICKET_SERVICE_STEP_RELATION_NAME = 'SpinalSystemServiceTicketHasStep';\n// export const SPINAL_TICKET_SERVICE_STEP_ARCHIVE_RELATION_TYPE: string = SPINAL_RELATION_PTR_LST_TYPE;\n// export const SPINAL_TICKET_SERVICE_ARCHIVE_RELATION_TYPE: string = SPINAL_RELATION_PTR_LST_TYPE;\n// export const SPINAL_TICKET_SERVICE_STEP_ARCHIVE_RELATION_NAME: string = 'SpinalSystemServiceArchiveHasStep';\n// export const SPINAL_TICKET_SERVICE_STEP_ARCHIVE_NAME: string = 'Spinal_Service_Ticket_Archive_Archive_Step';\n/**\n * New values\n */\n// export const STEP_RELATION_TYPE: string = SPINAL_TICKET_SERVICE_STEP_RELATION_TYPE; // PROCESS_TO_STEP_RELATION_TYPE\n// export const STEP_RELATION_NAME: string = SPINAL_TICKET_SERVICE_STEP_RELATION_NAME; // PROCESS_TO_STEP_RELATION_NAME\n// export const STEP_TYPE: string = SPINAL_TICKET_SERVICE_STEP_TYPE;\nexports.ARCHIVED_STEP = {\n    name: \"Archived\",\n    order: -1,\n    color: \"#FF0000\"\n};\nexports.DEFAULT_STEPS = [\n    { name: 'Déclaré', color: '#ff0019', order: 0 },\n    { name: 'Ouvert', color: '#fff112', order: 1 },\n    { name: 'Résolu', color: '#10ff1d', order: 2 },\n    exports.ARCHIVED_STEP\n];\n/////////////////////////////////////////\n/////////////// CATEGORY ////////////////\nexports.SPINAL_TICKET_SERVICE_INCIDENT_SECTION_RELATION_TYPE = spinal_env_viewer_graph_service_1.SPINAL_RELATION_PTR_LST_TYPE;\nexports.SPINAL_TICKET_SERVICE_INCIDENT_RELATION_TYPE = spinal_env_viewer_graph_service_1.SPINAL_RELATION_PTR_LST_TYPE;\nexports.SPINAL_TICKET_SERVICE_INCIDENT_SECTION_TYPE = 'DEFAULT_INCIDENT_TYPE';\nexports.SPINAL_TICKET_SERVICE_INCIDENT_RELATION_NAME = 'Spinal_Service_Ticket_Process_has_category';\nexports.SPINAL_TICKET_SERVICE_INCIDENT_SECTION_RELATION_NAME = 'Spinal_Service_Ticket_Process_has_categories_section';\nexports.SPINAL_TICKET_SERVICE_INCIDENT_TYPE = 'INCIDENT_TYPE';\nexports.DEFAULT_INCIDENTS_NAME = 'Incidents commun';\n// export const SPINAL_TICKET_SERVICE_INCIDENT_SUB_SECTION_RELATION_TYPE: string = SPINAL_RELATION_PTR_LST_TYPE;\n// export const SPINAL_TICKET_SERVICE_INCIDENT_SUB_SECTION_RELATION_NAME: string = 'Spinal_Service_Ticket_Process_has_sub_category';\n// export const DEFAULT_INCIDENT_TYPE: string = SPINAL_TICKET_SERVICE_INCIDENT_SECTION_TYPE;\n// export const DEFAULT_INCIDENT_RELATION_NAME: string = SPINAL_TICKET_SERVICE_INCIDENT_RELATION_NAME;\n// export const fdg: string = SPINAL_TICKET_SERVICE_INCIDENT_SECTION_RELATION_NAME;\n/////////////////////////////////////////\n/////////////// ARCHIVE /////////////////\n// export const SPINAL_TICKET_SERVICE_ARCHIVE_NAME: string = 'Spinal_Service_Ticket_Archive';\n// export const SPINAL_TICKET_SERVICE_TICKET_ARCHIVE_NAME: string = 'Spinal_Service_Ticket_Archive_Archive_Ticket';\n// export const SPINAL_TICKET_SERVICE_ARCHIVE_RELATION_NAME: string = 'SpinalSystemServiceTicketHasArchive';\n// export const SERVICE_ARCHIVE_TYPE: string = 'SpinalSystemServiceTicketArchive';\n/////////////////////////////////////////\n/////////////// LOG /////////////////\nexports.SPINAL_TICKET_SERVICE_LOG_RELATION_TYPE = spinal_env_viewer_graph_service_1.SPINAL_RELATION_PTR_LST_TYPE;\nexports.SPINAL_TICKET_SERVICE_LOG_RELATION_NAME = 'SpinalSystemServiceTicketHasLog';\nexports.SERVICE_LOG_TYPE = 'SpinalSystemServiceTicketLog';\nvar LOGS_EVENTS;\n(function (LOGS_EVENTS) {\n    LOGS_EVENTS[LOGS_EVENTS[\"creation\"] = 1] = \"creation\";\n    LOGS_EVENTS[LOGS_EVENTS[\"moveToNext\"] = 2] = \"moveToNext\";\n    LOGS_EVENTS[LOGS_EVENTS[\"moveToPrevious\"] = 3] = \"moveToPrevious\";\n    LOGS_EVENTS[LOGS_EVENTS[\"archived\"] = 4] = \"archived\";\n    LOGS_EVENTS[LOGS_EVENTS[\"unarchive\"] = 5] = \"unarchive\";\n    LOGS_EVENTS[LOGS_EVENTS[\"move\"] = 6] = \"move\";\n})(LOGS_EVENTS = exports.LOGS_EVENTS || (exports.LOGS_EVENTS = {}));\nexports.EVENTS_TO_LOG = Object.freeze({\n    1: \"creation\",\n    2: \"moveToNext\",\n    3: \"moveToPrevious\",\n    4: \"archived\",\n    5: \"unarchive\",\n    6: \"move\"\n});\nexports.LOG_RELATION_TYPE = exports.SPINAL_TICKET_SERVICE_LOG_RELATION_TYPE;\nexports.LOG_RELATION_NAME = exports.SPINAL_TICKET_SERVICE_LOG_RELATION_NAME;\nexports.LOG_TYPE = exports.SERVICE_LOG_TYPE;\nexports.LOGS_EVENTS_STEPS = LOGS_EVENTS;\nexports.LOGS_EVENTS_STRING = [\n    \"none\",\n    \"creation\",\n    \"moveToNext\",\n    \"moveToPrevious\",\n    \"archived\",\n    \"unarchive\",\n    \"move\"\n];\n/////////////////////////////////////////\n/////////////// Target /////////////////\n// export const SPINAL_TICKET_SERVICE_TARGET_RELATION_TYPE: string = SPINAL_RELATION_PTR_LST_TYPE;\n// export const SPINAL_TICKET_SERVICE_TARGET_RELATION_NAME: string = 'SpinalSystemServiceTicketHasLocation';\n/////////////////////////////////////////\n/////////////// USER ////////////////////\n// export const USER_RELATION_NAME: string = 'userHasDeclaredTicket';\n// export const USER_RELATION_TYPE: string = SPINAL_RELATION_PTR_LST_TYPE;\n/////////////////////////////////////////\n/////////////// ticket ////////////////////\n// tickethasReferentiel\nexports.TICKET_PRIORITIES = {\n    occasionally: 0,\n    normal: 1,\n    urgent: 2,\n};\n//# sourceMappingURL=old_constants.js.map","/*\n * Copyright 2019 SpinalCom - www.spinalcom.com\n *\n *  This file is part of SpinalCore.\n *\n *  Please read all of the following terms and conditions\n *  of the Free Software license Agreement (\"Agreement\")\n *  carefully.\n *\n *  This Agreement is a legally binding contract between\n *  the Licensee (as defined below) and SpinalCom that\n *  sets forth the terms and conditions that govern your\n *  use of the Program. By installing and/or using the\n *  Program, you agree to abide by all the terms and\n *  conditions stated or referenced herein.\n *\n *  If you do not agree to abide by these terms and\n *  conditions, do not demonstrate your acceptance and do\n *  not install or use the Program.\n *  You should have received a copy of the license along\n *  with this file. If not, see\n *  <http://resources.spinalcom.com/licenses.pdf>.\n */\n\nimport { SPINAL_RELATION_PTR_LST_TYPE } from 'spinal-env-viewer-graph-service';\nimport { SpinalStep } from 'spinal-models-ticket/declarations/SpinalStep';\n\nexport const SERVICE_NAME: string = 'Ticket Service';\nexport const SERVICE_TYPE: string = 'SpinalSystemServiceTicket';\n\n/////////////////////////////////////////\n/////////////// TICKET ///////////////////\n// export const SPINAL_TICKET_SERVICE_TICKET_SECTION_RELATION_TYPE: string = SPINAL_RELATION_PTR_LST_TYPE;\nexport const SPINAL_TICKET_SERVICE_TICKET_RELATION_TYPE: string = SPINAL_RELATION_PTR_LST_TYPE;\nexport const SPINAL_TICKET_SERVICE_TICKET_RELATION_NAME: string = 'SpinalSystemServiceTicketHasTicket';\nexport const SPINAL_TICKET_SERVICE_TICKET_TYPE: string = 'SpinalSystemServiceTicketTypeTicket';\n// export const SPINAL_TICKET_SERVICE_TICKET_ARCHIVE_RELATION_TYPE: string = SPINAL_RELATION_PTR_LST_TYPE;\n// export const SPINAL_TICKET_SERVICE_TICKET_SECTION: string = 'SpinalSystemServiceHasTicket';\n// export const SPINAL_TICKET_SERVICE_TICKET_SECTION_NAME: string = 'Tickets';\n// export const SPINAL_TICKET_SERVICE_TICKET_SECTION_RELATION_NAME: string = 'SpinalSystemServiceHasTicket';\n// export const SPINAL_TICKET_SERVICE_TICKET_ARCHIVE_RELATION_NAME: string = 'SpinalSystemServiceArchiveHasTicket';\n// export const SECTION_RELATION_TYPE = SPINAL_TICKET_SERVICE_TICKET_SECTION_RELATION_TYPE;\n\n/**\n * New values\n */\n// export const TICKET_RELATION_TYPE: string = SPINAL_TICKET_SERVICE_TICKET_RELATION_TYPE; // STEP_TO_TICKET_RELATION_TYPE\n// export const TICKET_RELATION_NAME: string = SPINAL_TICKET_SERVICE_TICKET_RELATION_NAME; // STEP_TO_TICKET_RELATION_NAME\n// export const TIKET_TYPE: string = SPINAL_TICKET_SERVICE_TICKET_TYPE;\n\n/////////////////////////////////////////\n/////////////// PROCESS /////////////////\nexport const SPINAL_TICKET_SERVICE_PROCESS_RELATION_TYPE: string = SPINAL_RELATION_PTR_LST_TYPE;\nexport const SPINAL_TICKET_SERVICE_PROCESS_RELATION_NAME: string = 'SpinalSystemServiceTicketHasProcess';\nexport const PROCESS_TYPE: string = 'SpinalServiceTicketProcess';\n\n// export const SPINAL_TICKET_SERVICE_PROCESS_ARCHIVE_RELATION_TYPE: string = SPINAL_RELATION_PTR_LST_TYPE;\n// export const SPINAL_TICKET_SERVICE_PROCESS_ARCHIVE_NAME: string = 'Spinal_Service_Ticket_Archive_Archive_Process';\n// export const SPINAL_TICKET_SERVICE_PROCESS_ARCHIVE_RELATION_NAME: string = 'SpinalSystemServiceArchiveHasProcess';\n// export const SPINAL_TICKET_SERVICE_PROCESS_TYPE: string = 'SpinalSystemServiceTicketTypeProcess';\n// export const PROCESS_HAS_TICKET_RELATION_NAME: string = 'SpinalSystemService_ProcessHasTicket';\n// export const PROCESS_HAS_TICKET_RELATION_TYPE: string = SPINAL_RELATION_PTR_LST_TYPE;\n\n/**\n * New values\n */\n// export const PROCESS_RELATION_TYPE: string = SPINAL_TICKET_SERVICE_PROCESS_RELATION_TYPE; // CONTEXT_TO_PROCESS_RELATION_TYPE\n// export const PROCESS_RELATION_NAME: string = SPINAL_TICKET_SERVICE_PROCESS_RELATION_NAME; //CONTEXT_TO_PROCESS_RELATION_NAME\n// export const PROCESS_TYPE: string = 'SpinalServiceTicketProcess';\n\n\n//////////////////////////////////////\n/////////////// STEP /////////////////\nexport const SPINAL_TICKET_SERVICE_STEP_RELATION_TYPE: string = SPINAL_RELATION_PTR_LST_TYPE;\nexport const SPINAL_TICKET_SERVICE_STEP_TYPE: string = 'SpinalSystemServiceTicketTypeStep';\nexport const SPINAL_TICKET_SERVICE_STEP_RELATION_NAME: string = 'SpinalSystemServiceTicketHasStep';\n// export const SPINAL_TICKET_SERVICE_STEP_ARCHIVE_RELATION_TYPE: string = SPINAL_RELATION_PTR_LST_TYPE;\n// export const SPINAL_TICKET_SERVICE_ARCHIVE_RELATION_TYPE: string = SPINAL_RELATION_PTR_LST_TYPE;\n// export const SPINAL_TICKET_SERVICE_STEP_ARCHIVE_RELATION_NAME: string = 'SpinalSystemServiceArchiveHasStep';\n// export const SPINAL_TICKET_SERVICE_STEP_ARCHIVE_NAME: string = 'Spinal_Service_Ticket_Archive_Archive_Step';\n\n\n/**\n * New values\n */\n// export const STEP_RELATION_TYPE: string = SPINAL_TICKET_SERVICE_STEP_RELATION_TYPE; // PROCESS_TO_STEP_RELATION_TYPE\n// export const STEP_RELATION_NAME: string = SPINAL_TICKET_SERVICE_STEP_RELATION_NAME; // PROCESS_TO_STEP_RELATION_NAME\n// export const STEP_TYPE: string = SPINAL_TICKET_SERVICE_STEP_TYPE;\n\n\nexport const ARCHIVED_STEP = {\n  name: \"Archived\",\n  order: -1,\n  color: \"#FF0000\"\n}\n\nexport const DEFAULT_STEPS: SpinalStep[] = [\n  { name: 'Déclaré', color: '#ff0019', order: 0 },\n  { name: 'Ouvert', color: '#fff112', order: 1 },\n  { name: 'Résolu', color: '#10ff1d', order: 2 },\n  ARCHIVED_STEP\n];\n\n\n\n/////////////////////////////////////////\n/////////////// CATEGORY ////////////////\nexport const SPINAL_TICKET_SERVICE_INCIDENT_SECTION_RELATION_TYPE: string = SPINAL_RELATION_PTR_LST_TYPE;\nexport const SPINAL_TICKET_SERVICE_INCIDENT_RELATION_TYPE: string = SPINAL_RELATION_PTR_LST_TYPE;\nexport const SPINAL_TICKET_SERVICE_INCIDENT_SECTION_TYPE: string = 'DEFAULT_INCIDENT_TYPE';\nexport const SPINAL_TICKET_SERVICE_INCIDENT_RELATION_NAME: string = 'Spinal_Service_Ticket_Process_has_category';\nexport const SPINAL_TICKET_SERVICE_INCIDENT_SECTION_RELATION_NAME: string = 'Spinal_Service_Ticket_Process_has_categories_section';\nexport const SPINAL_TICKET_SERVICE_INCIDENT_TYPE: string = 'INCIDENT_TYPE';\nexport const DEFAULT_INCIDENTS_NAME: string = 'Incidents commun';\n// export const SPINAL_TICKET_SERVICE_INCIDENT_SUB_SECTION_RELATION_TYPE: string = SPINAL_RELATION_PTR_LST_TYPE;\n// export const SPINAL_TICKET_SERVICE_INCIDENT_SUB_SECTION_RELATION_NAME: string = 'Spinal_Service_Ticket_Process_has_sub_category';\n\n\n// export const DEFAULT_INCIDENT_TYPE: string = SPINAL_TICKET_SERVICE_INCIDENT_SECTION_TYPE;\n// export const DEFAULT_INCIDENT_RELATION_NAME: string = SPINAL_TICKET_SERVICE_INCIDENT_RELATION_NAME;\n// export const fdg: string = SPINAL_TICKET_SERVICE_INCIDENT_SECTION_RELATION_NAME;\n\n/////////////////////////////////////////\n/////////////// ARCHIVE /////////////////\n// export const SPINAL_TICKET_SERVICE_ARCHIVE_NAME: string = 'Spinal_Service_Ticket_Archive';\n// export const SPINAL_TICKET_SERVICE_TICKET_ARCHIVE_NAME: string = 'Spinal_Service_Ticket_Archive_Archive_Ticket';\n// export const SPINAL_TICKET_SERVICE_ARCHIVE_RELATION_NAME: string = 'SpinalSystemServiceTicketHasArchive';\n// export const SERVICE_ARCHIVE_TYPE: string = 'SpinalSystemServiceTicketArchive';\n\n/////////////////////////////////////////\n/////////////// LOG /////////////////\nexport const SPINAL_TICKET_SERVICE_LOG_RELATION_TYPE: string = SPINAL_RELATION_PTR_LST_TYPE;\nexport const SPINAL_TICKET_SERVICE_LOG_RELATION_NAME: string = 'SpinalSystemServiceTicketHasLog';\nexport const SERVICE_LOG_TYPE: string = 'SpinalSystemServiceTicketLog';\nexport enum LOGS_EVENTS {\n  creation = 1,\n  moveToNext = 2,\n  moveToPrevious = 3,\n  archived = 4,\n  unarchive = 5,\n  move = 6\n}\n\nexport const EVENTS_TO_LOG = Object.freeze({\n  1: \"creation\",\n  2: \"moveToNext\",\n  3: \"moveToPrevious\",\n  4: \"archived\",\n  5: \"unarchive\",\n  6: \"move\"\n})\n\nexport const LOG_RELATION_TYPE: string = SPINAL_TICKET_SERVICE_LOG_RELATION_TYPE;\nexport const LOG_RELATION_NAME: string = SPINAL_TICKET_SERVICE_LOG_RELATION_NAME;\nexport const LOG_TYPE: string = SERVICE_LOG_TYPE;\nexport const LOGS_EVENTS_STEPS = LOGS_EVENTS;\n\n\nexport const LOGS_EVENTS_STRING: string[] = [\n  \"none\",\n  \"creation\",\n  \"moveToNext\",\n  \"moveToPrevious\",\n  \"archived\",\n  \"unarchive\",\n  \"move\"\n]\n\n/////////////////////////////////////////\n/////////////// Target /////////////////\n// export const SPINAL_TICKET_SERVICE_TARGET_RELATION_TYPE: string = SPINAL_RELATION_PTR_LST_TYPE;\n// export const SPINAL_TICKET_SERVICE_TARGET_RELATION_NAME: string = 'SpinalSystemServiceTicketHasLocation';\n\n/////////////////////////////////////////\n/////////////// USER ////////////////////\n// export const USER_RELATION_NAME: string = 'userHasDeclaredTicket';\n// export const USER_RELATION_TYPE: string = SPINAL_RELATION_PTR_LST_TYPE;\n\n/////////////////////////////////////////\n/////////////// ticket ////////////////////\n// tickethasReferentiel\n\nexport const TICKET_PRIORITIES: { [key: string]: number } = {\n  occasionally: 0,\n  normal: 1,\n  urgent: 2,\n}","import {\n  SpinalContextApp\n} from \"spinal-env-viewer-context-menu-service\";\n\nimport {\n  spinalPanelManagerService\n} from \"spinal-env-viewer-panel-manager-service\";\n\nimport {\n  SERVICE_TYPE,\n  PROCESS_TYPE\n} from \"spinal-service-ticket/dist/Constants\";\n\nexport class CreateStep extends SpinalContextApp {\n  constructor() {\n    super(\"create ticket step\", \"this button allows to create ticket step\", {\n      icon: \"post_add\",\n      icon_type: \"in\",\n      backgroundColor: \"#356BAB\",\n      fontColor: \"#ffffff\"\n    })\n  }\n\n  isShown(option) {\n    const contextType = option.context.type.get();\n    const processType = option.selectedNode.type.get();\n\n    const res = contextType === SERVICE_TYPE && processType === PROCESS_TYPE ?\n      true : -1;\n\n    return Promise.resolve(res);\n\n  }\n\n  action(option) {\n    const contextId = option.context.id.get();\n    const processId = option.selectedNode.id.get();\n\n    spinalPanelManagerService.openPanel(\"createStepDialog\", {\n      contextId,\n      processId\n    });\n  }\n\n}","import {\n  SpinalContextApp\n} from \"spinal-env-viewer-context-menu-service\";\n\nimport {\n  spinalPanelManagerService\n} from \"spinal-env-viewer-panel-manager-service\";\n\nimport {\n  SERVICE_TYPE,\n  SPINAL_TICKET_SERVICE_STEP_TYPE\n} from \"spinal-service-ticket/dist/Constants\";\n\nimport {\n  SpinalGraphService,\n  SpinalNode\n} from \"spinal-env-viewer-graph-service\";\n\n\n\nexport class CreateTicket extends SpinalContextApp {\n  constructor() {\n    super(\"create ticket\", \"this button allows to create ticket\", {\n      icon: \"receipt\",\n      icon_type: \"in\",\n      backgroundColor: \"#356BAB\",\n      fontColor: \"#ffffff\"\n    })\n  }\n\n  isShown(option) {\n\n    if (!option.selectedNode || !option.context) return Promise.resolve(true);\n\n    const contextType = option.context.type.get();\n    const stepType = option.selectedNode.type.get();\n\n    const res = contextType !== SERVICE_TYPE && stepType !==\n      SPINAL_TICKET_SERVICE_STEP_TYPE ?\n      true : -1;\n\n    return Promise.resolve(res);\n\n  }\n\n  async action(option) {\n    let info = option.selectedNode;\n\n    if (typeof info === \"undefined\")\n      info = await createBimObjectNode(option);\n\n    const realNode = getSelectedNode(info);\n\n    // manageTicketPanel\n\n    spinalPanelManagerService.openPanel(\"manageTicketPanel\", {\n      selectedNode: realNode\n    });\n  }\n\n}\n\n\nconst getSelectedNode = (selectedNode) => {\n  if (typeof selectedNode === \"undefined\") return;\n\n  if (selectedNode instanceof SpinalNode)\n    return selectedNode;\n\n  return SpinalGraphService.getRealNode(selectedNode.id.get());\n}\n\n\nconst createBimObjectNode = (params) => {\n\n  const viewer = spinal.ForgeViewer.viewer;\n\n  // const aggregateSelection = viewer.getAggregateSelection()[0];\n\n\n  if (typeof params.dbid !== \"undefined\" && params.model3d) {\n    const dbid = params.dbid;\n    const model = params.model3d;\n\n\n    return new Promise((resolve) => {\n      viewer.model.getProperties(dbid, async res => {\n        const node = await window.spinal.BimObjectService\n          .createBIMObject(dbid, res.name, model)\n        resolve(node);\n      })\n\n    });\n  }\n}","import {\n  SpinalContextApp\n} from 'spinal-env-viewer-context-menu-service'\n\nimport {\n  spinalPanelManagerService\n} from 'spinal-env-viewer-panel-manager-service';\n\nimport {\n  SERVICE_TYPE,\n  SPINAL_TICKET_SERVICE_STEP_TYPE,\n  SPINAL_TICKET_SERVICE_TICKET_TYPE\n} from \"spinal-service-ticket/dist/Constants\";\n\nexport class ManageTicketButton extends SpinalContextApp {\n\n  constructor() {\n    super('Manage Ticket',\n      'Manage ticket', {\n        icon: \"assignment\",\n        icon_type: 'in',\n        backgroundColor: \"#356BAB\",\n        fontColor: '#ffffff'\n      })\n  }\n\n\n  isShown(option) {\n    const contextType = option.context.type.get();\n    const nodeType = option.selectedNode.type.get();\n\n    if (contextType !== SERVICE_TYPE) return Promise.resolve(-1);\n\n    // const displayIt = nodeType === SPINAL_TICKET_SERVICE_TICKET_TYPE ||\n    //   nodeType === SPINAL_TICKET_SERVICE_STEP_TYPE;\n\n    const displayIt = nodeType !== SPINAL_TICKET_SERVICE_TICKET_TYPE;\n\n    return Promise.resolve(displayIt ? true : -1);\n\n  }\n\n  action(option) {\n    const params = {\n      selectedNode: option.selectedNode.get(),\n      context: option.context.get()\n    }\n    spinalPanelManagerService.openPanel(\"ticketManagerPanel\", params);\n  }\n\n}","/*\n * Copyright 2019 SpinalCom - www.spinalcom.com\n *\n *  This file is part of SpinalCore.\n *\n *  Please read all of the following terms and conditions\n *  of the Free Software license Agreement (\"Agreement\")\n *  carefully.\n *\n *  This Agreement is a legally binding contract between\n *  the Licensee (as defined below) and SpinalCom that\n *  sets forth the terms and conditions that govern your\n *  use of the Program. By installing and/or using the\n *  Program, you agree to abide by all the terms and\n *  conditions stated or referenced herein.\n *\n *  If you do not agree to abide by these terms and\n *  conditions, do not demonstrate your acceptance and do\n *  not install or use the Program.\n *  You should have received a copy of the license along\n *  with this file. If not, see\n *  <http://resources.spinalcom.com/licenses.pdf>.\n */\n\nimport {\n  SpinalContextApp\n} from 'spinal-env-viewer-context-menu-service';\nimport {\n  spinalPanelManagerService\n} from 'spinal-env-viewer-panel-manager-service';\nimport {\n  PROCESS_TYPE,\n  SPINAL_TICKET_SERVICE_INCIDENT_SECTION_TYPE\n} from \"spinal-service-ticket/dist/Constants\";\n\n\nexport class CreateCommonIncident extends SpinalContextApp {\n\n  constructor() {\n    super('Add common incident', 'Add common incident', {\n      icon: 'font_download',\n      icon_type: 'in',\n      backgroundColor: '#000000',\n      fontColor: '#ffffff',\n    });\n  }\n\n  isShown(option) {\n    if (\n      (option.selectedNode.type.get() === PROCESS_TYPE ||\n        option.selectedNode.type.get() ===\n        SPINAL_TICKET_SERVICE_INCIDENT_SECTION_TYPE)\n    ) {\n      return Promise.resolve(true);\n    } else {\n      return Promise.resolve(-1);\n    }\n  }\n\n  action(option) {\n    const nodeInfo = option.selectedNode.get();\n    spinalPanelManagerService.openPanel(\"createCommonIncidentDialog\",\n      nodeInfo);\n  }\n}","import {\n  SpinalContextApp\n} from 'spinal-env-viewer-context-menu-service'\n\nimport {\n  spinalPanelManagerService\n} from 'spinal-env-viewer-panel-manager-service';\n\nimport {\n  SERVICE_TYPE,\n  SPINAL_TICKET_SERVICE_TICKET_TYPE\n} from \"spinal-service-ticket/dist/Constants\";\n\nexport class SeeTicketDetailButton extends SpinalContextApp {\n\n  constructor() {\n    super('See Ticket\\' detail',\n      'See ticket\\'s detail', {\n        icon: \"assignment_late\",\n        icon_type: 'in',\n        backgroundColor: \"#356BAB\",\n        fontColor: '#ffffff'\n      })\n  }\n\n\n  isShown(option) {\n    const contextType = option.context.type.get();\n    const nodeType = option.selectedNode.type.get();\n\n    if (contextType === SERVICE_TYPE && nodeType ===\n      SPINAL_TICKET_SERVICE_TICKET_TYPE) return Promise.resolve(true);\n    return Promise.resolve(-1)\n  }\n\n  action(option) {\n    const params = {\n      selectedNode: option.selectedNode.get(),\n      context: option.context.get()\n    }\n    spinalPanelManagerService.openPanel(\"ticketDetailDialog\", params);\n  }\n\n}","import {\n  SpinalContextApp\n} from \"spinal-env-viewer-context-menu-service\";\n\nimport {\n  spinalPanelManagerService\n} from \"spinal-env-viewer-panel-manager-service\";\n\nimport {\n  SERVICE_TYPE,\n  SPINAL_TICKET_SERVICE_TICKET_TYPE,\n  SPINAL_TICKET_SERVICE_TICKET_RELATION_NAME,\n  SPINAL_TICKET_SERVICE_STEP_TYPE\n} from \"spinal-service-ticket/dist/Constants\";\n\nimport {\n  spinalIO\n} from \"../extensions/spinalIO\";\n\nimport {\n  SpinalGraphService\n} from \"spinal-env-viewer-graph-service\";\n\nimport {\n  serviceTicketPersonalized\n} from \"spinal-service-ticket\";\n\nimport EventBUS from '../extensions/Event'\nimport {\n  TICKET_EVENTS\n} from '../extensions/ticketsEvents'\n\nexport class PassToNextStepButton extends SpinalContextApp {\n  constructor() {\n    super(\"Pass to next step\", \"Pass the ticket to next step\", {\n      icon: \"skip_next\",\n      icon_type: \"in\",\n      backgroundColor: \"#356BAB\",\n      fontColor: \"#ffffff\",\n    });\n  }\n\n  isShown(option) {\n    const contextType = option.context.type.get();\n    const nodeType = option.selectedNode.type.get();\n\n    if (\n      contextType === SERVICE_TYPE &&\n      nodeType === SPINAL_TICKET_SERVICE_TICKET_TYPE\n    )\n      return Promise.resolve(true);\n    return Promise.resolve(-1);\n  }\n\n  async action(option) {\n    const user = await spinalIO.getUserConnected();\n\n    const contextId = option.context.id.get();\n    const ticketId = option.selectedNode.id.get();\n    const processId = await getProcessId(ticketId);\n\n    // console.log(contextId, ticketId, processId)\n\n    if (contextId && ticketId && processId) {\n      spinalPanelManagerService.openPanel(\"confirmationDialog\", {\n        message: \"do you want to pass this ticket to the next step ?\",\n        callback: () => {\n          serviceTicketPersonalized.moveTicketToNextStep(\n            contextId,\n            processId,\n            ticketId,\n            user\n          ).then((step) => {\n            const info = SpinalGraphService.getInfo(ticketId).get();\n            EventBUS.$emit(TICKET_EVENTS.changeStep, {\n              ticket: info,\n              step: step\n            });\n          });\n        },\n      });\n    }\n  }\n}\n\nconst getProcessId = async (ticketId) => {\n  const parents = await SpinalGraphService.getParents(ticketId, [\n    SPINAL_TICKET_SERVICE_TICKET_RELATION_NAME,\n  ]);\n\n  const found = parents.find(\n    (el) => el.type.get() === SPINAL_TICKET_SERVICE_STEP_TYPE\n  );\n\n  if (found) return found.processId.get();\n};","/*\n * Copyright 2018 SpinalCom - www.spinalcom.com\n *\n * This file is part of SpinalCore.\n *\n * Please read all of the following terms and conditions\n * of the Free Software license Agreement (\"Agreement\")\n * carefully.\n *\n * This Agreement is a legally binding contract between\n * the Licensee (as defined below) and SpinalCom that\n * sets forth the terms and conditions that govern your\n * use of the Program. By installing and/or using the\n * Program, you agree to abide by all the terms and\n * conditions stated or referenced herein.\n *\n * If you do not agree to abide by these terms and\n * conditions, do not demonstrate your acceptance and do\n * not install or use the Program.\n * You should have received a copy of the license along\n * with this file. If not, see\n * <http://resources.spinalcom.com/licenses.pdf>.\n */\n\n\nimport {\n  File,\n  spinalCore,\n  FileSystem\n} from 'spinal-core-connectorjs_type';\n\nimport {\n  decriAes,\n  decriB64\n} from './crypt';\n\nlet $ = require(\"jquery\");\n\nconst SpinalUserManager = window.SpinalUserManager;\n\nfunction getParameterByName(name, url) {\n  if (!url) url = window.location.href;\n  name = name.replace(/[[\\]]/g, '\\\\$&');\n  var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),\n    results = regex.exec(url);\n  if (!results) return null;\n  if (!results[2]) return '';\n  return decodeURIComponent(results[2].replace(/\\+/g, ' '));\n}\n\nclass SpinalIO {\n  constructor() {\n    this.loadPromise = {};\n    this.connectPromise = null;\n    this.user = null;\n    this.conn = null;\n  }\n\n  decriJson(encryptedHex) {\n    try {\n      const k = [10, 95, 124, 68, 55, 24, 90, 57, 34, 65, 81, 22, 75, 7, 110,\n        1\n      ];\n      const str = decriAes(k, encryptedHex);\n      return JSON.parse(str);\n    } catch (e) {\n      const str = decriB64(encryptedHex);\n      try {\n        return JSON.parse(str);\n      } catch (e) {\n        return '';\n      }\n    }\n  }\n\n\n  getauth() {\n    if (this.user !== null) return this.user;\n    const encryptedHex = window.localStorage.getItem('spinalhome_cfg');\n    this.user = this.decriJson(encryptedHex);\n    return this.user;\n  }\n\n  connect() {\n    // if (this.connectPromise !== null) {\n    //   return this.connectPromise;\n    // }\n\n    // this.connectPromise = new Promise((resolve, reject) => {\n    //   $(document).ready(() => {\n\n    //     FileSystem.CONNECTOR_TYPE = \"Browser\"\n\n    //     const user = this.getauth();\n    //     if (this.user.username) {\n    //       SpinalUserManager.get_user_id(\n    //         'http://' + window.location.host, user.username, user\n    //         .password,\n    //         response => {\n    //           this.spinalUserId = parseInt(response);\n    //           this.conn =\n    //             window.spinalCore.connect(`http://${this.spinalUserId}:${\n    //               user.password}@${window.location.host}/`);\n    //           resolve(this.conn);\n    //         },\n    //         () => {\n    //           window.location = '/html/drive/';\n    //           reject('Authentication Connection Error');\n    //         });\n    //     } else {\n    //       window.location = '/html/drive/';\n    //       reject('Authentication Connection Error');\n    //     }\n    //   });\n\n    // })\n    // return this.connectPromise;\n\n    this.conn = FileSystem.get_inst();\n    return Promise.resolve(this.conn);\n\n  }\n  getModelPath() {\n    const cryptedPath = getParameterByName('path');\n    if (!cryptedPath) throw new Error('No \"path\" attribute found in the url');\n    const k = [10, 95, 124, 68, 55, 24, 90, 57, 34, 65, 81, 22, 75, 7, 110,\n      1\n    ];\n    try {\n      const decripted = decriAes(k, cryptedPath);\n      if (decripted[0] !== '/') throw \"not a path\";\n      return decripted;\n    } catch (e) {\n      const decripted = decriB64(cryptedPath);\n      return decripted;\n    }\n  }\n\n  getPathModel() {\n    try {\n      const path = this.getModelPath();\n      return this.load(path);\n    } catch (e) {\n      return this.load('/__users__/public/digital_twin/default');\n    }\n  }\n\n  load(path) {\n    if (typeof this.loadPromise[path] !== 'undefined') {\n      return this.loadPromise[path];\n    }\n    const promisefunc = async (resolve, reject) => {\n      try {\n        await this.connect();\n        spinalCore.load(\n          this.conn, path,\n          (model) => {\n            resolve(model);\n          },\n          () => {\n            throw new Error(`Load Error path: '${path}'`);\n          });\n\n      } catch (e) {\n        reject(e);\n      }\n    };\n    this.loadPromise[path] = new Promise(promisefunc);\n    return this.loadPromise[path];\n  }\n\n  loadPtr(ptr) {\n    if (ptr instanceof File) return this.loadPtr(ptr._ptr);\n    const server_id = ptr.data.value;\n\n    if (typeof this.loadPtr[server_id] !== 'undefined') {\n      return this.loadPtr[server_id];\n    }\n    const promFunc = async (resolve, reject) => {\n      try {\n        await this.connect();\n        this.conn.load_ptr(\n          server_id,\n          (model) => {\n            resolve(model);\n          },\n          () => {\n            throw new Error(`LoadPtr Error server_id: '${server_id}'`);\n          });\n\n      } catch (e) {\n        reject(e);\n      }\n    };\n    this.loadPtr[server_id] = new Promise(promFunc);\n    return this.loadPtr[server_id];\n  }\n\n  async getUserProfile(user, withAdminCheck = false) {\n    const userDir = await this.load('/etc/UserProfileDir');\n    for (let index = 0; index < userDir.length; index++) {\n      const userFile = userDir[index];\n\n      if (userFile.name.get() === user) {\n        if (withAdminCheck === true) {\n          return this.loadPtr(userFile).then(\n            async (res) => {\n                await this.checkUserAdmin(user, res);\n                return res;\n              },\n              () => {\n                throw new Error('Undefined User');\n              });\n        } else {\n          return this.loadPtr(userFile);\n        }\n      }\n    }\n    throw new Error('Undefined User');\n  }\n\n  getAlluser() {\n    let path = \"/etc/users\";\n    return this.load(path).then(model => {\n      return model.get();\n    })\n  }\n\n  async getUserConnected() {\n    const auth = this.getauth();\n    const allUsers = await this.getAlluser();\n\n    return allUsers.find(el => el.name === auth.username);\n  }\n\n}\n\nexport const spinalIO = new SpinalIO();","var aesjs = require('aes-js');\n\nexport function decriAes(k, encryptedHex) {\n  const encryptedBytes = aesjs.utils.hex.toBytes(encryptedHex);\n  const aesCtr = new aesjs.ModeOfOperation.ctr(k, new aesjs.Counter(5));\n  const decryptedBytes = aesCtr.decrypt(encryptedBytes);\n  return aesjs.utils.utf8.fromBytes(decryptedBytes);\n}\nexport function decriB64(encryptedHex) {\n  return atob(encryptedHex);\n}","import Vue from \"vue\";\n\n\nconst EventBus = new Vue();\n\nexport default EventBus;","export const TICKET_EVENTS = Object.freeze({\n  created: \"created\",\n  changeStep: \"changeStep\",\n});\n","import {\n  SpinalContextApp\n} from 'spinal-env-viewer-context-menu-service'\n\nimport {\n  spinalPanelManagerService\n} from 'spinal-env-viewer-panel-manager-service';\n\nimport {\n  SERVICE_TYPE,\n  SPINAL_TICKET_SERVICE_TICKET_TYPE,\n  SPINAL_TICKET_SERVICE_TICKET_RELATION_NAME,\n  SPINAL_TICKET_SERVICE_STEP_TYPE\n} from \"spinal-service-ticket/dist/Constants\";\n\nimport {\n  spinalIO\n} from '../extensions/spinalIO'\n\nimport {\n  SpinalGraphService\n} from 'spinal-env-viewer-graph-service';\n\nimport {\n  serviceTicketPersonalized\n} from \"spinal-service-ticket\";\n\nimport EventBUS from '../extensions/Event'\nimport {\n  TICKET_EVENTS\n} from '../extensions/ticketsEvents'\n\nexport class BackToPreviousStepButton extends SpinalContextApp {\n\n  constructor() {\n    super('Back to previous step',\n      'backward the ticket to previous step', {\n      icon: \"skip_previous\",\n      icon_type: 'in',\n      backgroundColor: \"#356BAB\",\n      fontColor: '#ffffff'\n    })\n  }\n\n\n  isShown(option) {\n    const contextType = option.context.type.get();\n    const nodeType = option.selectedNode.type.get();\n\n    if (contextType === SERVICE_TYPE && nodeType ===\n      SPINAL_TICKET_SERVICE_TICKET_TYPE) return Promise.resolve(true);\n    return Promise.resolve(-1)\n  }\n\n  async action(option) {\n    const user = await spinalIO.getUserConnected();\n\n    const contextId = option.context.id.get();\n    const ticketId = option.selectedNode.id.get();\n    const processId = await getProcessId(ticketId);\n\n    // console.log(contextId, ticketId, processId)\n\n    if (contextId && ticketId && processId) {\n      spinalPanelManagerService.openPanel(\"confirmationDialog\", {\n        message: \"do you want to backward this ticket to the next step ?\",\n        callback: () => {\n          serviceTicketPersonalized\n            .moveTicketToPreviousStep(contextId, processId, ticketId,\n              user).then((step) => {\n                const info = SpinalGraphService.getInfo(ticketId).get();\n                EventBUS.$emit(TICKET_EVENTS.changeStep, {\n                  ticket: info,\n                  step: step\n                });\n              })\n        }\n      })\n    }\n\n  }\n\n}\n\nconst getProcessId = async (ticketId) => {\n  const parents = await SpinalGraphService.getParents(ticketId, [\n    SPINAL_TICKET_SERVICE_TICKET_RELATION_NAME\n  ])\n\n  const found = parents.find(el => el.type.get() ===\n    SPINAL_TICKET_SERVICE_STEP_TYPE);\n\n  if (found) return found.processId.get();\n\n}","import {\n  SpinalContextApp\n} from \"spinal-env-viewer-context-menu-service\";\n\n\nimport {\n  SERVICE_TYPE,\n  SPINAL_TICKET_SERVICE_TICKET_TYPE,\n  SPINAL_TICKET_SERVICE_TICKET_RELATION_NAME,\n} from \"spinal-service-ticket/dist/Constants\";\n\nimport {\n  SpinalGraphService\n} from \"spinal-env-viewer-graph-service\";\n\n\nimport {\n  SpinalContextSelectBIMObject,\n} from \"spinal-env-viewer-plugin-standard_button/js/selectBIMObjectButton\";\n\nimport {\n  SpinalContextFitToViewer\n} from \"spinal-env-viewer-plugin-standard_button/js/fitToViewerButton\";\n\nimport {\n  isShownParam\n} from \"spinal-env-viewer-plugin-standard_button/js/utilities\";\n\nimport ColorElementExtension from \"../../extensions/colorElementExtension\";\n\nexport class SelectElementOnMaquette extends SpinalContextApp {\n  constructor() {\n    super(\"Select Object on Maquette\", \"select object on maquette\", {\n      icon: \"find_in_page\",\n      icon_type: \"in\",\n      backgroundColor: \"#356BAB\",\n      fontColor: \"#ffffff\",\n    });\n  }\n\n  isShown(option) {\n    const contextType = option.context.type.get();\n    const nodeType = option.selectedNode.type.get();\n\n    if (\n      contextType === SERVICE_TYPE\n      // &&\n      // nodeType === SPINAL_TICKET_SERVICE_TICKET_TYPE\n    )\n      return Promise.resolve(true);\n    return Promise.resolve(-1);\n  }\n\n  async action(option) {\n    const nodeId = option.selectedNode.id.get();\n    const contextId = option.context.id.get();\n\n    const parents = await ColorElementExtension.getTicketParentsBim(nodeId,\n      contextId);\n\n\n    if (!parents || (parents && parents.length === 0)) {\n      window.alert(\"No parent on bimMaquette\");\n      return;\n    }\n\n    parents.forEach((el) => {\n      el.model.selector.setSelection(el.ids, el.model, \"selectOnly\");\n    })\n\n\n\n    // const selectButton = new SpinalContextSelectBIMObject();\n    // // const zoomButton = new SpinalContextFitToViewer();\n\n    // parents.forEach((element) => {\n    //   const params = {\n    //     selectedNode: element,\n    //   };\n    //   selectButton.action(params);\n    //   // zoomButton.action(params);\n    // });\n  }\n}","/*\n * Copyright 2018 SpinalCom - www.spinalcom.com\n *\n * This file is part of SpinalCore.\n *\n * Please read all of the following terms and conditions\n * of the Free Software license Agreement (\"Agreement\")\n * carefully.\n *\n * This Agreement is a legally binding contract between\n * the Licensee (as defined below) and SpinalCom that\n * sets forth the terms and conditions that govern your\n * use of the Program. By installing and/or using the\n * Program, you agree to abide by all the terms and\n * conditions stated or referenced herein.\n *\n * If you do not agree to abide by these terms and\n * conditions, do not demonstrate your acceptance and do\n * not install or use the Program.\n * You should have received a copy of the license along\n * with this file. If not, see\n * <http://resources.spinalcom.com/licenses.pdf>.\n */\n\nimport { SpinalGraphService } from 'spinal-env-viewer-graph-service';\n\nconst {\n  SpinalContextApp\n} = require(\"spinal-env-viewer-context-menu-service\");\n\nimport {\n  utilities,\n  SELECTrelationList,\n  isShownParam\n} from \"./utilities\";\n\nclass SpinalContextSelectBIMObject extends SpinalContextApp {\n  constructor() {\n    super(\"select BIMObject button\", \"select BIMObject button\", {\n      icon: \"devices\",\n      icon_type: \"in\"\n    });\n  }\n\n  isShown(option) {\n    const type = option.selectedNode.type.get();\n    if (isShownParam.indexOf(type) > -1) { return (Promise.resolve(true)); }\n    return (Promise.resolve(-1));\n  }\n\n  action(option) {\n    let realNode = SpinalGraphService.getRealNode(option.selectedNode.id\n      .get());\n    this.viewer = window.spinal.ForgeViewer.viewer;\n    let self = this;\n    realNode.find(SELECTrelationList,\n      function (node) {\n        if (node.info.type.get() === \"BIMObject\") {\n          return true;\n        }\n      }).then(lst => {\n      self.viewer.clearSelection();\n      utilities.sortBIMObjectByModel(lst).then(lstByModel => {\n        for (let i = 0; i < lstByModel.length; i++) {\n          const element = lstByModel[i];\n          for (let j = 0; j < element.model.modelScene.length; j++) {\n            const scene = element.model.modelScene[j];\n            // console.log(\"hello select\", element.dbid, scene.model);\n            scene.model.selector.setSelection(element.dbid, scene.model, \"selectOnly\");\n          }\n        }\n      });\n    });\n  }\n}\n\nexport {\n  SpinalContextSelectBIMObject\n};\n","/*\n * Copyright 2021 SpinalCom - www.spinalcom.com\n *\n * This file is part of SpinalCore.\n *\n * Please read all of the following terms and conditions\n * of the Free Software license Agreement (\"Agreement\")\n * carefully.\n *\n * This Agreement is a legally binding contract between\n * the Licensee (as defined below) and SpinalCom that\n * sets forth the terms and conditions that govern your\n * use of the Program. By installing and/or using the\n * Program, you agree to abide by all the terms and\n * conditions stated or referenced herein.\n *\n * If you do not agree to abide by these terms and\n * conditions, do not demonstrate your acceptance and do\n * not install or use the Program.\n * You should have received a copy of the license along\n * with this file. If not, see\n * <http://resources.spinalcom.com/licenses.pdf>.\n */\n\nimport { SpinalGraphService } from \"spinal-env-viewer-graph-service\";\n// import {\n//   // ROOMS_CATEGORY_RELATION,\n//   // ROOMS_TO_ELEMENT_RELATION,\n//   // ROOMS_GROUP_RELATION,\n//   // EQUIPMENTS_CATEGORY_RELATION,\n//   // EQUIPMENTS_TO_ELEMENT_RELATION,\n//   // EQUIPMENTS_GROUP_RELATION,\n//   // ROOMS_GROUP_CONTEXT,\n//   // ROOMS_GROUP,\n//   // ROOMS_CATEGORY,\n//   // EQUIPMENTS_GROUP_CONTEXT,\n//   // EQUIPMENTS_CATEGORY,\n//   // EQUIPMENTS_GROUP\n\n//   groupService\n\n// } from 'spinal-env-viewer-room-manager/services/service';\n\nimport { groupManagerService } from \"spinal-env-viewer-plugin-group-manager-service\";\n\nimport {\n  SITE_TYPE,\n  BUILDING_TYPE,\n  FLOOR_TYPE,\n  ZONE_TYPE,\n  ROOM_TYPE,\n  EQUIPMENT_TYPE,\n  SITE_RELATION,\n  BUILDING_RELATION,\n  FLOOR_RELATION,\n  ZONE_RELATION,\n  ROOM_RELATION,\n  EQUIPMENT_RELATION,\n  REFERENCE_RELATION,\n} from \"spinal-env-viewer-context-geographic-service/build/constants\";\n\nimport { SpinalBmsEndpoint } from \"spinal-model-bmsnetwork\";\n\nimport { CONSTANTS } from \"spinal-env-viewer-plugin-network-tree-service\";\n\n\nconst SELECTrelationList = [\n  SITE_RELATION,\n  BUILDING_RELATION,\n  FLOOR_RELATION,\n  ZONE_RELATION,\n  ROOM_RELATION,\n  EQUIPMENT_RELATION,\n  REFERENCE_RELATION,\n  `${REFERENCE_RELATION}.ROOM`,\n  \"hasBIMObject\", // for old system\n  // groupService.constants.CONTEXT_TO_CATEGORY_RELATION,\n  // groupService.constants.CATEGORY_TO_GROUP_RELATION,\n  // groupService.constants.GROUP_TO_ROOMS_RELATION,\n  // groupService.constants.GROUP_TO_EQUIPMENTS_RELATION,\n  // groupService.constants.GROUP_TO_ENDPOINT_RELATION,\n  groupManagerService.constants.CONTEXT_TO_CATEGORY_RELATION,\n  groupManagerService.constants.CATEGORY_TO_GROUP_RELATION,\n  ...Object.values(groupManagerService.constants.OLD_RELATIONS_TYPES),\n  `groupHas${ROOM_TYPE}`,\n  `groupHas${EQUIPMENT_TYPE}`,\n  `groupHas${SITE_TYPE}`,\n  `groupHas${BUILDING_TYPE}`,\n  `groupHas${FLOOR_TYPE}`,\n  `groupHas${ZONE_TYPE}`,\n  `groupHas${SpinalBmsEndpoint.nodeTypeName}`,\n  // CONSTANTS.NETWORK_RELATION,\n  // CONSTANTS.NETWORK_BIMOJECT_RELATION\n];\n\nconst isShownParam = [\n  SITE_TYPE,\n  BUILDING_TYPE,\n  FLOOR_TYPE,\n  ZONE_TYPE,\n  ROOM_TYPE,\n  EQUIPMENT_TYPE,\n  // ...groupService.constants.CONTEXTS_TYPES,\n  // ...groupService.constants.GROUPS_TYPES,\n  // groupService.constants.CATEGORY_TYPE\n  ...Object.values(groupManagerService.constants.OLD_CONTEXTS_TYPES),\n  ...Object.values(groupManagerService.constants.OLD_GROUPS_TYPES),\n  groupManagerService.constants.CATEGORY_TYPE,\n  `${ROOM_TYPE}Group`,\n  `${EQUIPMENT_TYPE}Group`,\n  `${SITE_TYPE}Group`,\n  `${BUILDING_TYPE}Group`,\n  `${FLOOR_TYPE}Group`,\n  `${ZONE_TYPE}Group`,\n  `${ROOM_TYPE}GroupContext`,\n  `${EQUIPMENT_TYPE}GroupContext`,\n  `${SITE_TYPE}GroupContext`,\n  `${BUILDING_TYPE}GroupContext`,\n  `${FLOOR_TYPE}GroupContext`,\n  `${ZONE_TYPE}GroupContext`,\n  // CONSTANTS.CONTEXT_TYPE,\n  // CONSTANTS.NETWORK_TYPE,\n];\n\nconst utilities = {\n  async sortBIMObjectByModel(arrayOfBIMObject) {\n    let arrayModel = [];\n    for (const key in spinal.BimObjectService.mappingBimFileIdModelId) {\n      if (spinal.BimObjectService.mappingBimFileIdModelId.hasOwnProperty(key)) {\n        const element = spinal.BimObjectService.mappingBimFileIdModelId[key];\n        let obj = {\n          dbid: [],\n          model: element,\n        };\n        arrayModel.push(obj);\n      }\n    }\n    for (let i = 0; i < arrayOfBIMObject.length; i++) {\n      SpinalGraphService._addNode(arrayOfBIMObject[i]);\n      let bim = SpinalGraphService.getNode(arrayOfBIMObject[i].info.id.get());\n      try {\n        let spinalModel =\n          window.spinal.BimObjectService.mappingBimFileIdModelId[\n            bim.bimFileId.get()\n          ];\n        if (spinalModel) {\n          for (let j = 0; j < arrayModel.length; j++) {\n            const element = arrayModel[j];\n            if (element.model.modelId === spinalModel.modelId) {\n              element.dbid.push(bim.dbid.get());\n            }\n          }\n        }\n      } catch (error) {\n        console.error(\"skip node because bimFileId is not defined\", error);\n      }\n    }\n    return arrayModel;\n  },\n};\n\nmodule.exports = {\n  SELECTrelationList,\n  isShownParam,\n  utilities,\n};\n","/*\n * Copyright 2018 SpinalCom - www.spinalcom.com\n *\n * This file is part of SpinalCore.\n *\n * Please read all of the following terms and conditions\n * of the Free Software license Agreement (\"Agreement\")\n * carefully.\n *\n * This Agreement is a legally binding contract between\n * the Licensee (as defined below) and SpinalCom that\n * sets forth the terms and conditions that govern your\n * use of the Program. By installing and/or using the\n * Program, you agree to abide by all the terms and\n * conditions stated or referenced herein.\n *\n * If you do not agree to abide by these terms and\n * conditions, do not demonstrate your acceptance and do\n * not install or use the Program.\n * You should have received a copy of the license along\n * with this file. If not, see\n * <http://resources.spinalcom.com/licenses.pdf>.\n */\n\nimport {\n  SpinalGraphService\n} from 'spinal-env-viewer-graph-service';\n\nconst {\n  SpinalContextApp\n} = require(\"spinal-env-viewer-context-menu-service\");\nimport {\n  SELECTrelationList,\n  utilities,\n  isShownParam\n} from \"./utilities\";\n\n\nclass SpinalContextFitToViewer extends SpinalContextApp {\n  constructor() {\n    super(\"fit button\", \"fit to viewer button\", {\n      icon: \"zoom_in\",\n      icon_type: \"in\"\n    });\n  }\n\n  isShown(option) {\n    const type = option.selectedNode.type.get();\n    if (isShownParam.indexOf(type) > -1)\n      return (Promise.resolve(true));\n    return (Promise.resolve(-1))\n  }\n\n  action(option) {\n    this.viewer = window.spinal.ForgeViewer.viewer\n    let self = this;\n    let realNode = SpinalGraphService.getRealNode(option.selectedNode.id\n      .get());\n    this.viewer = window.spinal.ForgeViewer.viewer\n\n    realNode.find(SELECTrelationList,\n      function(node) {\n        if (node.info.type.get() === \"BIMObject\") return true;\n      }).then(lst => {\n      utilities.sortBIMObjectByModel(lst).then(lstByModel => {\n        let arrayToFit = []\n        for (let i = 0; i < lstByModel.length; i++) {\n          const element = lstByModel[i];\n          let obj = {\n            model: element.model.modelScene[0].model,\n            selection: element.dbid\n          }\n          arrayToFit.push(obj);\n          obj.model.selector.setSelection(element.dbid, obj\n            .model,\n            \"selectOnly\")\n        }\n        self.viewer.fitToView(arrayToFit);\n      })\n    });\n  }\n}\n\n\nexport {\n  SpinalContextFitToViewer\n};","import {\n  SpinalGraphService\n} from 'spinal-env-viewer-graph-service';\n\nimport geographicService from \"spinal-env-viewer-context-geographic-service\";\n\nimport {\n  groupManagerService\n} from \"spinal-env-viewer-plugin-group-manager-service\";\n\nimport {\n  BIM_OBJECT_TYPE\n} from \"spinal-env-viewer-plugin-forge/dist/Constants\";\n\n\nimport {\n  SELECTrelationList,\n  isShownParam\n} from \"spinal-env-viewer-plugin-standard_button/js/utilities\";\n\n\nimport {\n  SERVICE_TYPE,\n  SPINAL_TICKET_SERVICE_TICKET_TYPE,\n  SPINAL_TICKET_SERVICE_TICKET_RELATION_NAME,\n  SPINAL_TICKET_SERVICE_STEP_TYPE,\n} from \"spinal-service-ticket/dist/Constants\";\n\n\nlet ItemColoredMap = new Map();\nlet BimElementsColor = new Map();\n\nclass ColorElementExtension {\n\n  constructor() {}\n\n  getIcon(nodeInfo, contextInfo) {\n    return this._isColored(nodeInfo, contextInfo).then(isColored => {\n      return isColored;\n    })\n  }\n\n  restoreItem(nodeInfo, contextInfo) {\n    this.getGroups(nodeInfo, contextInfo).then(res => {\n      res.forEach(el => {\n        let id = el.id;\n        this._restoreGroup(contextInfo.id, id);\n      })\n    })\n  }\n\n  colorItem(nodeInfo, contextInfo) {\n    this.getGroups(nodeInfo, contextInfo).then(res => {\n      res.forEach(el => {\n        let id = el.id;\n        let color = el.color ? el.color : undefined;\n        this._colorGroup(contextInfo.id, id, color);\n      })\n    })\n  }\n\n  getGroups(selectedNode, contextInfo) {\n    const type = selectedNode.type;\n    const nodeId = selectedNode.id;\n    const contextId = contextInfo.id;\n\n    if (type === SPINAL_TICKET_SERVICE_STEP_TYPE) {\n      return Promise.resolve([selectedNode]);\n    }\n\n    return SpinalGraphService.findInContext(nodeId, contextId, (node) => {\n      SpinalGraphService._addNode(node);\n      let argType = node.getType().get();\n      return argType === SPINAL_TICKET_SERVICE_STEP_TYPE\n      //   return groupManagerService.isGroup(argType);\n    }).then(res => {\n      return res.map(el => {\n        return el.get();\n      })\n    })\n  }\n\n  async getBimObjects(contextId, groupId) {\n    const notes = await this._getTickets(groupId, contextId);\n    const parents = await this._getParents(notes);\n\n    const promises = parents.map(el => this._getItemsBim(el));\n\n    return Promise.all(promises).then((result) => {\n      const res = [];\n      result.forEach(el => res.push(...el));\n      return res;\n    })\n  }\n\n  ////////////////////////////////////////////////////////////\n  //                    PRIVATE                             //\n  ////////////////////////////////////////////////////////////\n\n\n  _isColored(selectedNode, contextInfo) {\n    return this.getGroups(selectedNode, contextInfo).then(res => {\n\n      if (res.length === 0) return false;\n\n      for (let index = 0; index < res.length; index++) {\n        const id = res[index].id;\n\n        if (typeof ItemColoredMap.get(id) === \"undefined\") {\n          return false;\n        }\n\n      }\n\n      return true;\n\n    })\n\n  }\n\n  _colorGroup(contextId, groupId, argColor) {\n\n    return this.getBimObjects(contextId, groupId).then(res => {\n\n      let color = typeof argColor !== \"undefined\" ? this\n        ._convertHexColorToRGB(argColor) : this._convertHexColorToRGB(\n          \"#000000\");\n\n      ItemColoredMap.set(groupId, groupId);\n\n      res.forEach(child => {\n        let BimColors = BimElementsColor.get(child.dbid) ?\n          BimElementsColor.get(child.dbid) : [];\n\n        BimColors.push({\n          id: groupId, //node.id,\n          color: color\n        });\n\n        BimElementsColor.set(child.dbid, BimColors);\n\n        let model = window.spinal.BimObjectService.getModelByBimfile(\n          child.bimFileId);\n\n        model.setThemingColor(child.dbid, new THREE.Vector4(\n            color.r / 255, color.g / 255, color.b / 255, 0.7, true)\n\n        );\n\n      });\n\n    })\n  }\n\n  _restoreGroup(contextId, groupId) {\n    ItemColoredMap.delete(groupId);\n    return this.getBimObjects(contextId, groupId).then(res => {\n      res.forEach(child => {\n\n        let model = window.spinal.BimObjectService.getModelByBimfile(\n          child.bimFileId);\n\n        model.setThemingColor(\n          child.dbid,\n          // eslint-disable-next-line no-undef\n          new THREE.Vector4(0, 0, 0, 0),\n          true\n        );\n\n        let allColors = BimElementsColor.get(child.dbid);\n\n        if (allColors) {\n          //   allColors = allColors.filter(el => el.id !== node.id.get());\n          allColors = allColors.filter(el => el.id !== groupId);\n          BimElementsColor.set(child.dbid, allColors);\n\n          if (allColors.length > 0) {\n            let color = allColors[0].color;\n            model.setThemingColor(\n              child.dbid,\n              // eslint-disable-next-line no-undef\n              new THREE.Vector4(\n                color.r / 255,\n                color.g / 255,\n                color.b / 255,\n                0.7\n              ),\n              true\n            );\n          }\n        }\n      })\n    })\n  }\n\n  _getTickets(nodeId, contextId) {\n    return SpinalGraphService.findInContext(nodeId, contextId, (node) => {\n      SpinalGraphService._addNode(node);\n      let argType = node.getType().get();\n      return argType === SPINAL_TICKET_SERVICE_TICKET_TYPE;\n    }).then(res => {\n      return res.map(el => {\n        return el.get();\n      })\n    })\n  }\n\n  _convertHexColorToRGB(hex) {\n    var result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n    return result ? {\n        r: parseInt(result[1], 16),\n        g: parseInt(result[2], 16),\n        b: parseInt(result[3], 16)\n      } :\n      null;\n  }\n\n  _getParents(notes) {\n    const promises = notes.map(async el => {\n      const realNode = SpinalGraphService.getRealNode(el.id);\n      const parents = await realNode.getParents(\n        SPINAL_TICKET_SERVICE_TICKET_RELATION_NAME);\n\n      return parents\n        .filter((el) => {\n          return isShownParam.indexOf(el.getType().get()) !== -1;\n        })\n    });\n\n    return Promise.all(promises).then((result) => {\n\n      const res = [];\n\n      result.forEach(element => {\n        const infos = element.map(el => {\n          SpinalGraphService._addNode(el);\n          return el.info.get()\n        });\n\n        res.push(...infos);\n      });\n\n      return res;\n    })\n\n  }\n\n  _getItemsBim(nodeInfo) {\n\n    const type = nodeInfo.type;\n    const nodeId = nodeInfo.id;\n\n    if (type === BIM_OBJECT_TYPE) {\n      return Promise.resolve([nodeInfo]);\n    } else if (type === geographicService.constants\n      .ROOM_TYPE) {\n      return SpinalGraphService.getChildren(nodeId, [geographicService\n        .constants\n        .REFERENCE_RELATION, geographicService.constants\n        .EQUIPMENT_RELATION\n      ]);\n    } else {\n      // let relations = [\n      //   ...geographicService.constants.GEOGRAPHIC_RELATIONS,\n      //   geographicService.constants.REFERENCE_RELATION\n      // ];\n\n      return SpinalGraphService.findNodes(nodeId, SELECTrelationList, (\n        node) => {\n        return node.getType().get() === BIM_OBJECT_TYPE\n      }).then(res => {\n        return res.map(el => {\n          SpinalGraphService._addNode(el);\n          return el.info.get();\n        })\n      })\n    }\n  }\n\n  ////////////////////////////////////////////////////////////////////\n  //                    Standard Buttons functions                  //\n  ////////////////////////////////////////////////////////////////////\n\n  async getGeographicElement(ticketId) {\n\n    const realNode = SpinalGraphService.getRealNode(ticketId);\n    const parents = await realNode.getParents(\n      SPINAL_TICKET_SERVICE_TICKET_RELATION_NAME\n    );\n\n    return parents\n      .filter((el) => {\n        SpinalGraphService._addNode(el);\n        return isShownParam.indexOf(el.getType().get()) !== -1;\n      })\n      .map((el) => el.info);\n  };\n\n  async getTicketParentsBim(nodeId, contextId) {\n    const tickets = await this._getTickets(nodeId, contextId);\n\n    const promises = tickets.map(el => this.getGeographicElement(el.id));\n\n    return Promise.all(promises).then(async ticketsParentNode => {\n      const el = ticketsParentNode.flat();\n      const promises = el.map(v => this._getItemsBim(v));\n      let bims = await Promise.all(promises);\n      bims = bims.flat();\n\n      const bimMap = new Map();\n\n      for (const bimObject of bims) {\n        const bimFileId = bimObject.bimFileId;\n        const dbid = bimObject.dbid;\n\n        if (typeof bimMap.get(bimFileId) === \"undefined\") {\n          bimMap.set(bimFileId, new Set());\n        }\n\n        bimMap.get(bimFileId).add(dbid);\n      }\n      const res = []\n\n      for (const [key, value] of bimMap.entries()) {\n        res.push({\n          model: window.spinal.BimObjectService\n            .getModelByBimfile(key),\n          ids: Array.from(value)\n        })\n      }\n\n      return res;\n\n    });\n  }\n\n}\n\n\nexport default new ColorElementExtension()","import {\n  SpinalContextApp\n} from \"spinal-env-viewer-context-menu-service\";\n\n\nimport {\n  SERVICE_TYPE,\n  SPINAL_TICKET_SERVICE_TICKET_TYPE,\n  SPINAL_TICKET_SERVICE_TICKET_RELATION_NAME,\n} from \"spinal-service-ticket/dist/Constants\";\n\n\nimport ColorElementExtension from \"../../extensions/colorElementExtension\";\n\nexport class IsolateElementOnMaquette extends SpinalContextApp {\n  constructor() {\n    super(\"Isolate Object on Maquette\", \"Isolate object on maquette\", {\n      icon: \"settings_overscan\",\n      icon_type: \"in\",\n      backgroundColor: \"#356BAB\",\n      fontColor: \"#ffffff\",\n    });\n  }\n\n  isShown(option) {\n    const contextType = option.context.type.get();\n    const nodeType = option.selectedNode.type.get();\n\n    if (\n      contextType === SERVICE_TYPE\n      // &&\n      // nodeType === SPINAL_TICKET_SERVICE_TICKET_TYPE\n    )\n      return Promise.resolve(true);\n    return Promise.resolve(-1);\n  }\n\n  async action(option) {\n    const nodeId = option.selectedNode.id.get();\n    const contextId = option.context.id.get();\n\n    const parents = await ColorElementExtension.getTicketParentsBim(nodeId,\n      contextId);\n\n    if (!parents || (parents && parents.length === 0)) {\n      window.alert(\"No parent on bimMaquette\");\n      return;\n    }\n\n    parents.forEach((el) => {\n      window.spinal.ForgeViewer.viewer.impl.visibilityManager.isolate(el\n        .ids, el.model)\n    })\n\n  }\n}","import {\n  SpinalContextApp\n} from \"spinal-env-viewer-context-menu-service\";\n\n\nimport {\n  SERVICE_TYPE,\n  SPINAL_TICKET_SERVICE_TICKET_TYPE,\n  SPINAL_TICKET_SERVICE_TICKET_RELATION_NAME,\n} from \"spinal-service-ticket/dist/Constants\";\n\n\nimport ColorElementExtension from \"../../extensions/colorElementExtension\";\n\nexport class ZoomElementOnMaquette extends SpinalContextApp {\n  constructor() {\n    super(\"Zoom\", \"Isolate object on maquette\", {\n      icon: \"zoom_in\",\n      icon_type: \"in\",\n      backgroundColor: \"#356BAB\",\n      fontColor: \"#ffffff\",\n    });\n  }\n\n  isShown(option) {\n    const contextType = option.context.type.get();\n    const nodeType = option.selectedNode.type.get();\n\n    if (\n      contextType === SERVICE_TYPE\n      // &&\n      // nodeType === SPINAL_TICKET_SERVICE_TICKET_TYPE\n    )\n      return Promise.resolve(true);\n    return Promise.resolve(-1);\n  }\n\n  async action(option) {\n    const nodeId = option.selectedNode.id.get();\n    const contextId = option.context.id.get();\n\n    const parents = await ColorElementExtension.getTicketParentsBim(nodeId,\n      contextId);\n\n    if (!parents || (parents && parents.length === 0)) {\n      window.alert(\"No parent on bimMaquette\");\n      return;\n    }\n\n    const dbIds = parents.map(el => el.ids)\n\n    window.spinal.ForgeViewer.viewer.fitToView(dbIds.flat());\n\n  }\n}","import {\n  SpinalContextApp\n} from \"spinal-env-viewer-context-menu-service\";\n\nimport {\n  spinalPanelManagerService\n} from \"spinal-env-viewer-panel-manager-service\";\n\nimport {\n  SERVICE_TYPE,\n  SPINAL_TICKET_SERVICE_TICKET_TYPE,\n  SPINAL_TICKET_SERVICE_TICKET_RELATION_NAME,\n  SPINAL_TICKET_SERVICE_STEP_TYPE,\n} from \"spinal-service-ticket/dist/Constants\";\n\nimport {\n  SpinalGraphService\n} from \"spinal-env-viewer-graph-service\";\n\nimport {\n  isShownParam\n} from \"spinal-env-viewer-plugin-standard_button/js/utilities\";\n\nimport colorExtension from \"../extensions/colorElementExtension\";\n\nexport class ColorElementButton extends SpinalContextApp {\n  constructor() {\n    super(\"Select Object on Maquette\", \"select object on maquette\", {\n      icon: \"\",\n      icon_type: \"in\",\n      backgroundColor: \"#356BAB\",\n      fontColor: \"#ffffff\",\n    });\n  }\n\n  isShown(option) {\n    const contextType = option.context.type.get();\n    const nodeType = option.selectedNode.type.get();\n\n    if (\n      contextType !== SERVICE_TYPE ||\n      nodeType === SPINAL_TICKET_SERVICE_TICKET_TYPE\n    )\n      return Promise.resolve(-1);\n\n    return colorExtension.getIcon(option.selectedNode.get(), option.context\n        .get())\n      .then(\n        (isColored) => {\n          this.buttonCfg[\"isColored\"] = isColored;\n          this.buttonCfg.icon = isColored ? \"visibility_off\" : \"visibility\";\n          return true;\n        })\n\n  }\n\n  async action(option) {\n    const selected = option.selectedNode.get();\n    const context = option.context.get();\n\n    if (this.isColored) {\n      this.icon = \"visibility\";\n      this.isColored = false;\n      colorExtension.restoreItem(selected, context);\n    } else {\n      this.icon = \"visibility_off\";\n      this.isColored = true;\n      colorExtension.colorItem(selected, context);\n    }\n\n    window.NOP_VIEWER.impl.invalidate(0, 1, 0);\n  }\n}\n\nconst getGeographicElement = async (ticketId) => {\n  //   const parents = await SpinalGraphService.getParents(ticketId, [\n  //     SPINAL_TICKET_SERVICE_TICKET_RELATION_NAME,\n  //   ]);\n\n  const realNode = SpinalGraphService.getRealNode(ticketId);\n  const parents = await realNode.getParents(\n    SPINAL_TICKET_SERVICE_TICKET_RELATION_NAME\n  );\n\n  return parents\n    .filter((el) => {\n      SpinalGraphService._addNode(el);\n      return isShownParam.indexOf(el.getType().get()) !== -1;\n    })\n    .map((el) => el.info);\n};","import vue from \"vue\";\n\nimport CreateTicketContextDialog from \"./createContextDialog.vue\";\nimport CreateProcessDialog from \"./createProcessDialog.vue\";\nimport CreateStepDialog from \"./createStepDialog.vue\";\nimport CreateTicketDialog from \"./createTicket.vue\";\nimport SelectProcessDialog from \"./selectProcessDialog.vue\";\nimport CreateCommonIncidentDialog from \"./createCommonIncidentDialog.vue\";\n// import TicketDetailDialog from \"./ticketDetailDialog.vue\";\nimport ConfirmDialog from './confirmDialog.vue';\n\nconst {\n  SpinalMountExtention\n} = require(\"spinal-env-viewer-panel-manager-service\");\n\nconst dialogs = [{\n    name: \"createTicketContextDialog\",\n    vueMountComponent: vue.extend(CreateTicketContextDialog),\n    parentContainer: document.body\n  }, {\n    name: \"createProcessDialog\",\n    vueMountComponent: vue.extend(CreateProcessDialog),\n    parentContainer: document.body\n  }, {\n    name: \"createStepDialog\",\n    vueMountComponent: vue.extend(CreateStepDialog),\n    parentContainer: document.body\n  }, {\n    name: \"createTicketDialog\",\n    vueMountComponent: vue.extend(CreateTicketDialog),\n    parentContainer: document.body\n  },\n  {\n    name: \"selectProcessDialog\",\n    vueMountComponent: vue.extend(SelectProcessDialog),\n    parentContainer: document.body\n  }, {\n    name: \"createCommonIncidentDialog\",\n    vueMountComponent: vue.extend(CreateCommonIncidentDialog),\n    parentContainer: document.body\n  },\n  // {\n  //   name: \"ticketDetailDialog\",\n  //   vueMountComponent: vue.extend(TicketDetailDialog),\n  //   parentContainer: document.body\n  // }, \n  {\n    name: \"confirmationDialog\",\n    vueMountComponent: vue.extend(ConfirmDialog),\n    parentContainer: document.body\n  }\n];\n\n\nfor (let index = 0; index < dialogs.length; index++) {\n  SpinalMountExtention.mount(dialogs[index]);\n}","<!--\nCopyright 2020 SpinalCom - www.spinalcom.com\n\nThis file is part of SpinalCore.\n\nPlease read all of the following terms and conditions\nof the Free Software license Agreement (\"Agreement\")\ncarefully.\n\nThis Agreement is a legally binding contract between\nthe Licensee (as defined below) and SpinalCom that\nsets forth the terms and conditions that govern your\nuse of the Program. By installing and/or using the\nProgram, you agree to abide by all the terms and\nconditions stated or referenced herein.\n\nIf you do not agree to abide by these terms and\nconditions, do not demonstrate your acceptance and do\nnot install or use the Program.\nYou should have received a copy of the license along\nwith this file. If not, see\n<http://resources.spinalcom.com/licenses.pdf>.\n-->\n\n<template>\n  <md-dialog :md-active.sync=\"showDialog\"\n             @md-closed=\"closeDialog(false)\"\n             class=\"mdDialog\">\n    <md-dialog-title class=\"mdDialogTitle\">Create Ticket context\n    </md-dialog-title>\n\n    <md-dialog-content class=\"mdDialogContainer\">\n\n      <md-steppers :md-active-step.sync=\"stepper.active\"\n                   @md-changed=\"changeStep\"\n                   md-linear\n                   class=\"mySteppers\">\n        <md-step class=\"mdStep\"\n                 :id=\"STEPPERS_DATA.context\"\n                 md-label=\"Context\"\n                 :md-done.sync=\"stepper.first\">\n          <md-content class=\"contents\">\n            <md-field>\n              <label>Context name</label>\n              <md-input v-model=\"inputValue\"\n                        ref=\"nameTextField\"></md-input>\n            </md-field>\n          </md-content>\n\n        </md-step>\n\n        <md-step class=\"mdStep\"\n                 :id=\"STEPPERS_DATA.steps\"\n                 md-label=\"Steps\"\n                 :md-done.sync=\"stepper.second\">\n\n          <sortable-list :items=\"steps\"\n                         ref=\"draggableComponent\"\n                         @addStep=\"addStep\"\n                         @delete=\"deleteItem\"></sortable-list>\n\n        </md-step>\n\n      </md-steppers>\n\n    </md-dialog-content>\n\n    <md-dialog-actions>\n      <md-button class=\"md-primary\"\n                 @click=\"closeDialog(false)\">Close</md-button>\n\n      <md-button class=\"md-primary\"\n                 v-if=\"stepper.active === this.STEPPERS_DATA.context\"\n                 :disabled=\"!(inputValue.trim().length > 0)\"\n                 @click=\"PassToSecondStep\">Next</md-button>\n\n      <md-button v-if=\"stepper.active === this.STEPPERS_DATA.steps\"\n                 :disabled=\"disabledButton()\"\n                 class=\"md-primary\"\n                 @click=\"closeDialog(true)\">Save</md-button>\n    </md-dialog-actions>\n\n    <!-- <form class=\"dialogForm\"\n          @submit.prevent=\"closeDialog(true)\">\n      <md-dialog-content>\n        <md-field>\n          <label>Context name</label>\n          <md-input v-model=\"inputValue\"overflow: hidden ;\n      <md-dialog-actions>\n        <md-button class=\"md-primary\"\n                   @click=\"closeDialog(false)\">Close</md-button>\n\n        <md-button class=\"md-primary\"\n                   type=\"submit\"\n                   :disabled=\"!(inputValue.trim().length > 0)\">Save</md-button>\n      </md-dialog-actions>\n    </form> -->\n  </md-dialog>\n</template>\n\n<script>\nimport { serviceTicketPersonalized } from \"spinal-service-ticket\";\n\nimport SortableList from \"./components/sortable-list.vue\";\nimport EventBus from \"../../extensions/Event\";\n\nexport default {\n  name: \"createTicketContextDialog\",\n  props: [\"onFinised\"],\n  components: {\n    \"sortable-list\": SortableList,\n  },\n  data() {\n    this.STEPPERS_DATA = {\n      context: \"first\",\n      steps: \"second\",\n    };\n    return {\n      showDialog: true,\n      inputValue: \"\",\n      steps: [],\n      stepper: {\n        active: this.STEPPERS_DATA.context,\n        first: false,\n        second: false,\n      },\n    };\n  },\n  methods: {\n    opened(option) {\n      this.autoFocusNameInput();\n    },\n\n    async removed(res) {\n      const value = res.inputValue.trim();\n\n      if (res.closeResult && value.length > 0) {\n        const context = await serviceTicketPersonalized.createContext(\n          value,\n          res.steps\n        );\n        EventBus.$emit(\"ticketContextCreated\", context.getId().get());\n      }\n\n      this.showDialog = false;\n    },\n    closeDialog(closeResult) {\n      if (typeof this.onFinised === \"function\") {\n        const steps = this.getSteps();\n        this.onFinised({\n          closeResult,\n          inputValue: this.inputValue,\n          steps,\n        });\n      }\n    },\n\n    getSteps() {\n      if (this.$refs.draggableComponent) {\n        const steps = this.$refs.draggableComponent.itemsSorted;\n        return steps.map((el, index) => {\n          el.order = index;\n          return el;\n        });\n      }\n    },\n\n    disabledButton() {\n      const contextCondition = this.inputValue.trim().length === 0;\n      const stepsCondition = this.steps.length === 0;\n      return contextCondition || stepsCondition;\n    },\n\n    autoFocusNameInput() {\n      setTimeout(() => {\n        this.$refs[\"nameTextField\"].$el.focus();\n      }, 200);\n    },\n\n    changeStep(stepId) {\n      if (stepId === this.STEPPERS_DATA.context) {\n        this.stepper.active = stepId;\n        this.stepper.first = false;\n      }\n    },\n\n    PassToSecondStep() {\n      this.stepper.first = true;\n      this.stepper.active = this.STEPPERS_DATA.steps;\n    },\n\n    addStep(res) {\n      this.steps = [...this.steps, res];\n    },\n\n    deleteItem(order) {\n      this.steps = this.steps.filter((el) => el.order !== order);\n    },\n  },\n};\n</script>\n\n<style scoped>\n/* .dialogForm { \n   display: flex; \n  flex-direction: column; \n } */\n\n.mdDialog {\n  width: 450px;\n  height: 500px;\n}\n\n.mdDialog .mdDialogTitle {\n  text-align: center;\n}\n\n.mdDialog .mdDialogContainer {\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n}\n\n.mdDialog .mdDialogContainer .mdStep {\n  height: 300px;\n  overflow: hidden;\n  padding: 10px 0px;\n}\n\n.mdDialog .mdDialogContainer .mdStep .contents {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  overflow: auto;\n}\n\n/* .mdDialog .mdDialogContainer .contents.contextName {\n  display: flex;\n  align-items: center;\n}\n\n.mdDialog .mdDialogContainer .actions {\n  width: 100%;\n  height: 50px;\n  display: flex;\n  justify-content: flex-end;\n} */\n</style>\n\n<style>\n.mdDialog .mdDialogContainer .mdStep .md-stepper-content.md-active {\n  width: 100%;\n  height: 100%;\n}\n</style>","<!--\nCopyright 2020 SpinalCom - www.spinalcom.com\n\nThis file is part of SpinalCore.\n\nPlease read all of the following terms and conditions\nof the Free Software license Agreement (\"Agreement\")\ncarefully.\n\nThis Agreement is a legally binding contract between\nthe Licensee (as defined below) and SpinalCom that\nsets forth the terms and conditions that govern your\nuse of the Program. By installing and/or using the\nProgram, you agree to abide by all the terms and\nconditions stated or referenced herein.\n\nIf you do not agree to abide by these terms and\nconditions, do not demonstrate your acceptance and do\nnot install or use the Program.\nYou should have received a copy of the license along\nwith this file. If not, see\n<http://resources.spinalcom.com/licenses.pdf>.\n-->\n\n<template>\n  <md-content class=\"myContainer md-scrollbar\">\n\n    <draggable v-if=\"itemsSorted.length > 0\"\n               group=\"steps\"\n               @start=\"drag=true\"\n               @end=\"drag=false\"\n               v-model=\"itemsSorted\">\n      <div class=\"listeItemDraggable\"\n           v-for=\"element in itemsSorted\"\n           :key=\"element.order\">\n        <div class=\"left\">\n          <div class=\"color\"\n               :style=\"{'background-color' : element.color}\"></div>\n          <div class=\"name\">\n            {{element.name}}\n          </div>\n        </div>\n\n        <div class=\"right\">\n          <md-button class=\"md-icon-button md-dense md-accent\"\n                     @click=\"deleteItem(element.order)\">\n            <md-icon>delete_forever</md-icon>\n          </md-button>\n        </div>\n\n      </div>\n    </draggable>\n\n    <div v-else\n         class=\"empty\">\n      No step created\n    </div>\n\n    <div class=\"myFabs\">\n      <popover @addStep=\"addStep\"></popover>\n    </div>\n\n  </md-content>\n</template>\n\n<script>\nimport draggable from \"vuedraggable\";\nimport popover from \"./popover.vue\";\nexport default {\n  name: \"Sortable-List\",\n  components: { popover, draggable },\n  props: {\n    items: { default: [] },\n  },\n  data() {\n    return {\n      itemsSorted: [],\n    };\n  },\n  mounted() {\n    this.itemsSorted = this.items;\n  },\n  methods: {\n    addStep(res) {\n      res[\"order\"] = this.items.length;\n      this.$emit(\"addStep\", res);\n    },\n    deleteItem(order) {\n      this.$emit(\"delete\", order);\n    },\n  },\n  watch: {\n    items() {\n      this.itemsSorted = this.items;\n    },\n  },\n};\n</script>\n\n<style scoped>\n.myContainer {\n  width: 100%;\n  height: 100%;\n  overflow: auto;\n  position: relative;\n}\n\n.myContainer .myFabs {\n  width: 50px;\n  position: absolute;\n  bottom: 0px;\n  right: 10px;\n}\n\n.myContainer .empty {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.listeItemDraggable {\n  width: 100%;\n  height: 50px;\n  /* background: grey; */\n  border: 1px dashed grey;\n  color: #ffffff;\n  margin-bottom: 5px;\n  display: flex;\n}\n\n.listeItemDraggable .left {\n  flex: 1 1 80%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  font-size: 1.5em;\n}\n\n.listeItemDraggable .right {\n  flex: 1 1 20%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n}\n\n.listeItemDraggable .left .name {\n  margin-left: 10px;\n}\n\n.listeItemDraggable .left .color {\n  height: 100%;\n  width: 10px;\n}\n</style>","<!--\nCopyright 2020 SpinalCom - www.spinalcom.com\n\nThis file is part of SpinalCore.\n\nPlease read all of the following terms and conditions\nof the Free Software license Agreement (\"Agreement\")\ncarefully.\n\nThis Agreement is a legally binding contract between\nthe Licensee (as defined below) and SpinalCom that\nsets forth the terms and conditions that govern your\nuse of the Program. By installing and/or using the\nProgram, you agree to abide by all the terms and\nconditions stated or referenced herein.\n\nIf you do not agree to abide by these terms and\nconditions, do not demonstrate your acceptance and do\nnot install or use the Program.\nYou should have received a copy of the license along\nwith this file. If not, see\n<http://resources.spinalcom.com/licenses.pdf>.\n-->\n\n<template>\n  <v-popover offset=\"16\"\n             :auto-hide=\"false\"\n             :open=\"show\">\n\n    <md-button class=\"tooltip-target md-fab md-mini md-primary\">\n      <md-icon>add</md-icon>\n    </md-button>\n\n    <template slot=\"popover\">\n      <div class=\"popoverContainer\">\n        <div class=\"_popoverContent\">\n          <md-field>\n            <label>Step name</label>\n            <md-input v-model=\"name\"></md-input>\n          </md-field>\n\n          <div>\n            <slider-picker class=\"colorPicker\"\n                           v-model=\"color\" />\n          </div>\n\n        </div>\n\n        <div class=\"_popoverBtn\">\n          <!-- <a class=\"btn\"\n             v-close-popover>Close</a>\n          <a class=\"btn\"\n             :disabled=\"disabled()\"\n             @click=\"addStep\"\n             v-close-popover>ADD</a> -->\n\n          <md-button class=\"btn md-dense md-primary\"\n                     v-close-popover>Close</md-button>\n\n          <md-button class=\"btn md-dense md-primary\"\n                     :disabled=\"disabled()\"\n                     @click=\"addStep\"\n                     v-close-popover>ADD</md-button>\n\n        </div>\n      </div>\n\n    </template>\n  </v-popover>\n</template>\n\n<script>\nimport { Slider } from \"vue-color\";\n\nexport default {\n  name: \"addItemsPopover\",\n  components: {\n    \"slider-picker\": Slider,\n  },\n  data() {\n    return {\n      name: \"\",\n      color: \"#000000\",\n      show: false,\n    };\n  },\n  methods: {\n    OpenAttribute() {\n      this.show = !this.show;\n    },\n    addStep() {\n      const color =\n        typeof this.color === \"string\" ? this.color : this.color.hex;\n\n      this.$emit(\"addStep\", { name: this.name, color });\n      this.name = \"\";\n      this.color = \"#000000\";\n    },\n    disabled() {\n      return this.name.trim().length === 0 || !this.color;\n    },\n  },\n};\n</script>\n\n<style scoped>\n.popoverContainer {\n  width: 200px;\n  height: 200px;\n}\n\n.popoverContainer ._popoverContent {\n  height: 150px;\n}\n\n.popoverContainer ._popoverContent .colorPicker {\n  width: 100%;\n  height: 100px;\n}\n\n.popoverContainer ._popoverBtn {\n  width: 100%;\n  height: 40px;\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n}\n\n.popoverContainer ._popoverBtn .btn {\n  font-size: 15px;\n  margin-right: 10px;\n  cursor: pointer;\n}\n</style>","<!--\nCopyright 2020 SpinalCom - www.spinalcom.com\n\nThis file is part of SpinalCore.\n\nPlease read all of the following terms and conditions\nof the Free Software license Agreement (\"Agreement\")\ncarefully.\n\nThis Agreement is a legally binding contract between\nthe Licensee (as defined below) and SpinalCom that\nsets forth the terms and conditions that govern your\nuse of the Program. By installing and/or using the\nProgram, you agree to abide by all the terms and\nconditions stated or referenced herein.\n\nIf you do not agree to abide by these terms and\nconditions, do not demonstrate your acceptance and do\nnot install or use the Program.\nYou should have received a copy of the license along\nwith this file. If not, see\n<http://resources.spinalcom.com/licenses.pdf>.\n-->\n\n<template>\n  <md-dialog :md-active.sync=\"showDialog\"\n             @md-closed=\"closeDialog(false)\">\n    <form class=\"dialogForm\"\n          @submit.prevent=\"closeDialog(true)\">\n      <md-dialog-title>Create Process Context</md-dialog-title>\n      <md-dialog-content>\n        <md-field>\n          <label>Process name</label>\n          <md-input ref=\"nameTextField\"\n                    v-model=\"process.name\"></md-input>\n        </md-field>\n\n      </md-dialog-content>\n\n      <md-dialog-actions>\n        <md-button class=\"md-primary\"\n                   @click=\"closeDialog(false)\">Close</md-button>\n        <md-button class=\"md-primary\"\n                   type=\"submit\"\n                   :disabled=\"!(process.name.trim().length > 0)\">Save\n        </md-button>\n      </md-dialog-actions>\n\n    </form>\n\n  </md-dialog>\n</template>\n\n<script>\nimport { serviceTicketPersonalized } from \"spinal-service-ticket\";\nimport EventBus from \"../../extensions/Event\";\n\nexport default {\n  name: \"createProcessDialog\",\n  props: [\"onFinised\"],\n  data() {\n    return {\n      showDialog: true,\n      contextId: undefined,\n      process: {\n        name: \"\",\n      },\n    };\n  },\n  methods: {\n    opened(option) {\n      this.autoFocusNameInput();\n      this.contextId = option.contextId;\n    },\n\n    async removed(res) {\n      if (res.closeResult && res.process.name.length > 0 && this.contextId) {\n        const process = await serviceTicketPersonalized.createProcess(\n          res.process,\n          this.contextId\n        );\n        EventBus.$emit(\"ticketProcessCreated\", process);\n      }\n\n      this.showDialog = false;\n    },\n    closeDialog(closeResult) {\n      if (typeof this.onFinised === \"function\") {\n        this.onFinised({ closeResult, process: this.process });\n      }\n    },\n\n    autoFocusNameInput() {\n      setTimeout(() => {\n        this.$refs[\"nameTextField\"].$el.focus();\n      }, 200);\n    },\n  },\n};\n</script>\n\n<style scoped>\n.dialogForm {\n  display: flex;\n  flex-direction: column;\n}\n</style>","<!--\nCopyright 2020 SpinalCom - www.spinalcom.com\n\nThis file is part of SpinalCore.\n\nPlease read all of the following terms and conditions\nof the Free Software license Agreement (\"Agreement\")\ncarefully.\n\nThis Agreement is a legally binding contract between\nthe Licensee (as defined below) and SpinalCom that\nsets forth the terms and conditions that govern your\nuse of the Program. By installing and/or using the\nProgram, you agree to abide by all the terms and\nconditions stated or referenced herein.\n\nIf you do not agree to abide by these terms and\nconditions, do not demonstrate your acceptance and do\nnot install or use the Program.\nYou should have received a copy of the license along\nwith this file. If not, see\n<http://resources.spinalcom.com/licenses.pdf>.\n-->\n\n<!--\nCopyright 2020 SpinalCom - www.spinalcom.com\n\nThis file is part of SpinalCore.\n\nPlease read all of the following terms and conditions\nof the Free Software license Agreement (\"Agreement\")\ncarefully.\n\nThis Agreement is a legally binding contract between\nthe Licensee (as defined below) and SpinalCom that\nsets forth the terms and conditions that govern your\nuse of the Program. By installing and/or using the\nProgram, you agree to abide by all the terms and\nconditions stated or referenced herein.\n\nIf you do not agree to abide by these terms and\nconditions, do not demonstrate your acceptance and do\nnot install or use the Program.\nYou should have received a copy of the license along\nwith this file. If not, see\n<http://resources.spinalcom.com/licenses.pdf>.\n-->\n\n<template>\n  <md-dialog :md-active.sync=\"showDialog\"\n             class=\"stepDialogContainer\"\n             @md-closed=\"closeDialog(false)\">\n    <form class=\"dialogForm\"\n          @submit.prevent=\"closeDialog(true)\">\n      <md-dialog-title>Create Ticket Step</md-dialog-title>\n      <md-dialog-content>\n        <md-field>\n          <label>Step name</label>\n          <md-input ref=\"nameTextField\"\n                    v-model=\"step.name\"></md-input>\n        </md-field>\n\n        <!-- <md-field>\n          <label>Step Order</label>\n          <md-input v-model=\"step.order\"\n                    type=\"number\"></md-input>\n          <span class=\"md-helper-text md-primary\">The first step index is\n            0</span>\n        </md-field> -->\n\n        <div class=\"order_div md-layout md-gutter\">\n          <span class=\"md-layout-item md-size-20 md-caption insert_div\">Insert\n            it</span>\n\n          <div class=\"md-layout-item md-size-30\">\n            <md-field>\n              <md-select v-model=\"place\"\n                         name=\"Place\"\n                         id=\"Place\"\n                         placeholder=\"Place\">\n                <!-- <md-option disabled\n                           :value=\"-1\">Place</md-option> -->\n                <md-option :value=\"PLACEMENT.before\">Before</md-option>\n                <md-option :value=\"PLACEMENT.after\">After</md-option>\n              </md-select>\n            </md-field>\n          </div>\n\n          <div class=\"md-layout-item md-size-50\">\n            <md-field>\n              <md-select v-model=\"orderSelected\"\n                         name=\"step\"\n                         id=\"step\"\n                         placeholder=\"Steps\">\n                <!-- <md-option disabled\n                           :value=\"-1\">Steps</md-option> -->\n                <md-option v-for=\"s in steps\"\n                           :key=\"s.order\"\n                           :value=\"s.order\">{{s.name}}</md-option>\n\n              </md-select>\n            </md-field>\n          </div>\n\n        </div>\n\n        <chrome-picker class=\"stepChromePicker\"\n                       v-model=\"step.color\" />\n\n      </md-dialog-content>\n\n      <md-dialog-actions>\n        <md-button class=\"md-primary\"\n                   @click=\"closeDialog(false)\">Close</md-button>\n        <md-button class=\"md-primary\"\n                   type=\"submit\"\n                   :disabled=\"disabled()\">Save\n        </md-button>\n      </md-dialog-actions>\n\n    </form>\n\n  </md-dialog>\n</template>\n\n<script>\nimport { serviceTicketPersonalized } from \"spinal-service-ticket\";\nimport { Chrome } from \"vue-color\";\n\nexport default {\n  name: \"createStepDialog\",\n  props: [\"onFinised\"],\n  components: {\n    \"chrome-picker\": Chrome,\n  },\n  data() {\n    this.PLACEMENT = {\n      before: 0,\n      after: 1,\n    };\n    return {\n      showDialog: true,\n      processId: undefined,\n      contextId: undefined,\n      place: undefined,\n      orderSelected: undefined,\n      steps: [],\n      step: {\n        name: \"\",\n        color: \"#000000\",\n        order: 0,\n      },\n    };\n  },\n  methods: {\n    async opened(option) {\n      this.autoFocusNameInput();\n      this.processId = option.processId;\n      this.contextId = option.contextId;\n      this.steps = await this.getSteps(this.processId, this.contextId);\n    },\n\n    async removed(res) {\n      if (\n        res.closeResult &&\n        res.step.name.length > 0 &&\n        this.processId &&\n        this.contextId\n      ) {\n        serviceTicketPersonalized.insertStep(\n          this.contextId,\n          this.processId,\n          res.step\n        );\n\n        // serviceTicketPersonalized.addStep(\n        //   res.step.name,\n        //   res.step.color,\n        //   res.step.order,\n        //   this.processId,\n        //   this.contextId\n        // );\n      }\n\n      this.showDialog = false;\n    },\n\n    closeDialog(closeResult) {\n      if (typeof this.onFinised === \"function\") {\n        this.step.color =\n          typeof this.step.color === \"string\"\n            ? this.step.color\n            : this.step.color.hex;\n\n        this.step.order = this.orderSelected + this.place;\n\n        this.onFinised({ closeResult, step: this.step });\n      }\n    },\n\n    autoFocusNameInput() {\n      setTimeout(() => {\n        this.$refs[\"nameTextField\"].$el.focus();\n      }, 200);\n    },\n\n    disabled() {\n      return !(\n        this.step.name.trim().length > 0 &&\n        typeof this.place !== \"undefined\" &&\n        typeof this.orderSelected !== \"undefined\"\n      );\n    },\n\n    getSteps(processId, contextId) {\n      return serviceTicketPersonalized\n        .getStepsFromProcess(processId, contextId)\n        .then((result) => {\n          return result.map((el) => el.get()).filter((el) => el.order !== -1);\n        });\n    },\n  },\n};\n</script>\n\n<style scoped>\n.stepDialogContainer {\n  width: 450px;\n}\n\n.stepChromePicker {\n  width: 100%;\n}\n\n.dialogForm {\n  display: flex;\n  flex-direction: column;\n}\n\n.dialogForm .insert_div {\n  display: flex;\n  align-items: center;\n}\n</style>","<!--\nCopyright 2020 SpinalCom - www.spinalcom.com\n\nThis file is part of SpinalCore.\n\nPlease read all of the following terms and conditions\nof the Free Software license Agreement (\"Agreement\")\ncarefully.\n\nThis Agreement is a legally binding contract between\nthe Licensee (as defined below) and SpinalCom that\nsets forth the terms and conditions that govern your\nuse of the Program. By installing and/or using the\nProgram, you agree to abide by all the terms and\nconditions stated or referenced herein.\n\nIf you do not agree to abide by these terms and\nconditions, do not demonstrate your acceptance and do\nnot install or use the Program.\nYou should have received a copy of the license along\nwith this file. If not, see\n<http://resources.spinalcom.com/licenses.pdf>.\n-->\n\n<template>\n  <md-dialog class=\"mdDialogContainer\"\n             :md-active.sync=\"showDialog\"\n             @md-closed=\"closeDialog(false)\">\n    <md-dialog-title class=\"mdDialogTitle\">Create Ticket\n    </md-dialog-title>\n\n    <md-dialog-content class=\"mdDialogContent\">\n      <div class=\"normalContent\"\n           v-if=\"pageSelected === PAGES.normal\">\n        <div class=\"content details\">\n\n          <div>\n            <hr class=\"hr-text\"\n                data-content=\"Details\">\n          </div>\n\n          <div class=\"left\">\n\n            <div class=\"detail\"\n                 v-if=\"commonTicketInfo\">\n              <div class=\"label\">Title</div>\n              <div class=\"value\"\n                   v-tooltip=\"commonTicketInfo.name\">{{commonTicketInfo.name}}\n              </div>\n            </div>\n\n            <div class=\"detail\"\n                 v-else-if=\"!commonTicketInfo\">\n              <md-field>\n                <label>Ticket name</label>\n                <md-input v-model=\"ticket.name\"></md-input>\n              </md-field>\n            </div>\n\n            <div class=\"detail\"\n                 v-if=\"nodeInfo\">\n              <div class=\"label\">Element</div>\n              <div class=\"value\"\n                   v-tooltip=\"nodeInfo.name\">{{nodeInfo.name}}</div>\n            </div>\n\n          </div>\n\n        </div>\n\n        <div class=\"content priority\">\n\n          <div>\n            <hr class=\"hr-text\"\n                data-content=\"Priority\">\n          </div>\n\n          <div class=\"priorityRadio\">\n            <md-radio v-model=\"ticket.priority\"\n                      :value=\"PRIORITY_DATA.occasionally\"\n                      class=\"md-primary\">Occasionally</md-radio>\n\n            <md-radio v-model=\"ticket.priority\"\n                      :value=\"PRIORITY_DATA.normal\"\n                      class=\"md-primary\">Normal</md-radio>\n\n            <md-radio v-model=\"ticket.priority\"\n                      :value=\"PRIORITY_DATA.urgent\"\n                      class=\"md-primary\">Urgent</md-radio>\n          </div>\n\n        </div>\n\n        <div class=\"content notes\">\n          <hr class=\"hr-text\"\n              data-content=\"Notes\">\n\n          <div class=\"pj\">\n\n            <md-button class=\"md-dense md-primary\"\n                       @click=\"addPJ\">\n              <md-icon>attach_file</md-icon>\n              ADD\n            </md-button>\n\n            <md-content class=\"pjDiv md-scrollbar\"\n                        v-if=\"ticket.pj.length > 0\">\n\n              <attachment-component v-for=\"(file,index) in ticket.pj\"\n                                    :key=\"index\"\n                                    :file=\"file\"\n                                    @remove=\"removePJ\">{{file.name}}\n              </attachment-component>\n            </md-content>\n\n            <md-content class=\"pjDiv empty\"\n                        v-else>\n              No Attachment added\n            </md-content>\n\n          </div>\n\n          <md-field>\n            <label>Message</label>\n            <md-textarea v-model=\"ticket.description\"></md-textarea>\n          </md-field>\n\n        </div>\n      </div>\n\n      <div class=\"responseContent\"\n           v-else>\n        <md-progress-spinner md-mode=\"indeterminate\"\n                             v-if=\"pageSelected === PAGES.loading\">\n        </md-progress-spinner>\n\n        <md-icon v-else\n                 class=\"md-size-5x\">{{icon}}</md-icon>\n      </div>\n\n    </md-dialog-content>\n\n    <md-dialog-actions>\n      <md-button class=\"md-primary\"\n                 @click=\"closeDialog(false)\">Close</md-button>\n      <md-button class=\"md-primary\"\n                 @click=\"createTicket\"\n                 :disabled=\"!(ticket.name.trim().length > 0)\">Save</md-button>\n    </md-dialog-actions>\n\n  </md-dialog>\n</template>\n\n<script>\nimport { serviceTicketPersonalized } from \"spinal-service-ticket\";\nimport { TICKET_PRIORITIES } from \"spinal-service-ticket/dist/Constants\";\nimport AttachmentComponent from \"./components/attachment.vue\";\nimport { SpinalGraphService } from \"spinal-env-viewer-graph-service\";\nimport { spinalIO } from \"../../extensions/spinalIO\";\nimport { TICKET_EVENTS } from \"../../extensions/ticketsEvents\";\nimport EventBus from \"../../extensions/Event\";\n\nexport default {\n  name: \"createTicketDialog\",\n  props: [\"onFinised\"],\n  components: {\n    \"attachment-component\": AttachmentComponent,\n  },\n  data() {\n    this.PRIORITY_DATA = TICKET_PRIORITIES;\n    this.PAGES = {\n      normal: 0,\n      loading: 1,\n      success: 2,\n      error: 3,\n    };\n\n    return {\n      pageSelected: this.PAGES.normal,\n      showDialog: true,\n      contextId: undefined,\n      processId: undefined,\n      commonTicket: undefined,\n      nodeInfo: undefined,\n      commonTicketInfo: undefined,\n      ticket: {\n        name: \"\",\n        // elementSelected: null,\n        description: \"\",\n        pj: [],\n        priority: this.PRIORITY_DATA.occasionally,\n        user: {},\n      },\n      messages: {\n        note: \"\",\n        pj: [],\n      },\n    };\n  },\n  methods: {\n    async opened(option) {\n      // this.autoFocusNameInput();\n      this.contextId = option.contextId;\n      this.processId = option.processId;\n      this.nodeInfo = option.selectedNode.info.get();\n\n      if (option.incidentId) {\n        this.commonTicketInfo = SpinalGraphService.getInfo(\n          option.incidentId\n        ).get();\n      }\n      // this.ticket.elementSelected = new Ptr(option.selectedNode);\n      const user = await spinalIO.getUserConnected();\n      // console.log(\"user\", user);\n      this.ticket.user.username = user.name;\n      this.ticket.userId = user.id;\n    },\n\n    closeDialog(closeResult) {\n      if (typeof this.onFinised === \"function\") {\n        this.onFinised({ closeResult, inputValue: this.inputValue });\n      }\n    },\n\n    async removed(res) {\n      if (res.closeResult) {\n        // this.ticket.urls = this.ticket.urls.split(\"\\n\");\n        // this.ticket.images = new Ptr(this.ticket.images);\n      }\n\n      this.showDialog = false;\n    },\n\n    createTicket() {\n      // console.log(this.ticket);\n      this.pageSelected = this.PAGES.loading;\n      serviceTicketPersonalized\n        .addTicket(\n          this.ticket,\n          this.processId,\n          this.contextId,\n          this.nodeInfo.id\n        )\n        .then((ticketId) => {\n          const node = SpinalGraphService.getRealNode(ticketId);\n          if (node) {\n            EventBus.$emit(TICKET_EVENTS.created, node.info.get());\n            this.pageSelected = this.PAGES.success;\n            //  this.addNote(node);\n          }\n        })\n        .catch(() => (this.pageSelected = this.PAGES.error));\n    },\n\n    autoFocusNameInput() {\n      setTimeout(() => {\n        this.$refs[\"nameTextField\"].$el.focus();\n      }, 200);\n    },\n\n    addPJ() {\n      const maxSize = 25000000;\n      const input = document.createElement(\"input\");\n      input.type = \"file\";\n      input.multiple = true;\n      input.click();\n      input.addEventListener(\n        \"change\",\n        (event) => {\n          const files = event.target.files;\n          let filelist = [];\n          for (const file of files) {\n            filelist.push(file);\n          }\n          filelist.push(...this.ticket.pj);\n          const sizes = filelist.map((el) => el.size);\n          const filesSize = sizes.reduce((a, b) => a + b);\n          if (filesSize > maxSize) {\n            alert(\n              \"The selected file(s) is too large. The maximum size must not exceed 25 MB\"\n            );\n            return;\n          }\n          this.ticket.pj = filelist;\n        },\n        false\n      );\n    },\n\n    removePJ(file) {\n      this.ticket.pj = this.ticket.pj.filter((el) => el.name !== file.name);\n    },\n  },\n  computed: {\n    icon() {\n      switch (this.pageSelected) {\n        case this.PAGES.success:\n          return \"check\";\n        case this.PAGES.error:\n          return \"error_outline\";\n      }\n    },\n  },\n  watch: {\n    commonTicketInfo() {\n      if (this.commonTicketInfo && this.commonTicketInfo.name)\n        this.ticket.name = this.commonTicketInfo.name;\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n.mdDialogContainer {\n  width: 450px;\n  height: 600px;\n  // display: flex;\n}\n\n.mdDialogContainer .mdDialogTitle {\n  text-align: center;\n  // margin: 0px !important;\n}\n\n.mdDialogContainer .mdDialogContent {\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  padding: 0 24px 0 24px !important;\n}\n\n.mdDialogContainer .mdDialogContent .normalContent,\n.mdDialogContainer .mdDialogContent .responseContent {\n  width: 100%;\n  height: 100%;\n}\n\n.mdDialogContainer .mdDialogContent .responseContent {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.mdDialogContainer .mdDialogContent .normalContent .content.details {\n  width: 100%;\n  height: 25%;\n  display: flex;\n  flex-direction: column;\n  // justify-content: space-between;\n}\n\n.mdDialogContainer .mdDialogContent .normalContent .content.details .left,\n.mdDialogContainer .mdDialogContent .normalContent .content.details .right {\n  width: 100%;\n  height: 100%;\n  align-items: center;\n}\n\n.mdDialogContainer .mdDialogContent .normalContent .content.details .detail {\n  width: 100%;\n  height: 50px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.mdDialogContainer\n  .mdDialogContent\n  .normalContent\n  .content.details\n  .detail\n  .label {\n  width: 30%;\n  // color: #818078;\n}\n\n.mdDialogContainer\n  .mdDialogContent\n  .normalContent\n  .content.details\n  .detail\n  .value {\n  width: 69%;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  color: #818078;\n}\n\n.mdDialogContainer .mdDialogContent .normalContent .content.priority {\n  width: 100%;\n  height: 20%;\n  display: flex;\n  flex-direction: column;\n  // justify-content: center;\n}\n\n.mdDialogContainer\n  .mdDialogContent\n  .normalContent\n  .content.priority\n  .priorityRadio {\n  height: calc(100%);\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.mdDialogContainer .mdDialogContent .normalContent .content.notes {\n  width: 100%;\n  height: 55%;\n}\n\n.mdDialogContainer .mdDialogContent .normalContent .content.notes .pj {\n  width: 100%;\n  height: 30%;\n  margin-top: 10px;\n  display: flex;\n  justify-content: space-between;\n}\n\n.mdDialogContainer .mdDialogContent .normalContent .content.notes .pj .pjDiv {\n  width: 60%;\n  border: 1px dashed gray;\n  background: transparent;\n  overflow: auto;\n}\n\n.mdDialogContainer\n  .mdDialogContent\n  .normalContent\n  .content.notes\n  .pj\n  .pjDiv.empty {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.hr-text {\n  line-height: 1em;\n  position: relative;\n  outline: 0;\n  border: 0;\n  color: white;\n  text-align: center;\n  height: 1.5em;\n  &:before {\n    content: \"\";\n    background: #818078;\n    position: absolute;\n    left: 0;\n    top: 50%;\n    width: 100%;\n    height: 1px;\n  }\n  &:after {\n    content: attr(data-content);\n    position: relative;\n    display: inline-block;\n    color: white;\n\n    padding: 0 0.5em;\n    line-height: 1.5em;\n    color: #818078;\n    text-transform: uppercase;\n    font-size: 1em;\n    background: #424242;\n  }\n}\n</style>\n","<!--\nCopyright 2020 SpinalCom - www.spinalcom.com\n\nThis file is part of SpinalCore.\n\nPlease read all of the following terms and conditions\nof the Free Software license Agreement (\"Agreement\")\ncarefully.\n\nThis Agreement is a legally binding contract between\nthe Licensee (as defined below) and SpinalCom that\nsets forth the terms and conditions that govern your\nuse of the Program. By installing and/or using the\nProgram, you agree to abide by all the terms and\nconditions stated or referenced herein.\n\nIf you do not agree to abide by these terms and\nconditions, do not demonstrate your acceptance and do\nnot install or use the Program.\nYou should have received a copy of the license along\nwith this file. If not, see\n<http://resources.spinalcom.com/licenses.pdf>.\n-->\n\n<template>\n   <div class=\"content\">\n      <div\n         class=\"md-caption name\"\n         v-tooltip=\"file.name\"\n      >{{file.name}}</div>\n\n      <div\n         class=\"md-caption delete\"\n         @click=\"remove\"\n      >X</div>\n   </div>\n</template>\n\n<script>\nexport default {\n   name: \"attachment\",\n   props: [\"file\"],\n   data() {\n      return {};\n   },\n   methods: {\n      remove() {\n         this.$emit(\"remove\", this.file);\n      },\n   },\n};\n</script>\n\n<style scoped>\n.content {\n   width: 95%;\n   margin: auto;\n   display: flex;\n   font-weight: bold;\n   justify-content: space-between;\n   align-items: center;\n}\n\n.content .name {\n   width: calc(100% - 30px);\n   display: block;\n   white-space: nowrap;\n   overflow: hidden;\n   text-overflow: ellipsis;\n}\n\n.content .delete {\n   width: 30px;\n   text-align: center;\n   color: #ff0000;\n}\n\n.content .delete:hover {\n   cursor: pointer;\n}\n</style>","<!--\nCopyright 2020 SpinalCom - www.spinalcom.com\n\nThis file is part of SpinalCore.\n\nPlease read all of the following terms and conditions\nof the Free Software license Agreement (\"Agreement\")\ncarefully.\n\nThis Agreement is a legally binding contract between\nthe Licensee (as defined below) and SpinalCom that\nsets forth the terms and conditions that govern your\nuse of the Program. By installing and/or using the\nProgram, you agree to abide by all the terms and\nconditions stated or referenced herein.\n\nIf you do not agree to abide by these terms and\nconditions, do not demonstrate your acceptance and do\nnot install or use the Program.\nYou should have received a copy of the license along\nwith this file. If not, see\n<http://resources.spinalcom.com/licenses.pdf>.\n-->\n\n<template>\n   <md-dialog\n      class=\"ticketMdDialogContainer\"\n      :md-active.sync=\"showDialog\"\n      @md-closed=\"closeDialog(false)\"\n   >\n      <md-dialog-title class=\"dialogTitle\">Select Ticket Process</md-dialog-title>\n      <md-dialog-content class=\"selectProcessClass\">\n\n         <!-- <div class=\"cont\"\n           v-if=\"loading === PAGE_STATES.success\"> -->\n         <!-- <md-tabs class=\"md-transparent\"\n                 md-alignment=\"fixed\"\n                 @md-changed=\"changeActiveTab\">\n\n          <md-tab :id=\"tabs.linked\"\n                  md-label=\"Linked Tickets\">\n            <div class=\"my_content\">\n              <tickets-vue class=\"tickets_class\"\n                           :data=\"tickets\"\n                           @reload=\"reloadData\"></tickets-vue>\n            </div>\n\n          </md-tab> -->\n\n         <!-- <md-tab :id=\"tabs.create\"\n                  md-label=\"Create new Ticket\"> -->\n         <div\n            class=\"my_content\"\n            v-if=\"loading === PAGE_STATES.success\"\n         >\n            <select-process\n               :data=\"data\"\n               :contextId=\"contextId\"\n               :processes=\"processes\"\n               :processId=\"processId\"\n               :incidents=\"incidents\"\n               :incidentId=\"incidentId\"\n               @selectContext=\"selectContext\"\n               @selectProcess=\"selectProcess\"\n               @selectIncident=\"selectIncident\"\n               @createCommonIncident=\"createCommonIncident\"\n               @createContext=\"createContext\"\n               @createProcess=\"createProcess\"\n            >\n            </select-process>\n         </div>\n\n         <!-- </md-tab>\n\n        </md-tabs> -->\n         <!-- </div> -->\n         <div\n            class=\"cont loading\"\n            v-else-if=\"loading === PAGE_STATES.loading\"\n         >\n            loading...\n         </div>\n\n      </md-dialog-content>\n\n      <md-dialog-actions>\n         <md-button\n            class=\"md-primary\"\n            @click=\"closeDialog(false)\"\n         >Close</md-button>\n\n         <md-button\n            class=\"md-primary\"\n            :disabled=\"!(contextId && processId)\"\n            @click=\"closeDialog(true)\"\n         >Save</md-button>\n      </md-dialog-actions>\n\n   </md-dialog>\n</template>\n\n<script>\nimport { serviceTicketPersonalized } from \"spinal-service-ticket\";\nimport { spinalPanelManagerService } from \"spinal-env-viewer-panel-manager-service\";\nimport { SpinalGraphService } from \"spinal-env-viewer-graph-service\";\n// import linkerTemplateVue from \"./components/linkerTemplate.vue\";\n\nimport selectProcessVue from \"./components/selectProcess.vue\";\n\nimport EventBus from \"../../extensions/Event\";\n\nimport ticketsVue from \"../panels/components/tickets.vue\";\n\nexport default {\n   name: \"selectProcessDialog\",\n   props: [\"onFinised\"],\n   components: {\n      // \"link-template\": linkerTemplateVue,\n      \"select-process\": selectProcessVue,\n      // \"tickets-vue\": ticketsVue,\n   },\n   data() {\n      this.PAGE_STATES = {\n         success: 0,\n         loading: 1,\n      };\n      this.tabs = {\n         create: \"createNewTicketTab\",\n         linked: \"linkedTicketTab\",\n      };\n      return {\n         showDialog: true,\n         contextId: undefined,\n         processId: undefined,\n         incidentId: undefined,\n         selectedNode: undefined,\n         data: [],\n         processes: [],\n         incidents: [],\n         // tickets: [],\n         selectedTab: this.tabs.linked,\n         loading: this.PAGE_STATES.loading,\n      };\n   },\n   mounted() {\n      EventBus.$on(\"commonIncidentCreated\", async (id) => {\n         this.data = await this.getAllData();\n         this.updateIncidents();\n         this.incidentId = id;\n      });\n\n      EventBus.$on(\"ticketContextCreated\", async (context) => {\n         this.data = await this.getAllData();\n         this.contextId = context;\n      });\n\n      EventBus.$on(\"ticketProcessCreated\", async (process) => {\n         this.data = await this.getAllData();\n         this.updateProcesses();\n         this.processId = process;\n      });\n   },\n   methods: {\n      async opened(option) {\n         this.loading = this.PAGE_STATES.loading;\n         this.selectedNode = option.selectedNode;\n         const nodeId = option.selectedNode.getId().get();\n\n         this.data = await this.getAllData();\n         // this.tickets = await this.getNodeTickets(nodeId);\n\n         this.loading = this.PAGE_STATES.success;\n      },\n\n      async removed(res) {\n         if (res.closeResult && this.contextId && this.processId) {\n            spinalPanelManagerService.openPanel(\"createTicketDialog\", {\n               contextId: this.contextId,\n               processId: this.processId,\n               incidentId: this.incidentId,\n               selectedNode: this.selectedNode,\n            });\n         }\n\n         this.showDialog = false;\n      },\n\n      closeDialog(closeResult) {\n         if (typeof this.onFinised === \"function\") {\n            this.onFinised({ closeResult, process: this.process });\n         }\n      },\n\n      selectContext(id) {\n         this.contextId = id;\n      },\n\n      selectProcess(id) {\n         this.processId = id;\n      },\n\n      selectIncident(id) {\n         this.incidentId = id;\n      },\n\n      getAllData() {\n         const contexts = serviceTicketPersonalized.getContexts();\n         let promises = contexts.map(async (context) => {\n            const processes = await serviceTicketPersonalized.getAllProcess(\n               context.id\n            );\n            const promises = processes.map(async (argProcess) => {\n               const process = argProcess.get();\n               process[\n                  \"commonIncident\"\n               ] = await serviceTicketPersonalized.getCommonIncident(\n                  process.id\n               );\n               return process;\n            });\n\n            context[\"processes\"] = await Promise.all(promises);\n            return context;\n         });\n         return Promise.all(promises);\n      },\n\n      // getIcidents() {\n      //   this.incidentId = undefined;\n\n      //   if (this.contextId && this.processId) {\n      //     let context = this.data.find((el) => el.id === this.contextId);\n      //     if (context) {\n      //       let process = context.processes.find((el) => el.id == this.processId);\n      //       if (category) return process.commonIncident;\n      //     }\n      //   }\n      //   return [];\n      // },\n\n      updateProcesses() {\n         // this.categorySelected = undefined;\n         this.processes = [];\n         if (this.contextId) {\n            let val = this.data.find((el) => el.id === this.contextId);\n            if (val) this.processes = val.processes;\n         }\n      },\n\n      updateIncidents() {\n         this.incidents = [];\n         if (this.contextId && this.processId) {\n            let context = this.data.find((el) => el.id === this.contextId);\n            if (context) {\n               let process = context.processes.find(\n                  (el) => el.id == this.processId\n               );\n               if (process) this.incidents = process.commonIncident;\n            }\n         }\n      },\n\n      createCommonIncident() {\n         let params = this.processes.find((el) => el.id == this.processId);\n         // params[\"callback\"] = (id) => (this.incidentId = id);\n\n         spinalPanelManagerService.openPanel(\n            \"createCommonIncidentDialog\",\n            params\n         );\n      },\n\n      createContext() {\n         spinalPanelManagerService.openPanel(\"createTicketContextDialog\");\n      },\n\n      createProcess() {\n         const params = { contextId: this.contextId };\n         spinalPanelManagerService.openPanel(\"createProcessDialog\", params);\n      },\n\n      // getNodeTickets(nodeId) {\n      //   return serviceTicketPersonalized\n      //     .getTicketsFromNode(nodeId)\n      //     .then((tickets) => {\n      //       const promises = tickets.map(async (ticket) => {\n      //         ticket[\"step\"] = await this.getStep(ticket.stepId);\n      //         return ticket;\n      //       });\n\n      //       return Promise.all(promises);\n      //     });\n      // },\n\n      // getStep(id) {\n      //   const info = SpinalGraphService.getInfo(id);\n      //   if (info) return Promise.resolve(info.get());\n\n      //   return SpinalGraphService.getNodeAsync(id).then((result) => {\n      //     return result.get();\n      //   });\n      // },\n\n      async reloadData() {\n         const id = this.selectedNode.getId().get();\n         this.tickets = await this.getNodeTickets(id);\n      },\n\n      changeActiveTab(tabId) {\n         this.selectedTab = tabId;\n      },\n   },\n   watch: {\n      contextId() {\n         this.processId = undefined;\n         this.incidentId = undefined;\n\n         this.updateProcesses();\n         // this.updateProcesses();\n      },\n      processId() {\n         this.incidentId = undefined;\n         this.updateIncidents();\n      },\n   },\n};\n</script>\n\n<style scoped>\n.ticketMdDialogContainer {\n   width: 900px;\n   height: 500px;\n}\n\n.ticketMdDialogContainer .dialogTitle {\n   text-align: center;\n}\n\n.ticketMdDialogContainer .selectProcessClass {\n   padding: 0 20px 10px 20px;\n}\n\n.ticketMdDialogContainer .selectProcessClass .my_content {\n   width: 100%;\n   height: 100%;\n}\n\n/* .ticketMdDialogContainer .selectProcessClass .cont {\n  width: 100%;\n  height: 100%;\n} */\n</style>\n\n\n<style>\n.ticketMdDialogContainer .md-dialog-container {\n   max-width: 100%;\n   max-height: 100%;\n}\n/*\n.ticketMdDialogContainer\n  .selectProcessClass\n  .md-tabs.md-transparent.md-alignment-fixed.md-theme-default {\n  width: 100%;\n  height: 100%;\n}\n\n.ticketMdDialogContainer\n  .selectProcessClass\n  .md-tabs.md-transparent.md-alignment-fixed.md-theme-default\n  .md-tabs-navigation.md-elevation-0 {\n  height: 50px;\n}\n\n.ticketMdDialogContainer\n  .selectProcessClass\n  .md-tabs.md-transparent.md-alignment-fixed.md-theme-default\n  .md-content.md-tabs-content.md-theme-default {\n  height: calc(100% - 50px) !important;\n}\n\n.ticketMdDialogContainer\n  .selectProcessClass\n  .md-tabs.md-transparent.md-alignment-fixed.md-theme-default\n  .md-content.md-tabs-content.md-theme-default\n  .md-tabs-container {\n  height: 100%;\n}\n\n.ticketMdDialogContainer\n  .selectProcessClass\n  .md-tabs.md-transparent.md-alignment-fixed.md-theme-default\n  .md-content.md-tabs-content.md-theme-default\n  .md-tabs-container\n  .md-tab {\n  height: 100%;\n}\n\n.ticketMdDialogContainer\n  .selectProcessClass\n  .md-tabs.md-transparent.md-alignment-fixed.md-theme-default\n  .md-content.md-tabs-content.md-theme-default\n  .md-tabs-container\n  .md-tab\n  .my_content {\n  max-width: 100%;\n  height: 100%;\n}*/\n</style>","<!--\nCopyright 2020 SpinalCom - www.spinalcom.com\n\nThis file is part of SpinalCore.\n\nPlease read all of the following terms and conditions\nof the Free Software license Agreement (\"Agreement\")\ncarefully.\n\nThis Agreement is a legally binding contract between\nthe Licensee (as defined below) and SpinalCom that\nsets forth the terms and conditions that govern your\nuse of the Program. By installing and/or using the\nProgram, you agree to abide by all the terms and\nconditions stated or referenced herein.\n\nIf you do not agree to abide by these terms and\nconditions, do not demonstrate your acceptance and do\nnot install or use the Program.\nYou should have received a copy of the license along\nwith this file. If not, see\n<http://resources.spinalcom.com/licenses.pdf>.\n-->\n\n\n<template>\n  <div class=\"select_container\">\n    <!-- <div class=\"dialogTitle\">Select Ticket Process</div> -->\n    <div class=\"content\">\n      <div class=\"section\">\n        <link-template :title=\"'Select Context'\"\n                       :data=\"data\"\n                       :itemSelected=\"contextId\"\n                       @create=\"createContext\"\n                       @select=\"selectContext\"\n                       :showBtn=\"true\"></link-template>\n      </div>\n\n      <div class=\"section\">\n        <link-template :title=\"'Select Process'\"\n                       :data=\"processes\"\n                       :itemSelected=\"processId\"\n                       @create=\"createProcess\"\n                       @select=\"selectProcess\"\n                       :showBtn=\"contextId && contextId.length > 0\">\n        </link-template>\n\n      </div>\n\n      <div class=\"section\">\n        <link-template :title=\"'Select Common Incident'\"\n                       :subTitle=\"'(optional) it will be the ticket name'\"\n                       :data=\"incidents\"\n                       :itemSelected=\"incidentId\"\n                       @select=\"selectIncident\"\n                       @create=\"createCommonIncident\"\n                       :showBtn=\"showCreatBtn()\"></link-template>\n\n      </div>\n    </div>\n\n  </div>\n</template>\n\n<script>\nimport linkerTemplateVue from \"./linkerTemplate.vue\";\n\nexport default {\n  name: \"selectProcess\",\n  props: {\n    data: {},\n    contextId: {},\n    processes: {},\n    processId: {},\n    incidents: {},\n    incidentId: {},\n  },\n  components: {\n    \"link-template\": linkerTemplateVue,\n  },\n  methods: {\n    showCreatBtn() {\n      return (\n        this.contextId &&\n        this.contextId.length > 0 &&\n        this.processId &&\n        this.processId.length > 0\n      );\n    },\n\n    selectContext(id) {\n      this.$emit(\"selectContext\", id);\n    },\n\n    selectProcess(id) {\n      this.$emit(\"selectProcess\", id);\n    },\n\n    selectIncident(id) {\n      this.$emit(\"selectIncident\", id);\n    },\n\n    createCommonIncident() {\n      this.$emit(\"createCommonIncident\");\n    },\n\n    createContext() {\n      this.$emit(\"createContext\");\n    },\n\n    createProcess() {\n      this.$emit(\"createProcess\");\n    },\n  },\n};\n</script>\n\n<style scoped>\n.select_container {\n  width: 100%;\n  height: 100%;\n}\n/* .select_container .dialogTitle {\n  height: 50px;\n  text-align: center;\n} */\n.select_container .content {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  justify-content: space-between;\n  align-items: stretch;\n}\n.select_container .content .section {\n  width: 33%;\n  border: 1px solid grey;\n  border-radius: 4% 4% 0 0;\n  padding: 15px;\n}\n</style>","<!--\nCopyright 2020 SpinalCom - www.spinalcom.com\nThis file is part of SpinalCore.\nPlease read all of the following terms and conditions\nof the Free Software license Agreement (\"Agreement\")\ncarefully.\nThis Agreement is a legally binding contract between\nthe Licensee (as defined below) and SpinalCom that\nsets forth the terms and conditions that govern your\nuse of the Program. By installing and/or using the\nProgram, you agree to abide by all the terms and\nconditions stated or referenced herein.\nIf you do not agree to abide by these terms and\nconditions, do not demonstrate your acceptance and do\nnot install or use the Program.\nYou should have received a copy of the license along\nwith this file. If not, see\n<http://resources.spinalcom.com/licenses.pdf>.\n-->\n\n\n<template>\n   <div class=\"subContent\">\n      <md-list class=\"title\">\n\n         <!--<md-list-item> \n          <div class=\"md-list-item-text\">\n          <span>{{title}}</span>\n          <span class=\"md-caption\"\n                v-if=\"subTitle\">{{subTitle}}</span>\n        </div>\n\n        <div class=\"md-layout-item md-size-10 mdIcon\">\n          <md-button class=\"md-icon-button\"\n                     @click=\"createEvent\"\n                     v-if=\"showBtn\">\n            <md-icon>control_point</md-icon>\n          </md-button>\n        </div> \n        </md-list-item>-->\n         <md-list-item>\n            <span class=\"md-list-item-text\">{{title}}</span>\n            <md-button\n               class=\"md-icon-button\"\n               @click=\"createEvent\"\n               v-if=\"showBtn\"\n            >\n               <md-icon>control_point</md-icon>\n            </md-button>\n         </md-list-item>\n\n      </md-list>\n\n      <md-content class=\"container md-scrollbar\">\n         <md-list>\n            <md-list-item\n               class=\"list-item\"\n               v-for=\"(item,index) in data\"\n               :key=\"index\"\n               @click=\"selectItem(item.id)\"\n               :class=\"{'selected' : item.id === itemSelected}\"\n               v-tooltip=\"item.name\"\n            >\n\n               <span class=\"md-list-item-text\">{{item.name}}</span>\n\n            </md-list-item>\n         </md-list>\n      </md-content>\n\n   </div>\n</template>\n\n<script>\nexport default {\n   name: \"linkToGroupTemplate\",\n   props: [\"data\", \"title\", \"itemSelected\", \"showBtn\", \"subTitle\"],\n   methods: {\n      createEvent() {\n         this.$emit(\"create\");\n      },\n      selectItem(id) {\n         this.$emit(\"select\", id);\n      },\n   },\n};\n</script>\n\n<style scoped>\n.subContent {\n   width: 100%;\n   height: 100%;\n}\n.subContent .title {\n   width: 100%;\n   /* height: 10%; */\n   /* text-align: center; */\n   display: flex;\n   justify-content: space-between;\n   align-items: center;\n   padding: 0 15px 0 15px;\n   border-bottom: 1px dashed grey;\n}\n.subContent .container {\n   width: 100%;\n   height: calc(100% - 50px);\n   padding: 0px !important;\n   /* border: 1px solid red; */\n   overflow: hidden;\n   overflow-y: auto;\n}\n.subContent .container .list-item {\n   border-bottom: 1px solid grey;\n}\n\n.subContent .container .list-item .md-list-item-text {\n   width: 100%;\n   display: block;\n   overflow: hidden;\n   white-space: nowrap;\n   text-overflow: ellipsis;\n}\n\n.subContent .container .list-item.selected {\n   background-color: #448aff;\n}\n</style>","<!--\nCopyright 2020 SpinalCom - www.spinalcom.com\n\nThis file is part of SpinalCore.\n\nPlease read all of the following terms and conditions\nof the Free Software license Agreement (\"Agreement\")\ncarefully.\n\nThis Agreement is a legally binding contract between\nthe Licensee (as defined below) and SpinalCom that\nsets forth the terms and conditions that govern your\nuse of the Program. By installing and/or using the\nProgram, you agree to abide by all the terms and\nconditions stated or referenced herein.\n\nIf you do not agree to abide by these terms and\nconditions, do not demonstrate your acceptance and do\nnot install or use the Program.\nYou should have received a copy of the license along\nwith this file. If not, see\n<http://resources.spinalcom.com/licenses.pdf>.\n-->\n\n<template>\n   <md-content class=\"table_container\">\n      <md-table\n         class=\"mdTable\"\n         v-model=\"searched\"\n         md-sort=\"name\"\n      >\n\n         <md-table-toolbar\n            class=\"myToolbar\"\n            md-elevation=\"0\"\n         >\n            <div class=\"md-toolbar-section-start\">\n               <h1 class=\"md-title\">Tickets</h1>\n            </div>\n\n            <div class=\"filters md-toolbar-section-end\">\n               <!-- <div class=\"_fields\">\n            <md-field>\n              <label for=\"movies\">Steps</label>\n              <md-select v-model=\"selectedMovies\"\n                         name=\"movies\"\n                         id=\"movies\"\n                         multiple>\n                <md-option value=\"fight-club\">Fight Club</md-option>\n                <md-option value=\"godfather\">Godfather</md-option>\n                <md-option value=\"godfather-ii\">Godfather II</md-option>\n                <md-option value=\"godfather-iii\">Godfather III</md-option>\n                <md-option value=\"godfellas\">Godfellas</md-option>\n                <md-option value=\"pulp-fiction\">Pulp Fiction</md-option>\n                <md-option value=\"scarface\">Scarface</md-option>\n              </md-select>\n            </md-field>\n          </div> -->\n\n               <div class=\"_fields\">\n                  <md-field md-clearable>\n                     <md-input\n                        placeholder=\"Search by name...\"\n                        v-model=\"searchByName\"\n                        @input=\"searchOnTable\"\n                     />\n                  </md-field>\n               </div>\n\n            </div>\n\n         </md-table-toolbar>\n\n         <md-table-empty-state\n            md-label=\"No Ticket found\"\n            :md-description=\"`No ticket found for this query.`\"\n         >\n         </md-table-empty-state>\n\n         <!-- @mouseover=\"selectOnMaquette(item)\" -->\n         <md-table-row\n            slot=\"md-table-row\"\n            slot-scope=\"{ item }\"\n            @dblclick=\"isolateOnMaquette(item)\"\n            @mouseleave=\"deselectOnMaquette\"\n         >\n            <md-table-cell\n               class=\"tableName\"\n               md-label=\"Name\"\n               md-sort-by=\"name\"\n            >\n               {{ item.name }}\n\n            </md-table-cell>\n\n            <md-table-cell\n               md-label=\"State\"\n               class=\"ticketName\"\n            >\n               <div\n                  class=\"color\"\n                  :style=\"{'background-color' : item.step.color}\"\n               ></div>\n               <div class=\"name\">{{ item.step.name }}</div>\n\n            </md-table-cell>\n\n            <md-table-cell\n               md-label=\"Creation Date\"\n               md-sort-by=\"creationDate\"\n            >\n               {{ item.creationDate | formatCreationDate }}\n            </md-table-cell>\n\n            <md-table-cell\n               md-label=\"Priority\"\n               md-sort-by=\"priority\"\n            >\n               {{ item.priority | displayPriority }}</md-table-cell>\n\n            <md-table-cell md-label=\"Username\">\n               {{item.user | userName}}\n            </md-table-cell>\n\n            <md-table-cell md-label=\"\">\n               <md-menu\n                  md-size=\"small\"\n                  class=\"ticket_menu\"\n               >\n                  <md-button\n                     class=\"md-icon-button\"\n                     md-menu-trigger\n                  >\n                     <md-icon>more_vert</md-icon>\n                  </md-button>\n\n                  <md-menu-content class=\"ticket_menu_content\">\n                     <md-menu-item\n                        v-if=\"item.step.order >= 0\"\n                        @click=\"passToNextStep(item)\"\n                     >\n                        <md-icon>skip_next</md-icon>\n                        <span>Pass to next step</span>\n                     </md-menu-item>\n\n                     <md-menu-item\n                        v-if=\"item.step.order > 0\"\n                        @click=\"backToPreviousStep(item)\"\n                     >\n                        <md-icon>skip_previous</md-icon>\n                        <span>Back to previous step</span>\n                     </md-menu-item>\n\n                     <md-menu-item @click=\"sendMessage(item)\">\n                        <md-icon>comment</md-icon>\n                        <span>Add comment</span>\n                     </md-menu-item>\n\n                     <md-menu-item\n                        v-if=\"!isArchived(item)\"\n                        @click=\"archiveTicket(item)\"\n                     >\n                        <md-icon>archive</md-icon>\n                        <span>Archive</span>\n                     </md-menu-item>\n\n                     <md-menu-item\n                        v-if=\"isArchived(item)\"\n                        @click=\"unarchiveTicket(item)\"\n                     >\n                        <md-icon>unarchive</md-icon>\n                        <span>Unarchive</span>\n                     </md-menu-item>\n\n                     <md-menu-item @click=\"seeDetails(item)\">\n                        <md-icon>assignment_late</md-icon>\n                        <span>See Details</span>\n                     </md-menu-item>\n\n                     <!-- <md-menu-item @click=\"seeLogs(item)\">\n                <md-icon>receipt_long</md-icon>\n                <span>See Logs</span>\n              </md-menu-item> -->\n\n                  </md-menu-content>\n\n               </md-menu>\n            </md-table-cell>\n\n         </md-table-row>\n      </md-table>\n   </md-content>\n</template>\n\n<script>\nimport { TICKET_PRIORITIES } from \"spinal-service-ticket/dist/Constants\";\n\nconst {\n   spinalPanelManagerService,\n} = require(\"spinal-env-viewer-panel-manager-service\");\n\nimport { spinalIO } from \"../../../extensions/spinalIO\";\n\nimport moment from \"moment\";\nimport { SpinalGraphService } from \"spinal-env-viewer-graph-service\";\nimport { serviceTicketPersonalized } from \"spinal-service-ticket\";\n\nimport { TICKET_EVENTS } from \"../../../extensions/ticketsEvents\";\nimport EventBUS from \"../../../extensions/Event\";\nimport { SelectElementOnMaquette } from \"../../../buttons/standard_buttons/selectElement\";\nimport { IsolateElementOnMaquette } from \"../../../buttons/standard_buttons/isolate\";\nimport { ARCHIVED_STEP } from \"spinal-service-ticket/dist/Constants\";\n\nconst selectBtn = new SelectElementOnMaquette();\nconst isolateBtn = new IsolateElementOnMaquette();\n\nexport default {\n   name: \"ticketsVue\",\n   props: {\n      data: {},\n   },\n   data() {\n      return {\n         selected: [],\n         // tickets: [],\n         searched: [],\n         searchByName: \"\",\n      };\n   },\n   mounted() {\n      EventBUS.$on(TICKET_EVENTS.created, (data) => this.$emit(\"reload\", data));\n      EventBUS.$on(TICKET_EVENTS.changeStep, (data) =>\n         this.$emit(\"reload\", data)\n      );\n\n      this.searched = this.data;\n   },\n   methods: {\n      onSelect(items) {\n         this.selected = items;\n      },\n\n      searchOnTable() {\n         this.searched = this.data.filter((el) =>\n            el.name.toLowerCase().includes(this.searchByName.toLowerCase())\n         );\n\n         // console.log(\"this.searchByName\", this.searchByName);\n      },\n\n      async passToNextStep(item) {\n         const user = await spinalIO.getUserConnected();\n\n         const contextId = item.contextId\n            ? item.contextId\n            : this.getItemContext(item.id).id.get();\n\n         const processId = item.step.processId;\n         const ticketId = item.id;\n\n         serviceTicketPersonalized\n            .moveTicketToNextStep(contextId, processId, ticketId, user)\n            .then((step) => {\n               const info = SpinalGraphService.getInfo(ticketId).get();\n               EventBUS.$emit(TICKET_EVENTS.changeStep, {\n                  ticket: info,\n                  step: step,\n               });\n            });\n      },\n\n      async backToPreviousStep(item) {\n         const user = await spinalIO.getUserConnected();\n\n         const contextId = item.contextId\n            ? item.contextId\n            : this.getItemContext(item.id).id.get();\n\n         const processId = item.step.processId;\n         const ticketId = item.id;\n         serviceTicketPersonalized\n            .moveTicketToPreviousStep(contextId, processId, ticketId, user)\n            .then((step) => {\n               const info = SpinalGraphService.getInfo(ticketId).get();\n               EventBUS.$emit(TICKET_EVENTS.changeStep, {\n                  ticket: info,\n                  step: step,\n               });\n            });\n      },\n\n      sendMessage(item) {\n         let obj = {\n            selectedNode: SpinalGraphService.getRealNode(item.id),\n         };\n         spinalPanelManagerService.openPanel(\"panel-notes\", obj);\n      },\n\n      seeDetails(item) {\n         const context = SpinalGraphService.getInfo(item.contextId);\n         const params = {\n            selectedNode: SpinalGraphService.getInfo(item.id).get(),\n            context: context\n               ? context.get()\n               : this.getItemContext(item.id).get(),\n         };\n\n         spinalPanelManagerService.openPanel(\"ticketDetailDialog\", params);\n      },\n\n      getItemContext(id) {\n         const realNode = SpinalGraphService.getRealNode(id);\n         const contextId = realNode.contextIds._attribute_names[0];\n         return SpinalGraphService.getInfo(contextId);\n      },\n\n      seeLogs(item) {},\n\n      selectOnMaquette(item) {\n         const params = {\n            selectedNode: SpinalGraphService.getInfo(item.id),\n            context: item.contextId\n               ? SpinalGraphService.getInfo(item.contextId)\n               : this.getItemContext(item.id),\n         };\n\n         selectBtn.action(params);\n      },\n\n      isolateOnMaquette(item) {\n         const params = {\n            selectedNode: SpinalGraphService.getInfo(item.id),\n            context: item.contextId\n               ? SpinalGraphService.getInfo(item.contextId)\n               : this.getItemContext(item.id),\n         };\n\n         isolateBtn.action(params);\n      },\n\n      deselectOnMaquette() {\n         window.spinal.ForgeViewer.viewer.select();\n      },\n\n      async archiveTicket(item) {\n         const contextId = item.contextId\n            ? item.contextId\n            : this.getItemContext(item.id).id.get();\n\n         const user = await spinalIO.getUserConnected();\n\n         serviceTicketPersonalized\n            .ArchiveTickets(contextId, item.step.processId, item.id, user)\n            .then((step) => {\n               const info = SpinalGraphService.getInfo(item.id).get();\n               EventBUS.$emit(TICKET_EVENTS.changeStep, {\n                  ticket: info,\n                  step: step,\n               });\n            });\n      },\n\n      async unarchiveTicket(item) {\n         const contextId = item.contextId\n            ? item.contextId\n            : this.getItemContext(item.id).id.get();\n\n         const user = await spinalIO.getUserConnected();\n         serviceTicketPersonalized\n            .unarchiveTicket(contextId, item.step.processId, item.id, user)\n            .then((step) => {\n               const info = SpinalGraphService.getInfo(item.id).get();\n               EventBUS.$emit(TICKET_EVENTS.changeStep, {\n                  ticket: info,\n                  step: step,\n               });\n            });\n      },\n\n      isArchived(item) {\n         return item.step.order === ARCHIVED_STEP.order;\n      },\n   },\n\n   filters: {\n      formatCreationDate: function (date) {\n         return moment(date).fromNow();\n      },\n\n      displayPriority: function (priority) {\n         for (const key in TICKET_PRIORITIES) {\n            if (TICKET_PRIORITIES.hasOwnProperty(key)) {\n               const value = TICKET_PRIORITIES[key];\n               if (value === priority) return key;\n            }\n         }\n      },\n\n      userName: function (user) {\n         if (user && user.name) {\n            return user.name;\n         } else if (user && user.username) {\n            return user.username;\n         }\n         return \"unknow\";\n      },\n   },\n   watch: {\n      data() {\n         // console.log(\"update Data\");\n         if (this.data) {\n            this.searched = this.data;\n         }\n      },\n   },\n};\n</script>\n\n<style scoped>\n.table_container {\n   width: 100%;\n   height: 100%;\n   /* overflow: auto; */\n}\n\n.table_container .mdTable {\n   width: 100%;\n   height: calc(100% - 7px);\n}\n\n.table_container .mdTable .tableName {\n   cursor: pointer;\n}\n\n.table_container .mdTable .myToolbar {\n   padding: 0px !important;\n}\n\n.table_container .mdTable .myToolbar .filters {\n   /* width: 99%; */\n   justify-content: space-between;\n}\n\n.table_container .mdTable .myToolbar .filters ._fields {\n   width: 98%;\n}\n\n.table_container .mdTable .ticketName .color {\n   width: 5px;\n   height: 50px;\n   margin-right: 10px;\n}\n\n.table_container .mdTable .ticketName .name {\n   display: flex;\n   align-items: center;\n}\n</style>\n\n<style>\n.md-table-cell.ticketName .md-table-cell-container {\n   display: flex;\n}\n\n.md-table-cell\n   .md-table-cell-container\n   .md-menu.ticket_menu\n   .md-button\n   .md-ripple {\n   padding: 0px !important;\n}\n\n.ticket_menu_content .md-menu-content-container .md-list-item-content {\n   justify-content: flex-start;\n}\n</style>\n\n<style>\n.table_container .mdTable .myToolbar .filters ._fields .md-input {\n   padding: 0px;\n}\n</style>","<!--\nCopyright 2020 SpinalCom - www.spinalcom.com\n\nThis file is part of SpinalCore.\n\nPlease read all of the following terms and conditions\nof the Free Software license Agreement (\"Agreement\")\ncarefully.\n\nThis Agreement is a legally binding contract between\nthe Licensee (as defined below) and SpinalCom that\nsets forth the terms and conditions that govern your\nuse of the Program. By installing and/or using the\nProgram, you agree to abide by all the terms and\nconditions stated or referenced herein.\n\nIf you do not agree to abide by these terms and\nconditions, do not demonstrate your acceptance and do\nnot install or use the Program.\nYou should have received a copy of the license along\nwith this file. If not, see\n<http://resources.spinalcom.com/licenses.pdf>.\n-->\n\n<template>\n  <md-dialog :md-active.sync=\"showDialog\"\n             @md-closed=\"closeDialog(false)\"\n             class=\"mdDialog\">\n    <md-dialog-title class=\"mdDialogTitle\">Create Ticket context\n    </md-dialog-title>\n\n    <md-dialog-content>\n      <md-field>\n        <label>Common incident name</label>\n        <md-input v-model=\"inputValue\"\n                  ref=\"nameTextField\"></md-input>\n      </md-field>\n\n    </md-dialog-content>\n\n    <md-dialog-actions>\n      <md-button class=\"md-primary\"\n                 @click=\"closeDialog(false)\">Close</md-button>\n\n      <md-button :disabled=\"inputValue.trim().length === 0\"\n                 class=\"md-primary\"\n                 @click=\"closeDialog(true)\">Save</md-button>\n    </md-dialog-actions>\n\n    <!-- <form class=\"dialogForm\"\n          @submit.prevent=\"closeDialog(true)\">\n      <md-dialog-content>\n        <md-field>\n          <label>Context name</label>\n          <md-input v-model=\"inputValue\"overflow: hidden ;\n      <md-dialog-actions>\n        <md-button class=\"md-primary\"\n                   @click=\"closeDialog(false)\">Close</md-button>\n\n        <md-button class=\"md-primary\"\n                   type=\"submit\"\n                   :disabled=\"!(inputValue.trim().length > 0)\">Save</md-button>\n      </md-dialog-actions>\n    </form> -->\n  </md-dialog>\n</template>\n\n<script>\nimport { serviceTicketPersonalized } from \"spinal-service-ticket\";\n\nimport SortableList from \"./components/sortable-list.vue\";\nimport EventBus from \"../../extensions/Event\";\n\nexport default {\n  name: \"createCommonIncidentDialog\",\n  props: [\"onFinised\"],\n  components: {\n    \"sortable-list\": SortableList,\n  },\n  data() {\n    return {\n      showDialog: true,\n      inputValue: \"\",\n      processId: null,\n      callback: undefined,\n    };\n  },\n  methods: {\n    opened(option) {\n      this.processId = option.id;\n      this.callback = option.callback;\n      this.autoFocusNameInput();\n    },\n\n    async removed(res) {\n      const value = res.inputValue.trim();\n\n      if (res.closeResult && value.length > 0) {\n        const id = await serviceTicketPersonalized.addCommonIncident(\n          this.processId,\n          value\n        );\n\n        EventBus.$emit(\"commonIncidentCreated\", id);\n\n        // if (this.callback) {\n        //   this.callback(id);\n        // }\n      }\n\n      this.showDialog = false;\n    },\n    closeDialog(closeResult) {\n      if (typeof this.onFinised === \"function\") {\n        this.onFinised({\n          closeResult,\n          inputValue: this.inputValue,\n        });\n      }\n    },\n\n    autoFocusNameInput() {\n      setTimeout(() => {\n        this.$refs[\"nameTextField\"].$el.focus();\n      }, 200);\n    },\n  },\n};\n</script>\n\n\n\n","<!--\nCopyright 2020 SpinalCom - www.spinalcom.com\n\nThis file is part of SpinalCore.\n\nPlease read all of the following terms and conditions\nof the Free Software license Agreement (\"Agreement\")\ncarefully.\n\nThis Agreement is a legally binding contract between\nthe Licensee (as defined below) and SpinalCom that\nsets forth the terms and conditions that govern your\nuse of the Program. By installing and/or using the\nProgram, you agree to abide by all the terms and\nconditions stated or referenced herein.\n\nIf you do not agree to abide by these terms and\nconditions, do not demonstrate your acceptance and do\nnot install or use the Program.\nYou should have received a copy of the license along\nwith this file. If not, see\n<http://resources.spinalcom.com/licenses.pdf>.\n-->\n\n<template>\n  <md-dialog :md-active.sync=\"showDialog\"\n             @md-closed=\"closeDialog(false)\"\n             class=\"mdDialog\">\n    <md-dialog-title class=\"mdDialogTitle\">Create Ticket context\n    </md-dialog-title>\n\n    <md-dialog-content>\n      {{message}}\n    </md-dialog-content>\n\n    <md-dialog-actions>\n      <md-button class=\"md-accent\"\n                 @click=\"closeDialog(false)\">NO</md-button>\n\n      <md-button class=\"md-primary\"\n                 @click=\"closeDialog(true)\">YES</md-button>\n    </md-dialog-actions>\n\n  </md-dialog>\n</template>\n\n<script>\nexport default {\n  name: \"confirmationDialog\",\n  props: [\"onFinised\"],\n  data() {\n    return {\n      showDialog: true,\n      message: \"\",\n      callback: undefined,\n    };\n  },\n  methods: {\n    opened(option) {\n      this.message = option.message;\n      this.callback = option.callback;\n    },\n\n    async removed(res) {\n      if (res.closeResult && this.callback) {\n        this.callback();\n      }\n\n      this.showDialog = false;\n    },\n    closeDialog(closeResult) {\n      if (typeof this.onFinised === \"function\") {\n        this.onFinised({\n          closeResult,\n        });\n      }\n    },\n  },\n};\n</script>","import TicketManagerPanel from './ticketManager.vue';\nimport TicketDetailDialog from \"./ticketDetailPanel.vue\";\nimport ManageTicketPanel from \"./manageTicketPanel.vue\";\nimport Vue from \"vue\";\n\nconst {\n  SpinalForgeExtention,\n} = require(\"spinal-env-viewer-panel-manager-service_spinalforgeextention\");\n\n\nconst panels = [{\n    name: \"ticketManagerPanel\",\n    vueMountComponent: Vue.extend(TicketManagerPanel),\n    panel: {\n      title: \"Ticket Manager\",\n      closeBehaviour: \"hide\",\n    },\n    style: {\n      height: \"475px\",\n      left: \"400px\",\n    },\n  },\n  {\n    name: \"ticketDetailDialog\",\n    vueMountComponent: Vue.extend(TicketDetailDialog),\n    panel: {\n      title: \"Ticket Detail\",\n      closeBehaviour: \"hide\",\n    },\n    style: {\n      minWidth: \"770px\",\n      height: \"475px\",\n      left: \"400px\",\n    },\n  },\n  {\n    name: \"manageTicketPanel\",\n    vueMountComponent: Vue.extend(ManageTicketPanel),\n    panel: {\n      title: \"Manage Ticket\",\n      closeBehaviour: \"hide\",\n    },\n    style: {\n      height: \"475px\",\n      left: \"400px\",\n    },\n  }\n]\n\nfor (let index = 0; index < panels.length; index++) {\n  const element = panels[index];\n  const panelExtension = SpinalForgeExtention.createExtention(element);\n  SpinalForgeExtention.registerExtention(element.name, panelExtension);\n}","<!--\nCopyright 2020 SpinalCom - www.spinalcom.com\n\nThis file is part of SpinalCore.\n\nPlease read all of the following terms and conditions\nof the Free Software license Agreement (\"Agreement\")\ncarefully.\n\nThis Agreement is a legally binding contract between\nthe Licensee (as defined below) and SpinalCom that\nsets forth the terms and conditions that govern your\nuse of the Program. By installing and/or using the\nProgram, you agree to abide by all the terms and\nconditions stated or referenced herein.\n\nIf you do not agree to abide by these terms and\nconditions, do not demonstrate your acceptance and do\nnot install or use the Program.\nYou should have received a copy of the license along\nwith this file. If not, see\n<http://resources.spinalcom.com/licenses.pdf>.\n-->\n\n<template>\n  <md-content class=\"ticket_container\">\n    <div class=\"breadcrumb\" v-if=\"contextSelected\">\n      <!-- <div class=\"breadcrumbItem\"\n           v-for=\"(breadcrumb,index) in breadcrumbs\"\n           :key=\"breadcrumb.id\"\n           @click=\"selectBreadcrumb(index,breadcrumb)\">\n        {{breadcrumb.name}}\n      </div> -->\n\n      <md-button @click=\"goBack\">\n        <md-icon>arrow_back</md-icon>\n        Back\n      </md-button>\n    </div>\n\n    <div class=\"data-content\">\n      <list-item\n        v-if=\"pageDisplayed === PAGES.contexts\"\n        :data=\"data\"\n        @select=\"selectContext\"\n      ></list-item>\n\n      <list-item\n        v-else-if=\"pageDisplayed === PAGES.processes\"\n        :data=\"processes\"\n        @select=\"selectProcess\"\n      ></list-item>\n\n      <list-item\n        v-else-if=\"pageDisplayed === PAGES.steps\"\n        :data=\"steps\"\n        @select=\"selectStep\"\n      >\n        <md-list-item @click=\"selectAllTickets\">\n          <div class=\"stepsColor\"></div>\n          <span class=\"md-list-item-text\">All</span>\n          <md-icon>keyboard_arrow_right</md-icon>\n        </md-list-item>\n      </list-item>\n\n      <tickets-vue\n        v-else-if=\"pageDisplayed === PAGES.tickets\"\n        :data=\"tickets\"\n        @reload=\"reloadData\"\n      ></tickets-vue>\n    </div>\n  </md-content>\n</template>\n\n<script>\nimport { utilities } from './service/utilities';\nimport ListItem from './components/listItem.vue';\n// import processesVue from \"./components/processes.vue\";\n// import stepsVue from \"./components/steps.vue\";\nimport ticketsVue from './components/tickets.vue';\n\nexport default {\n  name: 'ticketManagerPanel',\n  components: {\n    'list-item': ListItem,\n    // \"contexts-vue\": contextsVue,\n    // \"processes-vue\": processesVue,\n    // \"steps-vue\": stepsVue,\n    'tickets-vue': ticketsVue,\n  },\n  data() {\n    this.PAGES = {\n      contexts: 0,\n      processes: 1,\n      steps: 2,\n      tickets: 3,\n    };\n    return {\n      data: [],\n      pageDisplayed: this.PAGES.contexts,\n      contextSelected: undefined,\n      processSelected: undefined,\n      stepSelected: undefined,\n      processes: [],\n      steps: [],\n      tickets: [],\n    };\n  },\n  async mounted() {\n    await this.updateData();\n  },\n  methods: {\n    async opened(params) {\n      await this.updateData();\n      this.getContextId(params);\n      this.getProcessId(params);\n      this.getStepId(params);\n    },\n    selectContext(contextId) {\n      this.contextSelected = contextId;\n      this.pageDisplayed = this.PAGES.processes;\n    },\n    selectProcess(processId) {\n      this.processSelected = processId;\n      this.pageDisplayed = this.PAGES.steps;\n    },\n    selectStep(stepId) {\n      this.stepSelected = stepId;\n      this.pageDisplayed = this.PAGES.tickets;\n    },\n    selectAllTickets() {\n      this.pageDisplayed = this.PAGES.tickets;\n      this.formatAllTickets();\n    },\n    formatAllTickets() {\n      const res = [];\n      for (const step of this.steps) {\n        res.push(...this._formatTickets(step));\n      }\n      this.tickets = res;\n    },\n    async updateData() {\n      this.data = await utilities.getAllData();\n    },\n    updateProcesses() {\n      const find = this.data.find((el) => el.id === this.contextSelected);\n      if (find) {\n        this.processes = find.processes;\n      }\n    },\n    updateSteps() {\n      const find = this.processes.find((el) => el.id === this.processSelected);\n      if (find) {\n        this.steps = find.steps;\n      }\n    },\n    updateTickets() {\n      if (this.stepSelected) {\n        const find = this.steps.find((el) => el.id === this.stepSelected);\n        if (find) {\n          // this.breadcrumbs.push(find);\n          this.tickets = this._formatTickets(find);\n        }\n      } else {\n        this.formatAllTickets();\n      }\n    },\n    resetProcesses() {\n      this.contextSelected = undefined;\n      this.processes = [];\n    },\n    resetSteps() {\n      this.processSelected = undefined;\n      this.steps = [];\n    },\n    resetTickets() {\n      this.tickets = [];\n      this.stepSelected = undefined;\n    },\n    goBack() {\n      switch (this.pageDisplayed) {\n        case this.PAGES.processes:\n          this.pageDisplayed = this.PAGES.contexts;\n          this.resetProcesses();\n          break;\n        case this.PAGES.steps:\n          this.pageDisplayed = this.PAGES.processes;\n          this.resetSteps();\n          break;\n        case this.PAGES.tickets:\n          this.pageDisplayed = this.PAGES.steps;\n          this.resetTickets();\n          break;\n        default:\n          break;\n      }\n    },\n    _formatTickets(step) {\n      return step.tickets.map((el) => {\n        el['step'] = step;\n        el['contextId'] = this.contextSelected;\n        return el;\n      });\n    },\n    async reloadData() {\n      await this.updateData();\n    },\n    getContextId(params) {\n      this.selectContext(params.context.id);\n    },\n    getProcessId(params) {\n      if (params.context.id === params.selectedNode.id) return;\n      let nodeId =\n        typeof params.selectedNode.processId === 'undefined'\n          ? params.selectedNode.id\n          : params.selectedNode.processId;\n      this.selectProcess(nodeId);\n    },\n    getStepId(params) {\n      if (typeof params.selectedNode.processId !== 'undefined')\n        this.selectStep(params.selectedNode.id);\n    },\n  },\n  watch: {\n    contextSelected() {\n      if (this.contextSelected) this.updateProcesses();\n    },\n    processSelected() {\n      if (this.processSelected) this.updateSteps();\n    },\n    stepSelected() {\n      if (this.stepSelected) this.updateTickets();\n    },\n    data() {\n      this.updateProcesses();\n      this.updateSteps();\n      this.updateTickets();\n    },\n  },\n};\n</script>\n\n<style scoped>\n.ticket_container {\n  width: 100%;\n  height: calc(100% - 15px);\n}\n\n.ticket_container .breadcrumb {\n  width: 100%;\n  height: 50px;\n  display: flex;\n  align-items: center;\n}\n\n.ticket_container .data-content {\n  width: 100%;\n  height: calc(100% - 50px);\n}\n\n.stepsColor {\n  width: 5px;\n  height: 50px;\n  margin-right: 10px;\n  background-color: white;\n}\n</style>\n","import {\n  serviceTicketPersonalized\n} from \"spinal-service-ticket\";\n\nclass Utilities {\n  constructor() {}\n\n  getAllData() {\n    let contexts = this.getContexts();\n    const promises = contexts.map(async (context) => {\n      const processes = await this.getProcess(context.id);\n      context[\"processes\"] = await this._formatProcesses(\n        context.id,\n        processes\n      );\n      return context;\n    });\n\n    return Promise.all(promises);\n\n  }\n\n  getContexts() {\n    return serviceTicketPersonalized.getContexts();\n  }\n\n  getProcess(contextId) {\n    return serviceTicketPersonalized.getAllProcess(contextId);\n  }\n\n  getSteps(contextId, processId) {\n    return serviceTicketPersonalized.getStepsFromProcess(processId,\n    contextId);\n  }\n\n  /////////////////////////////////////////////////////////////////////////////////////////\n  //                                    Private                                          //\n  /////////////////////////////////////////////////////////////////////////////////////////\n\n  _formatProcesses(contextId, processes) {\n    const promises = processes.map(async (argProcess) => {\n      let process = argProcess.get();\n\n      const steps = await this.getSteps(contextId, process.id);\n      process[\"steps\"] = await this._formatSteps(contextId, process.id,\n        steps);\n      return process;\n    });\n\n    return Promise.all(promises);\n  }\n\n  _formatSteps(contextId, processId, steps) {\n    const promises = steps.map(async (argStep) => {\n      let step = argStep.get();\n      const tickets = await serviceTicketPersonalized\n        .getTicketsFromStep(step.id);\n      step[\"tickets\"] = tickets.map(el => el.get());\n      return step;\n    });\n\n    return Promise.all(promises);\n  }\n}\n\nexport const utilities = new Utilities();","<!--\nCopyright 2020 SpinalCom - www.spinalcom.com\n\nThis file is part of SpinalCore.\n\nPlease read all of the following terms and conditions\nof the Free Software license Agreement (\"Agreement\")\ncarefully.\n\nThis Agreement is a legally binding contract between\nthe Licensee (as defined below) and SpinalCom that\nsets forth the terms and conditions that govern your\nuse of the Program. By installing and/or using the\nProgram, you agree to abide by all the terms and\nconditions stated or referenced herein.\n\nIf you do not agree to abide by these terms and\nconditions, do not demonstrate your acceptance and do\nnot install or use the Program.\nYou should have received a copy of the license along\nwith this file. If not, see\n<http://resources.spinalcom.com/licenses.pdf>.\n-->\n\n<template>\n  <md-content class=\"t_container md-srollbar\">\n    <md-list class=\"myList\">\n      <slot></slot>\n      <md-list-item v-for=\"item in data\"\n                    :key=\"item.id\"\n                    @click=\"select(item.id)\">\n        <div class=\"color\"\n             v-if=\"item.color\"\n             :style=\"{'background-color' : item.color}\"></div>\n        <span class=\"md-list-item-text\">{{item.name}}</span>\n        <md-icon>keyboard_arrow_right</md-icon>\n      </md-list-item>\n    </md-list>\n  </md-content>\n</template>\n\n<script>\nexport default {\n  name: \"contextsVue\",\n  props: {\n    data: {},\n  },\n  data() {\n    return {};\n  },\n  methods: {\n    select(id) {\n      this.$emit(\"select\", id);\n    },\n  },\n};\n</script>\n\n<style scoped>\n.t_container {\n  width: 100%;\n  height: 100%;\n  overflow: auto;\n}\n\n.t_container .myList .color {\n  width: 5px;\n  height: 50px;\n  margin-right: 10px;\n}\n</style>\n\n<style>\n.t_container .myList .md-ripple {\n  width: unset !important;\n}\n</style>","<!--\nCopyright 2020 SpinalCom - www.spinalcom.com\n\nThis file is part of SpinalCore.\n\nPlease read all of the following terms and conditions\nof the Free Software license Agreement (\"Agreement\")\ncarefully.\n\nThis Agreement is a legally binding contract between\nthe Licensee (as defined below) and SpinalCom that\nsets forth the terms and conditions that govern your\nuse of the Program. By installing and/or using the\nProgram, you agree to abide by all the terms and\nconditions stated or referenced herein.\n\nIf you do not agree to abide by these terms and\nconditions, do not demonstrate your acceptance and do\nnot install or use the Program.\nYou should have received a copy of the license along\nwith this file. If not, see\n<http://resources.spinalcom.com/licenses.pdf>.\n-->\n\n<template>\n  <!-- <md-dialog class=\"mdDialogContainer\"\n             :md-active.sync=\"showDialog\"\n             @md-closed=\"closeDialog(false)\">\n    <md-dialog-title class=\"mdDialogTitle\">Detail Ticket</md-dialog-title>\n\n    <md-dialog-content class=\"mdDialogContent\"\n                       v-if=\"ticket\"> -->\n  <div class=\"mdDialogContainer\">\n    <div class=\"mdDialogContent\"\n         v-if=\"ticket && !isLoading\">\n      <div class=\"ticketDetail\">\n        <md-content class=\"details md-scrollbar\">\n          <div class=\"detail\">\n            <div class=\"label\">Name</div>\n            <div class=\"value\">{{ticket.name}}</div>\n          </div>\n\n          <div class=\"detail\">\n            <div class=\"label\">Actual Step</div>\n            <div class=\"value\">{{formatStepId}}</div>\n          </div>\n\n          <div class=\"detail\">\n            <div class=\"label\">Priority</div>\n            <div class=\"value\">{{ticket.priority | formatPriority}}</div>\n          </div>\n\n          <div class=\"detail\"\n               v-if=\"ticket.user\">\n            <div class=\"label\">Created By</div>\n            <div class=\"value\">{{ticket.user.name}}</div>\n          </div>\n\n          <div class=\"detail\">\n            <div class=\"label\">Date creation</div>\n            <div class=\"value\">{{ticket.creationDate | formatDate}}</div>\n          </div>\n        </md-content>\n\n        <div class=\"ticketActions\">\n          <md-list class=\"actionList\">\n            <md-list-item class=\"actions\">\n              <div class=\"maquette_icons\">\n\n                <md-button class=\"md-icon-button md-primary\"\n                           @click=\"selectOnMaquette\"\n                           title=\"Select on 3D Model\">\n                  <md-icon>find_in_page</md-icon>\n                </md-button>\n\n                <md-button class=\"md-icon-button md-primary\"\n                           @click=\"zoomOnMaquette\"\n                           title=\"Zoom on 3D Model\">\n                  <md-icon>zoom_in</md-icon>\n                </md-button>\n\n                <md-button class=\"md-icon-button md-primary\"\n                           @click=\"isolateOnMaquette\"\n                           title=\"Isolate on 3D Model\">\n                  <md-icon>settings_overscan</md-icon>\n                </md-button>\n\n              </div>\n            </md-list-item>\n\n            <md-list-item class=\"actions\"\n                          @click=\"passToNext\">\n              <md-icon>skip_next</md-icon>\n              <span class=\"md-list-item-text\">Pass to next step</span>\n            </md-list-item>\n\n            <md-list-item class=\"actions\"\n                          @click=\"backToPrevious\">\n              <md-icon>skip_previous</md-icon>\n              <span class=\"md-list-item-text\">Back to previous step</span>\n            </md-list-item>\n\n          </md-list>\n        </div>\n      </div>\n\n      <div class=\"content\">\n        <div class=\"ticketsNotes\">\n          <div class=\"title\">Comments</div>\n          <md-content class=\"events md-scrollbar\">\n\n            <message-component :nodeInfo=\"nodeInfo\"></message-component>\n          </md-content>\n        </div>\n        <div class=\"ticketsLogs\">\n          <div class=\"title\">Events</div>\n          <md-content class=\"events\">\n            <logs-template :logs=\"logs\"></logs-template>\n          </md-content>\n        </div>\n      </div>\n    </div>\n\n    <div v-else-if=\"isLoading\"\n         class=\"loading\">\n      <md-progress-spinner md-mode=\"indeterminate\"></md-progress-spinner>\n    </div>\n  </div>\n  <!-- </md-dialog-content>\n\n    <md-dialog-actions>\n      <md-button class=\"md-primary\"\n                 @click=\"closeDialog(false)\">Close</md-button>\n      \n    </md-dialog-actions> -->\n\n  <!-- </md-dialog> -->\n</template>\n\n<script>\nimport { TICKET_PRIORITIES } from \"spinal-service-ticket/dist/Constants\";\nimport { SpinalGraphService } from \"spinal-env-viewer-graph-service\";\nimport { serviceTicketPersonalized } from \"spinal-service-ticket\";\nimport { spinalIO } from \"../../extensions/spinalIO\";\nimport messageComponentVue from \"spinal-env-viewer-plugin-documentation/view/notes/components/messageComponent.vue\";\n\n// import attachmentVue from \"./components/attachment.vue\";\nimport logsTemplateVue from \"./components/logsTemplate.vue\";\n// import messageVue from \"spinal-env-viewer-plugin-documentation/view/notes/components/message.vue\";\nimport moment from \"moment\";\n\nimport { TICKET_EVENTS } from \"../../extensions/ticketsEvents\";\nimport EventBUS from \"../../extensions/Event\";\n\nimport { IsolateElementOnMaquette } from \"../../buttons/standard_buttons/isolate\";\nimport { SelectElementOnMaquette } from \"../../buttons/standard_buttons/selectElement\";\nimport { ZoomElementOnMaquette } from \"../../buttons/standard_buttons/zoom\";\n\nexport default {\n  name: \"ticketDetailDialog\",\n  // props: [\"onFinised\"],\n  components: {\n    \"logs-template\": logsTemplateVue,\n    \"message-component\": messageComponentVue,\n    // \"attachment-component\": attachmentVue,\n  },\n  data() {\n    this.params = undefined;\n\n    return {\n      showDialog: true,\n      nodeInfo: undefined,\n      ticket: {},\n      step: {},\n      logs: [],\n      isLoading: false,\n      messages: [],\n      formatStepId: \"\",\n      note: {\n        messageUser: \"\",\n        pj: [],\n      },\n    };\n  },\n\n  mounted() {\n    EventBUS.$on(TICKET_EVENTS.changeStep, async (data) => {\n      if (data.ticket.id === this.ticket.id && data.step) {\n        this.step = data.step;\n        this.logs = await this.getLogs(this.ticket.id);\n      }\n    });\n  },\n\n  methods: {\n    async opened(option) {\n      this.isLoading = true;\n\n      this.ticket = option.selectedNode;\n      this.nodeInfo = {\n        selectedNode: SpinalGraphService.getRealNode(option.selectedNode.id),\n      };\n\n      await Promise.all([\n        this.getStep(option.selectedNode.stepId),\n        this.getLogs(option.selectedNode.id),\n      ]).then((values) => {\n        const contextId = this.ticket.contextId\n          ? this.ticket.contextId\n          : this.getItemContext(this.ticket.id).id;\n\n        this.step = values[0];\n        this.logs = values[1];\n\n        this.params = {\n          selectedNode: SpinalGraphService.getInfo(this.ticket.id),\n          context: SpinalGraphService.getInfo(contextId),\n        };\n\n        this.isLoading = false;\n\n        // this.messages = values[2];\n      });\n    },\n\n    async removed(res) {\n      // if (res.closeResult) {\n      // }\n      // this.showDialog = false;\n    },\n\n    closed() {},\n\n    getStep(id) {\n      const info = SpinalGraphService.getInfo(id);\n      if (info) return Promise.resolve(info.get());\n\n      return SpinalGraphService.getNodeAsync(id).then((result) => {\n        return result.get();\n      });\n    },\n\n    getLogs(id) {\n      return serviceTicketPersonalized.getLogs(id);\n    },\n\n    async passToNext() {\n      const user = await spinalIO.getUserConnected();\n\n      const contextId = this.ticket.contextId\n        ? this.ticket.contextId\n        : this.getItemContext(this.ticket.id).id;\n\n      const processId = this.step.processId;\n      const ticketId = this.ticket.id;\n\n      serviceTicketPersonalized\n        .moveTicketToNextStep(contextId, processId, ticketId, user)\n        .then(async (nextStep) => {\n          this.ticket = SpinalGraphService.getInfo(ticketId).get();\n          // this.step = nextStep;\n          EventBUS.$emit(TICKET_EVENTS.changeStep, {\n            ticket: this.ticket,\n            step: nextStep,\n          });\n        });\n    },\n\n    async backToPrevious() {\n      const user = await spinalIO.getUserConnected();\n\n      const contextId = this.ticket.contextId\n        ? this.ticket.contextId\n        : this.getItemContext(this.ticket.id).id;\n\n      const processId = this.step.processId;\n      const ticketId = this.ticket.id;\n\n      serviceTicketPersonalized\n        .moveTicketToPreviousStep(contextId, processId, ticketId, user)\n        .then((previousStep) => {\n          this.ticket = SpinalGraphService.getInfo(ticketId).get();\n          // this.step = previousStep;\n          EventBUS.$emit(TICKET_EVENTS.changeStep, {\n            ticket: this.ticket,\n            step: previousStep,\n          });\n        });\n    },\n\n    getItemContext(id) {\n      const realNode = SpinalGraphService.getRealNode(id);\n      const contextId = realNode.contextIds._attribute_names[0];\n      return SpinalGraphService.getInfo(contextId).get();\n    },\n\n    selectOnMaquette() {\n      const button = new SelectElementOnMaquette();\n      button.action(this.params);\n    },\n\n    zoomOnMaquette() {\n      const button = new ZoomElementOnMaquette();\n      button.action(this.params);\n    },\n\n    isolateOnMaquette() {\n      const button = new IsolateElementOnMaquette();\n      button.action(this.params);\n    },\n  },\n  watch: {\n    step() {\n      this.formatStepId = this.step && this.step.name ? this.step.name : \"\";\n    },\n  },\n  computed: {\n    // formatStepId(stepId) {\n    //   return this.step && this.step.name ? this.step.name : \"\";\n    // },\n  },\n  filters: {\n    formatDate(date) {\n      return moment(parseInt(date)).format(\"LL\");\n    },\n\n    formatPriority(priority) {\n      for (const key of Object.keys(TICKET_PRIORITIES)) {\n        if (TICKET_PRIORITIES[key] == priority) return key;\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\n.mdDialogContainer {\n  width: 100%;\n  height: calc(100% - 15px);\n}\n\n.mdDialogContainer .loading {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.mdDialogContainer .mdDialogContent {\n  width: calc(100% - 48px);\n  height: 100%;\n  margin: auto;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n}\n\n.mdDialogContainer .mdDialogContent .ticketDetail {\n  width: 100%;\n  height: calc(40% - 10px);\n  display: flex;\n  justify-content: space-between;\n}\n\n.mdDialogContainer .mdDialogContent .ticketDetail .ticketActions {\n  width: 49%;\n  height: 100%;\n  background: transparent !important;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.mdDialogContainer .mdDialogContent .ticketDetail .ticketActions .actionList {\n  width: 70%;\n  display: flex;\n  justify-content: center;\n  background: transparent !important;\n}\n\n.mdDialogContainer\n  .mdDialogContent\n  .ticketDetail\n  .ticketActions\n  .actionList\n  .actions {\n  border: 1px solid grey;\n  margin-bottom: 10px;\n}\n\n.mdDialogContainer\n  .mdDialogContent\n  .ticketDetail\n  .ticketActions\n  .actionList\n  .maquette_icons {\n  width: 100%;\n  display: flex;\n  justify-content: center;\n}\n\n.mdDialogContainer .mdDialogContent .ticketDetail .details {\n  width: 49%;\n  height: 100%;\n  padding-right: 10px;\n  overflow: auto;\n  background: transparent !important;\n}\n\n.mdDialogContainer .mdDialogContent .ticketDetail .details .detail {\n  width: 100%;\n  height: 40px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.mdDialogContainer .mdDialogContent .ticketDetail .details .detail .value {\n  color: #448aff;\n  text-transform: capitalize;\n}\n\n.mdDialogContainer .mdDialogContent .content {\n  width: 100%;\n  height: 60%;\n  display: flex;\n  justify-content: space-between;\n}\n\n.mdDialogContainer .mdDialogContent .content .ticketsNotes,\n.mdDialogContainer .mdDialogContent .content .ticketsLogs {\n  width: 49%;\n  height: calc(100% - 5px);\n  border: 1px solid grey;\n}\n\n.mdDialogContainer .mdDialogContent .content .ticketsNotes .title,\n.mdDialogContainer .mdDialogContent .content .ticketsLogs .title {\n  width: 100%;\n  height: 50px;\n  border-bottom: 1px solid grey;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.mdDialogContainer .mdDialogContent .content .ticketsNotes .events,\n.mdDialogContainer .mdDialogContent .content .ticketsLogs .events {\n  width: 100%;\n  height: calc(100% - 60px);\n  padding-bottom: 5px;\n  overflow: auto;\n  background: transparent !important;\n}\n\n.mdDialogContainer .mdDialogContent .content .ticketsNotes .events {\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n}\n</style>\n\n<style>\n.mdDialogContainer\n  .mdDialogContent\n  .ticketDetail\n  .ticketActions\n  .actionList\n  .maquette_icons\n  .md-button\n  .md-ripple {\n  padding: 0px !important;\n}\n</style>","<!--\nCopyright 2020 SpinalCom - www.spinalcom.com\n\nThis file is part of SpinalCore.\n\nPlease read all of the following terms and conditions\nof the Free Software license Agreement (\"Agreement\")\ncarefully.\n\nThis Agreement is a legally binding contract between\nthe Licensee (as defined below) and SpinalCom that\nsets forth the terms and conditions that govern your\nuse of the Program. By installing and/or using the\nProgram, you agree to abide by all the terms and\nconditions stated or referenced herein.\n\nIf you do not agree to abide by these terms and\nconditions, do not demonstrate your acceptance and do\nnot install or use the Program.\nYou should have received a copy of the license along\nwith this file. If not, see\n<http://resources.spinalcom.com/licenses.pdf>.\n-->\n\n<template>\n  <md-content class=\"logs_container md-scrollbar\">\n\n    <md-table class=\"logs_table md-scrollbar\">\n      <md-table-row>\n        <md-table-head>Date</md-table-head>\n        <md-table-head>User</md-table-head>\n        <md-table-head>Action</md-table-head>\n      </md-table-row>\n\n      <log-vue v-for=\"(log,index) of logs\"\n               :key=\"index\"\n               :log=\"log\"></log-vue>\n\n    </md-table>\n\n  </md-content>\n</template>\n\n<script>\nimport logVue from \"./log.vue\";\n\nexport default {\n  name: \"logsTemplate\",\n  props: {\n    logs: {},\n  },\n  components: {\n    \"log-vue\": logVue,\n  },\n  data() {\n    return {};\n  },\n  methods: {},\n};\n</script>\n\n<style scoped>\n.logs_container {\n  width: 100%;\n  height: 100%;\n  background-color: transparent;\n  overflow: auto;\n}\n\n.logs_container .logs_table {\n  background-color: transparent;\n}\n</style>","<!--\nCopyright 2020 SpinalCom - www.spinalcom.com\n\nThis file is part of SpinalCore.\n\nPlease read all of the following terms and conditions\nof the Free Software license Agreement (\"Agreement\")\ncarefully.\n\nThis Agreement is a legally binding contract between\nthe Licensee (as defined below) and SpinalCom that\nsets forth the terms and conditions that govern your\nuse of the Program. By installing and/or using the\nProgram, you agree to abide by all the terms and\nconditions stated or referenced herein.\n\nIf you do not agree to abide by these terms and\nconditions, do not demonstrate your acceptance and do\nnot install or use the Program.\nYou should have received a copy of the license along\nwith this file. If not, see\n<http://resources.spinalcom.com/licenses.pdf>.\n-->\n\n<template>\n   <!-- <div class=\"logs\">\n    <div class=\"date\">{{log.creationDate | formatDate}}</div>\n    <div class=\"username\">{{username.length > 0 ? username : \"unknown\"}}</div>\n    <div class=\"content\">{{texte}}</div>\n  </div> -->\n\n   <md-table-row>\n      <md-table-cell>{{log.creationDate | formatDate}}</md-table-cell>\n      <md-table-cell>{{username.length > 0 ? username : \"unknown\"}}\n      </md-table-cell>\n      <md-table-cell>{{texte}}</md-table-cell>\n   </md-table-row>\n</template>\n\n<script>\nimport { LOGS_EVENTS } from \"spinal-service-ticket/dist/Constants\";\nimport moment from \"moment\";\nimport { SpinalGraphService } from \"spinal-env-viewer-graph-service\";\n\nexport default {\n   name: \"logVue\",\n   props: [\"log\"],\n   data() {\n      return {\n         texte: \"\",\n         username: \"\",\n      };\n   },\n   mounted() {\n      this.formatEvent();\n   },\n   methods: {\n      async formatEvent() {\n         // this.username =\n         //    this.log.user && this.log.user.name ? this.log.user.name : \"\";\n\n         if (this.log.user && this.log.user.name) {\n            this.username = this.log.user.name;\n         } else if (this.log.user && this.log.user.username) {\n            this.username = this.log.user.username;\n         } else {\n            this.username = \"\";\n         }\n\n         if (this.log.event == LOGS_EVENTS.creation) {\n            this.texte = \"created\";\n         } else if (this.log.event == LOGS_EVENTS.archived) {\n            this.texte = \"archived\";\n         } else if (this.log.event == LOGS_EVENTS.unarchive) {\n            this.texte = \"unarchived\";\n         } else {\n            const promises = this.log.steps.map((el) =>\n               SpinalGraphService.getNodeAsync(el)\n            );\n\n            Promise.all(promises).then((result) => {\n               const step1 = result[0].name.get();\n               const step2 = result[1].name.get();\n               // const pre = this.log.event == LOGS_EVENTS.moveToNext ? true : false;\n               // // this.log.event == LOGS_EVENTS.moveToNext\n               // //   ? \"moving forward\"\n               // //   : \"move back\";\n\n               // this.texte = pre\n               //   ? `Passed from ${step1} to ${step2}`\n               //   : `Backward from ${step1} to ${step2}`;\n\n               this.texte = `moved from ${step1} to ${step2}`;\n            });\n         }\n      },\n   },\n   filters: {\n      formatDate(data) {\n         // return moment(parseInt(data)).format(\"MMM Do YYYY\");\n         return moment(data).fromNow();\n      },\n   },\n};\n</script>\n\n<style scoped>\n.logs {\n   width: 100%;\n   height: 50px;\n   display: flex;\n   justify-content: space-between;\n}\n\n.logs .date {\n   width: 30%;\n   display: flex;\n   justify-content: center;\n   align-items: center;\n   /* color: #448aff; */\n}\n\n.logs .username {\n   width: 30%;\n   display: flex;\n   justify-content: center;\n   align-items: center;\n   /* color: #448aff; */\n}\n\n.logs .content {\n   width: 39%;\n   display: flex;\n   justify-content: center;\n   align-items: center;\n   /* color: #448aff; */\n}\n</style>","<!--\nCopyright 2020 SpinalCom - www.spinalcom.com\n\nThis file is part of SpinalCore.\n\nPlease read all of the following terms and conditions\nof the Free Software license Agreement (\"Agreement\")\ncarefully.\n\nThis Agreement is a legally binding contract between\nthe Licensee (as defined below) and SpinalCom that\nsets forth the terms and conditions that govern your\nuse of the Program. By installing and/or using the\nProgram, you agree to abide by all the terms and\nconditions stated or referenced herein.\n\nIf you do not agree to abide by these terms and\nconditions, do not demonstrate your acceptance and do\nnot install or use the Program.\nYou should have received a copy of the license along\nwith this file. If not, see\n<http://resources.spinalcom.com/licenses.pdf>.\n-->\n\n<template>\n  <div class=\"my_content\"\n       v-if=\"!isLoading\">\n    <md-button class=\"md-fab md-mini md-primary md-fab-bottom-right\"\n               title=\"create ticket\"\n               @click=\"createTicket\">\n      <md-icon>add</md-icon>\n    </md-button>\n\n    <tickets-vue class=\"tickets_class\"\n                 :data=\"tickets\"\n                 @reload=\"reloadData\"></tickets-vue>\n  </div>\n\n  <div class=\"loading\"\n       v-else>\n    <md-progress-spinner md-mode=\"indeterminate\"></md-progress-spinner>\n  </div>\n</template>\n\n<script>\nimport { serviceTicketPersonalized } from \"spinal-service-ticket\";\nimport { spinalPanelManagerService } from \"spinal-env-viewer-panel-manager-service\";\nimport { SpinalGraphService } from \"spinal-env-viewer-graph-service\";\n\nimport EventBus from \"../../extensions/Event\";\nimport ticketsVue from \"./components/tickets.vue\";\n\nexport default {\n  name: \"manageTicketPanel\",\n  components: {\n    \"tickets-vue\": ticketsVue,\n  },\n  data() {\n    return {\n      tickets: [],\n      selectedNode: undefined,\n      isLoading: false,\n    };\n  },\n  methods: {\n    async opened(option) {\n      // console.log(\"option\", option);\n      this.isLoading = true;\n      this.selectedNode = option.selectedNode;\n      SpinalGraphService._addNode(option.selectedNode);\n      const nodeId = option.selectedNode.getId().get();\n\n      this.tickets = await this.getNodeTickets(nodeId);\n      this.isLoading = false;\n    },\n\n    closed() {},\n\n    getNodeTickets(nodeId) {\n      return serviceTicketPersonalized\n        .getTicketsFromNode(nodeId)\n        .then((tickets) => {\n          // console.log(tickets);\n          const promises = tickets.map(async (ticket) => {\n            ticket.step = await this.getStep(ticket);\n            return ticket;\n          });\n\n          return Promise.all(promises).then((result) => {\n            return result.filter((el) => el.step);\n          });\n        });\n    },\n\n    async getStep(ticketInfo) {\n      const stepId = ticketInfo.stepId;\n\n      const info = SpinalGraphService.getInfo(stepId);\n      if (info) return info.get();\n\n      const parents = await SpinalGraphService.getParents(ticketInfo.id, []);\n      // console.log(parents);\n\n      const found = parents.find((el) => el.id.get() === stepId);\n      if (found) return found.get();\n\n      // //  return SpinalGraphService.getNodeAsync(id).then((result) => {\n      // //     return result.get();\n      // //  });\n    },\n\n    async reloadData() {\n      const id = this.selectedNode.getId().get();\n      this.tickets = await this.getNodeTickets(id);\n    },\n\n    createTicket() {\n      spinalPanelManagerService.openPanel(\"selectProcessDialog\", {\n        selectedNode: this.selectedNode,\n      });\n    },\n  },\n};\n</script>\n\n<style scoped>\n.my_content {\n  width: 100%;\n  height: calc(100% - 15px);\n}\n\n.loading {\n  width: 100%;\n  height: calc(100% - 15px);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n</style>","/*\n * Copyright 2018 SpinalCom - www.spinalcom.com\n *\n * This file is part of SpinalCore.\n *\n * Please read all of the following terms and conditions\n * of the Free Software license Agreement (\"Agreement\")\n * carefully.\n *\n * This Agreement is a legally binding contract between\n * the Licensee (as defined below) and SpinalCom that\n * sets forth the terms and conditions that govern your\n * use of the Program. By installing and/or using the\n * Program, you agree to abide by all the terms and\n * conditions stated or referenced herein.\n *\n * If you do not agree to abide by these terms and\n * conditions, do not demonstrate your acceptance and do\n * not install or use the Program.\n * You should have received a copy of the license along\n * with this file. If not, see\n * <http://resources.spinalcom.com/licenses.pdf>.\n */\n\nconst {\n  spinalPanelManagerService,\n  SpinalPanelApp\n} = require(\"spinal-env-viewer-panel-manager-service\");\n\nconst SpinalForgeExtention = require(\"./SpinalForgeExtention.js\")(\n  spinalPanelManagerService,\n  SpinalPanelApp\n);\n\nmodule.exports = {\n  SpinalForgeExtention\n};\n","/*\n * Copyright 2023 SpinalCom - www.spinalcom.com\n * \n * This file is part of SpinalCore.\n * \n * Please read all of the following terms and conditions\n * of the Free Software license Agreement (\"Agreement\")\n * carefully.\n * \n * This Agreement is a legally binding contract between\n * the Licensee (as defined below) and SpinalCom that\n * sets forth the terms and conditions that govern your\n * use of the Program. By installing and/or using the\n * Program, you agree to abide by all the terms and\n * conditions stated or referenced herein.\n * \n * If you do not agree to abide by these terms and\n * conditions, do not demonstrate your acceptance and do\n * not install or use the Program.\n * You should have received a copy of the license along\n * with this file. If not, see\n * <http://resources.spinalcom.com/licenses.pdf>.\n */\n\nfunction configInit(option) {\n  const cfg = {};\n  if (typeof option.toolbar !== \"undefined\") {\n    cfg.toolbar = {\n      icon: option.toolbar.icon || \"done\",\n      label: option.toolbar.label || \"label\",\n      subToolbarName: option.toolbar.subToolbarName || \"spinalcom\",\n      styleBtn: {},\n      styleIcon: {}\n    };\n    Object.assign(cfg.toolbar.styleBtn, option.toolbar.styleBtn);\n    Object.assign(cfg.toolbar.styleIcon, option.toolbar.styleIcon);\n  }\n  if (typeof option.panel !== \"undefined\") {\n    cfg.panel = {\n      title: option.panel.title || \"Spinalcom Panel\",\n      classname: option.panel.classname || \"spinal-pannel\",\n      closeBehaviour: option.panel.closeBehaviour || \"hide\"\n    };\n    if (typeof option.style !== \"undefined\") {\n      cfg.style = {};\n      Object.assign(cfg.style, option.style);\n    }\n  }\n  cfg.name = option.name || \"spinalExtention\";\n  cfg.vueMountComponent = option.vueMountComponent;\n  cfg.onLoad = option.onLoad;\n  cfg.onUnLoad = option.onUnLoad;\n  return cfg;\n}\n\nfunction onToolbarCreated() {\n  this.viewer.removeEventListener(\n    window.Autodesk.Viewing.TOOLBAR_CREATED_EVENT,\n    this.onToolbarCreatedBinded\n  );\n  this.onToolbarCreatedBinded = null;\n  createToolbar.call(this);\n}\n\nfunction createToolbar() {\n  this.toolbarButton = new window.Autodesk.Viewing.UI.Button(\n    this.cfg.toolbar.label\n  );\n  this.toolbarButton.onClick = () => {\n    this.tooglePanel(this.cfg);\n  };\n  var icon = this.toolbarButton.container.firstChild;\n  icon.className = \"adsk-button-icon md-icon md-icon-font md-theme-default\";\n  icon.innerHTML = this.cfg.toolbar.icon;\n\n  for (var key in this.cfg.toolbar.styleIcon) {\n    if (this.cfg.toolbar.styleIcon.hasOwnProperty(key)) {\n      icon.style[key] = this.cfg.toolbar.styleIcon[key];\n    }\n  }\n  for (var key in this.cfg.toolbar.styleBtn) {\n    if (this.cfg.toolbar.styleBtn.hasOwnProperty(key)) {\n      this.toolbarButton.container.style[key] = this.cfg.toolbar.styleBtn[key];\n    }\n  }\n\n  this.toolbarButton.setToolTip(this.cfg.toolbar.label);\n  this.subToolbar = this.viewer.toolbar.getControl(\n    this.cfg.toolbar.subToolbarName\n  );\n  if (!this.subToolbar) {\n    this.subToolbar = new window.Autodesk.Viewing.UI.ControlGroup(\n      this.cfg.toolbar.subToolbarName\n    );\n    this.viewer.toolbar.addControl(this.subToolbar);\n  }\n  this.subToolbar.addControl(this.toolbarButton);\n}\n\nfunction closeComponent() {\n  if (this.cfg.panel.closeBehaviour !== \"hide\") {\n    try {\n      this.component.removed.call(this.component);\n    } catch (e) {\n      console.error(e);\n    }\n    this.panel.container.remove();\n    this.panel = null;\n  } else {\n    try {\n      this.component.closed.call(this.component);\n    } catch (e) {\n      console.error(e);\n    }\n  }\n}\n\nfunction getPanel() {\n  if (this.panel === null) {\n    this.panel = new window.PanelClass(this.viewer, this.cfg.panel.title);\n    var _container = document.createElement(\"div\");\n    var _scrollContainer = this.panel.createScrollContainer();\n\n    _container.className +=\n      this.panel.container.id + \"-panelcontainer \" + this.cfg.panel.classname;\n    for (var key in this.cfg.style) {\n      if (this.cfg.style.hasOwnProperty(key)) {\n        this.panel.container.style[key] = this.cfg.style[key];\n      }\n    }\n\n    if (this.panel.container.style.left) {\n      this.panel.container.style.left = \"0\";\n    }\n\n    this.panel.container.appendChild(_scrollContainer);\n    _scrollContainer.style.height = \"calc(100% - 52px)\";\n    _scrollContainer.appendChild(_container);\n\n    var _footer = this.panel.createFooter();\n    this.panel.container.appendChild(_footer);\n\n    if (this.cfg.vueMountComponent) {\n      this.component = new this.cfg.vueMountComponent().$mount(_container);\n    }\n\n    const _this = this;\n    this.panel.addVisibilityListener(open => {\n      if (!open) {\n        closeComponent.call(_this);\n      }\n    });\n  }\n  return this.panel;\n}\n\n/**\n *\n *\n * @param {*} spinalPanelManagerService\n * @param {*} SpinalPanelApp\n * @returns {object} { createExtention, registerExtention }\n */\nmodule.exports = function (spinalPanelManagerService, SpinalPanelApp) {\n  return {\n    /**\n     * factory function to create a dynamic class that extends the `SpinalPanelApp` class\n     *```js\n{\n  name: \"extention_name\",\n  vueMountComponent: Vue.extend(aVueCompoment),\n  onLoad: () => {console.log(\"onLoad\");},\n  onUnLoad: () => {console.log(\"onUnLoad\");},\n  toolbar: {\n    icon: \"done\",\n    label: \"testLabel\",\n    subToolbarName: \"spinalcom\"\n  },\n  panel: {\n    title: \"Spinalcom Panel\",\n    classname: \"spinal-pannel\",\n    closeBehaviour: \"hide\"\n  },\n  style: {}\n}\n```\n     * @param {object} option see description\n     * @returns SpinalForgeExtention\n     */\n    createExtention(option) {\n      const cfg = configInit(option);\n      /**\n       * class returned by createExtention\n       * this extention is also registered in autodesk viweer\n       * @extends SpinalPanelApp\n       * @property {AutodeskViewer} viewer the autodesk view\n       * @property {AutodeskPanel} panel the panel\n       * @property {Vue.component} component the component mounted\n       * @property {Object} cfg the option given on creation\n       */\n      const SpinalForgeExtention = class extends SpinalPanelApp {\n        constructor(viewer, options) {\n          super();\n          window.Autodesk.Viewing.Extension.call(this, viewer, options);\n          this.viewer = viewer;\n          this.panel = null;\n          this.cfg = cfg;\n          spinalPanelManagerService.registerPanel(cfg.name, this);\n        }\n        /**\n         * method called on load of the extention (managed by the autodesk viewer)\n         * the method create a button in the toolbar if put in the option of `createExtention`.\n         */\n        load() {\n          if (typeof cfg.toolbar !== \"undefined\") {\n            // add toolbar\n            if (this.viewer.toolbar) {\n              createToolbar.call(this);\n            } else {\n              this.onToolbarCreatedBinded = onToolbarCreated.bind(this);\n              this.viewer.addEventListener(\n                window.Autodesk.Viewing.TOOLBAR_CREATED_EVENT,\n                this.onToolbarCreatedBinded\n              );\n            }\n          }\n          if (typeof cfg.onLoad !== \"undefined\") cfg.onLoad.call(this);\n          return true;\n        }\n        /**\n         * method called when the viewer unload of the extention\n         * (managed by the autodesk viewer)\n         */\n        unload() {\n          if (typeof cfg.toolbar !== \"undefined\") {\n            this.viewer.subToolbar.removeControl(this.toolbarButton);\n          }\n          if (typeof cfg.onUnLoad !== \"undefined\") cfg.onUnLoad.call(this);\n          return true;\n        }\n\n        activate() {\n          return this.load();\n        }\n\n        deactivate() {\n          return this.unload();\n        }\n\n        /**\n         *\n         * @param {*} option\n         */\n        openPanel(option) {\n          const panel = getPanel.call(this);\n          panel.setVisible(true);\n          try {\n            this.component.opened.call(this.component, option, this.viewer);\n          } catch (e) {\n            console.error(e);\n          }\n        }\n        /**\n         *\n         *\n         * @param {*} option\n         */\n        closePanel(option) {\n          const panel = getPanel.call(this);\n          panel.setVisible(false);\n        }\n        /**\n         *\n         *\n         * @param {*} option\n         */\n        tooglePanel(option) {\n          if (this.panel === null || this.panel.isVisible() === false) {\n            this.openPanel.call(this, option);\n          } else { this.closePanel.call(this, option); }\n        }\n      };\n      return SpinalForgeExtention;\n    },\n\n    /**\n     * Method to register an extention to the viewer and the forge viewer\n     * @param {string} name name of the extention\n     * @param {*} classExtention an extention created by `createExtention`\n     */\n    registerExtention(name, classExtention) {\n      // register to forge\n      window.Autodesk.Viewing.theExtensionManager.registerExtension(\n        name,\n        classExtention\n      );\n      // register to viewer\n      window.spinal.ForgeExtentionManager.addExtention(name);\n    }\n  };\n};\n","///////////////////////////////////////////////////////////////////////////////\n// Autodesk.ADN.Viewing.Extension.Color\n//\n///////////////////////////////////////////////////////////////////////////////\nAutodeskNamespace(\"Autodesk.ADN.Viewing.Extension\");\nAutodesk.ADN.Viewing.Extension.Color = function (viewer, options) {\n  Autodesk.Viewing.Extension.call(this, viewer, options);\n\n  // var overlayName = \"temperary-colored-overlay\";\n  var _self = this;\n  _self.viewer = viewer;\n  _self.materials = {};\n  var promise = null;\n\n  function initialize() {\n    if (promise == null)\n      promise = new Promise(res => {\n        _self.viewer.addEventListener(\n          Autodesk.Viewing.OBJECT_TREE_CREATED_EVENT,\n          function onObjectTreeLoadEvent() {\n            _self.viewer.removeEventListener(\n              Autodesk.Viewing.OBJECT_TREE_CREATED_EVENT,\n              onObjectTreeLoadEvent\n            );\n            res();\n          }\n        );\n      })\n    return promise;\n  }\n  _self.load = function () {\n    initialize();\n    // console.log(\"Autodesk.ADN.Viewing.Extension.Color loaded\");\n\n\n    ///////////////////////////////////////////////////////////////////////////\n    // Generate GUID\n    //\n    ///////////////////////////////////////////////////////////////////////////\n    function newGuid() {\n      var d = new Date().getTime();\n      var guid = \"xxxx-xxxx-xxxx-xxxx-xxxx\".replace(/[xy]/g, function (c) {\n        var r = ((d + Math.random() * 16) % 16) | 0;\n        d = Math.floor(d / 16);\n        return (c == \"x\" ? r : (r & 0x7) | 0x8).toString(16);\n      });\n      return guid;\n    }\n\n    ///////////////////////////////////////////////////////////////////////////\n    // add new material\n    //\n    ///////////////////////////////////////////////////////////////////////////\n    function addMaterial(color, id) {\n      _self.materials[id] = new THREE.MeshPhongMaterial({\n        color: color\n      });\n      //viewer.impl.matman().addMaterial(newGuid(), material);\n\n      _self.viewer.impl.createOverlayScene(\n        id,\n        _self.materials[id],\n        _self.materials[id]\n      );\n      return _self.materials[id];\n    }\n\n    function cutHex(h) {\n      return h.charAt(0) == \"#\" ? h.substring(1, 7) : h;\n    }\n    ///////////////////////////////////////////////////////////////////////////\n    // Set color for nodes\n    // objectIds should be an array of dbId\n    //\n    //\n    ///////////////////////////////////////////////////////////////////////////\n    Autodesk.Viewing.Viewer3D.prototype.setColorMaterial = function (\n      objectIds,\n      color\n    ) {\n      initialize().then(() => {\n\n        for (var i = 0; i < objectIds.length; i++) {\n          var dbid = objectIds[i];\n\n\n          if (_self.materials[dbid]) {\n            _self.materials[dbid].color.setHex(parseInt(cutHex(color),\n              16));\n            _self.viewer.impl.invalidate(false, false, true);\n          } else {\n            var material = addMaterial(color, dbid);\n            //from dbid to node, to fragid\n\n\n            let it = _self.viewer.model.getData().instanceTree;\n            it.enumNodeFragments(\n              dbid,\n              function (fragId) {\n                var renderProxy = _self.viewer.impl.getRenderProxy(\n                  _self.viewer.model,\n                  fragId\n                );\n                renderProxy[dbid] = new THREE.Mesh(\n                  renderProxy.geometry,\n                  material\n                );\n\n                renderProxy[dbid].matrix.copy(renderProxy\n                  .matrixWorld);\n                renderProxy[dbid].matrixWorldNeedsUpdate = true;\n                renderProxy[dbid].matrixAutoUpdate = false;\n                renderProxy[dbid].frustumCulled = false;\n\n                _self.viewer.impl.addOverlay(dbid, renderProxy[\n                  dbid]);\n                _self.viewer.impl.invalidate(true);\n              },\n              false\n            );\n          }\n        }\n      }).catch(err => {\n        console.error(err)\n      });\n    };\n\n    Autodesk.Viewing.Viewer3D.prototype.restoreColorMaterial = function (\n      objectIds\n    ) {\n      for (var i = 0; i < objectIds.length; i++) {\n        var dbid = objectIds[i];\n\n        //from dbid to node, to fragid\n        var it = _self.viewer.model.getData().instanceTree;\n\n        if (_self.materials[dbid]) delete _self.materials[dbid];\n\n        it.enumNodeFragments(\n          dbid,\n          function (fragId) {\n            var renderProxy = _self.viewer.impl.getRenderProxy(\n              _self.viewer.model,\n              fragId\n            );\n\n            if (renderProxy[dbid]) {\n              //remove all overlays with same name\n              _self.viewer.impl.clearOverlay(dbid);\n              //_self.viewer.impl.removeOverlay(id, renderProxy[id]);\n              delete renderProxy[dbid];\n\n              //refresh the sence\n              _self.viewer.impl.invalidate(true);\n            }\n          },\n          true\n        );\n      }\n    };\n\n    Autodesk.Viewing.Viewer3D.prototype.colorAllMaterials = function (\n      objects) {\n      for (var i = 0; i < objects.length; i++) {\n        this.setColorMaterial(objects[i].ids, objects[i].color, objects[i]\n          .id);\n      }\n    };\n\n    Autodesk.Viewing.Viewer3D.prototype.restoreAllMaterialColor = function (\n      objects\n    ) {\n      for (var i = 0; i < objects.length; i++) {\n        this.restoreColorMaterial(objects[i].ids, objects[i].id);\n      }\n    };\n\n    _self.unload = function () {\n      // console.log(\"Autodesk.ADN.Viewing.Extension.Color unloaded\");\n      return true;\n    };\n\n    return true;\n  };\n};\nAutodesk.ADN.Viewing.Extension.Color.prototype = Object.create(\n  Autodesk.Viewing.Extension.prototype\n);\nAutodesk.ADN.Viewing.Extension.Color.prototype.constructor =\n  Autodesk.ADN.Viewing.Extension.Color;\nAutodesk.Viewing.theExtensionManager.registerExtension(\n  \"Autodesk.ADN.Viewing.Extension.Color\",\n  Autodesk.ADN.Viewing.Extension.Color\n);","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst bimService_1 = require(\"./bimObjects/bimService\");\nexports.bimObjectManagerService = bimService_1.default;\n//# sourceMappingURL=index.js.map",null,"\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass BimObjectManagerService {\n    constructor() { }\n    getAllBimObjectsProperties(model) {\n        return this.getBimObjectProperties([\n            {\n                model: model,\n                selection: this.getLeafDbIds(model).selection\n            }\n        ]);\n    }\n    getBimObjectProperties(argBimObjects) {\n        // let properties = [];\n        let bimOjects = Array.isArray(argBimObjects)\n            ? argBimObjects\n            : [argBimObjects];\n        let promises = bimOjects.map(el => {\n            return this._getProperties(el.model, el.selection);\n        });\n        return Promise.all(promises).then(res => {\n            return res;\n        });\n    }\n    getLeafDbIds(model, rootId) {\n        const tree = model.getInstanceTree();\n        const dbIds = [];\n        if (typeof rootId === \"undefined\") {\n            rootId = [tree.nodeAccess.rootId];\n        }\n        else {\n            rootId = Array.isArray(rootId) ? rootId : [rootId];\n        }\n        rootId.forEach(el => {\n            const queue = [el];\n            let hasChildren;\n            while (queue.length) {\n                let id = queue.pop();\n                hasChildren = false;\n                tree.enumNodeChildren(id, childId => {\n                    hasChildren = true;\n                    queue.push(childId);\n                });\n                if (!hasChildren) {\n                    dbIds.push(id);\n                }\n            }\n        });\n        return { model: model, selection: dbIds };\n    }\n    getBimObjectsByPropertiesName(model, properties) {\n        return this.getAllBimObjectsProperties(model).then(res => {\n            let result = [];\n            for (let i = 0; i < res.length; i++) {\n                const element = res[i];\n                for (let j = 0; j < element.properties.length; j++) {\n                    const property = element.properties[j];\n                    if (typeof this._getLabel(property, properties) !== \"undefined\") {\n                        result.push(property);\n                    }\n                    // }\n                }\n                return result;\n            }\n        });\n    }\n    getBimObjectsValidated(referential, regEx) {\n        return this.getBimObjectProperties(referential).then(res => {\n            return res.map(element => {\n                return {\n                    model: element.model,\n                    properties: element.properties.filter(el => {\n                        return this._isValid(el, regEx);\n                    })\n                };\n            });\n        });\n    }\n    getBimObjectsByName(model, bimObjectName, labelName) {\n        return new Promise(resolve => {\n            model.search(bimObjectName.trim(), (res) => __awaiter(this, void 0, void 0, function* () {\n                let properties = yield this.getBimObjectProperties([\n                    { model: model, selection: res }\n                ]);\n                resolve(properties);\n            }), () => {\n                resolve([]);\n            }, labelName);\n        });\n    }\n    ////////////////////////////////////////////////////////////////////////\n    //                             PRIVATES                               //\n    ////////////////////////////////////////////////////////////////////////\n    _getProperties(model, selection) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let properties = selection.map(el => {\n                return new Promise(resolve => {\n                    model.getProperties(el, res => {\n                        // properties.push(res);\n                        resolve(res);\n                    }, err => {\n                        resolve(undefined);\n                    });\n                });\n            });\n            return {\n                model: model,\n                properties: yield Promise.all(properties)\n            };\n        });\n    }\n    _getAllDbIds(model) {\n        var instanceTree = model.getData().instanceTree;\n        var allDbIdsStr = Object.keys(instanceTree.nodeAccess.dbIdToIndex);\n        return allDbIdsStr.map(function (id) {\n            return parseInt(id);\n        });\n    }\n    _getLabel(bim, properties) {\n        for (let i = 0; i < properties.length; i++) {\n            const propertieValue = properties[i].value;\n            const propertyName = properties[i].name;\n            const found = bim.properties.find(el => {\n                return typeof propertieValue === \"undefined\" ||\n                    propertieValue.length === 0\n                    ? el.displayName.toLowerCase() ===\n                        propertyName.trim().toLocaleLowerCase()\n                    : el.displayName.toLowerCase() ===\n                        propertyName.trim().toLocaleLowerCase() &&\n                        propertieValue == el.displayValue;\n            });\n            if (typeof found === \"undefined\") {\n                return undefined;\n            }\n        }\n        return true;\n    }\n    _isValid(el, regEx) {\n        for (let i = 0; i < regEx.length; i++) {\n            let nameRegex = regEx[i].nameRegex;\n            let valueRegex = regEx[i].valueRegex;\n            let found = el.properties.find(res => {\n                if (typeof valueRegex === \"undefined\") {\n                    return nameRegex.test(res.displayName);\n                }\n                return (nameRegex.test(res.displayName) && valueRegex.test(res.displayValue));\n            });\n            if (typeof found === \"undefined\") {\n                return false;\n            }\n        }\n        return true;\n    }\n}\nexports.default = new BimObjectManagerService();\n//# sourceMappingURL=bimService.js.map",null,"\"use strict\";"],"names":[],"version":3,"file":"spinal-env-viewer-plugin-ticket.3d655dba.js.map"}